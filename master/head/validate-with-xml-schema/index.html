<html xmlns="http://www.w3.org/1999/xhtml"><head><title>XProc 3.0: Validate with XML Schema</title><meta charset="utf-8" /><link rel="alternate" title="XML" href="specification.xml" /><link rel="alternate" title="Latest editor's draft" href="http://www.w3.org/XML/XProc/docs/langspec.html" /><link rel="alternate" title="Latest Public Working Draft" href="http://www.w3.org/TR/xproc/" /><meta name="generator" content="DocBook XSL 2.0 Stylesheets V2.1.2" /><meta name="description" content="Abstract This specification describes the p:validate-with-xml-schema&#xA;step for&#xA;XProc 3.0: An XML Pipeline Language." /><link href="css/prism.css" rel="stylesheet" type="text/css" /><link href="css/db-prism.css" rel="stylesheet" type="text/css" /><link rel="stylesheet" type="text/css" href="css/base.css" /><link rel="stylesheet" type="text/css" href="css/xproc.css" /><link rel="stylesheet" type="text/css" href="css/base.css" /><script type="text/javascript" src="js/dbmodnizr.js"></script></head><body><div class="specification"><div class="head" id="spec.head"><h1>XProc 3.0: Validate with XML Schema</h1><h2>Editor's Draft  <time datetime="2018-03-02T16:31:04Z">2 March 2018 at 16:31 UTC (<a href="https://github.com/xproc/3.0-specification/commit/234fb965eaf62e3e279af9b1bf4ee687ba86b37e">build 244</a>)</time></h2><dl><dt>This Version:</dt><dd><a href="https://xproc.github.io/3.0-specification/master/head/xproc/">https://xproc.github.io/3.0-specification/master/head/xproc</a></dd><dt>Latest Version:</dt><dd><a href="http://spec.xproc.org/master/head/xproc/">http://spec.xproc.org/master/head/xproc/</a></dd><dt>Editors:</dt><dd><span class="personname">Achim Berndzen</span></dd><dd><span class="personname">Gerrit Imsieke</span></dd><dd><span class="personname">Erik Siegel</span></dd><dd><span class="personname">Norman Walsh</span></dd><dt>Repository:</dt><dd><a href="http://github.com/xproc/3.0-specification">This specification on GitHub</a></dd><dd><a href="http://github.com/xproc/3.0-specification/issues">Report an issue</a></dd><dt>Changes:</dt><dd><a href="http://github.com/xproc/3.0-specification/commits/master">Commits for this specification</a></dd></dl><p>This document is also available in these non-normative formats: <a href="specification.xml">XML</a>.</p><p class="copyright"><span class="copyright">Copyright © <span class="years">2018</span> <span class="holders"><span class="holder">@@FIXME:</span></span></span></p><hr /><div class="abstract"><h2>Abstract</h2>
<p>This specification describes the <code class="code">p:validate-with-xml-schema</code>
step for
<em class="citetitle">XProc 3.0: An XML Pipeline Language</em>.</p>
</div><div class="status"><h2>Status of this Document</h2><p><strong>This document is an editor's  draft that has no official standing.</strong></p>

<p><em>This section describes the status of this document at
the time of its publication. Other documents may supersede this
document.</em></p>

<p>This document is derived from
<a href="https://www.w3.org/TR/2010/REC-xproc-20100511/">XProc:
An XML Pipeline Language</a> published by the W3C.</p>
</div></div><hr /><div class="lists-of-titles"><div class="toc"><h2 id="TableOfContents">Table of Contents</h2><ul class="toc"><li><span>1 <a href="#introduction">Introduction</a></span></li><li><span>2 <a href="#step">Validate with XML Schema</a></span><ul class="toc"><li><span>2.1 <a href="#step.16">Document properties</a></span></li></ul></li><li><span>A <a href="#app.step-errors">Step Errors</a></span></li><li><span>B <a href="#references">References</a></span></li></ul></div></div>


<section id="introduction" class="section"><div class="section-titlepage"><h2>1 Introduction</h2></div><div class="content">


<p>This specification describes the
<code class="code">p:validate-with-xml-schema</code> XProc step.
A machine-readable description of
these steps may be found in
<a href="steps.xpl">steps.xpl</a>.</p>

<p>Familarity with the
general nature of [<a href="#xproc30"><span class="abbrev">XProc 3.0</span></a>]
steps is assumed; for background details, see
[<a href="#xproc30-steps"><span class="abbrev">XProc 3.0 Steps</span></a>].</p>
</div></section>

<section id="step" class="section"><div class="section-titlepage"><h2>2 Validate with XML Schema</h2></div><div class="content">


<p>The <code class="tag-element">p:validate-with-xml-schema</code> step applies
[<a href="#xmlschema-1"><span class="abbrev">W3C XML Schema: Part 1</span></a>]
validity assessment to the <code class="port">source</code> input.</p>

<p class="element-syntax element-syntax-declare-step"><span class="decl"><code>&lt;p:declare-step</code> <code class="attr type-attr">type</code><code>="</code><code class="value type-value">p:validate-with-xml-schema</code><code>"</code><code>&gt;</code></span><br />     <span class="input"><code>&lt;p:input</code> <code class="attr port-attr">port</code><code>="</code><code class="value port-value">source</code><code>"</code> <code class="attr primary-attr">primary</code><code>="</code><code class="value primary-value">true</code><code>"</code> <code class="attr content-types-attr">content-types</code><code>="</code><code class="value content-types-value">application/xml text/xml */*+xml</code><code>"</code><code>/&gt;</code></span><br />     <span class="input"><code>&lt;p:input</code> <code class="attr port-attr">port</code><code>="</code><code class="value port-value">schema</code><code>"</code> <code class="attr sequence-attr">sequence</code><code>="</code><code class="value sequence-value">true</code><code>"</code> <code class="attr content-types-attr">content-types</code><code>="</code><code class="value content-types-value">application/xml text/xml */*+xml</code><code>"</code><code>/&gt;</code></span><br />     <span class="input"><code>&lt;p:output</code> <code class="attr port-attr">port</code><code>="</code><code class="value port-value">result</code><code>"</code> <code class="attr content-types-attr">content-types</code><code>="</code><code class="value content-types-value">application/xml</code><code>"</code><code>/&gt;</code></span><br />     <span class="opt-opt"><code>&lt;p:option</code> <code class="attr name-attr">name</code><code>="</code><code class="value name-value">use-location-hints</code><code>"</code> <code class="attr select-attr">select</code><code>="</code><code class="value select-value">false()</code><code>"</code> <code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:boolean</code><code>"</code><code>/&gt;</code><code></code></span><br />     <span class="opt-opt"><code>&lt;p:option</code> <code class="attr name-attr">name</code><code>="</code><code class="value name-value">try-namespaces</code><code>"</code> <code class="attr select-attr">select</code><code>="</code><code class="value select-value">false()</code><code>"</code> <code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:boolean</code><code>"</code><code>/&gt;</code><code></code></span><br />     <span class="opt-opt"><code>&lt;p:option</code> <code class="attr name-attr">name</code><code>="</code><code class="value name-value">assert-valid</code><code>"</code> <code class="attr select-attr">select</code><code>="</code><code class="value select-value">true()</code><code>"</code> <code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:boolean</code><code>"</code><code>/&gt;</code><code></code></span><br />     <span class="opt-opt"><code>&lt;p:option</code> <code class="attr name-attr">name</code><code>="</code><code class="value name-value">mode</code><code>"</code> <code class="attr select-attr">select</code><code>="</code><code class="value select-value">'strict'</code><code>"</code> <code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:token</code><code>"</code><code>/&gt;</code><code>       </code><code class="comment">&lt;!-- </code><span class="opt-type">"strict" | "lax"</span><code class="comment"> --&gt;</code></span><br />     <span class="opt-opt"><code>&lt;p:option</code> <code class="attr name-attr">name</code><code>="</code><code class="value name-value">version</code><code>"</code> <code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:string</code><code>"</code><code>/&gt;</code><code>                     </code></span><br /><code>&lt;/p:declare-step&gt;</code></p>

<p>The values of the <code class="option">use-location-hints</code>,
<code class="option">try-namespaces</code>, and
<code class="option">assert-valid</code>
options
 <span class="rfc2119" id="step.4.4">must</span> be boolean.</p>

<p>The value of the <code class="option">mode</code> option
<span class="rfc2119" id="step.5.2">must</span> be an NMTOKEN whose value is either
“<code class="literal">strict</code>” or “<code class="literal">lax</code>”.</p>

<p>Validation is performed against the set of schemas represented
by the documents on the <code class="port">schema</code> port. These schemas must
be used in preference to any schema locations provided by schema
location hints encountered during schema validation, that is, schema
locations supplied for <code class="code">xs:import</code> or
<code class="code">xsi:schema-location</code>, or determined by
schema-processor-defined namespace-based strategies, for the
namespaces covered by the documents available on the schemas port.</p>

<p>If <code class="code">xs:include</code> elements occur within the supplied
schema documents, they are treated like any other
<span class="olink">external
documents</span>. <span id="impl-1">It is
<em class="glossterm">implementation-defined</em> if the documents supplied
on the <code class="port">schemas</code> port are considered when resolving
<code class="code">xs:include</code> elements in the schema documents provided.</span>
</p>

<p>The <code class="option">use-location-hints</code> and
<code class="option">try-namespaces</code> options allow the pipeline author to
control how the schema processor should attempt to locate schema
documents necessary but not provided on the <code class="port">schema</code>
port. Any schema documents provided on the <code class="port">schema</code> port
<span class="rfc2119" id="step.8.5">must</span> be used in preference to schema documents
located by other means.</p>

<p>If the <code class="option">use-location-hints</code> option is
“<code class="literal">true</code>”, the processor <span class="rfc2119" id="step.9.3">should</span>
make use of schema location hints to locate schema documents. If the
option is “<code class="literal">false</code>”, the processor
<span class="rfc2119" id="step.9.5">should</span> ignore any such hints.</p>

<p>If the <code class="option">try-namespaces</code> option is
“<code class="literal">true</code>”, the processor <span class="rfc2119" id="step.10.3">should</span>
attempt to dereference the namespace URI to locate schema documents.
If the
option is “<code class="literal">false</code>”, the processor
<span class="rfc2119" id="step.10.5">should not</span> dereference namespace URIs.</p>

<p>The <code class="option">mode</code> option allow the pipeline author to
control how schema validation begins. The “<code class="literal">strict</code>”
mode means that the document element must be declared and
schema-valid, otherwise it will be treated as invalid. The
“<code class="literal">lax</code>” mode means that the
absence of a declaration for the document element does not itself
count as an unsuccessful outcome of validation.</p>

<p>If the step specifies a <code class="option">version</code>, then that version
of XML Schema <span class="rfc2119" id="step.12.2">must</span> be used to process the validation.
<a id="err.inline.C0038"></a>It is a
<em class="glossterm">dynamic error</em> (<a href="#err.C0038"><code class="errqname">err:XC0038</code></a>) if the specified version
is not available. If the step does not specify a version, the
implementation may use any version it has available and may use any means
to determine what version to use, including, but not limited to,
examining the version of the schema(s).</p>

<p><a id="err.inline.C0053"></a>It is a <em class="glossterm">dynamic error</em> (<a href="#err.C0053"><code class="errqname">err:XC0053</code></a>)
if the <code class="option">assert-valid</code> option is <code class="literal">true</code>
and the input document is not valid. If the <code class="option">assert-valid</code>
option is <code class="literal">false</code>, it is not an error for the document
to be invalid. In this case, if the implementation does not
support the PSVI, <code class="tag-element">p:validate-with-xml-schema</code> is essentially
just an “identity” step, but if the implementation <em>does</em>
support the PSVI, then the resulting document will have additional type
information (at least for the subtrees that are valid).</p>

<p>When XML Schema validation assessment
is performed, the processor is invoked in the mode specified by the
<code class="option">mode</code> option.
<a id="err.inline.C0055"></a>It is a <em class="glossterm">dynamic error</em> (<a href="#err.C0055"><code class="errqname">err:XC0055</code></a>)
if the implementation does not support the specified mode.
</p>

<p>The <code class="port">result</code> of the assessment is a document with the
Post-Schema-Validation-Infoset (PSVI) ([<a href="#xmlschema-1"><span class="abbrev">W3C XML Schema: Part 1</span></a>]) annotations, if the pipeline implementation
supports such annotations. If not, the input document is reproduced
with any defaulting of attributes and elements performed as specified
by the XML Schema recommendation.</p>

<section id="step.16" class="section"><div class="section-titlepage"><h3>2.1 Document properties</h3></div><div class="content">

<p>All document properties
on the <code class="port">source</code> port are preserved on the <code class="port">result</code> port.
No document properties on the <code class="port">schemas</code> port are preserved.</p>
</div></section>
</div></section>

<article id="app.step-errors" class="appendix"><header class="appendix-titlepage"><h2>A Step Errors</h2></header><div class="content">

<p>The following <em class="glossterm">dynamic errors</em>
can be raised by the <code class="code">p:validate-with-relax-ng</code> step:</p>
<div id="step-error-summary"><h5>Step Errors</h5><dl class="errs"><dt id="err.C0038"><code class="errqname">err:XC0038</code></dt><dd><p>It is a
dynamic error if the specified version
is not available.</p><p>See: <a href="#err.inline.C0038">Validate with XML Schema</a></p></dd><dt id="err.C0053"><code class="errqname">err:XC0053</code></dt><dd><p>It is a dynamic error
if the assert-valid option is true
and the input document is not valid.</p><p>See: <a href="#err.inline.C0053">Validate with XML Schema</a></p></dd><dt id="err.C0055"><code class="errqname">err:XC0055</code></dt><dd><p>It is a dynamic error
if the implementation does not support the specified mode.</p><p>See: <a href="#err.inline.C0055">Validate with XML Schema</a></p></dd></dl></div>
</div></article>

<article id="references" class="appendix"><header class="appendix-titlepage"><h2>B References</h2></header><div class="content">

<div id="references.2" class="bibliolist">
<div id="xproc30" class="bibliomixed"><p>[<span class="abbrev">XProc 3.0</span>] 
<a href="http://spec.xproc.org/"><span class="citetitle"><cite>XProc 3.0:
An XML Pipeline Language</cite></span></a>.
Achim Berndzen, Gerrit Imsieke, Erik Seigel and Norman Walsh, editors.
</p></div>
<div id="xproc30-steps" class="bibliomixed"><p>[<span class="abbrev">XProc 3.0 Steps</span>] 
<a href="http://spec.xproc.org/"><span class="citetitle"><cite>XProc 3.0 Steps:
An Introduction</cite></span></a>.
Achim Berndzen, Gerrit Imsieke, Erik Seigel and Norman Walsh, editors.
</p></div>
<div id="xmlschema-1" class="bibliomixed"><p>[<span class="abbrev">W3C XML Schema: Part 1</span>] 
<a href="http://www.w3.org/TR/xmlschema-1/"><span class="citetitle"><cite>XML Schema Part 1:
Structures Second Edition</cite></span></a>.
Henry S. Thompson, David Beech, Murray Maloney, et. al., editors.
World Wide Web Consortium, 28 October 2004.
</p></div>
</div>
</div></article>




</div><script src="js/prism.js"></script></body></html>