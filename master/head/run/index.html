<html xmlns="http://www.w3.org/1999/xhtml"><head><title>XProc 3.0: dynamic pipeline execution</title><meta charset="utf-8" /><meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport" /><link class="removeOnSave" crossorigin="anonymous" href="https://www.w3.org" rel="preconnect" /><link as="script" class="removeOnSave" href="js/fixup.js" rel="preload" /><link as="style" class="removeOnSave" href="css/base.css" rel="preload" /><link as="image" class="removeOnSave" href="https://www.w3.org/StyleSheets/TR/2016/logos/W3C" rel="preload" /><link rel="stylesheet" href="css/cg-draft.css" /><link rel="stylesheet" href="css/respec.css" /><link rel="alternate" title="XML" href="specification.xml" /><meta name="generator" content="DocBook XSL 2.0 Stylesheets V2.4.2" /><meta name="description" content="Abstract This specification describes the p:run&#xA;step for&#xA;XProc 3.0: An XML Pipeline Language." /><link href="css/default.css" rel="stylesheet" type="text/css" /><link href="css/db-prism.css" rel="stylesheet" type="text/css" /><link rel="stylesheet" type="text/css" href="css/base.css" /><link rel="stylesheet" type="text/css" href="css/xproc.css" /><link rel="stylesheet" type="text/css" href="css/print.css" media="print" /><script type="text/javascript" src="js/dbmodnizr.js"></script></head><body class="h-entry informative toc-sidebar"><div class="head" id="spec.head"><a class="logo" href="https://www.w3.org/"><img alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C" width="72" /></a><h1 id="title" class="title p-name">XProc 3.0: dynamic pipeline execution</h1><h2>Draft Community Group Report <time class="dt-published" datetime="2020-06-11">11 June 2020</time></h2><div class="editors-draft">Editor's Draft   at <time class="dt-timestamp" datetime="20200611T06:24:33Z">06:24 UTC</time> (<a href="https://github.com/xproc/3.0-steps/commit/530e3a1d58a65a07982e22aa2ccd07c314ab5c7e">build 470</a>)</div><dl><dt>Latest editor’s draft:</dt><dd><a href="http://spec.xproc.org/master/head/run/">http://spec.xproc.org/master/head/run/</a></dd><dt>Editors:</dt><dd><span class="personname">Norman Walsh</span></dd><dd><span class="personname">Achim Berndzen</span></dd><dd><span class="personname">Gerrit Imsieke</span></dd><dd><span class="personname">Erik Siegel</span></dd><dt>Participate:</dt><dd><a href="http://github.com/xproc/3.0-steps">GitHub xproc/3.0-steps</a></dd><dd><a href="http://github.com/xproc/3.0-steps/issues">Report an issue</a></dd><dt>Changes:</dt><dd><a href="diff.html">Diff against current “status quo” draft</a></dd><dd><a href="http://github.com/xproc/3.0-steps/commits/master">Commits for this specification</a></dd></dl><p>This document is also available in these non-normative formats: <a href="specification.xml">XML</a>, 
	  automatic change markup
          <a href="diff.html">from the previous draft</a>
          courtesy of <a href="http://www.deltaxml.com/">DeltaXML</a>.</p><p class="copyright"><p class="copyright"><a href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © <span class="years">2018, 2019, 2020</span> the Contributors to the <cite>XProc 3.0: dynamic pipeline execution</cite> specification, published by the <a href="https://www.w3.org/community/xproc-next/">XProc Next Community Group</a> under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C
    Community Contributor License Agreement (CLA)</a>. A human-readable <a href="https://www.w3.org/community/about/agreements/cla-deed/">summary</a> is available.</p></p><hr title="Separator for header" /><section id="abstract" class="introductory"><h2>Abstract</h2>
<p>This specification describes the <code class="code">p:run</code>
step for
<em class="citetitle">XProc 3.0: An XML Pipeline Language</em>.</p>
</section><section id="sotd" class="introductory"><h2>Status of this Document</h2><p><strong>This document is an editor's  draft that has no official standing.</strong></p>
  <p>This specification was published by the
  <a href="https://www.w3.org/community/xproc-next/">XProc
  Next Community Group</a>. It is not a W3C Standard nor is it on
  the W3C Standards Track. Please note that under the
  <a href="https://www.w3.org/community/about/agreements/cla/">W3C
  Community Contributor License Agreement (CLA)</a> there is a limited
  opt-out and other conditions apply. Learn more about <a href="https://www.w3.org/community/">W3C Community and Business
  Groups</a>.
  </p>
  
  <p>If you wish to make comments regarding this document, please
  send them to
  <a href="mailto:xproc-dev@w3.org">xproc-dev@w3.org</a>.
  (<a href="mailto:xproc-dev-request@w3.org?subject=subscribe">subscribe</a>,
  <a href="https://lists.w3.org/Archives/Public/xproc-dev/">archives</a>).
  </p>
</section></div><div class="lists-of-titles"><nav id="toc"><h2 id="TableOfContents">Table of Contents</h2><ol class="toc"><li class="tocline"><a class="tocxref" href="#introduction"><bdi class="secno">1. </bdi>Introduction</a></li><li class="tocline"><a class="tocxref" href="#c.run"><bdi class="secno">2. </bdi>p:run</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#c.run.11"><bdi class="secno">2.1. </bdi>Document properties</a></li></ul></li><li class="tocline"><a class="tocxref" href="#errors"><bdi class="secno">3. </bdi>Step Errors</a></li><li class="tocline"><a class="tocxref" href="#conformance"><bdi class="secno">A. </bdi>Conformance</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#implementation-defined"><bdi class="secno">A.1. </bdi>Implementation-defined features</a></li><li class="tocline"><a class="tocxref" href="#implementation-dependent"><bdi class="secno">A.2. </bdi>Implementation-dependent features</a></li></ul></li><li class="tocline"><a class="tocxref" href="#references"><bdi class="secno">B. </bdi>References</a></li><li class="tocline"><a class="tocxref" href="#glossary"><bdi class="secno">C. </bdi>Glossary</a></li><li class="tocline"><a class="tocxref" href="#ancillary-files"><bdi class="secno">D. </bdi>Ancillary files</a></li></ol></nav></div><article class="specification">


<section id="introduction" class="section"><div class="section-titlepage"><h2><bdi class="secno">1. </bdi>Introduction<a aria-label="§" class="self-link" href="#introduction"></a></h2></div><div class="content">


<p>This specification describes the <code class="code">p:run</code> XProc step.
A machine-readable description of these steps may be found in
<a href="steps.xpl">steps.xpl</a>.
</p>

<p>Familarity with the general nature of [<a href="#xproc30"><span class="abbrev">XProc 3.0</span></a>]
steps is assumed; for background details, see
[<a href="#xproc30-steps"><span class="abbrev">XProc 3.0 Steps</span></a>].</p>
</div></section>

<section id="c.run" class="section"><div class="section-titlepage"><h2><bdi class="secno">2. </bdi>p:run<a aria-label="§" class="self-link" href="#c.run"></a></h2></div><div class="content">


<p>The <code class="tag-element">p:run</code> step runs a dynamically loaded pipeline.</p>

<p class="element-syntax element-syntax-declare-step"><span class="decl"><code>&lt;p:declare-step</code> <code class="attr type-attr">type</code><code>="</code><code class="value type-value">p:run</code><code>"</code><code>&gt;</code></span><br />     <span class="input"><code>&lt;p:input</code> <code class="attr port-attr">port</code><code>="</code><code class="value port-value">source</code><code>"</code> <code class="attr primary-attr">primary</code><code>="</code><code class="value primary-value">true</code><code>"</code> <code class="attr sequence-attr">sequence</code><code>="</code><code class="value sequence-value">true</code><code>"</code> <code class="attr content-types-attr">content-types</code><code>="</code><code class="value content-types-value">any</code><code>"</code><code>/&gt;</code></span><br />     <span class="input"><code>&lt;p:output</code> <code class="attr port-attr">port</code><code>="</code><code class="value port-value">result</code><code>"</code> <code class="attr primary-attr">primary</code><code>="</code><code class="value primary-value">true</code><code>"</code> <code class="attr content-types-attr">content-types</code><code>="</code><code class="value content-types-value">any</code><code>"</code><code>/&gt;</code></span><br /><code>&lt;/p:declare-step&gt;</code></p>

<p>THIS IS UNREVIEWED PLACHOLDER TEXT</p>

<p>The <code class="tag-element">p:run</code> step functions mostly like an atomic step in that
you can define inputs connections and option values for it. However,
unlike atomic steps, it has no defined signature. Any inputs are
allowed and any outputs may be connected.
</p>

<p>One input port is specifically designated the pipeline input
port. By default, that port is named <code class="port">pipeline</code>, but its
name can be changed by specifying a different name in the
<code class="option">p:pipeline</code> option.
</p>

<p>The <code class="tag-element">p:run</code> step
expects a single pipeline document on the pipeline port.
<a id="err.inline.C0080"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.C0080"><code class="errqname">err:XC0080</code></a>)
if the pipeline input to the <code class="tag-element">p:run</code> step is not a
valid pipeline.

</p>

<p>The pipeline that appears on the pipeline port is evaluated
using the inputs and options specified on the <code class="tag-element">p:run</code> step.
<a id="err.inline.C0081"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.C0081"><code class="errqname">err:XC0081</code></a>)
if the pipeline has inputs that are not specified on the <code class="tag-element">p:run</code> step.

<a id="err.inline.C0082"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.C0082"><code class="errqname">err:XC0082</code></a>)
if the pipeline has required options that are not specified on
the <code class="tag-element">p:run</code> step.

</p>

<p>The outputs of the pipeline appear on the correspondingly named output
ports of the <code class="tag-element">p:run</code> step. If the pipeline has an output is
not bound on the <code class="tag-element">p:run</code> step, that output is discarded. If
the <code class="tag-element">p:run</code> step has an output port that is not provided by
the pipeline, an empty sequence appears on that port.
</p>

<p>The <code class="tag-element">p:run</code> step is assumed to have a primary output port. If
the pipeline evaluated does not have a primary output port, an empty
sequence appears on that port. (Alternatively, that could be a dynamic
error)
</p>

<section id="c.run.11" class="section"><div class="section-titlepage"><h3><bdi class="secno">2.1. </bdi>Document properties<a aria-label="§" class="self-link" href="#"></a></h3></div><div class="content">

<p>No document properties are preserved.</p>
</div></section>
</div></section>

<section id="errors" class="section"><div class="section-titlepage"><h2><bdi class="secno">3. </bdi>Step Errors<a aria-label="§" class="self-link" href="#errors"></a></h2></div><div class="content">


<p>This step can raise
<em class="glossterm"><a href="#dt-dynamic-error">dynamic errors</a></em>.
</p>

<p><span id="dt-dynamic-error" class="termdef">[Definition: A <em class="glossterm">dynamic
error</em> is one which occurs while a pipeline is being
evaluated.]</span> Examples of dynamic errors include references to
URIs that cannot be resolved, steps which fail, and pipelines that
exhaust the capacity of an implementation (such as memory or disk
space). For a more complete discussion of dynamic errors, see
<cite><a href="../xproc/#dynamic-errors">Dynamic Errors</a></cite> in <cite><a href="../xproc/">XProc 3.0: An XML Pipeline Language</a></cite>.
</p>

<p>If a step fails due to a dynamic error, failure propagates
upwards until either a <code class="tag-element">p:try</code> is encountered or the entire
pipeline fails. In other words, outside of a <code class="tag-element">p:try</code>, step
failure causes the entire pipeline to fail.</p>

<p>The following errors can be raised by this step:</p>

<div id="step-error-summary"><dl class="errs"><dt id="err.C0080"><code class="errqname">err:XC0080</code></dt><dd><p>It is a dynamic error
if the pipeline input to the p:run step is not a
valid pipeline.
</p><p>See: <a href="#err.inline.C0080">p:run</a></p></dd><dt id="err.C0081"><code class="errqname">err:XC0081</code></dt><dd><p>It is a dynamic error
if the pipeline has inputs that are not specified on the p:run step.
</p><p>See: <a href="#err.inline.C0081">p:run</a></p></dd><dt id="err.C0082"><code class="errqname">err:XC0082</code></dt><dd><p>It is a dynamic error
if the pipeline has required options that are not specified on
the p:run step.
</p><p>See: <a href="#err.inline.C0082">p:run</a></p></dd></dl></div>

</div></section>

<article id="conformance" class="appendix"><header class="appendix-titlepage"><h2><bdi class="secno">A. </bdi>Conformance<a aria-label="§" class="self-link" href="#conformance"></a></h2></header><div class="content">


<p>Conformant processors <span class="rfc2119" id="conformance.2.1">must</span> implement all of the features
described in this specification except those that are explicitly identified
as optional.</p>

<p>Some aspects of processor behavior are not completely specified; those
features are either <em class="glossterm"><a href="#dt-implementation-dependent">implementation-dependent</a></em> or
<em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</p>

<p><span id="dt-implementation-dependent" class="termdef">[Definition: An
<em class="glossterm">implementation-dependent</em> feature is one where the
implementation has discretion in how it is performed.
Implementations are not required to document or explain
how <em class="glossterm"><a href="#dt-implementation-dependent">implementation-dependent</a></em> features are performed.]</span>
</p>

<p><span id="dt-implementation-defined" class="termdef">[Definition: An
<em class="glossterm">implementation-defined</em> feature is one where the
implementation has discretion in how it is performed.
Conformant implementations <span class="rfc2119" id="dt-implementation-defined.2">must</span> document
how <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> features are performed.]</span>
</p>

<section id="implementation-defined" class="section"><div class="section-titlepage"><h2><bdi class="secno">A.1. </bdi>Implementation-defined features<a aria-label="§" class="self-link" href="#implementation-defined"></a></h2></div><div class="content">


<p>The following features are implementation-defined:</p>

<ol class="features"></ol>
</div></section>

<section id="implementation-dependent" class="section"><div class="section-titlepage"><h2><bdi class="secno">A.2. </bdi>Implementation-dependent features<a aria-label="§" class="self-link" href="#implementation-dependent"></a></h2></div><div class="content">


<p>The following features are implementation-dependent:</p>

<ol class="features"></ol>
</div></section>
</div></article>

<article id="references" class="appendix"><header class="appendix-titlepage"><h2><bdi class="secno">B. </bdi>References<a aria-label="§" class="self-link" href="#references"></a></h2></header><div class="content">

<div id="references.2" class="bibliolist">
<div id="xproc30" class="bibliomixed"><p>[<span class="abbrev">XProc 3.0</span>] 
<a href="http://spec.xproc.org/"><span class="citetitle"><cite>XProc 3.0:
An XML Pipeline Language</cite></span></a>.
Norman Walsh, Achim Berndzen, Gerrit Imsieke and Erik Siegel, editors.
</p></div>
<div id="xproc30-steps" class="bibliomixed"><p>[<span class="abbrev">XProc 3.0 Steps</span>] 
<a href="http://spec.xproc.org/"><span class="citetitle"><cite>XProc 3.0 Steps:
An Introduction</cite></span></a>.
Norman Walsh, Achim Berndzen, Gerrit Imsieke and Erik Siegel, editors.
</p></div>
</div>
</div></article>


<article id="glossary" class="appendix"><header class="appendix-titlepage"><h2><bdi class="secno">C. </bdi>Glossary<a aria-label="§" class="self-link" href="#glossary"></a></h2></header><div class="content"><div class="glosslist"><dl><dt id="glossary.2.1" class="glossentry"><em class="glossterm"><a href="#dt-dynamic-error">dynamic
error</a></em></dt><dd class="glossdef"><p>A <em class="firstterm">dynamic
error</em> is one which occurs while a pipeline is being
evaluated.</p></dd><dt id="glossary.2.2" class="glossentry"><em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em></dt><dd class="glossdef"><p>An
<em class="firstterm">implementation-defined</em> feature is one where the
implementation has discretion in how it is performed.
Conformant implementations <span class="rfc2119" id="glossary.2.2.2.1.2">must</span> document
how <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> features are performed.</p></dd><dt id="glossary.2.3" class="glossentry"><em class="glossterm"><a href="#dt-implementation-dependent">implementation-dependent</a></em></dt><dd class="glossdef"><p>An
<em class="firstterm">implementation-dependent</em> feature is one where the
implementation has discretion in how it is performed.
Implementations are not required to document or explain
how <em class="glossterm"><a href="#dt-implementation-dependent">implementation-dependent</a></em> features are performed.</p></dd></dl></div></div></article>

<article id="ancillary-files" class="appendix"><header class="appendix-titlepage"><h2><bdi class="secno">D. </bdi>Ancillary files<a aria-label="§" class="self-link" href="#ancillary-files"></a></h2></header><div class="content">


<p>This specification includes by reference a number of
ancillary files.</p>

<div class="variablelist">

<dl><dt><span class="term"><a href="steps.xpl">steps.xpl</a></span></dt><dd>
<p>An XProc step library for the declared steps.
</p>
</dd></dl></div>

</div></article>

</article><script src="js/prism.js"></script><script src="js/fixup.js"></script></body></html>