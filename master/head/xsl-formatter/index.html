<html xmlns="http://www.w3.org/1999/xhtml"><head><title>XProc 3.0: XSL Formatter</title><meta charset="utf-8" /><link rel="alternate" title="XML" href="specification.xml" /><link rel="alternate" title="Latest editor's draft" href="http://www.w3.org/XML/XProc/docs/langspec.html" /><link rel="alternate" title="Latest Public Working Draft" href="http://www.w3.org/TR/xproc/" /><meta name="generator" content="DocBook XSL 2.0 Stylesheets V2.3.2" /><meta name="description" content="Abstract This specification describes the p:xsl-formatter&#xA;step for&#xA;XProc 3.0: An XML Pipeline Language." /><link href="css/prism.css" rel="stylesheet" type="text/css" /><link href="css/db-prism.css" rel="stylesheet" type="text/css" /><link rel="stylesheet" type="text/css" href="css/base.css" /><link rel="stylesheet" type="text/css" href="css/xproc.css" /><link rel="stylesheet" type="text/css" href="css/base.css" /><script type="text/javascript" src="js/dbmodnizr.js"></script></head><body><div class="specification"><div class="head" id="spec.head"><h1>XProc 3.0: XSL Formatter</h1><h2>Editor's Draft  <time datetime="2018-08-13T11:04:49Z">13 August 2018 at 11:04 UTC (<a href="https://github.com/xproc/3.0-specification/commit/aed7a3f248dc464d348fc009c0eb67ec62168ff0">build 447</a>)</time></h2><dl><dt>This Version:</dt><dd><a href="https://xproc.github.io/3.0-specification/master/head/xsl-formatter/">https://xproc.github.io/3.0-specification/master/head/xsl-formatter/</a></dd><dt>Latest Version:</dt><dd><a href="http://spec.xproc.org/master/head/xsl-formatter/">http://spec.xproc.org/master/head/xsl-formatter/</a></dd><dt>Editors:</dt><dd><span class="personname">Achim Berndzen</span></dd><dd><span class="personname">Gerrit Imsieke</span></dd><dd><span class="personname">Erik Siegel</span></dd><dd><span class="personname">Norman Walsh</span></dd><dt>Repository:</dt><dd><a href="http://github.com/xproc/3.0-specification">This specification on GitHub</a></dd><dd><a href="http://github.com/xproc/3.0-specification/issues">Report an issue</a></dd><dt>Changes:</dt><dd><a href="http://github.com/xproc/3.0-specification/commits/master">Commits for this specification</a></dd></dl><p>This document is also available in these non-normative formats: <a href="specification.xml">XML</a>.</p><p class="copyright"><span class="copyright">Copyright © <span class="years">2018</span> <span class="holders"><span class="holder">@@FIXME:</span></span></span></p><hr /><div class="abstract"><h2>Abstract</h2>
<p>This specification describes the <code class="code">p:xsl-formatter</code>
step for
<em class="citetitle">XProc 3.0: An XML Pipeline Language</em>.</p>
</div><div class="status"><h2>Status of this Document</h2><p><strong>This document is an editor's  draft that has no official standing.</strong></p>

<p><em>This section describes the status of this document at
the time of its publication. Other documents may supersede this
document.</em></p>

<p>This document is derived from
<a href="https://www.w3.org/TR/2010/REC-xproc-20100511/">XProc:
An XML Pipeline Language</a> published by the W3C.</p>
</div></div><hr /><div class="lists-of-titles"><div class="toc"><h2 id="TableOfContents">Table of Contents</h2><ul class="toc"><li><span>1 <a href="#introduction">Introduction</a></span></li><li><span>2 <a href="#c.xsl-formatter">p:xsl-formatter</a></span><ul class="toc"><li><span>2.1 <a href="#c.xsl-formatter.9">Document properties</a></span></li></ul></li><li><span>3 <a href="#errors">Step Errors</a></span></li><li><span>A <a href="#conformance">Conformance</a></span><ul class="toc"><li><span>A.1 <a href="#implementation-defined">Implementation-defined features</a></span></li><li><span>A.2 <a href="#implementation-dependent">Implementation-dependent features</a></span></li></ul></li><li><span>B <a href="#references">References</a></span></li><li><span>C <a href="#glossary">Glossary</a></span></li><li><span>D <a href="#ancillary-files">Ancillary files</a></span></li></ul></div></div>


<section id="introduction" class="section"><div class="section-titlepage"><h2>1 Introduction</h2></div><div class="content">


<p>This specification describes the
<code class="code">p:xsl-formatter</code> XProc step.
A machine-readable description of
these steps may be found in
<a href="steps.xpl">steps.xpl</a>.
</p>

<p>Familarity with the
general nature of [<a href="#xproc30"><span class="abbrev">XProc 3.0</span></a>]
steps is assumed; for background details, see
[<a href="#xproc30-steps"><span class="abbrev">XProc 3.0 Steps</span></a>].</p>
</div></section>

<section id="c.xsl-formatter" class="section"><div class="section-titlepage"><h2>2 p:xsl-formatter</h2></div><div class="content">


<p>The <code class="tag-element">p:xsl-formatter</code> step receives an [<a href="#xsl11"><span class="abbrev">XSL 1.1</span></a>] document and renders the content. The result of
rendering is stored to the URI provided via the <code class="option">href</code>
option. A reference to that result is produced on the output
port.</p>

<p class="element-syntax element-syntax-declare-step"><span class="decl"><code>&lt;p:declare-step</code> <code class="attr type-attr">type</code><code>="</code><code class="value type-value">p:xsl-formatter</code><code>"</code><code>&gt;</code></span><br />     <span class="input"><code>&lt;p:input</code> <code class="attr port-attr">port</code><code>="</code><code class="value port-value">source</code><code>"</code> <code class="attr content-types-attr">content-types</code><code>="</code><code class="value content-types-value">application/xml text/xml */*+xml</code><code>"</code><code>/&gt;</code></span><br />     <span class="input"><code>&lt;p:output</code> <code class="attr port-attr">port</code><code>="</code><code class="value port-value">result</code><code>"</code> <code class="attr content-types-attr">content-types</code><code>="</code><code class="value content-types-value">*/*</code><code>"</code><code>/&gt;</code></span><br />     <span class="opt-opt"><code>&lt;p:option</code> <code class="attr name-attr">name</code><code>="</code><code class="value name-value">parameters</code><code>"</code> <code class="attr as-attr">as</code><code>="</code><code class="value as-value">map(xs:QName,item())</code><code>"</code><code>/&gt;</code><code>       </code></span><br />     <span class="opt-req"><code>&lt;p:option</code> <code class="attr name-attr">name</code><code>="</code><code class="value name-value">href</code><code>"</code> <code class="attr required-attr">required</code><code>="</code><code class="value required-value">true</code><code>"</code> <code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:anyURI</code><code>"</code><code>/&gt;</code><code>        </code></span><br />     <span class="opt-opt"><code>&lt;p:option</code> <code class="attr name-attr">name</code><code>="</code><code class="value name-value">content-type</code><code>"</code> <code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:string</code><code>"</code><code>/&gt;</code><code>                </code></span><br /><code>&lt;/p:declare-step&gt;</code></p>

<p>The value of the <code class="option">href</code> option
<span class="rfc2119" id="c.xsl-formatter.4.2">must</span> be an <code class="type">anyURI</code>. If it is relative,
it is made absolute against the base URI of the element on which it is
specified (<code class="tag-element">p:with-option</code> or <code class="tag-element">p:xsl-formatter</code> in the
case of a syntactic shortcut value).</p>

<p>The content-type of the output is controlled by the
<code class="option">content-type</code> option. This option specifies a media
type as defined by [<a href="#media-types"><span class="abbrev">IANA Media Types</span></a>]. The option may
include media type parameters as well (e.g.
"application/someformat; charset=UTF-8"). <span id="impl-1">The use of media type
parameters on the <code class="option">content-type</code> option is
<em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span></p>

<p><span id="impl-2">If the <code class="option">content-type</code> option is not specified,
the output type is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span> The default <span class="rfc2119" id="c.xsl-formatter.6.2">should</span> be
PDF.</p>

<p><span id="impl-3">A formatter may take any number of optional rendering
parameters via the step's <code class="option">parameters</code>; such parameters
are defined by the XSL implementation used and are
<em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span></p>

<p>The output of this step is a document containing a single
<code class="tag-element">c:result</code> element whose content is the absolute URI of the
document stored by the step.</p>

<section id="c.xsl-formatter.9" class="section"><div class="section-titlepage"><h3>2.1 Document properties</h3></div><div class="content">

<p>No document properties are preserved.</p>
</div></section>
</div></section>


<section id="errors" class="section"><div class="section-titlepage"><h2>3 Step Errors</h2></div><div class="content">


<p>This step can raise
<em class="glossterm"><a href="#dt-dynamic-error">dynamic errors</a></em>.
</p>

<p><span id="dt-dynamic-error" class="termdef">[Definition: A <em class="glossterm">dynamic
error</em> is one which occurs while a pipeline is being
evaluated.]</span> Examples of dynamic errors include references to
URIs that cannot be resolved, steps which fail, and pipelines that
exhaust the capacity of an implementation (such as memory or disk
space). For a more complete discussion of dynamic errors, see
<cite><a href="xproc/#dynamic-errors">Dynamic Errors</a></cite> in <cite><a href="xproc/">XProc 3.0: An XML Pipeline Language</a></cite>.
</p>

<p>If a step fails due to a dynamic error, failure propagates
upwards until either a <code class="tag-element">p:try</code> is encountered or the entire
pipeline fails. In other words, outside of a <code class="tag-element">p:try</code>, step
failure causes the entire pipeline to fail.</p>

<p>The following errors can be raised by this step:</p>

<div id="step-error-summary"><dl class="errs"></dl></div>

</div></section>

<article id="conformance" class="appendix"><header class="appendix-titlepage"><h2>A Conformance</h2></header><div class="content">


<p>Conformant processors <span class="rfc2119" id="conformance.2.1">must</span> implement all of the features
described in this specification except those that are explicitly identified
as optional.</p>

<p>Some aspects of processor behavior are not completely specified; those
features are either <em class="glossterm"><a href="#dt-implementation-dependent">implementation-dependent</a></em> or
<em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</p>

<p><span id="dt-implementation-dependent" class="termdef">[Definition: An
<em class="glossterm">implementation-dependent</em> feature is one where the
implementation has discretion in how it is performed.
Implementations are not required to document or explain
how <em class="glossterm"><a href="#dt-implementation-dependent">implementation-dependent</a></em> features are performed.]</span>
</p>

<p><span id="dt-implementation-defined" class="termdef">[Definition: An
<em class="glossterm">implementation-defined</em> feature is one where the
implementation has discretion in how it is performed.
Conformant implementations <span class="rfc2119" id="dt-implementation-defined.2">must</span> document
how <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> features are performed.]</span>
</p>

<section id="implementation-defined" class="section"><div class="section-titlepage"><h2>A.1 Implementation-defined features</h2></div><div class="content">


<p>The following features are implementation-defined:</p>

<ol class="features"><li>The use of media type
parameters on the content-type option is
implementation-defined. See <a href="#c.xsl-formatter" title="p:xsl-formatter">Section 2, “p:xsl-formatter”</a>.</li><li>If the content-type option is not specified,
the output type is implementation-defined. See <a href="#c.xsl-formatter" title="p:xsl-formatter">Section 2, “p:xsl-formatter”</a>.</li><li>A formatter may take any number of optional rendering
parameters via the step's parameters; such parameters
are defined by the XSL implementation used and are
implementation-defined. See <a href="#c.xsl-formatter" title="p:xsl-formatter">Section 2, “p:xsl-formatter”</a>.</li></ol>
</div></section>

<section id="implementation-dependent" class="section"><div class="section-titlepage"><h2>A.2 Implementation-dependent features</h2></div><div class="content">


<p>The following features are implementation-dependent:</p>

<ol class="features"></ol>
</div></section>
</div></article>

<article id="references" class="appendix"><header class="appendix-titlepage"><h2>B References</h2></header><div class="content">

<div id="references.2" class="bibliolist">
<div id="xproc30" class="bibliomixed"><p>[<span class="abbrev">XProc 3.0</span>] 
<a href="http://spec.xproc.org/"><span class="citetitle"><cite>XProc 3.0:
An XML Pipeline Language</cite></span></a>.
Achim Berndzen, Gerrit Imsieke, Erik Siegel and Norman Walsh, editors.
</p></div>
<div id="xproc30-steps" class="bibliomixed"><p>[<span class="abbrev">XProc 3.0 Steps</span>] 
<a href="http://spec.xproc.org/"><span class="citetitle"><cite>XProc 3.0 Steps:
An Introduction</cite></span></a>.
Achim Berndzen, Gerrit Imsieke, Erik Siegel and Norman Walsh, editors.
</p></div>
<div id="xsl11" class="bibliomixed"><p>[<span class="abbrev">XSL 1.1</span>] 
<a href="http://www.w3.org/TR/xsl/"><span class="citetitle"><cite>Extensible Stylesheet
Language (XSL) Version 1.1</cite></span></a>.
Anders Berglund, editor. W3C Recommendation. 5 December 2006.</p></div>
<div id="media-types" class="bibliomixed"><p>[<span class="abbrev">IANA Media Types</span>] 
<a href="http://www.iana.org/assignments/media-types/"><span class="citetitle"><cite>IANA MIME Media Types</cite></span></a>. Internet Engineering Task Force.
</p></div>
</div>
</div></article>


<article id="glossary" class="appendix"><header class="appendix-titlepage"><h2>C Glossary</h2></header><div class="content"><div class="glosslist"><dl><dt id="glossary.2.1" class="glossentry"><em class="glossterm"><a href="#dt-dynamic-error">dynamic
error</a></em></dt><dd class="glossdef"><p>A <em class="firstterm">dynamic
error</em> is one which occurs while a pipeline is being
evaluated.</p></dd><dt id="glossary.2.2" class="glossentry"><em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em></dt><dd class="glossdef"><p>An
<em class="firstterm">implementation-defined</em> feature is one where the
implementation has discretion in how it is performed.
Conformant implementations <span class="rfc2119" id="glossary.2.2.2.1.2">must</span> document
how <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> features are performed.</p></dd><dt id="glossary.2.3" class="glossentry"><em class="glossterm"><a href="#dt-implementation-dependent">implementation-dependent</a></em></dt><dd class="glossdef"><p>An
<em class="firstterm">implementation-dependent</em> feature is one where the
implementation has discretion in how it is performed.
Implementations are not required to document or explain
how <em class="glossterm"><a href="#dt-implementation-dependent">implementation-dependent</a></em> features are performed.</p></dd></dl></div></div></article>

<article id="ancillary-files" class="appendix"><header class="appendix-titlepage"><h2>D Ancillary files</h2></header><div class="content">


<p>This specification includes by reference a number of
ancillary files.</p>

<div class="variablelist">

<dl><dt><span class="term"><a href="steps.xpl">steps.xpl</a></span></dt><dd>
<p>An XProc step library for the declared steps.
</p>
</dd></dl></div>

</div></article>

</div><script src="js/prism.js"></script></body></html>