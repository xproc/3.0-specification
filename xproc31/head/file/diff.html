<?xml version="1.0" encoding="UTF-8"?><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><!--Generated by the DeltaXML.com xhtml-outfilter.xsl--><!--Using XSL Processor: Saxonica--><title>XProc 3.1: file steps</title><meta charset="utf-8" /><meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport" /><link class="removeOnSave" crossorigin="anonymous" href="https://www.w3.org" rel="preconnect" /><link as="script" class="removeOnSave" href="js/fixup.js" rel="preload" /><link as="style" class="removeOnSave" href="css/base.css" rel="preload" /><link as="image" class="removeOnSave" href="https://www.w3.org/StyleSheets/TR/2016/logos/W3C" rel="preload" /><link rel="stylesheet" href="css/cg-draft.css" /><link rel="stylesheet" href="css/respec.css" /><link rel="alternate" title="XML" href="specification.xml" /><meta name="generator" content="DocBook XSL 2.0 Stylesheets V2.5.0" /><meta name="description" content="Abstract This specification describes the file related steps&#xA;for&#xA;XProc 3.1: An XML Pipeline Language." /><link href="css/default.css" rel="stylesheet" type="text/css" /><link href="css/db-prism.css" rel="stylesheet" type="text/css" /><link rel="stylesheet" type="text/css" href="css/base.css" /><link rel="stylesheet" type="text/css" href="css/xproc.css" /><link rel="stylesheet" type="text/css" href="css/print.css" media="print" /><script type="text/javascript" src="js/dbmodnizr.js"></script><style type="text/css">
          body { margin-top: 50px }
          a.button { background: #DDD; border: 2px outset black; padding: 2px; margin: 2px; font-family: sans-serif; font-size: small;}
          a.button:hover { cursor:pointer; }
          a.button:active { border-style: inset; }
        </style><link rel="stylesheet" href="/css/autodiff.css" /></head><body class="h-entry informative toc-sidebar"><div style="position:fixed; clear:both; top:0px" id="_autodiff_buttons"><p><a class="button" onclick="view('old')">
              View Old
            </a><a class="button" onclick="view('new')">
              View New
            </a><a class="button" onclick="view('both')">
              View Both
            </a><a class="button" onclick="view('only')">
              View Only
            </a><a class="button" onclick="scroll_to('prev')">
              Previous
            </a><a class="button" onclick="scroll_to('next')">
              Next
            </a><span id="__autodiff__"></span></p></div><div class="head" id="spec.head"><a class="logo" href="https://www.w3.org/"><img alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C" width="72" /></a><h1 id="title" class="title p-name">XProc 3.1: file steps</h1><h2>Community Group Report <time class="dt-published" datetime="2025-05-30"><span class="deltaxml-old" style="background:#FF5555">16 March</span><span class="deltaxml-new" style="background:#90EE90">30 May</span> 2025</time></h2><dl><dt><span class="deltaxml-old" style="background:#FF5555">Latest editor’s draft:</span></dt><dt><span class="deltaxml-new" style="background:#90EE90">Specification:</span></dt><dd><a href="https://spec.xproc.org/3.1/file/">https://spec.xproc.org/<span class="deltaxml-old" style="background:#FF5555">master/head/</span><span class="deltaxml-new" style="background:#90EE90">3.1/</span>file/</a></dd><dt>Editors:</dt><dd><span class="personname">Norman Walsh</span></dd><dd><span class="personname">Achim Berndzen</span></dd><dd><span class="personname">Gerrit Imsieke</span></dd><dd><span class="personname">Erik Siegel</span></dd><dt>Participate:</dt><dd><a href="http://github.com/xproc/3.0-steps">GitHub xproc/3.0-steps</a></dd><dd><a href="http://github.com/xproc/3.0-steps/issues">Report an issue</a></dd><dt><span class="deltaxml-old" style="background:#FF5555">Changes:</span></dt><dt><span class="deltaxml-new" style="background:#90EE90">Errata:</span></dt><dd><a href="diff.html"><span class="deltaxml-old" style="background:#FF5555">Diff against current “status quo” draft</span></a><a href="https://specs.xproc.org/3.1/xproc/errata.html"><span class="deltaxml-new" style="background:#90EE90">https://specs.xproc.org/3.1/xproc/errata.html</span></a></dd><dd><a href="http://github.com/xproc//commits/"><span class="deltaxml-old" style="background:#FF5555">Commits for this specification</span></a></dd></dl><p>This document is also available in these non-normative formats: <a href="specification.xml">XML</a><span class="deltaxml-old" style="background:#FF5555"> and HTML with automatic change markup courtesy of </span><a href="http://www.deltaxml.com/"><span class="deltaxml-old" style="background:#FF5555">DeltaXML</span></a>.</p><p class="copyright"><a href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © <span class="years">2018, 2019, 2020, 2021, 2022, 2023, 2024, 2025</span> the Contributors to the <cite>XProc 3.1: file steps</cite> specification, published by the <a href="https://www.w3.org/community/xproc-next/">XProc Next Community Group</a> under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a>. A human-readable <a href="https://www.w3.org/community/about/agreements/cla-deed/">summary</a> is available.</p><hr title="Separator for header" /><section id="abstract" class="introductory"><h2>Abstract</h2><p>This specification describes the file related steps for <em class="citetitle">XProc 3.1: An XML Pipeline Language</em>.</p></section><section class="introductory" id="sotd"><h2>Status of this Document</h2><p>This specification was published by the <a href="https://www.w3.org/community/xproc-next/">XProc Next Community Group</a>. It is not a W3C Standard nor is it on the W3C Standards Track. Please note that under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a> there is a limited opt-out and other conditions apply. Learn more about <a href="https://www.w3.org/community/">W3C Community and Business Groups</a>. </p><p>If you wish to make comments regarding this document, please send them to <a href="mailto:xproc-dev@w3.org">xproc-dev@w3.org</a>. (<a href="mailto:xproc-dev-request@w3.org?subject=subscribe">subscribe</a>, <a href="https://lists.w3.org/Archives/Public/xproc-dev/">archives</a>). </p><div class="note editorial admonition"><h3><span class="deltaxml-old" style="background:#FF5555">Note</span></h3><div class="admonition-body"><p><span class="deltaxml-old" style="background:#FF5555">This draft is a “last call” draft. This version is stable and will not be updated.</span></p></div></div></section></div><div class="lists-of-titles"><nav id="toc"><h2 id="TableOfContents">Table of Contents</h2><ol class="toc"><li class="tocline"><a class="tocxref" href="#introduction"><bdi class="secno">1. </bdi>Introduction</a></li><li class="tocline"><a class="tocxref" href="#library"><bdi class="secno">2. </bdi>Step library</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#c.directory-list"><bdi class="secno">2.1. </bdi>p:directory-list</a></li><li class="tocline"><a class="tocxref" href="#c.file-copy"><bdi class="secno">2.2. </bdi>p:file-copy</a></li><li class="tocline"><a class="tocxref" href="#c.file-delete"><bdi class="secno">2.3. </bdi>p:file-delete</a></li><li class="tocline"><a class="tocxref" href="#c.file-info"><bdi class="secno">2.4. </bdi>p:file-info</a></li><li class="tocline"><a class="tocxref" href="#c.file-mkdir"><bdi class="secno">2.5. </bdi>p:file-mkdir</a></li><li class="tocline"><a class="tocxref" href="#c.file-move"><bdi class="secno">2.6. </bdi>p:file-move</a></li><li class="tocline"><a class="tocxref" href="#c.file-create-tempfile"><bdi class="secno">2.7. </bdi>p:file-create-tempfile</a></li><li class="tocline"><a class="tocxref" href="#c.file-touch"><bdi class="secno">2.8. </bdi>p:file-touch</a></li></ul></li><li class="tocline"><a class="tocxref" href="#errors"><bdi class="secno">3. </bdi>Step Errors</a></li><li class="tocline"><a class="tocxref" href="#conformance"><bdi class="secno">A. </bdi>Conformance</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#implementation-defined"><bdi class="secno">A.1. </bdi>Implementation-defined features</a></li></ul></li><li class="tocline"><a class="tocxref" href="#references"><bdi class="secno">B. </bdi>References</a></li><li class="tocline"><a class="tocxref" href="#glossary"><bdi class="secno">C. </bdi>Glossary</a></li><li class="tocline"><a class="tocxref" href="#changelog"><bdi class="secno">D. </bdi>Change log</a></li><li class="tocline"><a class="tocxref" href="#ancillary-files"><bdi class="secno">E. </bdi>Ancillary files</a></li></ol></nav></div><article class="specification"><section id="introduction" class="section"><div class="section-titlepage"><h2><bdi class="secno">1. </bdi>Introduction<a aria-label="§" class="self-link" href="#introduction"></a></h2></div><div class="content"><p>This specification describes the file related XProc steps. A machine-readable description of these steps may be found in <a href="steps.xpl">steps.xpl</a>. </p><p>Familarity with the general nature of [<a href="#xproc31"><span class="abbrev">XProc 3.1</span></a>] steps is assumed.</p><p>Some filesystems and some operating systems support “special” files. These may be interfaces to underlying block or character devices, or represent file system features such as linking two filenames so that they point to the same data. On many filesystems on Unix(-derived) operating systems, the files <code class="code">/dev/null</code>, <code class="code">/dev/urandom</code>, and <code class="code">/dev/zero</code> are special, as are hard and soft symbolic links. Windows and Mac filesystems also support special files and other linking mechanisms.</p><p><span id="impl-1">How the file steps behave with respect to special files is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span> It may be an error to attempt to access them, or they may be ignored by some or all steps.</p></div></section><section class="section" id="library"><div class="section-titlepage"><h2><bdi class="secno">2. </bdi>Step library<a aria-label="§" class="self-link" href="#library"></a></h2></div><div class="content"><section class="section" id="c.directory-list"><div class="section-titlepage"><h3><bdi class="secno">2.1. </bdi>p:directory-list<a aria-label="§" class="self-link" href="#c.directory-list"></a></h3></div><div class="content"><p>The <code class="code">p:directory-list</code> step produces a list of the contents of a specified directory.</p><div class="declare-step"><p>Summary</p><table class="tableaux"><thead><tr><th class="port">Output port</th><th class="check">Primary</th><th class="check">Sequence</th><th>Content types</th></tr></thead><tbody><tr><td class="primary">result</td><td class="check">✔ </td><td class="check"> </td><td>application/xml </td></tr></tbody></table><table class="tableaux"><thead><tr><th>Option name</th><th>Type</th><th>Default value</th><th>Required</th></tr></thead><tbody><tr><td class="required"><a href="#opt.inline.path-1">path</a></td><td>xs:anyURI</td><td> </td><td>✔ </td></tr><tr><td><a href="#opt.inline.detailed-1">detailed</a></td><td>xs:boolean</td><td>false()</td><td> </td></tr><tr><td><a href="#opt.inline.exclude-filter-1">exclude-filter</a></td><td>xs:string*</td><td>()</td><td> </td></tr><tr><td><a href="#opt.inline.include-filter-1">include-filter</a></td><td>xs:string*</td><td>()</td><td> </td></tr><tr><td><a href="#opt.inline.max-depth-1">max-depth</a></td><td>xs:string?</td><td>'1'</td><td> </td></tr><tr><td><a href="#opt.inline.override-content-types-1">override-content-types</a></td><td>array(array(xs:string))?</td><td>()</td><td> </td></tr></tbody></table><details><summary>Errors</summary><table class="tableaux"><thead><tr><th>Error code</th><th>Description</th></tr></thead><tbody><tr><td class="errcode"><a href="#err.inline.C0012&#34;">err:XC0012</a></td><td class="description">It is a dynamic error if the contents of the directory path are not available to the step due to access restrictions in the environment in which the pipeline is run.</td></tr><tr><td class="errcode"><a href="#err.inline.C0017&#34;">err:XC0017</a></td><td class="description">It is a dynamic error if the absolute path does not identify a directory.</td></tr><tr><td class="errcode"><a href="#err.inline.C0090&#34;">err:XC0090</a></td><td class="description">It is a dynamic error if an implementation does not support directory listing for a specified scheme.</td></tr><tr><td class="errcode"><a href="#err.inline.C0147&#34;">err:XC0147</a></td><td class="description">It is a dynamic error if a specified value is not a valid XPath regular expression.</td></tr><tr><td class="errcode"><a href="#err.inline.D0064&#34;">err:XD0064</a></td><td class="description">It is a dynamic error if the base URI is not both absolute and valid according to .</td></tr></tbody></table></details><details><summary>Implementation details</summary><table class="tableaux"><thead><tr><th>Implementation</th><th>Description</th></tr></thead><tbody><tr><td><a href="#impl-2">Defined</a></td><td class="description">Conformant processors must support directory paths whose scheme is file. It is implementation-defined what other schemes are supported by p:directory-list, and what the interpretation of ‘directory’, ‘file’ and ‘contents’ is for those schemes.</td></tr><tr><td><a href="#impl-3">Defined</a></td><td class="description">Any file or directory determined to be special by the p:directory-list step may be output using a c:other element but the criteria for marking a file as special are implementation-defined.</td></tr><tr><td><a href="#impl-4">Defined</a></td><td class="description">The precise meaning of the detailed properties are implementation-defined and may vary according to the URI scheme of the path.</td></tr><tr><td><a href="#impl-5">Defined</a></td><td class="description">Any other attributes on c:file, c:directory, or c:other are implementation-defined</td></tr></tbody></table></details><details><summary>Declaration</summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code>&lt;p:declare-step</code><code class="attr type-attr">type</code><code>="</code><code class="value type-value">p:directory-list</code><code>"</code><code>&gt;</code></span><br />     <span class="input"><code>&lt;p:output</code><code class="attr port-attr">port</code><code>="</code><code class="value port-value">result</code><code>"</code><code class="attr content-types-attr">content-types</code><code>="</code><code class="value content-types-value">application/xml</code><code>"</code><code>/&gt;</code></span><br />     <span class="opt-req"><code>&lt;p:option</code><code class="attr name-attr">name</code><code>="</code><code class="value name-value">path</code><code>"</code><code class="attr required-attr">required</code><code>="</code><code class="value required-value">true</code><code>"</code><code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:anyURI</code><code>"</code><code>/&gt;</code><code>        </code></span><br />     <span class="opt-opt"><code>&lt;p:option</code><code class="attr name-attr">name</code><code>="</code><code class="value name-value">detailed</code><code>"</code><code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:boolean</code><code>"</code><code class="attr select-attr">select</code><code>="</code><code class="value select-value">false()</code><code>"</code><code>/&gt;</code><code>  </code></span><br />     <span class="opt-opt"><code>&lt;p:option</code><code class="attr name-attr">name</code><code>="</code><code class="value name-value">max-depth</code><code>"</code><code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:string?</code><code>"</code><code class="attr select-attr">select</code><code>="</code><code class="value select-value">'1'</code><code>"</code><code>/&gt;</code><code>     </code></span><br />     <span class="opt-opt"><code>&lt;p:option</code><code class="attr name-attr">name</code><code>="</code><code class="value name-value">include-filter</code><code>"</code><code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:string*</code><code>"</code><code>/&gt;</code><code>             </code></span><br />     <span class="opt-opt"><code>&lt;p:option</code><code class="attr name-attr">name</code><code>="</code><code class="value name-value">exclude-filter</code><code>"</code><code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:string*</code><code>"</code><code>/&gt;</code><code>             </code></span><br />     <span class="opt-opt"><code>&lt;p:option</code><code class="attr name-attr">name</code><code>="</code><code class="value name-value">override-content-types</code><code>"</code><code class="attr as-attr">as</code><code>="</code><code class="value as-value">array(array(xs:string))?</code><code>"</code><code>/&gt;</code><code></code></span><br /><code>&lt;/p:declare-step&gt;</code></p></details></div><p><span id="impl-2">Conformant processors <span class="rfc2119" id="c.directory-list.4.1.1">must</span> support directory paths whose scheme is <code class="code">file</code>. It is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> what other schemes are supported by <code class="tag-element">p:directory-list</code>, and what the interpretation of ‘directory’, ‘file’ and ‘contents’ is for those schemes.</span><a id="err.inline.C0090&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.C0090"><code class="errqname">err:XC0090</code></a>) if an implementation does not support directory listing for a specified scheme. </p><p>If <a id="opt.inline.path-1"></a><code class="option">path</code> is relative, it is made absolute against the base URI of the element on which it is specified (<code class="tag-element">p:with-option</code> or <code class="tag-element">p:directory-list</code> in the case of a syntactic shortcut value). <a id="err.inline.D0064&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.D0064"><code class="errqname">err:XD0064</code></a>) if the base URI is not both absolute and valid according to [<a href="#rfc3986"><span class="abbrev">RFC 3986</span></a>]. <a id="err.inline.C0017&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.C0017"><code class="errqname">err:XC0017</code></a>) if the absolute path does not identify a directory. <a id="err.inline.C0012&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.C0012"><code class="errqname">err:XC0012</code></a>) if the contents of the directory path are not available to the step due to access restrictions in the environment in which the pipeline is run.</p><p>If the <a id="opt.inline.detailed-1"></a><code class="option">detailed</code> option is true, the pipeline author is requesting additional information about the matching entries, see <a href="#dir-list-details" title="Directory list details">the section called “Directory list details”</a>.</p><p>The <a id="opt.inline.max-depth-1"></a><code class="option">max-depth</code> option may contain either the string “<code class="literal">unbounded</code>” or a string that may be cast to a non-negative integer. An integer value of <code class="literal">0</code> means that only information about the directory that is given in the <a id="opt.inline.path-2"></a><code class="option">path</code> option is returned. If <a id="opt.inline.max-depth-2"></a><code class="option">max-depth</code> is <code class="literal">1</code>, which is the default, information about the top-level directory’s immediate children will also be included. For larger values of <a id="opt.inline.max-depth-3"></a><code class="option">max-depth</code>, also the content of directories will be considered recursively up to the maximum depth, and it will be included as children of the corresponding <a href="#cv.directory"><code class="tag-element">c:directory</code></a> elements.</p><p>If present, the value of the <a id="opt.inline.include-filter-1"></a><code class="option">include-filter</code> or <a id="opt.inline.exclude-filter-1"></a><code class="option">exclude-filter</code> option <span class="rfc2119" id="c.directory-list.8.3">must</span> be a sequence of strings, each one representing a regular expression as specified in [<a href="#xpath31-functions"><span class="abbrev">XPath and XQuery Functions and Operators 3.1</span></a>], section 7.61 “<code class="literal">Regular Expression Syntax</code>”. <a id="err.inline.C0147&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.C0147"><code class="errqname">err:XC0147</code></a>) if a specified value is not a valid XPath regular expression.</p><p>The regular expressions will be matched against an item’s file system path relative to the top-level path that was given in the <a id="opt.inline.path-3"></a><code class="option">path</code> option. If the item is a directory, a trailing slash will be appended. The matching is done unanchored: it is a match if the regular expression matches part of the relative item’s file system path. Informally: matching behaves like applying the XPath <code class="code">matches#2</code> function, like in <code class="code">matches($path, $regular-expression)</code>.</p><p>Examples: A file <code class="literal">file.txt</code> in the directory specified by <a id="opt.inline.path-4"></a><code class="option">path</code> will remain <code class="literal">file.txt</code>, a relative path <code class="literal">dir1/file.txt</code> will remain <code class="literal">dir1/file.txt</code>, while a relative path <code class="literal">dir1/dir2</code> will become <code class="literal">dir1/dir2/</code> if <code class="literal">dir2</code> is a directory.</p><p>Regular expressions that match <code class="literal">a/a/b/file.txt</code> are, for example, <code class="literal">^(\w+/){2,3}.+\.txt$</code>, <code class="literal">a/a/b/</code>, or <code class="literal">/file\.[^/]+$</code>.</p><p>If any <a id="opt.inline.include-filter-2"></a><code class="option">include-filter</code> pattern matches the slash-augmented relative path, the entry is included in the output. Matching a directory doesn’t automatically include the contents of the directory or its descendants; to be included, each individual entry must match an include filter. For example, the filter regex <code class="literal">^dir/</code> will match a directory and its content, but <code class="literal">^dir/$</code> won’t.</p><p>Although matching a directory doesn’t automatically include its entries, matching an entry <em>does</em> automatically include all of its ancestors (back to the initial directory). This assures that the hierarchy of the XML elements matches the hierarchy of the filesystem. When ancestors are included this way, none of their other entries are included unless they match an include filter.</p><p>For a file <code class="literal">a/a/b/file.txt</code> below the initial directory <code class="literal">/home/jane</code>, this output will be produced, omitting content that might be present in the intermediate directories:</p><pre class="programlisting language-markup xml"><code>&lt;c:directory xml:base="file:///home/jane/" name="jane"&gt; &lt;c:directory xml:base="a/" name="a"&gt; &lt;c:directory xml:base="a/" name="a"&gt; &lt;c:directory xml:base="b/" name="b"&gt; &lt;c:file xml:base="file.txt" name="file.txt"/&gt; &lt;/c:directory&gt; &lt;/c:directory&gt; &lt;/c:directory&gt; &lt;/c:directory&gt;</code></pre><p>If the <a id="opt.inline.exclude-filter-2"></a><code class="option">exclude-filter</code> pattern matches the slash-augmented relative path, the entry (and all of its content in case of a directory) is excluded in the output.</p><p>If both options are provided, the include filter is processed first, then the exclude filter. As a result, an item is included if it matches (at least) one of the <a id="opt.inline.include-filter-3"></a><code class="option">include-filter</code> values and none of the <a id="opt.inline.exclude-filter-3"></a><code class="option">exclude-filter</code> values.</p><p>If no <a id="opt.inline.include-filter-4"></a><code class="option">include-filter</code> is given, that is, if <a id="opt.inline.include-filter-5"></a><code class="option">include-filter</code> is an empty sequence, any item will be included in the result (unless it is excluded by <a id="opt.inline.exclude-filter-4"></a><code class="option">exclude-filter</code>).</p><div class="note admonition"><h3>Note</h3><div class="admonition-body"><p>There is no way to specify a list of values using attribute value templates. If the option shortcut syntax is used to provide the <a id="opt.inline.include-filter-6"></a><code class="option">include-filter</code> or <a id="opt.inline.exclude-filter-5"></a><code class="option">exclude-filter</code> option, it will consist of a single regular expression. To specify a list of regular expressions, you must use the <code class="tag-element">p:with-option</code> syntax. </p></div></div><p><span style="display: none;" class="delete_version">The <a id="opt.inline.override-content-types-1"></a><code class="option">override-content-types</code> option can be used to partially override the content-type determination mechanism. This works just like with the <a id="opt.inline.override-content-types-2"></a><code class="option">override-content-types</code> option of <code class="tag-element">p:archive-manifest</code> and <code class="tag-element">p:unarchive</code> (see <cite><a href="../steps/#override-content-type">Overriding content types</a></cite> in <cite><a href="../steps/">XProc 3.1: Standard Step Library</a></cite>), except that the regular expression matching is done against the paths as used for the matching of the <a id="opt.inline.include-filter-7"></a><code class="option">include-filter</code> and <a id="opt.inline.exclude-filter-6"></a><code class="option">exclude-filter</code> options.</span><span style="display: none;" class="add_version">The <a id="opt.inline.override-content-types-1"></a><code class="option">override-content-types</code> option can be used to partially override the content-type determination mechanism. This works just like with the <a id="opt.inline.override-content-types-2"></a><code class="option">override-content-types</code> option of <code class="tag-element">p:archive-manifest</code> and <code class="tag-element">p:unarchive</code> (see <cite><a href="https://spec.xproc.org/3.1/file//#override-content-type">Overriding content types</a></cite> in <cite><a href="https://spec.xproc.org/3.1/file//">XProc 3.1: Standard Step Library</a></cite>), except that the regular expression matching is done against the paths as used for the matching of the <a id="opt.inline.include-filter-7"></a><code class="option">include-filter</code> and <a id="opt.inline.exclude-filter-6"></a><code class="option">exclude-filter</code> options.</span><span class="modify_version">The <a id="opt.inline.override-content-types-1"></a><code class="option">override-content-types</code> option can be used to partially override the content-type determination mechanism. This works just like with the <a id="opt.inline.override-content-types-2"></a><code class="option">override-content-types</code> option of <code class="tag-element">p:archive-manifest</code> and <code class="tag-element">p:unarchive</code> (see <cite><a href="https://spec.xproc.org/3.1/file//#override-content-type">Overriding content types</a></cite> in <cite><a href="https://spec.xproc.org/3.1/file//">XProc 3.1: Standard Step Library</a></cite>), except that the regular expression matching is done against the paths as used for the matching of the <a id="opt.inline.include-filter-7"></a><code class="option">include-filter</code> and <a id="opt.inline.exclude-filter-6"></a><code class="option">exclude-filter</code> options.</span></p><p>The result document produced for the specified directory path has a <a href="#cv.directory"><code class="tag-element">c:directory</code></a> document element whose base URI, attached as an <code class="tag-element attribute">xml:base</code> attribute, is the absolute directory path (expressed as a URI that ends in a slash) and whose <code class="tag-attribute">name</code> attribute (without a trailing slash) is the last segment of the directory path. The same base URI is attached as the resulting document’s base-uri property and, accordingly, as its document node’s base URI.</p><p class="element-syntax element-syntax-step-vocabulary"><code>&lt;c:directory<br />  <strong>name</strong> = <var>string</var><br />  size? = <var>integer</var><br />  readable? = <var>boolean</var><br />  writable? = <var>boolean</var><br />  last-modified? = <var>dateTime</var><br />  hidden? = <var>boolean</var>&gt;<br />    (<a href="#cv.file">c:file</a> | <br />     <a href="#cv.directory">c:directory</a> | <br />     <a href="#cv.other">c:other</a>)*<br />&lt;/c:directory&gt;</code></p><p>Its contents are determined as follows, based on the entries in the directory identified by the directory path. For each entry in the directory and subject to the rules that are imposed by the <a id="opt.inline.max-depth-4"></a><code class="option">max-depth</code>, <a id="opt.inline.include-filter-8"></a><code class="option">include-filter</code>, and <a id="opt.inline.exclude-filter-7"></a><code class="option">exclude-filter</code> options, a <a href="#cv.file"><code class="tag-element">c:file</code></a>, a <a href="#cv.directory"><code class="tag-element">c:directory</code></a>, or a <a href="#cv.other"><code class="tag-element">c:other</code></a> element is produced, as follows: </p><div class="itemizedlist"><ul><li><p>A <a href="#cv.directory"><code class="tag-element">c:directory</code></a> is produced for each subdirectory not determined to be special. Depending on the values of the three options, it may contain child elements for the directory’s content.</p></li><li><p>A <a href="#cv.file"><code class="tag-element">c:file</code></a> is produced for each file not determined to be special.</p><p class="element-syntax element-syntax-step-vocabulary"><code>&lt;c:file<br />  <strong>name</strong> = <var>string</var><br />  size? = <var>integer</var><br />  readable? = <var>boolean</var><br />  writable? = <var>boolean</var><br />  last-modified? = <var>dateTime</var><br />  hidden? = <var>boolean</var><br />  content-type? = <var>ContentType</var> /&gt;</code></p></li><li><p><span id="impl-3">Any file or directory determined to be special by the <code class="tag-element">p:directory-list</code> step may be output using a <a href="#cv.other"><code class="tag-element">c:other</code></a> element but the criteria for marking a file as special are <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span></p><p class="element-syntax element-syntax-step-vocabulary"><code>&lt;c:other<br />  <strong>name</strong> = <var>string</var><br />  size? = <var>integer</var><br />  readable? = <var>boolean</var><br />  writable? = <var>boolean</var><br />  last-modified? = <var>dateTime</var><br />  hidden? = <var>boolean</var> /&gt;</code></p></li></ul></div><p>Each of the elements <a href="#cv.file"><code class="tag-element">c:file</code></a>, <a href="#cv.directory"><code class="tag-element">c:directory</code></a>, and <a href="#cv.other"><code class="tag-element">c:other</code></a> has a <code class="code">name</code> attribute, whose value is a relative IRI reference, giving the (local) file or directory name.</p><p>Each of these elements also contains the corresponding resource’s URI in an <code class="tag-element attribute">xml:base</code> attribute, which may be a relative URI for any but the top-level <a href="#cv.directory"><code class="tag-element">c:directory</code></a> element. In the case of <a href="#cv.directory"><code class="tag-element">c:directory</code></a>, it must end in a trailing slash. This way, users will always be able to compute the absolute URI for any of these elements by applying <code class="code">fn:base-uri()</code> to it.</p><section id="dir-list-details" class="simplesect"><div class="section-titlepage"><h4>Directory list details</h4></div><div class="content"><p>If <a id="opt.inline.detailed-2"></a><code class="option">detailed</code> is false, then only the <code class="tag-attribute">name</code> and <code class="tag-attribute">xml:base</code> attributes are expected on <a href="#cv.file"><code class="tag-element">c:file</code></a>, <a href="#cv.directory"><code class="tag-element">c:directory</code></a>, or <a href="#cv.other"><code class="tag-element">c:other</code></a> elements.</p><p>If <a id="opt.inline.detailed-3"></a><code class="option">detailed</code> is true, then the pipeline author is expecting additional details about each entry. The following attributes <span class="rfc2119" id="dir-list-details.3.2">should</span> be provided by the implementation:</p><div class="variablelist"><dl><dt><span class="term"><code class="tag-attribute">content-type</code></span></dt><dd><p>The <code class="tag-element attribute">content-type</code> attribute contains the content type of the respective file. The value “<code class="literal">application/octet-stream</code>” will be used if the processor is not able to identify another content type.</p></dd><dt><span class="term"><code class="tag-attribute">readable</code></span></dt><dd><p>“<code class="code">true</code>” if the entry is readable.</p></dd><dt><span class="term"><code class="tag-attribute">writable</code></span></dt><dd><p>“<code class="code">true</code>” if the entry is writable.</p></dd><dt><span class="term"><code class="tag-attribute">hidden</code></span></dt><dd><p>“<code class="code">true</code>” if the entry is hidden.</p></dd><dt><span class="term"><code class="tag-attribute">last-modified</code></span></dt><dd><p>The last modification time of the entry, expressed as a lexical <code class="code">xs:dateTime</code> in UTC.</p></dd><dt><span class="term"><code class="tag-attribute">size</code></span></dt><dd><p>The size of the entry in bytes.</p></dd></dl></div><p><span id="impl-4">The precise meaning of the detailed properties are <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> and may vary according to the URI scheme of the <a id="opt.inline.path-5"></a><code class="option">path</code>.</span> If the value of an attribute is “<code class="code">false</code>” or if it has no meaningful value, the attribute may be omitted.</p><p><span id="impl-5">Any other attributes on <a href="#cv.file"><code class="tag-element">c:file</code></a>, <a href="#cv.directory"><code class="tag-element">c:directory</code></a>, or <a href="#cv.other"><code class="tag-element">c:other</code></a> are <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em></span>, but they <span class="rfc2119" id="dir-list-details.6.2">must</span> be in a namespace.</p></div></section><section id="c.directory-list.28" class="simplesect"><div class="section-titlepage"><h4>Document properties</h4></div><div class="content"><p>Besides the <code class="property">content-type</code> property, the resulting document has a <code class="property">base-uri</code>. Its value is identical to the top-level element’s <code class="tag-attribute">xml:base</code> attribute, that is, to the directory’s URI.</p></div></section></div></section><section id="c.file-copy" class="section"><div class="section-titlepage"><h3><bdi class="secno">2.2. </bdi>p:file-copy<a aria-label="§" class="self-link" href="#c.file-copy"></a></h3></div><div class="content"><p>The <code class="code">p:file-copy</code> step copies a file or a directory to a given target.</p><div class="declare-step"><p>Summary</p><table class="tableaux"><thead><tr><th class="port">Output port</th><th class="check">Primary</th><th class="check">Sequence</th><th>Content types</th></tr></thead><tbody><tr><td class="primary">result</td><td class="check">✔ </td><td class="check"> </td><td>application/xml </td></tr></tbody></table><table class="tableaux"><thead><tr><th>Option name</th><th>Type</th><th>Default value</th><th>Required</th></tr></thead><tbody><tr><td class="required"><a href="#opt.inline.href-1">href</a></td><td>xs:anyURI</td><td> </td><td>✔ </td></tr><tr><td class="required"><a href="#opt.inline.target-1">target</a></td><td>xs:anyURI</td><td> </td><td>✔ </td></tr><tr><td><a href="#opt.inline.fail-on-error-1">fail-on-error</a></td><td>xs:boolean</td><td>true()</td><td> </td></tr><tr><td><a href="#opt.inline.overwrite-1">overwrite</a></td><td>xs:boolean</td><td>true()</td><td> </td></tr></tbody></table><details><summary>Errors</summary><table class="tableaux"><thead><tr><th>Error code</th><th>Description</th></tr></thead><tbody><tr><td class="errcode"><a href="#err.inline.C0050&#34;">err:XC0050</a></td><td class="description">It is a dynamic error the file or directory cannot be copied to the specified location.</td></tr><tr><td class="errcode"><a href="#err.inline.C0144&#34;">err:XC0144</a></td><td class="description">It is a dynamic error if an implementation does not support p:file-copy for a specified scheme.</td></tr><tr><td class="errcode"><a href="#err.inline.C0145&#34;">err:XC0145</a></td><td class="description">It is a dynamic error if p:file-copy is not available to the step due to access restrictions in the environment in which the pipeline is run.</td></tr><tr><td class="errcode"><a href="#err.inline.C0157&#34;">err:XC0157</a></td><td class="description">It is a dynamic error if the href option names a directory, but the target option names a file.</td></tr><tr><td class="errcode"><a href="#err.inline.D0011&#34;">err:XD0011</a></td><td class="description">It is a dynamic error if the resource referenced by the href option does not exist, cannot be accessed or is not a file or directory.</td></tr><tr><td class="errcode"><a href="#err.inline.D0064.1&#34;">err:XD0064</a></td><td class="description">It is a dynamic error if the base URI is not both absolute and valid according to .</td></tr></tbody></table></details><details><summary>Implementation details</summary><table class="tableaux"><thead><tr><th>Implementation</th><th>Description</th></tr></thead><tbody><tr><td><a href="#impl-6">Defined</a></td><td class="description">Conformant processors must support URIs whose scheme is file for the href and target options of p:file-copy. It is implementation-defined what other schemes are supported by p:file-copy, and what the interpretation of ‘directory’, ‘file’ and ‘contents’ is for those schemes.</td></tr></tbody></table></details><details><summary>Declaration</summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code>&lt;p:declare-step</code><code class="attr type-attr">type</code><code>="</code><code class="value type-value">p:file-copy</code><code>"</code><code>&gt;</code></span><br />     <span class="input"><code>&lt;p:output</code><code class="attr port-attr">port</code><code>="</code><code class="value port-value">result</code><code>"</code><code class="attr primary-attr">primary</code><code>="</code><code class="value primary-value">true</code><code>"</code><code class="attr content-types-attr">content-types</code><code>="</code><code class="value content-types-value">application/xml</code><code>"</code><code>/&gt;</code></span><br />     <span class="opt-req"><code>&lt;p:option</code><code class="attr name-attr">name</code><code>="</code><code class="value name-value">href</code><code>"</code><code class="attr required-attr">required</code><code>="</code><code class="value required-value">true</code><code>"</code><code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:anyURI</code><code>"</code><code>/&gt;</code><code>        </code></span><br />     <span class="opt-req"><code>&lt;p:option</code><code class="attr name-attr">name</code><code>="</code><code class="value name-value">target</code><code>"</code><code class="attr required-attr">required</code><code>="</code><code class="value required-value">true</code><code>"</code><code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:anyURI</code><code>"</code><code>/&gt;</code><code>      </code></span><br />     <span class="opt-opt"><code>&lt;p:option</code><code class="attr name-attr">name</code><code>="</code><code class="value name-value">fail-on-error</code><code>"</code><code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:boolean</code><code>"</code><code class="attr select-attr">select</code><code>="</code><code class="value select-value">true()</code><code>"</code><code>/&gt;</code><code></code></span><br />     <span class="opt-opt"><code>&lt;p:option</code><code class="attr name-attr">name</code><code>="</code><code class="value name-value">overwrite</code><code>"</code><code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:boolean</code><code>"</code><code class="attr select-attr">select</code><code>="</code><code class="value select-value">true()</code><code>"</code><code>/&gt;</code><code>  </code></span><br /><code>&lt;/p:declare-step&gt;</code></p></details></div><p>The <code class="tag-element">p:file-copy</code> step copies the file or directory named in <a id="opt.inline.href-1"></a><code class="option">href</code> to the new position specified in <a id="opt.inline.target-1"></a><code class="option">target</code>. Any non existent directory contained in <a id="opt.inline.target-2"></a><code class="option">target</code> will be created before copying starts. If the target is a directory, the step attempts to copy the file or directory into that directory, preserving its base name. <a id="err.inline.C0157&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.C0157"><code class="errqname">err:XC0157</code></a>) if the <a id="opt.inline.href-2"></a><code class="option">href</code> option names a directory, but the <a id="opt.inline.target-3"></a><code class="option">target</code> option names a file.</p><p>If the <a id="opt.inline.overwrite-1"></a><code class="option">overwrite</code> evaluates to <code class="literal">false</code>, no existing file will be changed.</p><p><span id="impl-6">Conformant processors <span class="rfc2119" id="c.file-copy.6.1.1">must</span> support URIs whose scheme is <code class="code">file</code> for the <a id="opt.inline.href-3"></a><code class="option">href</code> and <a id="opt.inline.target-4"></a><code class="option">target</code> options of <code class="tag-element">p:file-copy</code>. It is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> what other schemes are supported by <code class="tag-element">p:file-copy</code>, and what the interpretation of ‘directory’, ‘file’ and ‘contents’ is for those schemes.</span><a id="err.inline.C0144&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.C0144"><code class="errqname">err:XC0144</code></a>) if an implementation does not support <code class="tag-element">p:file-copy</code> for a specified scheme. </p><p>If <a id="opt.inline.href-4"></a><code class="option">href</code> or <a id="opt.inline.target-5"></a><code class="option">target</code> are relative, they are made absolute against the base URI of the element on which they are specified (<code class="tag-element">p:with-option</code> or <code class="tag-element">p:file-copy</code> in the case of a syntactic shortcut value). <a id="err.inline.D0064.1&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.D0064"><code class="errqname">err:XD0064</code></a>) if the base URI is not both absolute and valid according to [<a href="#rfc3986"><span class="abbrev">RFC 3986</span></a>]. <a id="err.inline.C0145&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.C0145"><code class="errqname">err:XC0145</code></a>) if <code class="tag-element">p:file-copy</code> is not available to the step due to access restrictions in the environment in which the pipeline is run.</p><p>If no error occurs, the step returns a <code class="tag-element">c:result</code> element containing the absolute URI of the target.</p><p>If an error occurs and <a id="opt.inline.fail-on-error-1"></a><code class="option">fail-on-error</code> is <code class="code">false</code>, the step returns a <code class="tag-element">c:error</code> element which may contain additional, implementation-defined, information about the nature of the error. In the case of a recursive copy, processing stops at the first error.</p><p>If an error occurs and <a id="opt.inline.fail-on-error-2"></a><code class="option">fail-on-error</code> is <code class="code">true</code>, one of the following errors is raised:</p><div class="itemizedlist"><ul><li><p><a id="err.inline.D0011&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.D0011"><code class="errqname">err:XD0011</code></a>) if the resource referenced by the <a id="opt.inline.href-5"></a><code class="option">href</code> option does not exist, cannot be accessed or is not a file or directory.</p></li><li><p><a id="err.inline.C0050&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.C0050"><code class="errqname">err:XC0050</code></a>) the file or directory cannot be copied to the specified location.</p></li></ul></div><section id="recursive-copy" class="simplesect"><div class="section-titlepage"><h4>Copying directories</h4></div><div class="content"><p>If <a id="opt.inline.href-6"></a><code class="option">href</code> identifies a directory and <code class="code">target</code> also identifies a directory, or does not exist, then the <code class="tag-element">p:file-copy</code> step attempts to copy the entire directory tree identified by <a id="opt.inline.href-7"></a><code class="option">href</code>: the directory and all of its descendants.</p><p>In this case:</p><div class="itemizedlist"><ul><li><p>If <a id="opt.inline.fail-on-error-3"></a><code class="option">fail-on-error</code> is <code class="code">false</code> and an error occurs, no further copying is attempted after the first error is detected.</p></li><li><p>If <a id="opt.inline.overwrite-2"></a><code class="option">overwrite</code> is <code class="code">true</code>, <code class="code">err:XC0157</code> does not apply to descendants. A directory under <a id="opt.inline.href-8"></a><code class="option">href</code> may replace a file with the corresponding name under <a id="opt.inline.target-6"></a><code class="option">target</code>. </p></li></ul></div></div></section><section id="c.file-copy.13" class="simplesect"><div class="section-titlepage"><h4>Document properties</h4></div><div class="content"><p>The resulting document has no properties apart from <code class="property">content-type</code>. In particular, it has no <code class="property">base-uri</code>.</p></div></section></div></section><section id="c.file-delete" class="section"><div class="section-titlepage"><h3><bdi class="secno">2.3. </bdi>p:file-delete<a aria-label="§" class="self-link" href="#c.file-delete"></a></h3></div><div class="content"><p>The <code class="code">p:file-delete</code> step deletes a file or a directory.</p><div class="declare-step"><p>Summary</p><table class="tableaux"><thead><tr><th class="port">Output port</th><th class="check">Primary</th><th class="check">Sequence</th><th>Content types</th></tr></thead><tbody><tr><td class="primary">result</td><td class="check">✔ </td><td class="check"> </td><td>application/xml </td></tr></tbody></table><table class="tableaux"><thead><tr><th>Option name</th><th>Type</th><th>Default value</th><th>Required</th></tr></thead><tbody><tr><td class="required"><a href="#opt.inline.href-9">href</a></td><td>xs:anyURI</td><td> </td><td>✔ </td></tr><tr><td><a href="#opt.inline.fail-on-error-4">fail-on-error</a></td><td>xs:boolean</td><td>true()</td><td> </td></tr><tr><td><a href="#opt.inline.recursive-1">recursive</a></td><td>xs:boolean</td><td>false()</td><td> </td></tr></tbody></table><details><summary>Errors</summary><table class="tableaux"><thead><tr><th>Error code</th><th>Description</th></tr></thead><tbody><tr><td class="errcode"><a href="#err.inline.C0113&#34;">err:XC0113</a></td><td class="description">It is a dynamic error if an attempt is made to delete a non-empty directory and the recursive option was set to false.</td></tr><tr><td class="errcode"><a href="#err.inline.C0142&#34;">err:XC0142</a></td><td class="description">It is a dynamic error if an implementation does not support p:file-delete for a specified scheme.</td></tr><tr><td class="errcode"><a href="#err.inline.C0143&#34;">err:XC0143</a></td><td class="description">It is a dynamic error if p:file-delete is not available to the step due to access restrictions in the environment in which the pipeline is run.</td></tr><tr><td class="errcode"><a href="#err.inline.D0011.1&#34;">err:XD0011</a></td><td class="description">It is a dynamic error if the resource referenced by the href option cannot be accessed or is not a file or directory.</td></tr><tr><td class="errcode"><a href="#err.inline.D0064.2&#34;">err:XD0064</a></td><td class="description">It is a dynamic error if the base URI is not both absolute and valid according to .</td></tr></tbody></table></details><details><summary>Implementation details</summary><table class="tableaux"><thead><tr><th>Implementation</th><th>Description</th></tr></thead><tbody><tr><td><a href="#impl-7">Defined</a></td><td class="description">Conformant processors must support URIs whose scheme is file for the href option of p:file-delete. It is implementation-defined what other schemes are supported by p:file-delete, and what the interpretation of ‘directory’, ‘file’ and ‘contents’ is for those schemes.</td></tr></tbody></table></details><details><summary>Declaration</summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code>&lt;p:declare-step</code><code class="attr type-attr">type</code><code>="</code><code class="value type-value">p:file-delete</code><code>"</code><code>&gt;</code></span><br />     <span class="input"><code>&lt;p:output</code><code class="attr port-attr">port</code><code>="</code><code class="value port-value">result</code><code>"</code><code class="attr primary-attr">primary</code><code>="</code><code class="value primary-value">true</code><code>"</code><code class="attr content-types-attr">content-types</code><code>="</code><code class="value content-types-value">application/xml</code><code>"</code><code>/&gt;</code></span><br />     <span class="opt-req"><code>&lt;p:option</code><code class="attr name-attr">name</code><code>="</code><code class="value name-value">href</code><code>"</code><code class="attr required-attr">required</code><code>="</code><code class="value required-value">true</code><code>"</code><code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:anyURI</code><code>"</code><code>/&gt;</code><code>        </code></span><br />     <span class="opt-opt"><code>&lt;p:option</code><code class="attr name-attr">name</code><code>="</code><code class="value name-value">recursive</code><code>"</code><code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:boolean</code><code>"</code><code class="attr select-attr">select</code><code>="</code><code class="value select-value">false()</code><code>"</code><code>/&gt;</code><code> </code></span><br />     <span class="opt-opt"><code>&lt;p:option</code><code class="attr name-attr">name</code><code>="</code><code class="value name-value">fail-on-error</code><code>"</code><code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:boolean</code><code>"</code><code class="attr select-attr">select</code><code>="</code><code class="value select-value">true()</code><code>"</code><code>/&gt;</code><code></code></span><br /><code>&lt;/p:declare-step&gt;</code></p></details></div><p>The <code class="tag-element">p:file-delete</code> step attempts to delete an existing file or directory named in <a id="opt.inline.href-9"></a><code class="option">href</code>. If the named file or directory does not exist, the step just returns a <code class="tag-element">c:result</code> element as described below.</p><p><span id="impl-7">Conformant processors <span class="rfc2119" id="c.file-delete.5.1.1">must</span> support URIs whose scheme is <code class="code">file</code> for the <a id="opt.inline.href-10"></a><code class="option">href</code> option of <code class="tag-element">p:file-delete</code>. It is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> what other schemes are supported by <code class="tag-element">p:file-delete</code>, and what the interpretation of ‘directory’, ‘file’ and ‘contents’ is for those schemes.</span><a id="err.inline.C0142&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.C0142"><code class="errqname">err:XC0142</code></a>) if an implementation does not support <code class="tag-element">p:file-delete</code> for a specified scheme. </p><p>If <a id="opt.inline.href-11"></a><code class="option">href</code> is relative, it is made absolute against the base URI of the element on which it is specified (<code class="tag-element">p:with-option</code> or <code class="tag-element">p:file-delete</code> in the case of a syntactic shortcut value). <a id="err.inline.D0064.2&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.D0064"><code class="errqname">err:XD0064</code></a>) if the base URI is not both absolute and valid according to [<a href="#rfc3986"><span class="abbrev">RFC 3986</span></a>]. <a id="err.inline.C0143&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.C0143"><code class="errqname">err:XC0143</code></a>) if <code class="tag-element">p:file-delete</code> is not available to the step due to access restrictions in the environment in which the pipeline is run.</p><p>If <a id="opt.inline.href-12"></a><code class="option">href</code> specifies a directory, it can only be deleted if the <a id="opt.inline.recursive-1"></a><code class="option">recursive</code> option is <code class="code">true</code> or if the specified directory is empty.</p><p>The step returns a <code class="tag-element">c:result</code> element containing the absolute URI of the file or directory.</p><p>If an error occurs and <a id="opt.inline.fail-on-error-4"></a><code class="option">fail-on-error</code> is <code class="code">false</code>, the step returns a <code class="tag-element">c:error</code> element which may contain additional, implementation-defined, information about the nature of the error.</p><p>If an error occurs and <a id="opt.inline.fail-on-error-5"></a><code class="option">fail-on-error</code> is <code class="code">true</code>, one of the following errors is raised:</p><div class="itemizedlist"><ul><li><p><a id="err.inline.D0011.1&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.D0011"><code class="errqname">err:XD0011</code></a>) if the resource referenced by the <a id="opt.inline.href-13"></a><code class="option">href</code> option cannot be accessed or is not a file or directory.</p></li><li><p><a id="err.inline.C0113&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.C0113"><code class="errqname">err:XC0113</code></a>) if an attempt is made to delete a non-empty directory and the <a id="opt.inline.recursive-2"></a><code class="option">recursive</code> option was set to <code class="code">false</code>.</p></li></ul></div><section id="c.file-delete.12" class="simplesect"><div class="section-titlepage"><h4>Document properties</h4></div><div class="content"><p>The resulting document has no properties apart from <code class="property">content-type</code>. In particular, it has no <code class="property">base-uri</code>.</p></div></section></div></section><section class="section" id="c.file-info"><div class="section-titlepage"><h3><bdi class="secno">2.4. </bdi>p:file-info<a aria-label="§" class="self-link" href="#c.file-info"></a></h3></div><div class="content"><p>The <code class="code">p:file-info</code> step returns information about a file, directory or other file system object.</p><div class="declare-step"><p>Summary</p><table class="tableaux"><thead><tr><th class="port">Output port</th><th class="check">Primary</th><th class="check">Sequence</th><th>Content types</th></tr></thead><tbody><tr><td class="primary">result</td><td class="check">✔ </td><td class="check"> </td><td>application/xml </td></tr></tbody></table><table class="tableaux"><thead><tr><th>Option name</th><th>Type</th><th>Default value</th><th>Required</th></tr></thead><tbody><tr><td class="required"><a href="#opt.inline.href-14">href</a></td><td>xs:anyURI</td><td> </td><td>✔ </td></tr><tr><td><a href="#opt.inline.fail-on-error-6">fail-on-error</a></td><td>xs:boolean</td><td>true()</td><td> </td></tr><tr><td><a href="#opt.inline.override-content-types-3">override-content-types</a></td><td>array(array(xs:string))?</td><td>()</td><td> </td></tr></tbody></table><details><summary>Errors</summary><table class="tableaux"><thead><tr><th>Error code</th><th>Description</th></tr></thead><tbody><tr><td class="errcode"><a href="#err.inline.C0134&#34;">err:XC0134</a></td><td class="description">It is a dynamic error if an implementation does not support p:file-info for a specified scheme.</td></tr><tr><td class="errcode"><a href="#err.inline.C0135&#34;">err:XC0135</a></td><td class="description">It is a dynamic error if p:file-info is not available to the step due to access restrictions in the environment in which the pipeline is run.</td></tr><tr><td class="errcode"><a href="#err.inline.D0011.2&#34;">err:XD0011</a></td><td class="description">It is a dynamic error if the resource referenced by the href option does not exist, cannot be accessed or is not a file, directory or other file system object.</td></tr><tr><td class="errcode"><a href="#err.inline.D0064.3&#34;">err:XD0064</a></td><td class="description">It is a dynamic error if the base URI is not both absolute and valid according to .</td></tr></tbody></table></details><details><summary>Implementation details</summary><table class="tableaux"><thead><tr><th>Implementation</th><th>Description</th></tr></thead><tbody><tr><td><a href="#impl-8">Defined</a></td><td class="description">Conformant processors must support URIs whose scheme is file for the href option of p:file-info. It is implementation-defined what other schemes are supported by p:file-info, and what the interpretation of ‘directory’, ‘file’ and ‘contents’ is for those schemes.</td></tr></tbody></table></details><details><summary>Declaration</summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code>&lt;p:declare-step</code><code class="attr type-attr">type</code><code>="</code><code class="value type-value">p:file-info</code><code>"</code><code>&gt;</code></span><br />     <span class="input"><code>&lt;p:output</code><code class="attr port-attr">port</code><code>="</code><code class="value port-value">result</code><code>"</code><code class="attr primary-attr">primary</code><code>="</code><code class="value primary-value">true</code><code>"</code><code class="attr content-types-attr">content-types</code><code>="</code><code class="value content-types-value">application/xml</code><code>"</code><code>/&gt;</code></span><br />     <span class="opt-req"><code>&lt;p:option</code><code class="attr name-attr">name</code><code>="</code><code class="value name-value">href</code><code>"</code><code class="attr required-attr">required</code><code>="</code><code class="value required-value">true</code><code>"</code><code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:anyURI</code><code>"</code><code>/&gt;</code><code>        </code></span><br />     <span class="opt-opt"><code>&lt;p:option</code><code class="attr name-attr">name</code><code>="</code><code class="value name-value">fail-on-error</code><code>"</code><code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:boolean</code><code>"</code><code class="attr select-attr">select</code><code>="</code><code class="value select-value">true()</code><code>"</code><code>/&gt;</code><code></code></span><br />     <span class="opt-opt"><code>&lt;p:option</code><code class="attr name-attr">name</code><code>="</code><code class="value name-value">override-content-types</code><code>"</code><code class="attr as-attr">as</code><code>="</code><code class="value as-value">array(array(xs:string))?</code><code>"</code><code>/&gt;</code><code></code></span><br /><code>&lt;/p:declare-step&gt;</code></p></details></div><p>The <code class="tag-element">p:file-info</code> step returns information about the file, directory or other file system object named in the <a id="opt.inline.href-14"></a><code class="option">href</code> option.</p><p><span id="impl-8">Conformant processors <span class="rfc2119" id="c.file-info.5.1.1">must</span> support URIs whose scheme is <code class="code">file</code> for the <a id="opt.inline.href-15"></a><code class="option">href</code> option of <code class="tag-element">p:file-info</code>. It is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> what other schemes are supported by <code class="tag-element">p:file-info</code>, and what the interpretation of ‘directory’, ‘file’ and ‘contents’ is for those schemes.</span><a id="err.inline.C0134&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.C0134"><code class="errqname">err:XC0134</code></a>) if an implementation does not support <code class="tag-element">p:file-info</code> for a specified scheme. </p><p>If <a id="opt.inline.href-16"></a><code class="option">href</code> is relative, it is made absolute against the base URI of the element on which it is specified (<code class="tag-element">p:with-option</code> or <code class="tag-element">p:file-info</code> in the case of a syntactic shortcut value). <a id="err.inline.D0064.3&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.D0064"><code class="errqname">err:XD0064</code></a>) if the base URI is not both absolute and valid according to [<a href="#rfc3986"><span class="abbrev">RFC 3986</span></a>]. <a id="err.inline.C0135&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.C0135"><code class="errqname">err:XC0135</code></a>) if <code class="tag-element">p:file-info</code> is not available to the step due to access restrictions in the environment in which the pipeline is run.</p><p>If the <a id="opt.inline.href-17"></a><code class="option">href</code> option is a <code class="code">file:</code> URI, the step returns a single element with information about the referenced file system object. These elements an their attributes are the same as returned by <a href="#c.directory-list"><code class="tag-element">p:directory-list</code></a> for this file system object (with the <a id="opt.inline.detailed-4"></a><code class="option">detailed</code> set to <code class="code">true</code>):</p><div class="itemizedlist"><ul><li><p>If <a id="opt.inline.href-18"></a><code class="option">href</code> option references a file: A <a href="#cv.file"><code class="tag-element">c:file</code></a> element with standard attributes.</p></li><li><p>If <a id="opt.inline.href-19"></a><code class="option">href</code> option references a directory: A <a href="#cv.directory"><code class="tag-element">c:directory</code></a> element with standard attributes.</p></li><li><p>If <a id="opt.inline.href-20"></a><code class="option">href</code> option references any other file system object: Implementation defined (for example an <a href="#cv.other"><code class="tag-element">c:other</code></a> or <code class="tag-element">c:device</code> element). The advice is to use the standard attributes of <a href="#cv.file"><code class="tag-element">c:file</code></a> and/or <a href="#cv.directory"><code class="tag-element">c:directory</code></a> if applicable.</p></li></ul></div><p><span style="display: none;" class="delete_version">The <a id="opt.inline.override-content-types-3"></a><code class="option">override-content-types</code> option can be used to partially override the content-type determination mechanism for files. This works just like with the <a id="opt.inline.override-content-types-4"></a><code class="option">override-content-types</code> option of <code class="tag-element">p:archive-manifest</code> and <code class="tag-element">p:unarchive</code> (see <cite><a href="../steps/#override-content-type">Overriding content types</a></cite> in <cite><a href="../steps/">XProc 3.1: Standard Step Library</a></cite>), except that the regular expression matching is done against the absolute URI of the file.</span><span style="display: none;" class="add_version">The <a id="opt.inline.override-content-types-3"></a><code class="option">override-content-types</code> option can be used to partially override the content-type determination mechanism for files. This works just like with the <a id="opt.inline.override-content-types-4"></a><code class="option">override-content-types</code> option of <code class="tag-element">p:archive-manifest</code> and <code class="tag-element">p:unarchive</code> (see <cite><a href="https://spec.xproc.org/3.1/file//#override-content-type">Overriding content types</a></cite> in <cite><a href="https://spec.xproc.org/3.1/file//">XProc 3.1: Standard Step Library</a></cite>), except that the regular expression matching is done against the absolute URI of the file.</span><span class="modify_version">The <a id="opt.inline.override-content-types-3"></a><code class="option">override-content-types</code> option can be used to partially override the content-type determination mechanism for files. This works just like with the <a id="opt.inline.override-content-types-4"></a><code class="option">override-content-types</code> option of <code class="tag-element">p:archive-manifest</code> and <code class="tag-element">p:unarchive</code> (see <cite><a href="https://spec.xproc.org/3.1/file//#override-content-type">Overriding content types</a></cite> in <cite><a href="https://spec.xproc.org/3.1/file//">XProc 3.1: Standard Step Library</a></cite>), except that the regular expression matching is done against the absolute URI of the file.</span></p><p>If an error occurs and <a id="opt.inline.fail-on-error-6"></a><code class="option">fail-on-error</code> is <code class="code">false</code>, the step returns a <code class="tag-element">c:error</code> element which may contain additional, implementation-defined, information about the nature of the error.</p><p>If an error occurs and <a id="opt.inline.fail-on-error-7"></a><code class="option">fail-on-error</code> is <code class="code">true</code>, one of the following errors is raised:</p><div class="itemizedlist"><ul><li><p><a id="err.inline.D0011.2&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.D0011"><code class="errqname">err:XD0011</code></a>) if the resource referenced by the <a id="opt.inline.href-21"></a><code class="option">href</code> option does not exist, cannot be accessed or is not a file, directory or other file system object.</p></li></ul></div><section id="c.file-info.13" class="simplesect"><div class="section-titlepage"><h4>Document properties</h4></div><div class="content"><p>The resulting document has no properties apart from <code class="property">content-type</code>. In particular, it has no <code class="property">base-uri</code>.</p></div></section></div></section><section id="c.file-mkdir" class="section"><div class="section-titlepage"><h3><bdi class="secno">2.5. </bdi>p:file-mkdir<a aria-label="§" class="self-link" href="#c.file-mkdir"></a></h3></div><div class="content"><p>The <code class="code">p:file-mkdir</code> step creates a directory.</p><div class="declare-step"><p>Summary</p><table class="tableaux"><thead><tr><th class="port">Output port</th><th class="check">Primary</th><th class="check">Sequence</th><th>Content types</th></tr></thead><tbody><tr><td class="primary">result</td><td class="check">✔ </td><td class="check"> </td><td>application/xml </td></tr></tbody></table><table class="tableaux"><thead><tr><th>Option name</th><th>Type</th><th>Default value</th><th>Required</th></tr></thead><tbody><tr><td class="required"><a href="#opt.inline.href-22">href</a></td><td>xs:anyURI</td><td> </td><td>✔ </td></tr><tr><td><a href="#opt.inline.fail-on-error-8">fail-on-error</a></td><td>xs:boolean</td><td>true()</td><td> </td></tr></tbody></table><details><summary>Errors</summary><table class="tableaux"><thead><tr><th>Error code</th><th>Description</th></tr></thead><tbody><tr><td class="errcode"><a href="#err.inline.C0114&#34;">err:XC0114</a></td><td class="description">It is a dynamic error if the directory referenced by the href option cannot be created.</td></tr><tr><td class="errcode"><a href="#err.inline.C0140&#34;">err:XC0140</a></td><td class="description">It is a dynamic error if an implementation does not support p:file-mkdir for a specified scheme.</td></tr><tr><td class="errcode"><a href="#err.inline.C0141&#34;">err:XC0141</a></td><td class="description">It is a dynamic error if p:file-mkdir not available to the step due to access restrictions in the environment in which the pipeline is run.</td></tr><tr><td class="errcode"><a href="#err.inline.D0064.4&#34;">err:XD0064</a></td><td class="description">It is a dynamic error if the base URI is not both absolute and valid according to .</td></tr></tbody></table></details><details><summary>Implementation details</summary><table class="tableaux"><thead><tr><th>Implementation</th><th>Description</th></tr></thead><tbody><tr><td><a href="#impl-9">Defined</a></td><td class="description">Conformant processors must support URIs whose scheme is file for the href option of p:file-mkdir. It is implementation-defined what other schemes are supported by p:file-mkdir, and what the interpretation of ‘directory’, ‘file’ and ‘contents’ is for those schemes.</td></tr></tbody></table></details><details><summary>Declaration</summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code>&lt;p:declare-step</code><code class="attr type-attr">type</code><code>="</code><code class="value type-value">p:file-mkdir</code><code>"</code><code>&gt;</code></span><br />     <span class="input"><code>&lt;p:output</code><code class="attr port-attr">port</code><code>="</code><code class="value port-value">result</code><code>"</code><code class="attr primary-attr">primary</code><code>="</code><code class="value primary-value">true</code><code>"</code><code class="attr content-types-attr">content-types</code><code>="</code><code class="value content-types-value">application/xml</code><code>"</code><code>/&gt;</code></span><br />     <span class="opt-req"><code>&lt;p:option</code><code class="attr name-attr">name</code><code>="</code><code class="value name-value">href</code><code>"</code><code class="attr required-attr">required</code><code>="</code><code class="value required-value">true</code><code>"</code><code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:anyURI</code><code>"</code><code>/&gt;</code><code>        </code></span><br />     <span class="opt-opt"><code>&lt;p:option</code><code class="attr name-attr">name</code><code>="</code><code class="value name-value">fail-on-error</code><code>"</code><code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:boolean</code><code>"</code><code class="attr select-attr">select</code><code>="</code><code class="value select-value">true()</code><code>"</code><code>/&gt;</code><code></code></span><br /><code>&lt;/p:declare-step&gt;</code></p></details></div><p>The <code class="tag-element">p:file-mkdir</code> create the directory named in the <a id="opt.inline.href-22"></a><code class="option">href</code> option. If this includes more than one directory component, all of the intermediate components are created. If the directory already exists the step just returns the <code class="tag-element">c:result</code> element as described below. The path separator is implementation-defined.</p><p><span id="impl-9">Conformant processors <span class="rfc2119" id="c.file-mkdir.5.1.1">must</span> support URIs whose scheme is <code class="code">file</code> for the <a id="opt.inline.href-23"></a><code class="option">href</code> option of <code class="tag-element">p:file-mkdir</code>. It is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> what other schemes are supported by <code class="tag-element">p:file-mkdir</code>, and what the interpretation of ‘directory’, ‘file’ and ‘contents’ is for those schemes.</span><a id="err.inline.C0140&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.C0140"><code class="errqname">err:XC0140</code></a>) if an implementation does not support <code class="tag-element">p:file-mkdir</code> for a specified scheme. </p><p>If <a id="opt.inline.href-24"></a><code class="option">href</code> is relative, it is made absolute against the base URI of the element on which it is specified (<code class="tag-element">p:with-option</code> or <code class="tag-element">p:file-mkdir</code> in the case of a syntactic shortcut value). <a id="err.inline.D0064.4&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.D0064"><code class="errqname">err:XD0064</code></a>) if the base URI is not both absolute and valid according to [<a href="#rfc3986"><span class="abbrev">RFC 3986</span></a>]. <a id="err.inline.C0141&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.C0141"><code class="errqname">err:XC0141</code></a>) if <code class="tag-element">p:file-mkdir</code> not available to the step due to access restrictions in the environment in which the pipeline is run.</p><p>The step returns a <code class="tag-element">c:result</code> element containing the absolute URI of the directory.</p><p>If an error occurs and <a id="opt.inline.fail-on-error-8"></a><code class="option">fail-on-error</code> is <code class="code">false</code>, the step returns a <code class="tag-element">c:error</code> element which may contain additional, implementation-defined, information about the nature of the error.</p><p>If an error occurs and <a id="opt.inline.fail-on-error-9"></a><code class="option">fail-on-error</code> is <code class="code">true</code>, the following error is raised:</p><div class="itemizedlist"><ul><li><p><a id="err.inline.C0114&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.C0114"><code class="errqname">err:XC0114</code></a>) if the directory referenced by the <a id="opt.inline.href-25"></a><code class="option">href</code> option cannot be created.</p></li></ul></div><section id="c.file-mkdir.11" class="simplesect"><div class="section-titlepage"><h4>Document properties</h4></div><div class="content"><p>The resulting document has no properties apart from <code class="property">content-type</code>. In particular, it has no <code class="property">base-uri</code>.</p></div></section></div></section><section id="c.file-move" class="section"><div class="section-titlepage"><h3><bdi class="secno">2.6. </bdi>p:file-move<a aria-label="§" class="self-link" href="#c.file-move"></a></h3></div><div class="content"><p>The <code class="code">p:file-move</code> step moves a file or directory.</p><div class="declare-step"><p>Summary</p><table class="tableaux"><thead><tr><th class="port">Output port</th><th class="check">Primary</th><th class="check">Sequence</th><th>Content types</th></tr></thead><tbody><tr><td class="primary">result</td><td class="check">✔ </td><td class="check"> </td><td>application/xml </td></tr></tbody></table><table class="tableaux"><thead><tr><th>Option name</th><th>Type</th><th>Default value</th><th>Required</th></tr></thead><tbody><tr><td class="required"><a href="#opt.inline.href-26">href</a></td><td>xs:anyURI</td><td> </td><td>✔ </td></tr><tr><td class="required"><a href="#opt.inline.target-7">target</a></td><td>xs:anyURI</td><td> </td><td>✔ </td></tr><tr><td><a href="#opt.inline.fail-on-error-10">fail-on-error</a></td><td>xs:boolean</td><td>true()</td><td> </td></tr></tbody></table><details><summary>Errors</summary><table class="tableaux"><thead><tr><th>Error code</th><th>Description</th></tr></thead><tbody><tr><td class="errcode"><a href="#err.inline.C0050.1&#34;">err:XC0050</a></td><td class="description">It is a dynamic error if the directory cannot be moved to the specified location.</td></tr><tr><td class="errcode"><a href="#err.inline.C0115&#34;">err:XC0115</a></td><td class="description">It is a dynamic error if the resource referenced by the target option is an existing file or other file system object.</td></tr><tr><td class="errcode"><a href="#err.inline.C0148&#34;">err:XC0148</a></td><td class="description">It is a dynamic error if an implementation does not support p:file-move for a specified scheme.</td></tr><tr><td class="errcode"><a href="#err.inline.C0149&#34;">err:XC0149</a></td><td class="description">It is a dynamic error if p:file-move is not available to the step due to access restrictions in the environment in which the pipeline is run.</td></tr><tr><td class="errcode"><a href="#err.inline.C0158&#34;">err:XC0158</a></td><td class="description">It is a dynamic error if the href option names a directory, but the target option names a file.</td></tr><tr><td class="errcode"><a href="#err.inline.D0011.3&#34;">err:XD0011</a></td><td class="description">It is a dynamic error if the resource referenced by the href option does not exist, cannot be accessed or is not a file or directory.</td></tr><tr><td class="errcode"><a href="#err.inline.D0064.5&#34;">err:XD0064</a></td><td class="description">It is a dynamic error if the base URI is not both absolute and valid according to .</td></tr></tbody></table></details><details><summary>Implementation details</summary><table class="tableaux"><thead><tr><th>Implementation</th><th>Description</th></tr></thead><tbody><tr><td><a href="#impl-10">Defined</a></td><td class="description">Conformant processors must support URIs whose scheme is file for the href and target options of p:file-move. It is implementation-defined what other schemes are supported by p:file-move, and what the interpretation of ‘directory’, ‘file’ and ‘contents’ is for those schemes.</td></tr></tbody></table></details><details><summary>Declaration</summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code>&lt;p:declare-step</code><code class="attr type-attr">type</code><code>="</code><code class="value type-value">p:file-move</code><code>"</code><code>&gt;</code></span><br />     <span class="input"><code>&lt;p:output</code><code class="attr port-attr">port</code><code>="</code><code class="value port-value">result</code><code>"</code><code class="attr primary-attr">primary</code><code>="</code><code class="value primary-value">true</code><code>"</code><code class="attr content-types-attr">content-types</code><code>="</code><code class="value content-types-value">application/xml</code><code>"</code><code>/&gt;</code></span><br />     <span class="opt-req"><code>&lt;p:option</code><code class="attr name-attr">name</code><code>="</code><code class="value name-value">href</code><code>"</code><code class="attr required-attr">required</code><code>="</code><code class="value required-value">true</code><code>"</code><code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:anyURI</code><code>"</code><code>/&gt;</code><code>        </code></span><br />     <span class="opt-req"><code>&lt;p:option</code><code class="attr name-attr">name</code><code>="</code><code class="value name-value">target</code><code>"</code><code class="attr required-attr">required</code><code>="</code><code class="value required-value">true</code><code>"</code><code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:anyURI</code><code>"</code><code>/&gt;</code><code>      </code></span><br />     <span class="opt-opt"><code>&lt;p:option</code><code class="attr name-attr">name</code><code>="</code><code class="value name-value">fail-on-error</code><code>"</code><code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:boolean</code><code>"</code><code class="attr select-attr">select</code><code>="</code><code class="value select-value">true()</code><code>"</code><code>/&gt;</code><code></code></span><br /><code>&lt;/p:declare-step&gt;</code></p></details></div><p>The <code class="tag-element">p:file-move</code> step moves the file or directory named in <a id="opt.inline.href-26"></a><code class="option">href</code> to the new location specified in <a id="opt.inline.target-7"></a><code class="option">target</code>. If the <a id="opt.inline.target-8"></a><code class="option">target</code> option specifies an <em>existing</em> directory, the step attempts to move the file or directory <em>into</em> that directory, preserving its base name. <a id="err.inline.C0158&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.C0158"><code class="errqname">err:XC0158</code></a>) if the <a id="opt.inline.href-27"></a><code class="option">href</code> option names a directory, but the <a id="opt.inline.target-9"></a><code class="option">target</code> option names a file.</p><p><span id="impl-10">Conformant processors <span class="rfc2119" id="c.file-move.5.1.1">must</span> support URIs whose scheme is <code class="code">file</code> for the <a id="opt.inline.href-28"></a><code class="option">href</code> and <a id="opt.inline.target-10"></a><code class="option">target</code> options of <code class="tag-element">p:file-move</code>. It is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> what other schemes are supported by <code class="tag-element">p:file-move</code>, and what the interpretation of ‘directory’, ‘file’ and ‘contents’ is for those schemes.</span><a id="err.inline.C0148&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.C0148"><code class="errqname">err:XC0148</code></a>) if an implementation does not support <code class="tag-element">p:file-move</code> for a specified scheme. </p><p>If <a id="opt.inline.href-29"></a><code class="option">href</code> or <a id="opt.inline.target-11"></a><code class="option">target</code> are relative, they are made absolute against the base URI of the element on which they are specified (<code class="tag-element">p:with-option</code> or <code class="tag-element">p:file-move</code> in the case of a syntactic shortcut value). <a id="err.inline.D0064.5&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.D0064"><code class="errqname">err:XD0064</code></a>) if the base URI is not both absolute and valid according to [<a href="#rfc3986"><span class="abbrev">RFC 3986</span></a>]. <a id="err.inline.C0149&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.C0149"><code class="errqname">err:XC0149</code></a>) if <code class="tag-element">p:file-move</code> is not available to the step due to access restrictions in the environment in which the pipeline is run.</p><p>If the <a id="opt.inline.href-30"></a><code class="option">href</code> option specifies a device or other special kind of object, the results are implementation-defined.</p><p>If the move is successful, the step returns a <code class="tag-element">c:result</code> element containing the absolute URI of the target.</p><p>If an error occurs and <a id="opt.inline.fail-on-error-10"></a><code class="option">fail-on-error</code> is <code class="code">false</code>, the step returns a <code class="tag-element">c:error</code> element which may contain additional, implementation-defined, information about the nature of the error.</p><p>If an error occurs and <a id="opt.inline.fail-on-error-11"></a><code class="option">fail-on-error</code> is <code class="code">true</code>, one of the following errors is raised:</p><div class="itemizedlist"><ul><li><p><a id="err.inline.D0011.3&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.D0011"><code class="errqname">err:XD0011</code></a>) if the resource referenced by the <a id="opt.inline.href-31"></a><code class="option">href</code> option does not exist, cannot be accessed or is not a file or directory.</p></li><li><p><a id="err.inline.C0115&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.C0115"><code class="errqname">err:XC0115</code></a>) if the resource referenced by the <a id="opt.inline.target-12"></a><code class="option">target</code> option is an existing file or other file system object.</p></li><li><p><a id="err.inline.C0050.1&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.C0050"><code class="errqname">err:XC0050</code></a>) if the directory cannot be moved to the specified location.</p></li></ul></div><section id="c.file-move.12" class="simplesect"><div class="section-titlepage"><h4>Document properties</h4></div><div class="content"><p>The resulting document has no properties apart from <code class="property">content-type</code>. In particular, it has no <code class="property">base-uri</code>.</p></div></section></div></section><section id="c.file-create-tempfile" class="section"><div class="section-titlepage"><h3><bdi class="secno">2.7. </bdi>p:file-create-tempfile<a aria-label="§" class="self-link" href="#c.file-create-tempfile"></a></h3></div><div class="content"><p>The <code class="code">p:file-create-tempfile</code> step creates a temporary file.</p><div class="declare-step"><p>Summary</p><table class="tableaux"><thead><tr><th class="port">Output port</th><th class="check">Primary</th><th class="check">Sequence</th><th>Content types</th></tr></thead><tbody><tr><td class="primary">result</td><td class="check">✔ </td><td class="check"> </td><td>application/xml </td></tr></tbody></table><table class="tableaux"><thead><tr><th>Option name</th><th>Type</th><th>Default value</th></tr></thead><tbody><tr><td><a href="#opt.inline.delete-on-exit-1">delete-on-exit</a></td><td>xs:boolean</td><td>false()</td></tr><tr><td><a href="#opt.inline.fail-on-error-12">fail-on-error</a></td><td>xs:boolean</td><td>true()</td></tr><tr><td><a href="#opt.inline.href-32">href</a></td><td>xs:anyURI?</td><td>()</td></tr><tr><td><a href="#opt.inline.prefix-1">prefix</a></td><td>xs:string?</td><td>()</td></tr><tr><td><a href="#opt.inline.suffix-1">suffix</a></td><td>xs:string?</td><td>()</td></tr></tbody></table><details><summary>Errors</summary><table class="tableaux"><thead><tr><th>Error code</th><th>Description</th></tr></thead><tbody><tr><td class="errcode"><a href="#err.inline.C0116&#34;">err:XC0116</a></td><td class="description">It is a dynamic error if the temporary file could not be created.</td></tr><tr><td class="errcode"><a href="#err.inline.C0138&#34;">err:XC0138</a></td><td class="description">It is a dynamic error if an implementation does not support p:file-create-tempfile for a specified scheme.</td></tr><tr><td class="errcode"><a href="#err.inline.C0139&#34;">err:XC0139</a></td><td class="description">It is a dynamic error if p:file-create-tempfile cannot be completed due to access restrictions in the environment in which the pipeline is run.</td></tr><tr><td class="errcode"><a href="#err.inline.D0011.4&#34;">err:XD0011</a></td><td class="description">It is a dynamic error if the resource referenced by the href option does not exist, cannot be accessed or is not a directory.</td></tr><tr><td class="errcode"><a href="#err.inline.D0064.6&#34;">err:XD0064</a></td><td class="description">It is a dynamic error if the base URI is not both absolute and valid according to .</td></tr></tbody></table></details><details><summary>Implementation details</summary><table class="tableaux"><thead><tr><th>Implementation</th><th>Description</th></tr></thead><tbody><tr><td><a href="#impl-11">Defined</a></td><td class="description">Conformant processors must support URIs whose scheme is file for the href option of p:file-create-tempfile. It is implementation-defined what other schemes are supported by p:file-create-tempfile, and what the interpretation of ‘directory’, ‘file’ and ‘contents’ is for those schemes.</td></tr></tbody></table></details><details><summary>Declaration</summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code>&lt;p:declare-step</code><code class="attr type-attr">type</code><code>="</code><code class="value type-value">p:file-create-tempfile</code><code>"</code><code>&gt;</code></span><br />     <span class="input"><code>&lt;p:output</code><code class="attr port-attr">port</code><code>="</code><code class="value port-value">result</code><code>"</code><code class="attr primary-attr">primary</code><code>="</code><code class="value primary-value">true</code><code>"</code><code class="attr content-types-attr">content-types</code><code>="</code><code class="value content-types-value">application/xml</code><code>"</code><code>/&gt;</code></span><br />     <span class="opt-opt"><code>&lt;p:option</code><code class="attr name-attr">name</code><code>="</code><code class="value name-value">href</code><code>"</code><code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:anyURI?</code><code>"</code><code>/&gt;</code><code>                       </code></span><br />     <span class="opt-opt"><code>&lt;p:option</code><code class="attr name-attr">name</code><code>="</code><code class="value name-value">suffix</code><code>"</code><code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:string?</code><code>"</code><code>/&gt;</code><code>                     </code></span><br />     <span class="opt-opt"><code>&lt;p:option</code><code class="attr name-attr">name</code><code>="</code><code class="value name-value">prefix</code><code>"</code><code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:string?</code><code>"</code><code>/&gt;</code><code>                     </code></span><br />     <span class="opt-opt"><code>&lt;p:option</code><code class="attr name-attr">name</code><code>="</code><code class="value name-value">delete-on-exit</code><code>"</code><code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:boolean</code><code>"</code><code class="attr select-attr">select</code><code>="</code><code class="value select-value">false()</code><code>"</code><code>/&gt;</code><code></code></span><br />     <span class="opt-opt"><code>&lt;p:option</code><code class="attr name-attr">name</code><code>="</code><code class="value name-value">fail-on-error</code><code>"</code><code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:boolean</code><code>"</code><code class="attr select-attr">select</code><code>="</code><code class="value select-value">true()</code><code>"</code><code>/&gt;</code><code></code></span><br /><code>&lt;/p:declare-step&gt;</code></p></details></div><p>The <code class="tag-element">p:file-create-tempfile</code> creates a temporary file. The temporary file is guaranteed not to already exist when the step is called.</p><p>If the <a id="opt.inline.href-32"></a><code class="option">href</code> option is specified it must be the URI of an existing directory. The temporary file is created here. If there is no <a id="opt.inline.href-33"></a><code class="option">href</code> option specified the location of the temporary file is implementation defined, usually the operating system's default location for temporary files.</p><p><span id="impl-11">Conformant processors <span class="rfc2119" id="c.file-create-tempfile.6.1.1">must</span> support URIs whose scheme is <code class="code">file</code> for the <a id="opt.inline.href-34"></a><code class="option">href</code> option of <code class="tag-element">p:file-create-tempfile</code>. It is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> what other schemes are supported by <code class="tag-element">p:file-create-tempfile</code>, and what the interpretation of ‘directory’, ‘file’ and ‘contents’ is for those schemes.</span><a id="err.inline.C0138&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.C0138"><code class="errqname">err:XC0138</code></a>) if an implementation does not support <code class="tag-element">p:file-create-tempfile</code> for a specified scheme. </p><p>If <a id="opt.inline.href-35"></a><code class="option">href</code> is relative, it is made absolute against the base URI of the element on which it is specified (<code class="tag-element">p:with-option</code> or <code class="tag-element">p:file-create-tempfile</code> in the case of a syntactic shortcut value). <a id="err.inline.D0064.6&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.D0064"><code class="errqname">err:XD0064</code></a>) if the base URI is not both absolute and valid according to [<a href="#rfc3986"><span class="abbrev">RFC 3986</span></a>]. <a id="err.inline.C0139&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.C0139"><code class="errqname">err:XC0139</code></a>) if <code class="tag-element">p:file-create-tempfile</code> cannot be completed due to access restrictions in the environment in which the pipeline is run.</p><p>If the <a id="opt.inline.prefix-1"></a><code class="option">prefix</code> option is specified, the filename will begin with that prefix. If the <a id="opt.inline.suffix-1"></a><code class="option">suffix</code> option is specified, the filename will end with that suffix.</p><p>If the <a id="opt.inline.delete-on-exit-1"></a><code class="option">delete-on-exit</code> option is <code class="code">true</code>, an attempt will be made to automatically delete the temporary file when the processor terminates the pipeline. No error will be raised if this is unsuccessful.</p><p>If the temporary file creation is successful, the step returns a <code class="tag-element">c:result</code> element containing the absolute URI of this file.</p><p>If an error occurs and <a id="opt.inline.fail-on-error-12"></a><code class="option">fail-on-error</code> is <code class="code">false</code>, the step returns a <code class="tag-element">c:error</code> element which may contain additional, implementation-defined, information about the nature of the error.</p><p>If an error occurs and <a id="opt.inline.fail-on-error-13"></a><code class="option">fail-on-error</code> is <code class="code">true</code>, one of the following errors is raised:</p><div class="itemizedlist"><ul><li><p><a id="err.inline.D0011.4&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.D0011"><code class="errqname">err:XD0011</code></a>) if the resource referenced by the <a id="opt.inline.href-36"></a><code class="option">href</code> option does not exist, cannot be accessed or is not a directory.</p></li><li><p><a id="err.inline.C0116&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.C0116"><code class="errqname">err:XC0116</code></a>) if the temporary file could not be created.</p></li></ul></div><section id="c.file-create-tempfile.14" class="simplesect"><div class="section-titlepage"><h4>Document properties</h4></div><div class="content"><p>The resulting document has no properties apart from <code class="property">content-type</code>. In particular, it has no <code class="property">base-uri</code>.</p></div></section></div></section><section id="c.file-touch" class="section"><div class="section-titlepage"><h3><bdi class="secno">2.8. </bdi>p:file-touch<a aria-label="§" class="self-link" href="#c.file-touch"></a></h3></div><div class="content"><p>The <code class="code">p:file-touch</code> step updates the modification timestamp of a file.</p><div class="declare-step"><p>Summary</p><table class="tableaux"><thead><tr><th class="port">Output port</th><th class="check">Primary</th><th class="check">Sequence</th><th>Content types</th></tr></thead><tbody><tr><td class="primary">result</td><td class="check">✔ </td><td class="check"> </td><td>application/xml </td></tr></tbody></table><table class="tableaux"><thead><tr><th>Option name</th><th>Type</th><th>Default value</th><th>Required</th></tr></thead><tbody><tr><td class="required"><a href="#opt.inline.href-37">href</a></td><td>xs:anyURI</td><td> </td><td>✔ </td></tr><tr><td><a href="#opt.inline.fail-on-error-14">fail-on-error</a></td><td>xs:boolean</td><td>true()</td><td> </td></tr><tr><td><a href="#opt.inline.timestamp-1">timestamp</a></td><td>xs:dateTime?</td><td>()</td><td> </td></tr></tbody></table><details><summary>Errors</summary><table class="tableaux"><thead><tr><th>Error code</th><th>Description</th></tr></thead><tbody><tr><td class="errcode"><a href="#err.inline.C0136&#34;">err:XC0136</a></td><td class="description">It is a dynamic error if an implementation does not support p:file-touch for a specified scheme.</td></tr><tr><td class="errcode"><a href="#err.inline.C0137&#34;">err:XC0137</a></td><td class="description">It is a dynamic error if p:file-touch cannot be completed due to access restrictions in the environment in which the pipeline is run.</td></tr><tr><td class="errcode"><a href="#err.inline.D0011.5&#34;">err:XD0011</a></td><td class="description">It is a dynamic error if the resource referenced by the href option does not exist and cannot be created or exists and cannot be accessed.</td></tr><tr><td class="errcode"><a href="#err.inline.D0064.7&#34;">err:XD0064</a></td><td class="description">It is a dynamic error if the base URI is not both absolute and valid according to .</td></tr></tbody></table></details><details><summary>Implementation details</summary><table class="tableaux"><thead><tr><th>Implementation</th><th>Description</th></tr></thead><tbody><tr><td><a href="#impl-12">Defined</a></td><td class="description">Conformant processors must support URIs whose scheme is file for the href option of p:file-touch. It is implementation-defined what other schemes are supported by p:file-touch, and what the interpretation of ‘directory’, ‘file’ and ‘contents’ is for those schemes.</td></tr></tbody></table></details><details><summary>Declaration</summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code>&lt;p:declare-step</code><code class="attr type-attr">type</code><code>="</code><code class="value type-value">p:file-touch</code><code>"</code><code>&gt;</code></span><br />     <span class="input"><code>&lt;p:output</code><code class="attr port-attr">port</code><code>="</code><code class="value port-value">result</code><code>"</code><code class="attr primary-attr">primary</code><code>="</code><code class="value primary-value">true</code><code>"</code><code class="attr content-types-attr">content-types</code><code>="</code><code class="value content-types-value">application/xml</code><code>"</code><code>/&gt;</code></span><br />     <span class="opt-req"><code>&lt;p:option</code><code class="attr name-attr">name</code><code>="</code><code class="value name-value">href</code><code>"</code><code class="attr required-attr">required</code><code>="</code><code class="value required-value">true</code><code>"</code><code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:anyURI</code><code>"</code><code>/&gt;</code><code>        </code></span><br />     <span class="opt-opt"><code>&lt;p:option</code><code class="attr name-attr">name</code><code>="</code><code class="value name-value">timestamp</code><code>"</code><code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:dateTime?</code><code>"</code><code>/&gt;</code><code>                </code></span><br />     <span class="opt-opt"><code>&lt;p:option</code><code class="attr name-attr">name</code><code>="</code><code class="value name-value">fail-on-error</code><code>"</code><code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:boolean</code><code>"</code><code class="attr select-attr">select</code><code>="</code><code class="value select-value">true()</code><code>"</code><code>/&gt;</code><code></code></span><br /><code>&lt;/p:declare-step&gt;</code></p></details></div><p>The <code class="tag-element">p:file-touch</code> step updates the modification timestamp of the file specified in the <a id="opt.inline.href-37"></a><code class="option">href</code> option. If the file specified by <a id="opt.inline.href-38"></a><code class="option">href</code> does not exist, an empty file will be created at the given location.</p><p><span id="impl-12">Conformant processors <span class="rfc2119" id="c.file-touch.5.1.1">must</span> support URIs whose scheme is <code class="code">file</code> for the <a id="opt.inline.href-39"></a><code class="option">href</code> option of <code class="tag-element">p:file-touch</code>. It is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> what other schemes are supported by <code class="tag-element">p:file-touch</code>, and what the interpretation of ‘directory’, ‘file’ and ‘contents’ is for those schemes.</span><a id="err.inline.C0136&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.C0136"><code class="errqname">err:XC0136</code></a>) if an implementation does not support <code class="tag-element">p:file-touch</code> for a specified scheme. </p><p>If <a id="opt.inline.href-40"></a><code class="option">href</code> is relative, it is made absolute against the base URI of the element on which it is specified (<code class="tag-element">p:with-option</code> or <code class="tag-element">p:file-touch</code> in the case of a syntactic shortcut value). <a id="err.inline.D0064.7&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.D0064"><code class="errqname">err:XD0064</code></a>) if the base URI is not both absolute and valid according to [<a href="#rfc3986"><span class="abbrev">RFC 3986</span></a>]. <a id="err.inline.C0137&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.C0137"><code class="errqname">err:XC0137</code></a>) if <code class="tag-element">p:file-touch</code> cannot be completed due to access restrictions in the environment in which the pipeline is run.</p><p>If the <a id="opt.inline.timestamp-1"></a><code class="option">timestamp</code> option is set, the file's timestamp is set to this value. Otherwise the file's timestamp is set to the current system's date and time.</p><p>If the operation is successful, the step returns a <code class="tag-element">c:result</code> element containing the absolute URI of the file.</p><p>If an error occurs and <a id="opt.inline.fail-on-error-14"></a><code class="option">fail-on-error</code> is <code class="code">false</code>, the step returns a <code class="tag-element">c:error</code> element which may contain additional, implementation-defined, information about the nature of the error.</p><p>If an error occurs and <a id="opt.inline.fail-on-error-15"></a><code class="option">fail-on-error</code> is <code class="code">true</code>, the following error is raised:</p><div class="itemizedlist"><ul><li><p><a id="err.inline.D0011.5&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.D0011"><code class="errqname">err:XD0011</code></a>) if the resource referenced by the <a id="opt.inline.href-41"></a><code class="option">href</code> option does not exist and cannot be created or exists and cannot be accessed.</p></li></ul></div><section id="c.file-touch.12" class="simplesect"><div class="section-titlepage"><h4>Document properties</h4></div><div class="content"><p>The resulting document has no properties apart from <code class="property">content-type</code>. In particular, it has no <code class="property">base-uri</code>.</p></div></section></div></section></div></section><section class="section" id="errors"><div class="section-titlepage"><h2><bdi class="secno">3. </bdi>Step Errors<a aria-label="§" class="self-link" href="#errors"></a></h2></div><div class="content"><p>These steps can raise <em class="glossterm"><a href="#dt-dynamic-error">dynamic errors</a></em>. </p><p><span style="display: none;" class="delete_version"><span id="dt-dynamic-error" class="termdef">[Definition: A <em class="glossterm">dynamic error</em> is one which occurs while a pipeline is being evaluated.]</span> Examples of dynamic errors include references to URIs that cannot be resolved, steps which fail, and pipelines that exhaust the capacity of an implementation (such as memory or disk space). For a more complete discussion of dynamic errors, see <cite><a href="../xproc/#dynamic-errors">Dynamic Errors</a></cite> in <cite><a href="../xproc/">XProc 3.0: An XML Pipeline Language</a></cite>. </span><span style="display: none;" class="add_version"><span id="dt-dynamic-error" class="termdef">[Definition: A <em class="glossterm">dynamic error</em> is one which occurs while a pipeline is being evaluated.]</span> Examples of dynamic errors include references to URIs that cannot be resolved, steps which fail, and pipelines that exhaust the capacity of an implementation (such as memory or disk space). For a more complete discussion of dynamic errors, see <cite><a href="https://spec.xproc.org/3.1/file//#dynamic-errors">Dynamic Errors</a></cite> in <cite><a href="https://spec.xproc.org/3.1/file//">XProc 3.0: An XML Pipeline Language</a></cite>. </span><span class="modify_version"><span id="dt-dynamic-error" class="termdef">[Definition: A <em class="glossterm">dynamic error</em> is one which occurs while a pipeline is being evaluated.]</span> Examples of dynamic errors include references to URIs that cannot be resolved, steps which fail, and pipelines that exhaust the capacity of an implementation (such as memory or disk space). For a more complete discussion of dynamic errors, see <cite><a href="https://spec.xproc.org/3.1/file//#dynamic-errors">Dynamic Errors</a></cite> in <cite><a href="https://spec.xproc.org/3.1/file//">XProc 3.0: An XML Pipeline Language</a></cite>. </span></p><p>If a step fails due to a dynamic error, failure propagates upwards until either a <code class="tag-element">p:try</code> is encountered or the entire pipeline fails. In other words, outside of a <code class="tag-element">p:try</code>, step failure causes the entire pipeline to fail.</p><p>The following specific errors can be raised by these steps:</p><div id="step-error-summary"><dl class="errs"><dt id="err.C0012"><code class="errqname">err:XC0012</code></dt><dd><p>It is a dynamic error if the contents of the directory path are not available to the step due to access restrictions in the environment in which the pipeline is run.</p><p>See: <a href="#err.inline.C0012">p:directory-list</a></p></dd><dt id="err.C0017"><code class="errqname">err:XC0017</code></dt><dd><p>It is a dynamic error if the absolute path does not identify a directory.</p><p>See: <a href="#err.inline.C0017">p:directory-list</a></p></dd><dt id="err.C0050"><code class="errqname">err:XC0050</code></dt><dd><p>It is a dynamic error the file or directory cannot be copied to the specified location.</p><p>See: <a href="#err.inline.C0050">p:file-copy</a>, <a href="#err.inline.C0050.1">p:file-move</a></p></dd><dt id="err.C0090"><code class="errqname">err:XC0090</code></dt><dd><p>It is a dynamic error if an implementation does not support directory listing for a specified scheme.</p><p>See: <a href="#err.inline.C0090">p:directory-list</a></p></dd><dt id="err.C0113"><code class="errqname">err:XC0113</code></dt><dd><p>It is a dynamic error if an attempt is made to delete a non-empty directory and the recursive option was set to false.</p><p>See: <a href="#err.inline.C0113">p:file-delete</a></p></dd><dt id="err.C0114"><code class="errqname">err:XC0114</code></dt><dd><p>It is a dynamic error if the directory referenced by the href option cannot be created.</p><p>See: <a href="#err.inline.C0114">p:file-mkdir</a></p></dd><dt id="err.C0115"><code class="errqname">err:XC0115</code></dt><dd><p>It is a dynamic error if the resource referenced by the target option is an existing file or other file system object.</p><p>See: <a href="#err.inline.C0115">p:file-move</a></p></dd><dt id="err.C0116"><code class="errqname">err:XC0116</code></dt><dd><p>It is a dynamic error if the temporary file could not be created.</p><p>See: <a href="#err.inline.C0116">p:file-create-tempfile</a></p></dd><dt id="err.C0134"><code class="errqname">err:XC0134</code></dt><dd><p>It is a dynamic error if an implementation does not support p:file-info for a specified scheme.</p><p>See: <a href="#err.inline.C0134">p:file-info</a></p></dd><dt id="err.C0135"><code class="errqname">err:XC0135</code></dt><dd><p>It is a dynamic error if p:file-info is not available to the step due to access restrictions in the environment in which the pipeline is run.</p><p>See: <a href="#err.inline.C0135">p:file-info</a></p></dd><dt id="err.C0136"><code class="errqname">err:XC0136</code></dt><dd><p>It is a dynamic error if an implementation does not support p:file-touch for a specified scheme.</p><p>See: <a href="#err.inline.C0136">p:file-touch</a></p></dd><dt id="err.C0137"><code class="errqname">err:XC0137</code></dt><dd><p>It is a dynamic error if p:file-touch cannot be completed due to access restrictions in the environment in which the pipeline is run.</p><p>See: <a href="#err.inline.C0137">p:file-touch</a></p></dd><dt id="err.C0138"><code class="errqname">err:XC0138</code></dt><dd><p>It is a dynamic error if an implementation does not support p:file-create-tempfile for a specified scheme.</p><p>See: <a href="#err.inline.C0138">p:file-create-tempfile</a></p></dd><dt id="err.C0139"><code class="errqname">err:XC0139</code></dt><dd><p>It is a dynamic error if p:file-create-tempfile cannot be completed due to access restrictions in the environment in which the pipeline is run.</p><p>See: <a href="#err.inline.C0139">p:file-create-tempfile</a></p></dd><dt id="err.C0140"><code class="errqname">err:XC0140</code></dt><dd><p>It is a dynamic error if an implementation does not support p:file-mkdir for a specified scheme.</p><p>See: <a href="#err.inline.C0140">p:file-mkdir</a></p></dd><dt id="err.C0141"><code class="errqname">err:XC0141</code></dt><dd><p>It is a dynamic error if p:file-mkdir not available to the step due to access restrictions in the environment in which the pipeline is run.</p><p>See: <a href="#err.inline.C0141">p:file-mkdir</a></p></dd><dt id="err.C0142"><code class="errqname">err:XC0142</code></dt><dd><p>It is a dynamic error if an implementation does not support p:file-delete for a specified scheme.</p><p>See: <a href="#err.inline.C0142">p:file-delete</a></p></dd><dt id="err.C0143"><code class="errqname">err:XC0143</code></dt><dd><p>It is a dynamic error if p:file-delete is not available to the step due to access restrictions in the environment in which the pipeline is run.</p><p>See: <a href="#err.inline.C0143">p:file-delete</a></p></dd><dt id="err.C0144"><code class="errqname">err:XC0144</code></dt><dd><p>It is a dynamic error if an implementation does not support p:file-copy for a specified scheme.</p><p>See: <a href="#err.inline.C0144">p:file-copy</a></p></dd><dt id="err.C0145"><code class="errqname">err:XC0145</code></dt><dd><p>It is a dynamic error if p:file-copy is not available to the step due to access restrictions in the environment in which the pipeline is run.</p><p>See: <a href="#err.inline.C0145">p:file-copy</a></p></dd><dt id="err.C0147"><code class="errqname">err:XC0147</code></dt><dd><p>It is a dynamic error if a specified value is not a valid XPath regular expression.</p><p>See: <a href="#err.inline.C0147">p:directory-list</a></p></dd><dt id="err.C0148"><code class="errqname">err:XC0148</code></dt><dd><p>It is a dynamic error if an implementation does not support p:file-move for a specified scheme.</p><p>See: <a href="#err.inline.C0148">p:file-move</a></p></dd><dt id="err.C0149"><code class="errqname">err:XC0149</code></dt><dd><p>It is a dynamic error if p:file-move is not available to the step due to access restrictions in the environment in which the pipeline is run.</p><p>See: <a href="#err.inline.C0149">p:file-move</a></p></dd><dt id="err.C0157"><code class="errqname">err:XC0157</code></dt><dd><p>It is a dynamic error if the href option names a directory, but the target option names a file.</p><p>See: <a href="#err.inline.C0157">p:file-copy</a></p></dd><dt id="err.C0158"><code class="errqname">err:XC0158</code></dt><dd><p>It is a dynamic error if the href option names a directory, but the target option names a file.</p><p>See: <a href="#err.inline.C0158">p:file-move</a></p></dd></dl></div></div></section><article id="conformance" class="appendix"><header class="appendix-titlepage"><h2><bdi class="secno">A. </bdi>Conformance<a aria-label="§" class="self-link" href="#conformance"></a></h2></header><div class="content"><p>Conformant processors <span class="rfc2119" id="conformance.2.1">must</span> implement all of the features described in this specification except those that are explicitly identified as optional.</p><p>Some aspects of processor behavior are not completely specified; those features are either <em class="glossterm"><a href="#dt-implementation-dependent">implementation-dependent</a></em> or <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</p><p><span id="dt-implementation-dependent" class="termdef">[Definition: An <em class="glossterm">implementation-dependent</em> feature is one where the implementation has discretion in how it is performed. Implementations are not required to document or explain how <em class="glossterm"><a href="#dt-implementation-dependent">implementation-dependent</a></em> features are performed.]</span></p><p><span id="dt-implementation-defined" class="termdef">[Definition: An <em class="glossterm">implementation-defined</em> feature is one where the implementation has discretion in how it is performed. Conformant implementations <span class="rfc2119" id="dt-implementation-defined.2">must</span> document how <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> features are performed.]</span></p><section id="implementation-defined" class="section"><div class="section-titlepage"><h2><bdi class="secno">A.1. </bdi>Implementation-defined features<a aria-label="§" class="self-link" href="#implementation-defined"></a></h2></div><div class="content"><p>The following features are implementation-defined:</p><ol class="features"><li>How the file steps behave with respect to special files is implementation-defined. See <a href="#introduction" title="Introduction">Section 1, “Introduction”</a>.</li><li>Conformant processors must support directory paths whose scheme is file. It is implementation-defined what other schemes are supported by p:directory-list, and what the interpretation of ‘directory’, ‘file’ and ‘contents’ is for those schemes. See <a href="#c.directory-list" title="p:directory-list">Section 2.1, “p:directory-list”</a>.</li><li>Any file or directory determined to be special by the p:directory-list step may be output using a c:other element but the criteria for marking a file as special are implementation-defined. See <a href="#c.directory-list" title="p:directory-list">Section 2.1, “p:directory-list”</a>.</li><li>The precise meaning of the detailed properties are implementation-defined and may vary according to the URI scheme of the path. See <a href="#c.directory-list" title="p:directory-list">Section 2.1, “p:directory-list”</a>.</li><li>Any other attributes on c:file, c:directory, or c:other are implementation-defined See <a href="#c.directory-list" title="p:directory-list">Section 2.1, “p:directory-list”</a>.</li><li>Conformant processors must support URIs whose scheme is file for the href and target options of p:file-copy. It is implementation-defined what other schemes are supported by p:file-copy, and what the interpretation of ‘directory’, ‘file’ and ‘contents’ is for those schemes. See <a href="#c.file-copy" title="p:file-copy">Section 2.2, “p:file-copy”</a>.</li><li>Conformant processors must support URIs whose scheme is file for the href option of p:file-delete. It is implementation-defined what other schemes are supported by p:file-delete, and what the interpretation of ‘directory’, ‘file’ and ‘contents’ is for those schemes. See <a href="#c.file-delete" title="p:file-delete">Section 2.3, “p:file-delete”</a>.</li><li>Conformant processors must support URIs whose scheme is file for the href option of p:file-info. It is implementation-defined what other schemes are supported by p:file-info, and what the interpretation of ‘directory’, ‘file’ and ‘contents’ is for those schemes. See <a href="#c.file-info" title="p:file-info">Section 2.4, “p:file-info”</a>.</li><li>Conformant processors must support URIs whose scheme is file for the href option of p:file-mkdir. It is implementation-defined what other schemes are supported by p:file-mkdir, and what the interpretation of ‘directory’, ‘file’ and ‘contents’ is for those schemes. See <a href="#c.file-mkdir" title="p:file-mkdir">Section 2.5, “p:file-mkdir”</a>.</li><li>Conformant processors must support URIs whose scheme is file for the href and target options of p:file-move. It is implementation-defined what other schemes are supported by p:file-move, and what the interpretation of ‘directory’, ‘file’ and ‘contents’ is for those schemes. See <a href="#c.file-move" title="p:file-move">Section 2.6, “p:file-move”</a>.</li><li>Conformant processors must support URIs whose scheme is file for the href option of p:file-create-tempfile. It is implementation-defined what other schemes are supported by p:file-create-tempfile, and what the interpretation of ‘directory’, ‘file’ and ‘contents’ is for those schemes. See <a href="#c.file-create-tempfile" title="p:file-create-tempfile">Section 2.7, “p:file-create-tempfile”</a>.</li><li>Conformant processors must support URIs whose scheme is file for the href option of p:file-touch. It is implementation-defined what other schemes are supported by p:file-touch, and what the interpretation of ‘directory’, ‘file’ and ‘contents’ is for those schemes. See <a href="#c.file-touch" title="p:file-touch">Section 2.8, “p:file-touch”</a>.</li></ol></div></section></div></article><article id="references" class="appendix"><header class="appendix-titlepage"><h2><bdi class="secno">B. </bdi>References<a aria-label="§" class="self-link" href="#references"></a></h2></header><div class="content"><div id="references.2" class="bibliolist"><div id="xproc31" class="bibliomixed"><p>[<span class="abbrev">XProc 3.1</span>] <a href="https://spec.xproc.org/lastcall-2024-08/head/xproc/"><span class="citetitle"><cite>XProc 3.1: An XML Pipeline Language</cite></span></a>. Norman Walsh, Achim Berndzen, Gerrit Imsieke and Erik Siegel, editors. </p></div><div id="xpath31-functions" class="bibliomixed"><p>[<span class="abbrev">XPath and XQuery Functions and Operators 3.1</span>] <a href="https://www.w3.org/TR/xpath-functions-31/"><span class="citetitle"><cite>XPath and XQuery Functions and Operators 3.1</cite></span></a>. Michael Kay, editor. W3C Recommendation. 21 March 2017</p></div><div id="rfc3986" class="bibliomixed"><p>[<span class="abbrev">RFC 3986</span>] <a href="https://doi.org/10.17487/RFC3986"><span class="citetitle"><cite>RFC 3986: Uniform Resource Identifier (URI): General Syntax</cite></span></a>. T. Berners-Lee, R. Fielding, and L. Masinter, editors. Internet Engineering Task Force. January, 2005.</p></div></div></div></article><article id="glossary" class="appendix"><header class="appendix-titlepage"><h2><bdi class="secno">C. </bdi>Glossary<a aria-label="§" class="self-link" href="#glossary"></a></h2></header><div class="content"><div class="glosslist"><dl><dt id="glossary.2.1" class="glossentry"><em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em></dt><dd class="glossdef"><p>A <em class="firstterm">dynamic error</em> is one which occurs while a pipeline is being evaluated.</p></dd><dt id="glossary.2.2" class="glossentry"><em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em></dt><dd class="glossdef"><p>An <em class="firstterm">implementation-defined</em> feature is one where the implementation has discretion in how it is performed. Conformant implementations <span class="rfc2119" id="glossary.2.2.2.1.2">must</span> document how <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> features are performed.</p></dd><dt id="glossary.2.3" class="glossentry"><em class="glossterm"><a href="#dt-implementation-dependent">implementation-dependent</a></em></dt><dd class="glossdef"><p>An <em class="firstterm">implementation-dependent</em> feature is one where the implementation has discretion in how it is performed. Implementations are not required to document or explain how <em class="glossterm"><a href="#dt-implementation-dependent">implementation-dependent</a></em> features are performed.</p></dd></dl></div></div></article><article id="changelog" class="appendix"><header class="appendix-titlepage"><h2><bdi class="secno">D. </bdi>Change log<a aria-label="§" class="self-link" href="#changelog"></a></h2></header><div class="content"><p>This appendix catalogs recent non-editorial changes.</p><div class="orderedlist"><ol style="list-style: decimal;"><li><p>Improved the description of include filter processing in <a href="#c.directory-list"><code class="tag-element">p:directory-list</code></a>.</p></li></ol></div></div></article><article id="ancillary-files" class="appendix"><header class="appendix-titlepage"><h2><bdi class="secno">E. </bdi>Ancillary files<a aria-label="§" class="self-link" href="#ancillary-files"></a></h2></header><div class="content"><p>This specification includes by reference a number of ancillary files.</p><div class="variablelist"><dl><dt><span class="term"><a href="steps.xpl">steps.xpl</a></span></dt><dd><p>An XProc step library for the declared steps. </p></dd></dl></div></div></article></article><script src="js/prism.js"></script><script src="js/fixup.js"></script><script src="/js/scroll.js"></script></body></html>