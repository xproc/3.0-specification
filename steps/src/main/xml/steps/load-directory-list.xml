<section xmlns="http://docbook.org/ns/docbook"
         xmlns:e="http://www.w3.org/1999/XSL/Spec/ElementSyntax"
         xmlns:p="http://www.w3.org/ns/xproc"
         xmlns:xi="http://www.w3.org/2001/XInclude"
         xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="c.load-directory-list">
<title>p:load-directory-list</title>

  <para>The <code>p:load-directory-list</code> step has no inputs but produces as its result a sequence of documents
    loaded from a directory, specified by an IRI. If the directory's IRI is relative, it is made absolute against the
    base URI of the element on which it is specified (<tag>p:with-option</tag> or <tag>p:load-directory-list</tag> in
    the case of a syntactic shortcut value).</para>

<p:declare-step type="p:load-directory-list">
  <p:output port="result" content-type="application/xml"/>
  <p:option name="path" required="true" as="xs:anyURI"/>
  <p:option name="include-filter" as="xs:string" e:type="RegularExpression"/>
  <p:option name="exclude-filter" as="xs:string" e:type="RegularExpression"/>
</p:declare-step>

<para><impl>Conformant processors <rfc2119>must</rfc2119> support directory paths whose
scheme is <code>file</code>. It is
<glossterm>implementation-defined</glossterm> what other schemes are
supported by <tag>p:load-directory-list</tag>, and what the interpretation
of 'directory', 'file' and 'contents' is for those schemes.</impl>
</para>

<para><error code="C0017">It is a
<glossterm>dynamic error</glossterm> if the absolute path does not
identify a directory.</error> <error code="C0012">It is a
<glossterm>dynamic error</glossterm> if the contents of the directory
path are not available to the step due to access restrictions in the
environment in which the pipeline is run.</error></para>

<para>If present, the value of the <option>include-filter</option>
or <option>exclude-filter</option>
option <rfc2119>must</rfc2119> be a whitespace separated list of regular expressions as specified in
<biblioref linkend="xpath31-functions"/>,section 7.61 “<literal>Regular Expression
Syntax</literal>”.</para>

<para>If the <option>include-filter</option> pattern matches a
directory entry's name, the entry is included in the output. If the
<option>exclude-filter</option> pattern matches a directory entry's name,
the entry is excluded in the output. If both options are provided, the
include filter is processed first, then the exclude filter. As a result: An
item is included if it matches (at least) one of the
  <option>include-filter</option> values and none of the
  <option>exclude-filter</option> values.</para>

<simplesect>
<title>Document properties</title>
<para feature="directory-list-preserves-none">No document properties are preserved.</para>
</simplesect>
</section>
