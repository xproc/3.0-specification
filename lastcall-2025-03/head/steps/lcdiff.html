<?xml version="1.0" encoding="UTF-8"?><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><!--Generated by the DeltaXML.com xhtml-outfilter.xsl--><!--Using XSL Processor: Saxonica--><title>XProc -[[3.0]]- +[[3.1]]+: Standard Step Library</title><meta charset="utf-8" /><meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport" /><link class="removeOnSave" crossorigin="anonymous" href="https://www.w3.org" rel="preconnect" /><link as="script" class="removeOnSave" href="js/fixup.js" rel="preload" /><link as="style" class="removeOnSave" href="css/base.css" rel="preload" /><link as="image" class="removeOnSave" href="https://www.w3.org/StyleSheets/TR/2016/logos/W3C" rel="preload" /><link rel="stylesheet" href="css/cg-draft.css" /><link rel="stylesheet" href="css/respec.css" /><link rel="alternate" title="XML" href="specification.xml" /><meta name="generator" content="DocBook XSL 2.0 Stylesheets V2.5.0" /><meta name="description" content="Abstract This specification describes the standard step vocabulary of&#xA;  XProc 3.1: An XML Pipeline Language." /><link href="css/default.css" rel="stylesheet" type="text/css" /><link href="css/db-prism.css" rel="stylesheet" type="text/css" /><link rel="stylesheet" type="text/css" href="css/base.css" /><link rel="stylesheet" type="text/css" href="css/xproc.css" /><link rel="stylesheet" type="text/css" href="css/print.css" media="print" /><script type="text/javascript" src="js/dbmodnizr.js"></script><style type="text/css">
          body { margin-top: 50px }
          a.button { background: #DDD; border: 2px outset black; padding: 2px; margin: 2px; font-family: sans-serif; font-size: small;}
          a.button:hover { cursor:pointer; }
          a.button:active { border-style: inset; }
        </style><link rel="stylesheet" href="/css/autodiff.css" /></head><body class="h-entry informative toc-sidebar"><div style="position:fixed; clear:both; top:0px" id="_autodiff_buttons"><p><a class="button" onclick="view('old')">
              View Old
            </a><a class="button" onclick="view('new')">
              View New
            </a><a class="button" onclick="view('both')">
              View Both
            </a><a class="button" onclick="view('only')">
              View Only
            </a><a class="button" onclick="scroll_to('prev')">
              Previous
            </a><a class="button" onclick="scroll_to('next')">
              Next
            </a><span id="__autodiff__"></span></p></div><div id="spec.head" class="head"><a class="logo" href="https://www.w3.org/"><img alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C" width="72" /></a><h1 id="title" class="title p-name">XProc <span class="deltaxml-old" style="background:#FF5555">3.0</span><span class="deltaxml-new" style="background:#90EE90">3.1</span>: Standard Step Library</h1><h2>Community Group Report <time class="dt-published" datetime="2022-09-12"><span class="deltaxml-old" style="background:#FF5555">12 September 2022</span></time><time class="dt-published" datetime="2025-03-16"><span class="deltaxml-new" style="background:#90EE90">16 March 2025</span></time></h2><dl><dt><span class="deltaxml-old" style="background:#FF5555">Specification:</span></dt><dt><span class="deltaxml-new" style="background:#90EE90">Latest editor’s draft:</span></dt><dd><a href="https://spec.xproc.org/master/head/steps/">https://spec.xproc.org/<span class="deltaxml-old" style="background:#FF5555">3.0/</span><span class="deltaxml-new" style="background:#90EE90">master/head/</span>steps/</a></dd><dt>Editors:</dt><dd><span class="personname">Norman Walsh</span></dd><dd><span class="personname">Achim Berndzen</span></dd><dd><span class="personname">Gerrit Imsieke</span></dd><dd><span class="personname">Erik Siegel</span></dd><dt>Participate:</dt><dd><a href="http://github.com/xproc/3.0-steps">GitHub xproc/3.0-steps</a></dd><dd><a href="http://github.com/xproc/3.0-steps/issues">Report an issue</a></dd><dt><span class="deltaxml-old" style="background:#FF5555">Errata:</span></dt><dt><span class="deltaxml-new" style="background:#90EE90">Changes:</span></dt><dd><a href="https://spec.xproc.org/3.0/steps/errata.html"><span class="deltaxml-old" style="background:#FF5555">https://spec.xproc.org/3.0/steps/errata.html</span></a><a href="lcdiff.html"><span class="deltaxml-new" style="background:#90EE90">Diff against the 3.0 specification</span></a></dd><dd><a href="diff.html"><span class="deltaxml-new" style="background:#90EE90">Diff against current “status quo” draft</span></a></dd><dd><a href="http://github.com/xproc//commits/"><span class="deltaxml-new" style="background:#90EE90">Commits for this specification</span></a></dd></dl><p>This document is also available in these non-normative formats: <a href="specification.xml">XML</a><span class="deltaxml-old" style="background:#FF5555">,</span> <a href="steps_a4.pdf"><span class="deltaxml-old" style="background:#FF5555">PDF (A4)</span></a><span class="deltaxml-old" style="background:#FF5555">,</span><span class="deltaxml-new" style="background:#90EE90">and HTML with automatic change markup courtesy of</span> <a href="steps_letter.pdf"><span class="deltaxml-old" style="background:#FF5555">PDF (US Letter)</span></a><a href="http://www.deltaxml.com/"><span class="deltaxml-new" style="background:#90EE90">DeltaXML</span></a>.</p><p class="copyright"><span style="display: none;" class="delete_version"><a href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © <span class="years">2018, 2019, 2020, 2021, 2022</span> the Contributors to the <cite>XProc 3.0: Standard Step Library</cite> specification, published by the <a href="https://www.w3.org/community/xproc-next/">XProc Next Community Group</a> under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a>. A human-readable <a href="https://www.w3.org/community/about/agreements/cla-deed/">summary</a> is available.</span><span style="display: none;" class="add_version"><a href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © <span class="years">2018, 2019, 2020, 2021, 2022, 2023, 2024, 2025</span> the Contributors to the <cite>XProc 3.1: Standard Step Library</cite> specification, published by the <a href="https://www.w3.org/community/xproc-next/">XProc Next Community Group</a> under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a>. A human-readable <a href="https://www.w3.org/community/about/agreements/cla-deed/">summary</a> is available.</span><span class="modify_version"><a href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © <span class="years">2018, 2019, 2020, 2021, 2022<span class="deltaxml-old" style="background:#FF5555"> </span><span class="deltaxml-new" style="background:#90EE90">, 2023, 2024, 2025</span></span><span class="deltaxml-new" style="background:#90EE90"> </span>the Contributors to the <cite>XProc <span class="deltaxml-old" style="background:#FF5555">3.0</span><span class="deltaxml-new" style="background:#90EE90">3.1</span>: Standard Step Library</cite> specification, published by the <a href="https://www.w3.org/community/xproc-next/">XProc Next Community Group</a> under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a>. A human-readable <a href="https://www.w3.org/community/about/agreements/cla-deed/">summary</a> is available.</span></p><hr title="Separator for header" /><section id="abstract" class="introductory"><h2>Abstract</h2><p><span style="display: none;" class="delete_version">This specification describes the standard step vocabulary of <em class="citetitle">XProc 3.0: An XML Pipeline Language</em>.</span><span style="display: none;" class="add_version">This specification describes the standard step vocabulary of <em class="citetitle">XProc 3.1: An XML Pipeline Language</em>.</span><span class="modify_version">This specification describes the standard step vocabulary of <em class="citetitle">XProc <span class="deltaxml-old" style="background:#FF5555">3.0</span><span class="deltaxml-new" style="background:#90EE90">3.1</span>: An XML Pipeline Language</em>.</span></p></section><section id="sotd" class="introductory"><h2>Status of this Document</h2><p>This specification was published by the <a href="https://www.w3.org/community/xproc-next/">XProc Next Community Group</a>. It is not a W3C Standard nor is it on the W3C Standards Track. Please note that under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a> there is a limited opt-out and other conditions apply. Learn more about <a href="https://www.w3.org/community/">W3C Community and Business Groups</a>. </p><p>If you wish to make comments regarding this document, please send them to <a href="mailto:xproc-dev@w3.org">xproc-dev@w3.org</a>. (<a href="mailto:xproc-dev-request@w3.org?subject=subscribe">subscribe</a>, <a href="https://lists.w3.org/Archives/Public/xproc-dev/">archives</a>). </p><div class="note editorial admonition"><h3><span class="deltaxml-new" style="background:#90EE90">Note</span></h3><div class="admonition-body"><p><span class="deltaxml-new" style="background:#90EE90">This draft is a “last call” draft. This version is stable and will not be updated.</span></p></div></div><p>This document is derived from <a href="https://www.w3.org/TR/2010/REC-xproc-20100511/">XProc: An XML Pipeline Language</a> published by the W3C.</p><p><span class="deltaxml-new" style="background:#90EE90">Changes made since the 3.0 specification was published are listed in </span><a href="#changelog" title="Change Log"><span class="deltaxml-new" style="background:#90EE90">Appendix F, </span><i><span class="deltaxml-new" style="background:#90EE90">Change Log</span></i></a><span class="deltaxml-new" style="background:#90EE90">.</span></p></section></div><div class="lists-of-titles"><nav id="toc"><h2 id="TableOfContents">Table of Contents</h2><ol class="toc"><li class="tocline"><a class="tocxref" href="#introduction"><bdi class="secno">1. </bdi>Introduction</a></li><li class="tocline"><a class="tocxref" href="#req-steps"><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2. </span></bdi><span class="deltaxml-old" style="background:#FF5555">The required steps</span></a><a class="tocxref" href="#req-steps"><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2. </span></bdi><span class="deltaxml-new" style="background:#90EE90">Step library</span></a><ul class="toc"><li class="tocline"><a class="tocxref" href="#c.add-attribute"><bdi class="secno">2.1. </bdi>p:add-attribute</a></li><li class="tocline"><a class="tocxref" href="#c.add-xml-base"><bdi class="secno">2.2. </bdi>p:add-xml-base</a></li><li class="tocline"><a class="tocxref" href="#c.archive"><bdi class="secno">2.3. </bdi>p:archive</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#cv.archive-manifest"><bdi class="secno">2.3.1. </bdi>The archive manifest</a></li><li class="tocline"><a class="tocxref" href="#cv.archive-zips"><bdi class="secno">2.3.2. </bdi>Handling of ZIP archives</a></li></ul></li><li class="tocline"><a class="tocxref" href="#c.archive-manifest"><bdi class="secno">2.4. </bdi>p:archive-manifest</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#override-content-type"><bdi class="secno">2.4.1. </bdi>Overriding content types</a></li></ul></li><li class="tocline"><a class="tocxref" href="#c.cast-content-type"><bdi class="secno">2.5. </bdi>p:cast-content-type</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#casting-from-xml"><bdi class="secno">2.5.1. </bdi>Casting from an XML media type</a></li><li class="tocline"><a class="tocxref" href="#casting-from-html"><bdi class="secno">2.5.2. </bdi>Casting from an HTML media type</a></li><li class="tocline"><a class="tocxref" href="#casting-from-json"><bdi class="secno">2.5.3. </bdi>Casting from a JSON media type</a></li><li class="tocline"><a class="tocxref" href="#casting-from-text"><bdi class="secno">2.5.4. </bdi>Casting from a text media type</a></li><li class="tocline"><a class="tocxref" href="#casting-from-other"><bdi class="secno">2.5.5. </bdi>Casting from any other media type</a></li></ul></li><li class="tocline"><a class="tocxref" href="#c.compare"><bdi class="secno">2.6. </bdi>p:compare</a></li><li class="tocline"><a class="tocxref" href="#c.compress"><bdi class="secno">2.7. </bdi>p:compress</a></li><li class="tocline"><a class="tocxref" href="#c.count"><bdi class="secno">2.8. </bdi>p:count</a></li><li class="tocline"><a class="tocxref" href="#c.delete"><bdi class="secno">2.9. </bdi>p:delete</a></li><li class="tocline"><a class="tocxref" href="#c.encode"><bdi class="secno">2.10. </bdi><span class="deltaxml-old" style="background:#FF5555">p:error</span><span class="deltaxml-new" style="background:#90EE90">p:encode</span></a></li><li class="tocline"><a class="tocxref" href="#c.error"><bdi class="secno">2.11. </bdi><span class="deltaxml-old" style="background:#FF5555">p:filter</span><span class="deltaxml-new" style="background:#90EE90">p:error</span></a></li><li class="tocline"><a class="tocxref" href="#c.filter"><bdi class="secno">2.12. </bdi><span class="deltaxml-old" style="background:#FF5555">p:hash</span><span class="deltaxml-new" style="background:#90EE90">p:filter</span></a></li><li class="add_version" style="display: none;"><a class="tocxref" href="#c.hash"><bdi class="secno">2.13. </bdi>p:hash</a></li><li class="tocline"><a class="tocxref" href="#c.hash"><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.13. </span></bdi><span class="deltaxml-new" style="background:#90EE90">p:hash</span></a></li><li class="tocline"><a class="tocxref" href="#c.http-request"><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.13. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.14. </span></bdi>p:http-request</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#c.http-multipart-request"><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.13.1. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.14.1. </span></bdi>Construction of a multipart request</a></li><li class="tocline"><a class="tocxref" href="#c.http-multipart-response"><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.13.2. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.14.2. </span></bdi>Managing a multipart response</a></li></ul></li><li class="tocline"><a class="tocxref" href="#c.identity"><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.14. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.15. </span></bdi>p:identity</a></li><li class="tocline"><a class="tocxref" href="#c.insert"><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.15. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.16. </span></bdi>p:insert</a></li><li class="tocline"><a class="tocxref" href="#c.json-join"><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.16. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.17. </span></bdi>p:json-join</a></li><li class="tocline"><a class="tocxref" href="#c.json-merge"><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.17. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.18. </span></bdi>p:json-merge</a></li><li class="tocline"><a class="tocxref" href="#c.label-elements"><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.18. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.19. </span></bdi>p:label-elements</a></li><li class="tocline"><a class="tocxref" href="#c.load"><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.19. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.20. </span></bdi>p:load</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#c.load.xml"><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.19.1. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.20.1. </span></bdi>Loading XML data</a></li><li class="tocline"><a class="tocxref" href="#c.load.text"><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.19.2. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.20.2. </span></bdi>Loading text data</a></li><li class="tocline"><a class="tocxref" href="#c.load.json"><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.19.3. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.20.3. </span></bdi>Loading JSON data</a></li><li class="tocline"><a class="tocxref" href="#c.load.html"><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.19.4. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.20.4. </span></bdi>Loading HTML data</a></li><li class="tocline"><a class="tocxref" href="#c.load.binary"><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.19.5. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.20.5. </span></bdi>Loading binary data</a></li></ul></li><li class="tocline"><a class="tocxref" href="#c.make-absolute-uris"><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.20. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.21. </span></bdi>p:make-absolute-uris</a></li><li class="add_version" style="display: none;"><a class="tocxref" href="#c.message"><bdi class="secno">2.22. </bdi>p:message</a></li><li class="tocline"><a class="tocxref" href="#c.message"><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.22. </span></bdi><span class="deltaxml-new" style="background:#90EE90">p:message</span></a></li><li class="tocline"><a class="tocxref" href="#c.namespace-delete"><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.21. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.23. </span></bdi>p:namespace-delete</a></li><li class="tocline"><a class="tocxref" href="#c.namespace-rename"><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.22. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.24. </span></bdi>p:namespace-rename</a></li><li class="tocline"><a class="tocxref" href="#c.pack"><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.23. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.25. </span></bdi>p:pack</a></li><li class="tocline"><a class="tocxref" href="#c.rename"><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.24. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.26. </span></bdi>p:rename</a></li><li class="tocline"><a class="tocxref" href="#c.replace"><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.25. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.27. </span></bdi>p:replace</a></li><li class="tocline"><a class="tocxref" href="#c.set-attributes"><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.26. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.28. </span></bdi>p:set-attributes</a></li><li class="tocline"><a class="tocxref" href="#c.set-properties"><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.27. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.29. </span></bdi>p:set-properties</a></li><li class="tocline"><a class="tocxref" href="#c.sink"><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.28. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.30. </span></bdi>p:sink</a></li><li class="add_version" style="display: none;"><a class="tocxref" href="#c.sleep"><bdi class="secno">2.31. </bdi>p:sleep</a></li><li class="tocline"><a class="tocxref" href="#c.sleep"><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.31. </span></bdi><span class="deltaxml-new" style="background:#90EE90">p:sleep</span></a></li><li class="tocline"><a class="tocxref" href="#c.split-sequence"><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.29. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.32. </span></bdi>p:split-sequence</a></li><li class="tocline"><a class="tocxref" href="#c.store"><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.30. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.33. </span></bdi>p:store</a></li><li class="tocline"><a class="tocxref" href="#c.string-replace"><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.31. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.34. </span></bdi>p:string-replace</a></li><li class="tocline"><a class="tocxref" href="#c.text-count"><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.32. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.35. </span></bdi>p:text-count</a></li><li class="tocline"><a class="tocxref" href="#c.text-head"><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.33. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.36. </span></bdi>p:text-head</a></li><li class="tocline"><a class="tocxref" href="#c.text-join"><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.34. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.37. </span></bdi>p:text-join</a></li><li class="tocline"><a class="tocxref" href="#c.text-replace"><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.35. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.38. </span></bdi>p:text-replace</a></li><li class="tocline"><a class="tocxref" href="#c.text-sort"><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.36. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.39. </span></bdi>p:text-sort</a></li><li class="tocline"><a class="tocxref" href="#c.text-tail"><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.37. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.40. </span></bdi>p:text-tail</a></li><li class="tocline"><a class="tocxref" href="#c.unarchive"><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.38. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.41. </span></bdi>p:unarchive</a></li><li class="tocline"><a class="tocxref" href="#c.uncompress"><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.39. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.42. </span></bdi>p:uncompress</a></li><li class="tocline"><a class="tocxref" href="#c.unwrap"><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.40. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.43. </span></bdi>p:unwrap</a></li><li class="tocline"><a class="tocxref" href="#c.uuid"><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.41. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.44. </span></bdi>p:uuid</a></li><li class="tocline"><a class="tocxref" href="#c.wrap"><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.42. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.45. </span></bdi>p:wrap<span class="deltaxml-old" style="background:#FF5555">-sequence</span></a></li><li class="tocline"><a class="tocxref" href="#c.wrap-sequence"><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.43. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.46. </span></bdi>p:wrap<span class="deltaxml-new" style="background:#90EE90">-sequence</span></a></li><li class="tocline"><a class="tocxref" href="#c.www-form-urldecode"><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.44. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.47. </span></bdi>p:www-form-urldecode</a></li><li class="tocline"><a class="tocxref" href="#c.www-form-urlencode"><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.45. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.48. </span></bdi>p:www-form-urlencode</a></li><li class="tocline"><a class="tocxref" href="#c.xinclude"><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.46. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.49. </span></bdi>p:xinclude</a></li><li class="tocline"><a class="tocxref" href="#c.xquery"><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.47. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.50. </span></bdi>p:xquery</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#example-xquery"><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.47.1. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.50.1. </span></bdi>Example</a></li><li class="tocline"><a class="tocxref" href="#c.xquery.17"><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.47.2. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.50.2. </span></bdi>Document properties</a></li></ul></li><li class="tocline"><a class="tocxref" href="#c.xslt"><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.48. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.51. </span></bdi>p:xslt</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#c.xslt.11"><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.48.1. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.51.1. </span></bdi>Invoking an XSLT 3.0 stylesheet</a></li><li class="tocline"><a class="tocxref" href="#c.xslt.12"><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.48.2. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.51.2. </span></bdi>Invoking an XSLT 2.0 stylesheet</a></li><li class="tocline"><a class="tocxref" href="#c.xslt.13"><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.48.3. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.51.3. </span></bdi>Invoking an XSLT 1.0 stylesheet</a></li></ul></li></ul></li><li class="tocline"><a class="tocxref" href="#errors"><bdi class="secno">3. </bdi>Step Errors</a></li><li class="tocline"><a class="tocxref" href="#conformance"><bdi class="secno">A. </bdi>Conformance</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#implementation-defined"><bdi class="secno">A.1. </bdi>Implementation-defined features</a></li><li class="tocline"><a class="tocxref" href="#implementation-dependent"><bdi class="secno">A.2. </bdi>Implementation-dependent features</a></li></ul></li><li class="tocline"><a class="tocxref" href="#references"><bdi class="secno">B. </bdi>References</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#normative-references"><bdi class="secno">B.1. </bdi>Normative References</a></li></ul></li><li class="tocline"><a class="tocxref" href="#glossary"><bdi class="secno">C. </bdi>Glossary</a></li><li class="tocline"><a class="tocxref" href="#ancillary-files"><bdi class="secno">D. </bdi>Ancillary files</a></li><li class="tocline"><a class="tocxref" href="#credits"><bdi class="secno">E. </bdi>Credits</a></li><li class="tocline"><a class="tocxref" href="#changelog"><bdi class="secno">F. </bdi>Change Log</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#changelog.3"><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">F.1. </span></bdi><span class="deltaxml-new" style="background:#90EE90">Backwards incompatible changes</span></a><ul class="toc"><li class="tocline"><a class="tocxref" href="#changelog.3.3"><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">F.1.1. </span></bdi><span class="deltaxml-new" style="background:#90EE90">Substantive changes</span></a></li><li class="tocline"><a class="tocxref" href="#changelog.3.4"><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">F.1.2. </span></bdi><span class="deltaxml-new" style="background:#90EE90">Editorial changes</span></a></li></ul></li></ul></li></ol></nav></div><article class="specification"><section id="introduction" class="section"><div class="section-titlepage"><h2><bdi class="secno">1. </bdi>Introduction<a aria-label="§" class="self-link" href="#introduction"></a></h2></div><div class="content"><p>This specification describes the standard, required atomic XProc steps. A machine-readable description of these steps may be found in <a href="steps.xpl">steps.xpl</a>. </p><p><span style="display: none;" class="delete_version">Many atomic steps are available for [<a><span class="delete_version" href="#xproc30"><span class="abbrev">XProc 3.0</span></span><span class="modify_version" href="#xproc30"><span class="abbrev">XProc 3.0</span></span></a>]. They are described in several specifications. This specification describes the general background common to all steps. A conformant processor <span class="rfc2119" id="introduction.3.2">must</span> implement all of the steps in this specification. Additional steps may also be implemented. </span><span style="display: none;" class="add_version">Many atomic steps are available for [<a><span class="add_version" href="#xproc31"><span class="abbrev">XProc 3.1</span></span><span class="modify_version" href="#xproc31"><span class="abbrev">XProc 3.1</span></span></a>]. They are described in several specifications. This specification describes the general background common to all steps. A conformant processor <span class="rfc2119" id="introduction.3.2">must</span> implement all of the steps in this specification. Additional steps may also be implemented. </span><span class="modify_version">Many atomic steps are available for [<a><span style="display: none;" class="delete_version" href="#xproc30"><span class="abbrev">XProc 3.0</span></span><span style="display: none;" class="add_version" href="#xproc31"><span class="abbrev">XProc 3.1</span></span><span class="modify_version" href="#xproc31"><span class="abbrev">XProc <span class="deltaxml-old" style="background:#FF5555">3.0</span><span class="deltaxml-new" style="background:#90EE90">3.1</span></span></span></a>]. They are described in several specifications. This specification describes the general background common to all steps. A conformant processor <span class="rfc2119" id="introduction.3.2">must</span> implement all of the steps in this specification. Additional steps may also be implemented. </span></p><p>The types given for options should be understood as follows:</p><div class="itemizedlist"><ul><li><p>Types in the XML Schema namespace, identified as QNames with the <code class="code">xs:</code> prefix, as per the XML Schema specification with one exception. Anywhere an <code class="code">xs:QName</code> is specified, an <a href="https://www.w3.org/TR/xquery-30/#doc-xquery30-EQName">EQName</a> is allowed.</p></li><li><p><code class="type">XPathExpression</code>: As a string per [<a href="#xmlschema-2"><span class="abbrev">W3C XML Schema: Part 2</span></a>], including whitespace normalization, and the further requirement to be a conformant Expression per [<a href="#xpath31"><span class="abbrev">XPath 3.1</span></a>]. </p></li><li id="dt-selection-pattern"><p><code class="type">XSLTSelectionPattern</code>: As a string per [<a href="#xslt30"><span class="abbrev">XSLT 3.0</span></a>] conforming to an XSLT <em>selection pattern</em>.</p></li><li><p><code class="type">XPathSequenceType</code>: An XPath <a href="https://www.w3.org/TR/xpath-31/#id-types">sequence type</a>. </p></li><li><p><code class="type">ContentType</code>: A media type as defined in [<a href="#rfc2046"><span class="abbrev">RFC 2046</span></a>]. </p></li><li><p><code class="type">ContentTypes</code>: As a whitespace separated list of media types as defined in [<a href="#rfc2046"><span class="abbrev">RFC 2046</span></a>]. </p></li></ul></div><p>Option values are often expressed using the shortcut syntax. In these cases, the option shortcuts are generally treated as value templates. However, for options of type <code class="code">map()</code> or <code class="code">array()</code>, an expression is <em>required</em> (there is no non-expression string which can ever be a legal value for a map or array). Given that every value entered this way will have to be a value template, and consequently every curly brace contained within the expression will have to be escaped, values of type map or array are defined to be expressions directly.</p><p>Some aspects of documents are generally unchanged by steps:</p><div class="itemizedlist"><ul><li><p>When a step in this library produces an output document, the base URI of the output is the base URI of the step's primary input document unless the step's process explicitly sets an <code class="tag-attribute">xml:base</code> attribute or the step's description explicitly states how the base URI is constructed.</p></li><li><p>Steps are responsible for describing how document properties are transformed as documents flow through them. Many steps claim that the specified properties are preserved. Generally, it is the responsibility of the pipeline author to determine when this is inapropriate and take corrective action. However, it is the responsibility of the pipeline processor to assure that the <code class="code">content-type</code> property is correct. If a step transforms a document in a manner that is inconsistent with the <code class="code">content-type</code> property (accepting an XML document on the source port but producing a text document on the result, for example), the processor must assure that the <code class="code">content-type</code> property is appropriate. If a step changes the <code class="code">content-type</code> in this way, it <span class="rfc2119" id="introduction.8.2.1.5">must</span> also remove the <code class="code">serialization</code> property </p></li></ul></div><p>Also, in this specification, several steps use this element for result information:</p><p class="element-syntax element-syntax-step-vocabulary"><code>&lt;c:result&gt;<br />    <var>string</var><br />&lt;/c:result&gt;</code></p><p>When a step uses an XPath to compute an option value, the XPath context is as defined in [<a><span style="display: none;" class="delete_version" href="#xproc30"><span class="abbrev">XProc 3.0</span></span><span style="display: none;" class="add_version" href="#xproc31"><span class="abbrev">XProc 3.1</span></span><span class="modify_version" href="#xproc31"><span class="abbrev">XProc <span class="deltaxml-old" style="background:#FF5555">3.0</span><span class="deltaxml-new" style="background:#90EE90">3.1</span></span></span></a>].</p><p>When a step specifies a particular version of a technology, implementations <span class="rfc2119" id="introduction.12.1">must</span> implement that version or a subsequent version that is backwards compatible with that version. At user-option, they may implement other non-backwards compatible versions.</p><p>In this specification the words <span class="rfc2119" id="introduction.13.1">must</span>, <span class="rfc2119" id="introduction.13.2">must not</span>, <span class="rfc2119" id="introduction.13.3">should</span>, <span class="rfc2119" id="introduction.13.4">should not</span>, <span class="rfc2119" id="introduction.13.5">may</span> and <span class="rfc2119" id="introduction.13.6">recommended</span> are to be interpreted as described in [<a href="#rfc2119"><span class="abbrev">RFC 2119</span></a>].</p><p><span style="display: none;" class="delete_version">As described in <cite><a href="https://spec.xproc.org/3.0/xproc/#psvi-support">PSVIs in XProc</a></cite> in <cite><a href="https://spec.xproc.org/3.0/xproc/">XProc 3.0: An XML Pipeline Language</a></cite>, steps may not produce PSVI output unless that behavior is explicitly described. In this specification, the steps that may produce PSVI output are the “identity” steps: <a href="#c.identity"><code class="tag-element">p:identity</code></a>, <a href="#c.store"><code class="tag-element">p:store</code></a>, and <a href="#c.split-sequence"><code class="tag-element">p:split-sequence</code></a> (which <span class="rfc2119" id="introduction.14.5">must</span> preserve PSVI properties that appear on their inputs). In addition, the <a href="#c.xslt"><code class="tag-element">p:xslt</code></a> and <a href="#c.xquery"><code class="tag-element">p:xquery</code></a> steps <span class="rfc2119" id="introduction.14.8">may</span> return documents with PSVI annotations.</span><span style="display: none;" class="add_version">As described in <cite><a href="../xproc/#psvi-support">PSVIs in XProc</a></cite> in <cite><a href="../xproc/">XProc 3.0: An XML Pipeline Language</a></cite>, steps may not produce PSVI output unless that behavior is explicitly described. In this specification, the steps that may produce PSVI output are the “identity” steps: <a href="#c.identity"><code class="tag-element">p:identity</code></a>, <a href="#c.store"><code class="tag-element">p:store</code></a>, and <a href="#c.split-sequence"><code class="tag-element">p:split-sequence</code></a> (which <span class="rfc2119" id="introduction.14.5">must</span> preserve PSVI properties that appear on their inputs). In addition, the <a href="#c.xslt"><code class="tag-element">p:xslt</code></a> and <a href="#c.xquery"><code class="tag-element">p:xquery</code></a> steps <span class="rfc2119" id="introduction.14.8">may</span> return documents with PSVI annotations.</span><span class="modify_version">As described in <cite><a href="../xproc/#psvi-support">PSVIs in XProc</a></cite> in <cite><a href="../xproc/">XProc 3.0: An XML Pipeline Language</a></cite>, steps may not produce PSVI output unless that behavior is explicitly described. In this specification, the steps that may produce PSVI output are the “identity” steps: <a href="#c.identity"><code class="tag-element">p:identity</code></a>, <a href="#c.store"><code class="tag-element">p:store</code></a>, and <a href="#c.split-sequence"><code class="tag-element">p:split-sequence</code></a> (which <span class="rfc2119" id="introduction.14.5">must</span> preserve PSVI properties that appear on their inputs). In addition, the <a href="#c.xslt"><code class="tag-element">p:xslt</code></a> and <a href="#c.xquery"><code class="tag-element">p:xquery</code></a> steps <span class="rfc2119" id="introduction.14.8">may</span> return documents with PSVI annotations.</span></p></div></section><section id="req-steps" class="section"><div class="section-titlepage"><h2><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2. </span></bdi><span class="deltaxml-old" style="background:#FF5555">The required steps</span><a aria-label="§" class="self-link" href="#req-steps"></a></h2><h2><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2. </span></bdi><span class="deltaxml-new" style="background:#90EE90">Step library</span><a aria-label="§" class="self-link" href="#req-steps"></a></h2></div><div class="content"><p>A conformant processor must support all of these steps.</p><section id="c.add-attribute" class="section"><div class="section-titlepage"><h3><bdi class="secno">2.1. </bdi>p:add-attribute<a aria-label="§" class="self-link" href="#c.add-attribute"></a></h3></div><div class="content"><p><span style="display: none;" class="delete_version">The <code class="code">p:add-attribute</code> step adds a single attribute to a set of matching elements. The input document specified on the <code class="code">source</code> is processed for matches specified by the <em class="glossterm"><a href="#dt-selection-pattern">selection pattern</a></em> in the <code class="option">match</code> option. For each of these matches, the attribute whose name is specified by the <code class="option">attribute-name</code> option is set to the attribute value specified by the <code class="option">attribute-value</code> option. </span><a id="opt.inline.match-1 opt.inline.attribute-name-1 opt.inline.attribute-value-1"></a>The <code class="code">p:add-attribute</code> step adds a single attribute to a set of matching elements. The input document specified on the <code class="code">source</code> is processed for matches specified by the <em class="glossterm"><a href="#dt-selection-pattern">selection pattern</a></em> in the <code class="option">match</code> option. For each of these matches, the attribute whose name is specified by the <code class="option">attribute-name</code> option is set to the attribute value specified by the <code class="option">attribute-value</code> option. <a id="opt.inline.match-1 opt.inline.attribute-name-1 opt.inline.attribute-value-1"></a>The <code class="code">p:add-attribute</code> step adds a single attribute to a set of matching elements. The input document specified on the <code class="code">source</code> is processed for matches specified by the <em class="glossterm"><a href="#dt-selection-pattern">selection pattern</a></em> in the <code class="option">match</code> option. For each of these matches, the attribute whose name is specified by the <code class="option">attribute-name</code> option is set to the attribute value specified by the <code class="option">attribute-value</code> option. </p><p>The resulting document is produced on the <code class="code">result</code> output port and consists of a exact copy of the input with the exception of the matched elements. Each of the matched elements is copied to the output with the addition of the specified attribute with the specified value. </p><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:add-attribute</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">xml html</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">xml html</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">match</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:string</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'/*'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">         </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">XSLTSelectionPattern</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">attribute-name</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:QName</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">attribute-value</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:string</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><div class="declare-step"><p><span class="deltaxml-new" style="background:#90EE90">Summary</span></p><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Input port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.source-1"><span class="deltaxml-new" style="background:#90EE90">source</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">xml html </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Output port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.result-1"><span class="deltaxml-new" style="background:#90EE90">result</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">xml html </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Option name</span></th><th><span class="deltaxml-new" style="background:#90EE90">Type</span></th><th><span class="deltaxml-new" style="background:#90EE90">Default value</span></th><th><span class="deltaxml-new" style="background:#90EE90">Required</span></th></tr></thead><tbody><tr><td class="required"><a href="#opt.inline.attribute-name-2"><span class="deltaxml-new" style="background:#90EE90">attribute-name</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:QName</span></td><td><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">✔ </span></td></tr><tr><td class="required"><a href="#opt.inline.attribute-value-2"><span class="deltaxml-new" style="background:#90EE90">attribute-value</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:string</span></td><td><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">✔ </span></td></tr><tr><td><a href="#opt.inline.match-2"><span class="deltaxml-new" style="background:#90EE90">match</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">XSLTSelectionPattern</span></td><td><span class="deltaxml-new" style="background:#90EE90">'/*'</span></td><td><span class="deltaxml-new" style="background:#90EE90"> </span></td></tr></tbody></table><details><summary><span class="deltaxml-new" style="background:#90EE90">Errors</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Error code</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td class="errcode"><a href="#err.inline.C0023&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0023</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the selection pattern matches a node which is not an element.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0059&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0059</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the QName value in the attribute-name option is “xmlns” or uses the prefix “xmlns” or any other prefix that resolves to the namespace name http://www.w3.org/2000/xmlns/. </span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Declaration</span></summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:add-attribute</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">xml html</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">xml html</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">match</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:string</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'/*'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">         </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">XSLTSelectionPattern</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">attribute-name</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:QName</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">attribute-value</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:string</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p></details></div><p><a id="opt.inline.match-2 err.inline.C0023&#34;"></a>The value of the <code class="option">match</code> option <span class="rfc2119" id="c.add-attribute.5.2">must</span> be an XSLTSelectionPattern. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the <em class="glossterm"><a href="#dt-selection-pattern">selection pattern</a></em> matches a node which is not an element.<a id="opt.inline.match-2 err.inline.C0023&#34;"></a>The value of the <code class="option">match</code> option <span class="rfc2119" id="c.add-attribute.5.2">must</span> be an XSLTSelectionPattern. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the <em class="glossterm"><a href="#dt-selection-pattern">selection pattern</a></em> matches a node which is not an element.</p><p><span style="display: none;" class="delete_version">The value of the <code class="option">attribute-value</code> option <span class="rfc2119" id="c.add-attribute.6.2">must</span> be a legal attribute value according to XML.</span><a id="opt.inline.attribute-value-2"></a>The value of the <code class="option">attribute-value</code> option <span class="rfc2119" id="c.add-attribute.6.2">must</span> be a legal attribute value according to XML.<a id="opt.inline.attribute-value-2"></a>The value of the <code class="option">attribute-value</code> option <span class="rfc2119" id="c.add-attribute.6.2">must</span> be a legal attribute value according to XML.</p><p><span style="display: none;" class="delete_version">If an attribute with the same name as the expanded name from the <code class="option">attribute-name</code> option exists on the matched element, the value specified in the <code class="option">attribute-value</code> option is used to set the value of that existing attribute. That is, the value of the existing attribute is changed to the <code class="option">attribute-value</code> value. </span><a id="opt.inline.attribute-name-2 opt.inline.attribute-value-3 opt.inline.attribute-value-4"></a>If an attribute with the same name as the expanded name from the <code class="option">attribute-name</code> option exists on the matched element, the value specified in the <code class="option">attribute-value</code> option is used to set the value of that existing attribute. That is, the value of the existing attribute is changed to the <code class="option">attribute-value</code> value. <a id="opt.inline.attribute-name-2 opt.inline.attribute-value-3 opt.inline.attribute-value-4"></a>If an attribute with the same name as the expanded name from the <code class="option">attribute-name</code> option exists on the matched element, the value specified in the <code class="option">attribute-value</code> option is used to set the value of that existing attribute. That is, the value of the existing attribute is changed to the <code class="option">attribute-value</code> value. </p><div id="note-multattr" class="note admonition"><h3>Note</h3><div class="admonition-body"><p>If multiple attributes need to be set on the same element(s), the <a href="#c.set-attributes"><code class="tag-element">p:set-attributes</code></a> step can be used to set them all at once.</p></div></div><p><a id="err.inline.C0059&#34; opt.inline.attribute-name-3"></a>This step cannot be used to add namespace declarations. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the QName value in the <code class="option">attribute-name</code> option <span class="deltaxml-new" style="background:#90EE90">is “</span><code class="code"><span class="deltaxml-new" style="background:#90EE90">xmlns</span></code><span class="deltaxml-new" style="background:#90EE90">” or </span>uses the prefix “<code class="literal">xmlns</code>” or any other prefix that resolves to the namespace name <code class="uri">http://www.w3.org/2000/xmlns/</code>. Note, however, that while namespace declarations cannot be added explicitly by this step, adding an attribute whose name is in a namespace for which there is no namespace declaration in scope on the matched element may result in a namespace binding being added by namespace fixup.<a id="err.inline.C0059&#34; opt.inline.attribute-name-3"></a>This step cannot be used to add namespace declarations. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the QName value in the <code class="option">attribute-name</code> option <span class="deltaxml-new" style="background:#90EE90">is “</span><code class="code"><span class="deltaxml-new" style="background:#90EE90">xmlns</span></code><span class="deltaxml-new" style="background:#90EE90">” or </span>uses the prefix “<code class="literal">xmlns</code>” or any other prefix that resolves to the namespace name <code class="uri">http://www.w3.org/2000/xmlns/</code>. Note, however, that while namespace declarations cannot be added explicitly by this step, adding an attribute whose name is in a namespace for which there is no namespace declaration in scope on the matched element may result in a namespace binding being added by namespace fixup.</p><p>If an attribute named <code class="tag-attribute">xml:base</code> is added or changed, the base URI of the element <span class="rfc2119" id="c.add-attribute.10.2">must</span> also be amended accordingly.</p><section id="c.add-attribute.11" class="simplesect"><div class="section-titlepage"><h4>Document properties</h4></div><div class="content"><p>All document properties are preserved.</p></div></section></div></section><section id="c.add-xml-base" class="section"><div class="section-titlepage"><h3><bdi class="secno">2.2. </bdi>p:add-xml-base<a aria-label="§" class="self-link" href="#c.add-xml-base"></a></h3></div><div class="content"><p><span style="display: none;" class="delete_version">The <code class="code">p:add-xml-base</code> step exposes the base URI via explicit <code class="code">xml:base</code> attributes. The input document from the <code class="port">source</code> port is replicated to the <code class="port">result</code> port with <code class="code">xml:base</code> attributes added to or corrected on each element as specified by the options on this step.</span><a id="port.inline.source-1 port.inline.result-1"></a>The <code class="code">p:add-xml-base</code> step exposes the base URI via explicit <code class="code">xml:base</code> attributes. The input document from the <code class="port">source</code> port is replicated to the <code class="port">result</code> port with <code class="code">xml:base</code> attributes added to or corrected on each element as specified by the options on this step.<a id="port.inline.source-1 port.inline.result-1"></a>The <code class="code">p:add-xml-base</code> step exposes the base URI via explicit <code class="code">xml:base</code> attributes. The input document from the <code class="port">source</code> port is replicated to the <code class="port">result</code> port with <code class="code">xml:base</code> attributes added to or corrected on each element as specified by the options on this step.</p><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:add-xml-base</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">xml html</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">xml html</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">all</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:boolean</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">false()</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">       </span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">relative</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:boolean</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">true()</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">   </span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><div class="declare-step"><p><span class="deltaxml-new" style="background:#90EE90">Summary</span></p><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Input port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.source-2"><span class="deltaxml-new" style="background:#90EE90">source</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">xml html </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Output port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.result-2"><span class="deltaxml-new" style="background:#90EE90">result</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">xml html </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Option name</span></th><th><span class="deltaxml-new" style="background:#90EE90">Type</span></th><th><span class="deltaxml-new" style="background:#90EE90">Default value</span></th></tr></thead><tbody><tr><td><a href="#opt.inline.all-1"><span class="deltaxml-new" style="background:#90EE90">all</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:boolean</span></td><td><span class="deltaxml-new" style="background:#90EE90">false()</span></td></tr><tr><td><a href="#opt.inline.relative-1"><span class="deltaxml-new" style="background:#90EE90">relative</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:boolean</span></td><td><span class="deltaxml-new" style="background:#90EE90">true()</span></td></tr></tbody></table><details><summary><span class="deltaxml-new" style="background:#90EE90">Errors</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Error code</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td class="errcode"><a href="#err.inline.C0058&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0058</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the all and relative options are both true.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Declaration</span></summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:add-xml-base</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">xml html</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">xml html</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">all</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:boolean</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">false()</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">       </span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">relative</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:boolean</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">true()</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">   </span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p></details></div><p><span style="display: none;" class="delete_version">The value of the <code class="option">all</code> option <span class="rfc2119" id="c.add-xml-base.4.2">must</span> be a boolean.</span><a id="opt.inline.all-1"></a>The value of the <code class="option">all</code> option <span class="rfc2119" id="c.add-xml-base.4.2">must</span> be a boolean.<a id="opt.inline.all-1"></a>The value of the <code class="option">all</code> option <span class="rfc2119" id="c.add-xml-base.4.2">must</span> be a boolean.</p><p><span style="display: none;" class="delete_version">The value of the <code class="option">relative</code> option <span class="rfc2119" id="c.add-xml-base.5.2">must</span> be a boolean.</span><a id="opt.inline.relative-1"></a>The value of the <code class="option">relative</code> option <span class="rfc2119" id="c.add-xml-base.5.2">must</span> be a boolean.<a id="opt.inline.relative-1"></a>The value of the <code class="option">relative</code> option <span class="rfc2119" id="c.add-xml-base.5.2">must</span> be a boolean.</p><p><a id="err.inline.C0058&#34; opt.inline.all-2 opt.inline.relative-2"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the <code class="option">all</code> and <code class="option">relative</code> options are <em>both</em><code class="literal">true</code>.<a id="err.inline.C0058&#34; opt.inline.all-2 opt.inline.relative-2"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the <code class="option">all</code> and <code class="option">relative</code> options are <em>both</em><code class="literal">true</code>.</p><p>The <code class="tag-element">p:add-xml-base</code> step modifies its input as follows:</p><div class="itemizedlist"><ul><li><p>For every element that is a child of the document node: force the element to have an <code class="tag-attribute">xml:base</code> attribute with the document's [base URI] property's value as its value.</p></li><li><p>For other elements:</p><div class="itemizedlist"><ul><li><p><span style="display: none;" class="delete_version">If the <code class="option">all</code> option has the value <code class="literal">true</code>, force the element to have an <code class="tag-attribute">xml:base</code> attribute with the element's [base URI] value as its value.</span><a id="opt.inline.all-3"></a>If the <code class="option">all</code> option has the value <code class="literal">true</code>, force the element to have an <code class="tag-attribute">xml:base</code> attribute with the element's [base URI] value as its value.<a id="opt.inline.all-3"></a>If the <code class="option">all</code> option has the value <code class="literal">true</code>, force the element to have an <code class="tag-attribute">xml:base</code> attribute with the element's [base URI] value as its value.</p></li><li><p><span style="display: none;" class="delete_version">If the element's [base URI] is different from the its parent's [base URI], force the element to have an <code class="tag-attribute">xml:base</code> attribute with the following value: if the value of the <code class="option">relative</code> option is <code class="literal">true</code>, a string which, when resolved against the parent's [base URI], will give the element's [base URI], otherwise the element's [base URI].</span><a id="opt.inline.relative-3"></a>If the element's [base URI] is different from the its parent's [base URI], force the element to have an <code class="tag-attribute">xml:base</code> attribute with the following value: if the value of the <code class="option">relative</code> option is <code class="literal">true</code>, a string which, when resolved against the parent's [base URI], will give the element's [base URI], otherwise the element's [base URI].<a id="opt.inline.relative-3"></a>If the element's [base URI] is different from the its parent's [base URI], force the element to have an <code class="tag-attribute">xml:base</code> attribute with the following value: if the value of the <code class="option">relative</code> option is <code class="literal">true</code>, a string which, when resolved against the parent's [base URI], will give the element's [base URI], otherwise the element's [base URI].</p></li><li><p>Otherwise, if there is an <code class="tag-attribute">xml:base</code> attribute present, remove it. </p></li></ul></div></li></ul></div><section id="c.add-xml-base.9" class="simplesect"><div class="section-titlepage"><h4>Document properties</h4></div><div class="content"><p>All document properties are preserved.</p></div></section></div></section><section id="c.archive" class="section"><div class="section-titlepage"><h3><bdi class="secno">2.3. </bdi>p:archive<a aria-label="§" class="self-link" href="#c.archive"></a></h3></div><div class="content"><p><span style="display: none;" class="delete_version">The <code class="code">p:archive</code> step outputs on its <code class="port">result</code> port an archive (usually binary) document, for instance a ZIP file. A specification of the contents of the archive may be specified in a manifest XML document on the <code class="port">manifest</code> port. The step produces a report on the <code class="port">report</code> port, which contains the manifest, amended with additional information about the archiving.</span><a id="port.inline.result-2 port.inline.manifest-1 port.inline.report-1"></a>The <code class="code">p:archive</code> step outputs on its <code class="port">result</code> port an archive (usually binary) document, for instance a ZIP file. A specification of the contents of the archive may be specified in a manifest XML document on the <code class="port">manifest</code> port. The step produces a report on the <code class="port">report</code> port, which contains the manifest, amended with additional information about the archiving.<a id="port.inline.result-2 port.inline.manifest-1 port.inline.report-1"></a>The <code class="code">p:archive</code> step outputs on its <code class="port">result</code> port an archive (usually binary) document, for instance a ZIP file. A specification of the contents of the archive may be specified in a manifest XML document on the <code class="port">manifest</code> port. The step produces a report on the <code class="port">report</code> port, which contains the manifest, amended with additional information about the archiving.</p><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:archive</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">any</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">manifest</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">xml</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code><span class="deltaxml-old" style="background:#FF5555">          </span><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:empty/&gt;</span></code><span class="deltaxml-old" style="background:#FF5555">     </span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:input&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">archive</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">any</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code><span class="deltaxml-old" style="background:#FF5555">          </span><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:empty/&gt;</span></code><span class="deltaxml-old" style="background:#FF5555">     </span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:input&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">any</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">false</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">report</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">application/xml</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">false</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">format</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:QName</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'zip'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">        </span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">relative-to</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:anyURI?</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                </span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">parameters</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">map(xs:QName, item()*)?</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">    </span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><div class="declare-step"><p><span class="deltaxml-new" style="background:#90EE90">Summary</span></p><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Input port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th><th class="binding"><span class="deltaxml-new" style="background:#90EE90">Default binding</span></th></tr></thead><tbody><tr><td class="primary"><a href="#c.archive-def-source"><span class="deltaxml-new" style="background:#90EE90">source</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td><span class="deltaxml-new" style="background:#90EE90">any </span></td><td></td></tr><tr><td><a href="#c.archive-def-manifest"><span class="deltaxml-new" style="background:#90EE90">manifest</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td><span class="deltaxml-new" style="background:#90EE90">xml </span></td><td><span class="deltaxml-new" style="background:#90EE90">p:empty</span></td></tr><tr><td><a href="#c.archive-def-archive"><span class="deltaxml-new" style="background:#90EE90">archive</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td><span class="deltaxml-new" style="background:#90EE90">any </span></td><td><span class="deltaxml-new" style="background:#90EE90">p:empty</span></td></tr></tbody></table><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Output port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th><th class="binding"><span class="deltaxml-new" style="background:#90EE90">Default binding</span></th></tr></thead><tbody><tr><td class="primary"><a href="#c.archive-def-result"><span class="deltaxml-new" style="background:#90EE90">result</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">any </span></td><td></td></tr><tr><td><a href="#c.archive-def-report"><span class="deltaxml-new" style="background:#90EE90">report</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">application/xml </span></td><td></td></tr></tbody></table><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Option name</span></th><th><span class="deltaxml-new" style="background:#90EE90">Type</span></th><th><span class="deltaxml-new" style="background:#90EE90">Default value</span></th></tr></thead><tbody><tr><td><a href="#c.archive-def-format"><span class="deltaxml-new" style="background:#90EE90">format</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:QName</span></td><td><span class="deltaxml-new" style="background:#90EE90">'zip'</span></td></tr><tr><td><a href="#c.archive-def-parameters"><span class="deltaxml-new" style="background:#90EE90">parameters</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">map(xs:QName, item()*)?</span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td></tr><tr><td><a href="#c.archive-def-relative-to"><span class="deltaxml-new" style="background:#90EE90">relative-to</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:anyURI?</span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td></tr></tbody></table><details><summary><span class="deltaxml-new" style="background:#90EE90">Errors</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Error code</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td class="errcode"><a href="#err.inline.C0079&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0079</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the map parameters contains an entry whose key is defined by the implementation and whose value is not valid for that key.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0080&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0080</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the number of documents on the archive does not match the expected number of archive input documents for the given format and command.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0081&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0081</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the format of the archive does not match the format as specified in the format option.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0084&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0084</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if two or more documents appear on the p:archive step's source port that have the same base URI or if any document that appears on the source port has no base URI.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0085&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0085</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the format of the archive cannot be understood, determined and/or processed.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0100&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0100</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the document on port manifest does not conform to the given schema.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0112&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0112</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if more than one document appears on the port manifest.</span></td></tr><tr><td class="errcode"><a href="#err.inline.D0011&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XD0011</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the resource referenced by the href option does not exist, cannot be accessed or is not a file.</span></td></tr><tr><td class="errcode"><a href="#err.inline.D0064&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XD0064</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the base URI is not both absolute and valid according to .</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Implementation details</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Implementation</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td><a href="#impl-1"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">The list of formats supported by the p:archive step is implementation-defined.</span></td></tr><tr><td><a href="#impl-2"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">The list of archive formats that can be modified by p:archive is implementation-defined.</span></td></tr><tr><td><a href="#impl-3"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">The semantics of any additional attributes, elements and their values are implementation-defined.</span></td></tr><tr><td><a href="#impl-4"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is implementation-defined what other formats are supported.</span></td></tr><tr><td><a href="#impl-5"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is implementation-defined how the step determines the archive's format.</span></td></tr><tr><td><a href="#impl-6"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">The c:archive root element may contain additional implementation-defined attributes.</span></td></tr><tr><td><a href="#impl-7"><span class="deltaxml-new" style="background:#90EE90">Dependent</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">If the format imposes constraints on the archive comment (character set or length, for example), how the processor coerces the attribute value to satisfy those constraints is implementation-dependent.</span></td></tr><tr><td><a href="#impl-8"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">The default compression method is implementation-defined. </span></td></tr><tr><td><a href="#impl-9"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is implementation-defined what other compression methods are supported.</span></td></tr><tr><td><a href="#impl-10"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">The default compression level is implementation-defined. </span></td></tr><tr><td><a href="#impl-11"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is implementation-defined what compression levels are supported.</span></td></tr><tr><td><a href="#impl-12"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">The c:entry elements may contain additional implementation-defined attributes.</span></td></tr><tr><td><a href="#impl-13"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">The p:archive step may support additional, implementation-defined commands for ZIP files.</span></td></tr><tr><td><a href="#impl-14"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">The actual parameter names supported by p:archive for a particular format are implementation-defined.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Declaration</span></summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:archive</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">any</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">manifest</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">xml</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code><br /><span class="deltaxml-new" style="background:#90EE90">          </span><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:empty/&gt;</span></code><br /><span class="deltaxml-new" style="background:#90EE90">     </span><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:input&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">archive</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">any</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code><br /><span class="deltaxml-new" style="background:#90EE90">          </span><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:empty/&gt;</span></code><br /><span class="deltaxml-new" style="background:#90EE90">     </span><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:input&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">any</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">false</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">report</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">application/xml</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">false</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">format</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:QName</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'zip'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">        </span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">relative-to</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:anyURI?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                </span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">parameters</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">map(xs:QName, item()*)?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">    </span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p></details></div><p>The <code class="code">p:archive</code> step can perform several different operations on archives. The most common one will likely be creating an archive, but it could also, depending on the archive format, provide services like update, freshen or even merge. The only format implementations <span class="rfc2119" id="c.archive.4.2">must</span> support is [<a href="#zip"><span class="abbrev">ZIP</span></a>]. <span id="impl-1">The list of formats supported by the <code class="tag-element">p:archive</code> step is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span></p><p>The <code class="code">p:archive</code> step has the following input ports:</p><div class="variablelist"><dl><dt><span style="display: none;" class="delete_version"><span class="term"><code class="port">source</code></span></span><span style="display: none;" class="add_version"><span class="term"><a id="c.archive-def-source"></a><a id="port.inline.source-2"></a><code class="port">source</code></span></span><span class="modify_version"><span class="term"><a id="c.archive-def-source"></a><a id="port.inline.source-2"></a><code class="port">source</code></span></span></dt><dd><p><a id="port.inline.source-3 err.inline.C0084&#34; port.inline.source-4 port.inline.source-5"></a>The (primary) <code class="port">source</code> port is used to provide documents to be archived (for instance constructed by other steps). How and which of these documents are processed is governed by the document(s) appearing on the other input ports and the combination of options and parameters. See below for details. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if two or more documents appear on the <code class="code">p:archive</code> step's <code class="port">source</code> port that have the same base URI or if any document that appears on the <code class="port">source</code> port has no base URI.<a id="port.inline.source-3 err.inline.C0084&#34; port.inline.source-4 port.inline.source-5"></a>The (primary) <code class="port">source</code> port is used to provide documents to be archived (for instance constructed by other steps). How and which of these documents are processed is governed by the document(s) appearing on the other input ports and the combination of options and parameters. See below for details. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if two or more documents appear on the <code class="code">p:archive</code> step's <code class="port">source</code> port that have the same base URI or if any document that appears on the <code class="port">source</code> port has no base URI.</p></dd><dt><span style="display: none;" class="delete_version"><span class="term"><code class="port">manifest</code></span></span><span style="display: none;" class="add_version"><span class="term"><a id="c.archive-def-manifest"></a><a id="port.inline.manifest-2"></a><code class="port">manifest</code></span></span><span class="modify_version"><span class="term"><a id="c.archive-def-manifest"></a><a id="port.inline.manifest-2"></a><code class="port">manifest</code></span></span></dt><dd><p><a id="port.inline.manifest-3 err.inline.C0100&#34; port.inline.manifest-4"></a>The <code class="port">manifest</code> port can receive a manifest document that tells the step how to construct the archive. If no manifest document is provided on this port, a default manifest is constructed automatically. See . It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the document on port <code class="port">manifest</code> does not conform to the given schema. <a id="port.inline.manifest-3 err.inline.C0100&#34; port.inline.manifest-4"></a>The <code class="port">manifest</code> port can receive a manifest document that tells the step how to construct the archive. If no manifest document is provided on this port, a default manifest is constructed automatically. See . It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the document on port <code class="port">manifest</code> does not conform to the given schema. </p><p><a id="err.inline.C0112&#34; port.inline.manifest-5"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if more than one document appears on the port <code class="port">manifest</code>.<a id="err.inline.C0112&#34; port.inline.manifest-5"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if more than one document appears on the port <code class="port">manifest</code>.</p><p>The default input for this port is the empty sequence.</p></dd><dt><span style="display: none;" class="delete_version"><span class="term"><code class="port">archive</code></span></span><span style="display: none;" class="add_version"><span class="term"><a id="c.archive-def-archive"></a><a id="port.inline.archive-1"></a><code class="port">archive</code></span></span><span class="modify_version"><span class="term"><a id="c.archive-def-archive"></a><a id="port.inline.archive-1"></a><code class="port">archive</code></span></span></dt><dd><p><span style="display: none;" class="delete_version">The <code class="port">archive</code> port is used to provide the step with existing archive(s) for operations like update, freshen or merge. Handling of ZIP files supports modifying archives appearing on the <code class="port">archive</code> port (<a href="#cv.archive-zips" title="Handling of ZIP archives">Section 2.3.2, “Handling of ZIP archives”</a>). <span id="impl-2">The list of archive formats that can be modified by <code class="tag-element">p:archive</code> is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span> For instance an implementation that supports archive merging may accept more than one document on the <code class="port">archive</code> port.</span><a id="port.inline.archive-2 port.inline.archive-3 port.inline.archive-4"></a>The <code class="port">archive</code> port is used to provide the step with existing archive(s) for operations like update, freshen or merge. Handling of ZIP files supports modifying archives appearing on the <code class="port">archive</code> port (). <span id="impl-2">The list of archive formats that can be modified by <code class="tag-element">p:archive</code> is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span> For instance an implementation that supports archive merging may accept more than one document on the <code class="port">archive</code> port.<a id="port.inline.archive-2 port.inline.archive-3 port.inline.archive-4"></a>The <code class="port">archive</code> port is used to provide the step with existing archive(s) for operations like update, freshen or merge. Handling of ZIP files supports modifying archives appearing on the <code class="port">archive</code> port (). <span id="impl-2">The list of archive formats that can be modified by <code class="tag-element">p:archive</code> is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span> For instance an implementation that supports archive merging may accept more than one document on the <code class="port">archive</code> port.</p><p>The default input for this port is the empty sequence.</p></dd></dl></div><p>The <code class="code">p:archive</code> step has the following output ports:</p><div class="variablelist"><dl><dt><span style="display: none;" class="delete_version"><span class="term"><code class="port">result</code></span></span><span style="display: none;" class="add_version"><span class="term"><a id="c.archive-def-result"></a><a id="port.inline.result-3"></a><code class="port">result</code></span></span><span class="modify_version"><span class="term"><a id="c.archive-def-result"></a><a id="port.inline.result-3"></a><code class="port">result</code></span></span></dt><dd><p><span style="display: none;" class="delete_version">The (primary) <code class="port">result</code> port will output the resulting archive.</span><a id="port.inline.result-4"></a>The (primary) <code class="port">result</code> port will output the resulting archive.<a id="port.inline.result-4"></a>The (primary) <code class="port">result</code> port will output the resulting archive.</p></dd><dt><span style="display: none;" class="delete_version"><span class="term"><code class="port">report</code></span></span><span style="display: none;" class="add_version"><span class="term"><a id="c.archive-def-report"></a><a id="port.inline.report-2"></a><code class="port">report</code></span></span><span class="modify_version"><span class="term"><a id="c.archive-def-report"></a><a id="port.inline.report-2"></a><code class="port">report</code></span></span></dt><dd><p><span style="display: none;" class="delete_version">The <code class="port">report</code> port will output a report about the archiving operation. This will be the same as the manifest (as provided on the <code class="port">manifest</code> port or automatically created if there was no manifest provided), optionally amended with additional attributes and/or elements. <span id="impl-3">The semantics of any additional attributes, elements and their values are <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span></span><a id="port.inline.report-3 port.inline.manifest-6"></a>The <code class="port">report</code> port will output a report about the archiving operation. This will be the same as the manifest (as provided on the <code class="port">manifest</code> port or automatically created if there was no manifest provided), optionally amended with additional attributes and/or elements. <span id="impl-3">The semantics of any additional attributes, elements and their values are <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span><a id="port.inline.report-3 port.inline.manifest-6"></a>The <code class="port">report</code> port will output a report about the archiving operation. This will be the same as the manifest (as provided on the <code class="port">manifest</code> port or automatically created if there was no manifest provided), optionally amended with additional attributes and/or elements. <span id="impl-3">The semantics of any additional attributes, elements and their values are <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span></p></dd></dl></div><p>The <code class="code">p:archive</code> step has the following options:</p><div class="variablelist"><dl><dt><span style="display: none;" class="delete_version"><span class="term"><code class="option">format</code></span></span><span style="display: none;" class="add_version"><span class="term"><a id="c.archive-def-format"></a><a id="opt.inline.format-1"></a><code class="option">format</code></span></span><span class="modify_version"><span class="term"><a id="c.archive-def-format"></a><a id="opt.inline.format-1"></a><code class="option">format</code></span></span></dt><dd><p><span style="display: none;" class="delete_version">The format of the archive can be specified using the <code class="option">format</code> option. Implementations <span class="rfc2119" id="c.archive.10.1.2.1.2">must</span> support the [<a href="#zip"><span class="abbrev">ZIP</span></a>] format, specified with the value <code class="code">zip</code>. <span id="impl-4">It is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> what other formats are supported.</span></span><a id="opt.inline.format-2"></a>The format of the archive can be specified using the <code class="option">format</code> option. Implementations <span class="rfc2119" id="c.archive.10.1.2.1.2">must</span> support the [] format, specified with the value <code class="code">zip</code>. <span id="impl-4">It is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> what other formats are supported.</span><a id="opt.inline.format-2"></a>The format of the archive can be specified using the <code class="option">format</code> option. Implementations <span class="rfc2119" id="c.archive.10.1.2.1.2">must</span> support the [] format, specified with the value <code class="code">zip</code>. <span id="impl-4">It is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> what other formats are supported.</span></p></dd><dt><span class="term"><code class="option"><span class="deltaxml-old" style="background:#FF5555">parameters</span></code></span></dt><dt id="archive-parameters"><span class="term"><a id="c.archive-def-parameters"></a><a id="opt.inline.parameters-1"></a><code class="option"><span class="deltaxml-new" style="background:#90EE90">parameters</span></code></span></dt><dd><p><a id="opt.inline.parameters-2 err.inline.C0079&#34; opt.inline.parameters-3"></a>The <code class="option">parameters</code> option can be used to supply parameters to control the archiving. <span class="deltaxml-old" style="background:#FF5555">The semantics of the keys and the allowed values for these keys</span><span class="deltaxml-new" style="background:#90EE90">Several parameters are defined for processing </span><span class="deltaxml-new" style="background:#90EE90">, but implementations</span> are <span class="deltaxml-new" style="background:#90EE90">free</span><span class="deltaxml-new" style="background:#90EE90"> </span><span class="deltaxml-new" style="background:#90EE90">to use additional parameters and to use parameters for controlling how other archive formats are processed</span>.<span class="deltaxml-new" style="background:#90EE90"> </span>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the map <code class="option">parameters</code> contains an entry whose key is defined by the implementation and whose value is not valid for that key.<a id="opt.inline.parameters-2 err.inline.C0079&#34; opt.inline.parameters-3"></a>The <code class="option">parameters</code> option can be used to supply parameters to control the archiving. <span class="deltaxml-old" style="background:#FF5555">The semantics of the keys and the allowed values for these keys</span><span class="deltaxml-new" style="background:#90EE90">Several parameters are defined for processing </span><span class="deltaxml-new" style="background:#90EE90">, but implementations</span> are <span class="deltaxml-new" style="background:#90EE90">free</span><span class="deltaxml-new" style="background:#90EE90"> </span><span class="deltaxml-new" style="background:#90EE90">to use additional parameters and to use parameters for controlling how other archive formats are processed</span>.<span class="deltaxml-new" style="background:#90EE90"> </span>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the map <code class="option">parameters</code> contains an entry whose key is defined by the implementation and whose value is not valid for that key.</p></dd><dt><span style="display: none;" class="delete_version"><span class="term"><code class="option">relative-to</code></span></span><span style="display: none;" class="add_version"><span class="term"><a id="c.archive-def-relative-to"></a><a id="opt.inline.relative-to-1"></a><code class="option">relative-to</code></span></span><span class="modify_version"><span class="term"><a id="c.archive-def-relative-to"></a><a id="opt.inline.relative-to-1"></a><code class="option">relative-to</code></span></span></dt><dd><p><a id="opt.inline.relative-to-2 port.inline.manifest-7 err.inline.D0064&#34;"></a>The <code class="option">relative-to</code> option is used in creating a manifest when no manifest is provided on the <code class="port">manifest</code> port. If a manifest is present this option is not used. If the option’s value is a relative URI, it is made absolute against the base URI of the element on which it is specified (<code class="tag-element">p:with-option</code> or the step in case of a syntactic shortcut value). It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the base URI is not both absolute and valid according to [].<a id="opt.inline.relative-to-2 port.inline.manifest-7 err.inline.D0064&#34;"></a>The <code class="option">relative-to</code> option is used in creating a manifest when no manifest is provided on the <code class="port">manifest</code> port. If a manifest is present this option is not used. If the option’s value is a relative URI, it is made absolute against the base URI of the element on which it is specified (<code class="tag-element">p:with-option</code> or the step in case of a syntactic shortcut value). It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the base URI is not both absolute and valid according to [].</p></dd></dl></div><p>The format of the archive is determined as follows:</p><div class="itemizedlist"><ul><li><p><a id="opt.inline.format-3 err.inline.C0081&#34; opt.inline.format-4"></a>If the <code class="option">format</code> option is specified, this determines the format of the archive. <span class="deltaxml-old" style="background:#FF5555">Implementations</span><span class="deltaxml-old" style="background:#FF5555"> </span><span class="deltaxml-old" style="background:#FF5555">must</span><span class="deltaxml-old" style="background:#FF5555"> support the [</span><span class="deltaxml-old" style="background:#FF5555">] format, specified with the value </span><span class="deltaxml-old" style="background:#FF5555">zip</span><span class="deltaxml-old" style="background:#FF5555">. </span>It is <span class="deltaxml-old" style="background:#FF5555"> what other formats are supported.</span><span class="deltaxml-old" style="background:#FF5555">It is </span>a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the format of the archive does not match the format as specified in the <code class="option">format</code> option.<a id="opt.inline.format-3 err.inline.C0081&#34; opt.inline.format-4"></a>If the <code class="option">format</code> option is specified, this determines the format of the archive. <span class="deltaxml-old" style="background:#FF5555">Implementations</span><span class="deltaxml-old" style="background:#FF5555"> </span><span class="deltaxml-old" style="background:#FF5555">must</span><span class="deltaxml-old" style="background:#FF5555"> support the [</span><span class="deltaxml-old" style="background:#FF5555">] format, specified with the value </span><span class="deltaxml-old" style="background:#FF5555">zip</span><span class="deltaxml-old" style="background:#FF5555">. </span>It is <span class="deltaxml-old" style="background:#FF5555"> what other formats are supported.</span><span class="deltaxml-old" style="background:#FF5555">It is </span>a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the format of the archive does not match the format as specified in the <code class="option">format</code> option.</p></li><li><p><span style="display: none;" class="delete_version">If no <code class="option">format</code> option is specified or if its value is the empty sequence, the archive's format will be determined by the step, using the <code class="code">content-type</code> document-property of the document on the <code class="port">archive</code> port and/or by inspecting its contents. <span id="impl-7">It is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> how the step determines the archive's format.</span> Implementations <span class="rfc2119" id="c.archive.12.2.1.5">should</span> recognize archives in [<a href="#zip"><span class="abbrev">ZIP</span></a>] format. </span><a id="opt.inline.format-5 port.inline.archive-5"></a>If no <code class="option">format</code> option is specified or if its value is the empty sequence, the archive's format will be determined by the step, using the <code class="code">content-type</code> document-property of the document on the <code class="port">archive</code> port and/or by inspecting its contents. <span id="impl-5">It is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> how the step determines the archive's format.</span> Implementations <span class="rfc2119" id="c.archive.12.2.1.5">should</span> recognize archives in [] format. <a id="opt.inline.format-5 port.inline.archive-5"></a>If no <code class="option">format</code> option is specified or if its value is the empty sequence, the archive's format will be determined by the step, using the <code class="code">content-type</code> document-property of the document on the <code class="port">archive</code> port and/or by inspecting its contents. <span id="impl-5">It is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> how the step determines the archive's format.</span> Implementations <span class="rfc2119" id="c.archive.12.2.1.5">should</span> recognize archives in [] format. </p></li></ul></div><p><a id="err.inline.C0085&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the format of the archive <span class="deltaxml-old" style="background:#FF5555">does not match the specified format, </span>cannot be understood, determined and/or processed.<a id="err.inline.C0085&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the format of the archive <span class="deltaxml-old" style="background:#FF5555">does not match the specified format, </span>cannot be understood, determined and/or processed.</p><section id="cv.archive-manifest" class="section"><div class="section-titlepage"><h4><bdi class="secno">2.3.1. </bdi>The archive manifest<a aria-label="§" class="self-link" href="#cv.archive-manifest"></a></h4></div><div class="content"><p>An archive manifest specifies which documents will be considered in processing the archive. Every entry in the archive must have a corresponding entry in the manifest; if no such entry is provided, one will be constructed automatically (see below). If manifest entries are provided for documents that <em>are not</em> in the archive, how those are processed depends on the archive type and the parameters passed to the step.</p><p>A manifest is represented by a <a href="#cv.archive"><code class="tag-element">c:archive</code></a> root element:</p><p class="element-syntax element-syntax-step-vocabulary"><code>&lt;c:archive&gt;<br />    (<a href="#cv.entry">c:entry</a>* &amp; <br />     <var>anyNonXProcElement</var>*)<br />&lt;/c:archive&gt;</code></p><p><span style="display: none;" class="delete_version"><span id="impl-8">The <code class="code">c:archive</code> root element may contain additional <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> attributes.</span></span><span style="display: none;" class="add_version"><span id="impl-6">The <code class="code">c:archive</code> root element may contain additional <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> attributes.</span></span><span class="modify_version"><span id="impl-6">The <code class="code">c:archive</code> root element may contain additional <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> attributes.</span></span></p><p>All entries in the archive must be present as <a href="#cv.entry"><code class="tag-element">c:entry</code></a> child elements:</p><p class="element-syntax element-syntax-step-vocabulary"><code>&lt;c:entry<br />  <strong>name</strong> = <var>string</var><br />  <strong>href</strong> = <var>anyURI</var><br />  comment? = <var>string</var><br />  method? = <var>string</var><br />  level? = <var>string</var><br />  content-type? = <var>ContentType</var>&gt;<br />    <var>anyElement</var>*<br />&lt;/c:entry&gt;</code></p><div class="itemizedlist"><ul><li><p>The <code class="code">name</code> attribute specifies the name of the entry in the archive.</p></li><li><p>The <code class="code">href</code> attribute must be a valid URI according to [<a href="#rfc3986"><span class="abbrev">RFC 3986</span></a>]. If its value is relative, it is made absolute against the base URI of the manifest. There are two possible cases:</p><div class="itemizedlist"><ul><li><p><span style="display: none;" class="delete_version">If the (absolute) <code class="code">href</code> value is exactly the same as the base URI of a document appearing on the <code class="port">source</code> port, that document is associated with this entry. If this entry is to be added to the archive, the associated document will be used. (The <code class="code">serialization</code> document property can be used to provide serialization properties.) </span><a id="port.inline.source-6"></a>If the (absolute) <code class="code">href</code> value is exactly the same as the base URI of a document appearing on the <code class="port">source</code> port, that document is associated with this entry. If this entry is to be added to the archive, the associated document will be used. (The <code class="code">serialization</code> document property can be used to provide serialization properties.) <a id="port.inline.source-6"></a>If the (absolute) <code class="code">href</code> value is exactly the same as the base URI of a document appearing on the <code class="port">source</code> port, that document is associated with this entry. If this entry is to be added to the archive, the associated document will be used. (The <code class="code">serialization</code> document property can be used to provide serialization properties.) </p></li><li><p><span style="display: none;" class="delete_version">If no document on the <code class="port">source</code> port has a base URI that is exactly the same as the (absolute) <code class="code">href</code> value, the document at the specified URI is associated with this entry. These documents are stored in the archive “as is”; they <span class="rfc2119" id="cv.archive-manifest.8.2.2.2.1.3">must not</span> be parsed and re-serialized.</span><a id="port.inline.source-7"></a>If no document on the <code class="port">source</code> port has a base URI that is exactly the same as the (absolute) <code class="code">href</code> value, the document at the specified URI is associated with this entry. These documents are stored in the archive “as is”; they <span class="rfc2119" id="cv.archive-manifest.8.2.2.2.1.3">must not</span> be parsed and re-serialized.<a id="port.inline.source-7"></a>If no document on the <code class="port">source</code> port has a base URI that is exactly the same as the (absolute) <code class="code">href</code> value, the document at the specified URI is associated with this entry. These documents are stored in the archive “as is”; they <span class="rfc2119" id="cv.archive-manifest.8.2.2.2.1.3">must not</span> be parsed and re-serialized.</p></li></ul></div></li><li class="add_version" style="display: none;"><p>The <code class="code">comment</code> attribute specifies a comment associated with the entry. If the archive format does not support per-entry comments, the value of this attribute is ignored. <span id="impl-7">If the format imposes constraints on the archive comment (character set or length, for example), how the processor coerces the attribute value to satisfy those constraints is <em class="glossterm"><a href="#dt-implementation-dependent">implementation-dependent</a></em>.</span></p></li><li class="modify_version"><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">comment</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute specifies a comment associated with the entry. If the archive format does not support per-entry comments, the value of this attribute is ignored. </span><span id="impl-7"><span class="deltaxml-new" style="background:#90EE90">If the format imposes constraints on the archive comment (character set or length, for example), how the processor coerces the attribute value to satisfy those constraints is </span><em class="glossterm"><a href="#dt-implementation-dependent"><span class="deltaxml-new" style="background:#90EE90">implementation-dependent</span></a></em><span class="deltaxml-new" style="background:#90EE90">.</span></span></p></li><li><p><span style="display: none;" class="delete_version">The <code class="code">method</code> attribute specifies how the entry should be compressed. <span id="impl-9">The default compression method is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>. </span>Implementations <span class="rfc2119" id="cv.archive-manifest.8.3.1.3">must</span> support no compression, specified with the value <code class="code">none</code>. <span id="impl-10">It is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> what other compression methods are supported.</span></span><span style="display: none;" class="add_version">The <code class="code">method</code> attribute specifies how the entry should be compressed. <span id="impl-8">The default compression method is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>. </span>Implementations <span class="rfc2119" id="cv.archive-manifest.8.4.1.3">must</span> support no compression, specified with the value <code class="code">none</code>. <span id="impl-9">It is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> what other compression methods are supported.</span></span><span class="modify_version">The <code class="code">method</code> attribute specifies how the entry should be compressed. <span id="impl-8">The default compression method is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>. </span>Implementations <span class="rfc2119" id="cv.archive-manifest.8.4.1.3">must</span> support no compression, specified with the value <code class="code">none</code>. <span id="impl-9">It is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> what other compression methods are supported.</span></span></p></li><li><p><span style="display: none;" class="delete_version">The <code class="code">level</code> attribute specifies the level of compression. <span id="impl-11">The default compression method is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>. </span><span id="impl-12">It is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> what compression levels are supported.</span></span><span style="display: none;" class="add_version">The <code class="code">level</code> attribute specifies the level of compression. <span id="impl-10">The default compression level is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>. </span><span id="impl-11">It is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> what compression levels are supported.</span></span><span class="modify_version">The <code class="code">level</code> attribute specifies the level of compression. <span id="impl-10">The default compression <span class="deltaxml-old" style="background:#FF5555">method</span><span class="deltaxml-new" style="background:#90EE90">level</span> is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>. </span><span id="impl-11">It is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> what compression levels are supported.</span></span></p></li><li><p>The <code class="code">content-type</code> attribute specifies the content-type of the entry as detected by the processor. It will be set by <a href="#c.archive-manifest"><code class="tag-element">p:archive-manifest</code></a> in constructing the manifest. It will be ignored by <a href="#c.archive"><code class="tag-element">p:archive</code></a>.</p></li></ul></div><p>The <code class="code">p:archive</code> step <span class="rfc2119" id="cv.archive-manifest.9.2">should</span> strive to retain the order of the <a href="#cv.entry"><code class="tag-element">c:entry</code></a> elements when constructing the archive. For instance, an e-book in EPUB format has a non-compressed entry that must be first in the archive. It should be possible to construct such an archive using <code class="code">p:archive</code>.</p><p><span style="display: none;" class="delete_version"><span id="impl-13">The <code class="code">c:entry</code> elements may contain additional <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> attributes.</span></span><span style="display: none;" class="add_version"><span id="impl-12">The <code class="code">c:entry</code> elements may contain additional <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> attributes.</span></span><span class="modify_version"><span id="impl-12">The <code class="code">c:entry</code> elements may contain additional <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> attributes.</span></span></p><p><span style="display: none;" class="delete_version">If no manifest entry is provided for a document appearing on the <code class="port">source</code> port, the step will create a manifest entry for the document. (If no document arrives on the <code class="port">manifest</code> port at all, a complete manifest document will be created.)</span><a id="port.inline.source-8 port.inline.manifest-8"></a>If no manifest entry is provided for a document appearing on the <code class="port">source</code> port, the step will create a manifest entry for the document. (If no document arrives on the <code class="port">manifest</code> port at all, a complete manifest document will be created.)<a id="port.inline.source-8 port.inline.manifest-8"></a>If no manifest entry is provided for a document appearing on the <code class="port">source</code> port, the step will create a manifest entry for the document. (If no document arrives on the <code class="port">manifest</code> port at all, a complete manifest document will be created.)</p><p>In a constructed manifest entry:</p><div class="itemizedlist"><ul><li><p>The entry’s <code class="tag-attribute">href</code> value is the base URI of the document. </p></li><li><p><span style="display: none;" class="delete_version">The entry’s <code class="tag-attribute">name</code> value is derived from the base URI of the document and the <code class="option">relative-to</code> option.</span><a id="opt.inline.relative-to-3"></a>The entry’s <code class="tag-attribute">name</code> value is derived from the base URI of the document and the <code class="option">relative-to</code> option.<a id="opt.inline.relative-to-3"></a>The entry’s <code class="tag-attribute">name</code> value is derived from the base URI of the document and the <code class="option">relative-to</code> option.</p><div class="itemizedlist"><ul><li><p><span style="display: none;" class="delete_version">First, the value of the <code class="option">relative-to</code> option is made absolute. If the initial substring of the base URI is exactly the same as the resulting absolute value, then the <code class="tag-attribute">name</code> is the portion of the base URI that follows that initial substring. </span><a id="opt.inline.relative-to-4"></a>First, the value of the <code class="option">relative-to</code> option is made absolute. If the initial substring of the base URI is exactly the same as the resulting absolute value, then the <code class="tag-attribute">name</code> is the portion of the base URI that follows that initial substring. <a id="opt.inline.relative-to-4"></a>First, the value of the <code class="option">relative-to</code> option is made absolute. If the initial substring of the base URI is exactly the same as the resulting absolute value, then the <code class="tag-attribute">name</code> is the portion of the base URI that follows that initial substring. </p></li><li><p><span style="display: none;" class="delete_version">If there is no <code class="option">relative-to</code> option or if its value is not the initial substring of the base URI of the document, the name is the <em>path</em> portion of the URI (per [<a href="#rfc3986"><span class="abbrev">RFC 3986</span></a>]). If the path portion begins with an initial slash, that slash is removed. </span><a id="opt.inline.relative-to-5"></a>If there is no <code class="option">relative-to</code> option or if its value is not the initial substring of the base URI of the document, the name is the <em>path</em> portion of the URI (per []). If the path portion begins with an initial slash, that slash is removed. <a id="opt.inline.relative-to-5"></a>If there is no <code class="option">relative-to</code> option or if its value is not the initial substring of the base URI of the document, the name is the <em>path</em> portion of the URI (per []). If the path portion begins with an initial slash, that slash is removed. </p></li></ul></div></li></ul></div><p><a id="err.inline.C0100.1&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if an archive manifest is invalid according to the specification.<a id="err.inline.C0100.1&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if an archive manifest is invalid according to the specification.</p></div></section><section id="cv.archive-zips" class="section"><div class="section-titlepage"><h4><bdi class="secno">2.3.2. </bdi>Handling of ZIP archives<a aria-label="§" class="self-link" href="#cv.archive-zips"></a></h4></div><div class="content"><p><span style="display: none;" class="delete_version">The format of the archive can be specified using the <code class="option">format</code> option. Implementations <span class="rfc2119" id="cv.archive-zips.2.2">must</span> support the [<a href="#zip"><span class="abbrev">ZIP</span></a>] format, specified with the value <code class="code">zip</code>. </span><a id="opt.inline.format-6"></a>The format of the archive can be specified using the <code class="option">format</code> option. Implementations <span class="rfc2119" id="cv.archive-zips.2.2">must</span> support the [] format, specified with the value <code class="code">zip</code>. <a id="opt.inline.format-6"></a>The format of the archive can be specified using the <code class="option">format</code> option. Implementations <span class="rfc2119" id="cv.archive-zips.2.2">must</span> support the [] format, specified with the value <code class="code">zip</code>. </p><p>When ZIP archives are processed, every <code class="tag-attribute">name</code> in the manifest must be a relative path without a leading slash.</p><p><span style="display: none;" class="delete_version">The <code class="option">parameters</code> option can be used to supply parameters to control the archiving. For the <code class="code">zip</code> format, the following parameters <span class="rfc2119" id="cv.archive-zips.4.3">must</span> be supported:</span><a id="opt.inline.parameters-4"></a>The <code class="option">parameters</code> option can be used to supply parameters to control the archiving. For the <code class="code">zip</code> format, the following parameters <span class="rfc2119" id="cv.archive-zips.4.3">must</span> be supported:<a id="opt.inline.parameters-4"></a>The <code class="option">parameters</code> option can be used to supply parameters to control the archiving. For the <code class="code">zip</code> format, the following parameters <span class="rfc2119" id="cv.archive-zips.4.3">must</span> be supported:</p><div class="variablelist"><dl><dt><span class="term"><code class="code">command</code></span></dt><dd><p><span style="display: none;" class="delete_version">Specifies what operation to perform. If not specified, its default value is <code class="literal">update</code>. Implementations must support the values <code class="literal">update</code>, <code class="literal">create</code>, <code class="literal">freshen</code>, and <code class="literal">delete</code>. <span id="impl-14">The <a href="#c.archive"><code class="tag-element">p:archive</code></a> step may support additional, <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> commands for ZIP files.</span> Unless otherwise specified, exactly zero or one ZIP archive can appear on the <code class="port">archive</code> port for the commands described below. If no archive appears, a new archive will be created. </span><a id="port.inline.archive-6"></a>Specifies what operation to perform. If not specified, its default value is <code class="literal">update</code>. Implementations must support the values <code class="literal">update</code>, <code class="literal">create</code>, <code class="literal">freshen</code>, and <code class="literal">delete</code>. <span id="impl-13">The <a href="#c.archive"><code class="tag-element">p:archive</code></a> step may support additional, <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> commands for ZIP files.</span> Unless otherwise specified, exactly zero or one ZIP archive can appear on the <code class="port">archive</code> port for the commands described below. If no archive appears, a new archive will be created. <a id="port.inline.archive-6"></a>Specifies what operation to perform. If not specified, its default value is <code class="literal">update</code>. Implementations must support the values <code class="literal">update</code>, <code class="literal">create</code>, <code class="literal">freshen</code>, and <code class="literal">delete</code>. <span id="impl-13">The <a href="#c.archive"><code class="tag-element">p:archive</code></a> step may support additional, <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> commands for ZIP files.</span> Unless otherwise specified, exactly zero or one ZIP archive can appear on the <code class="port">archive</code> port for the commands described below. If no archive appears, a new archive will be created. </p><div class="variablelist"><dl><dt><span class="term"><code class="code">update</code></span></dt><dd><p>When the <code class="code">command</code> parameter is set to <code class="code">update</code>, the ZIP archive will be updated:</p><div class="orderedlist"><ol style="list-style: decimal;"><li><p>For every entry in the ZIP file:</p><div class="itemizedlist"><ul><li><p>If the manifest contains a <a href="#cv.entry"><code class="tag-element">c:entry</code></a> with a matching <code class="tag-attribute">name</code>, the entry in the ZIP file is updated with the document identified by the <a href="#cv.entry"><code class="tag-element">c:entry</code></a> in the manifest.</p></li><li><p>If the manifest does not contain a matching <a href="#cv.entry"><code class="tag-element">c:entry</code></a>, the ZIP entry name is resolved against the base URI of the ZIP file.</p><div class="itemizedlist"><ul><li><p>If a document exists at that URI and either has no timestamp or has a timestamp more than the timestamp in the ZIP file, the entry in the ZIP file will be updated with the document at the resolved URI.</p></li><li><p>If no document exists at that URI, or the document cannot be accessed, or the document has a timestamp and the timestamp in the ZIP archive is more recent than the timestamp of the document, then the ZIP entry is unchanged.</p></li></ul></div></li></ul></div></li><li><p>For every <a href="#cv.entry"><code class="tag-element">c:entry</code></a> in the manifest that does not have a matching entry in the ZIP file, the ZIP file will be updated by adding the document identified by the <a href="#cv.entry"><code class="tag-element">c:entry</code></a> to the ZIP file.</p></li></ol></div></dd><dt><span class="term"><code class="code">create</code></span></dt><dd><p><a id="opt.inline.href-1 err.inline.D0011&#34; opt.inline.href-2"></a>When the <code class="code">command</code> parameter is set to <code class="code">create</code>, the ZIP archive will be created. Creating a ZIP archive behaves exactly like <code class="literal">update</code> except that any timestamps are ignored; every ZIP entry will be updated or created if there is a  or matching document for it. The document must be obtained by dereferencing the URI in <code class="option">href</code>. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the resource referenced by the <code class="option">href</code> option does not exist, cannot be accessed or is not a file.<a id="opt.inline.href-1 err.inline.D0011&#34; opt.inline.href-2"></a>When the <code class="code">command</code> parameter is set to <code class="code">create</code>, the ZIP archive will be created. Creating a ZIP archive behaves exactly like <code class="literal">update</code> except that any timestamps are ignored; every ZIP entry will be updated or created if there is a  or matching document for it. The document must be obtained by dereferencing the URI in <code class="option">href</code>. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the resource referenced by the <code class="option">href</code> option does not exist, cannot be accessed or is not a file.</p></dd><dt><span class="term"><code class="code">freshen</code></span></dt><dd><p>When the <code class="code">command</code> parameter is set to <code class="code">freshen</code>, existing files in the ZIP archive may be updated, but no new files will be added. Freshing a ZIP archive behaves exactly like <code class="literal">update</code> except that only entries that already exist in the ZIP archive are considered.</p></dd><dt><span class="term"><code class="code">delete</code></span></dt><dd><p><span style="display: none;" class="delete_version">When the <code class="code">command</code> parameter is set to <code class="code">delete</code>, exactly one document in ZIP format must appear on the <code class="port">archive</code> port. For every entry in the ZIP file:</span><a id="port.inline.archive-7"></a>When the <code class="code">command</code> parameter is set to <code class="code">delete</code>, exactly one document in ZIP format must appear on the <code class="port">archive</code> port. For every entry in the ZIP file:<a id="port.inline.archive-7"></a>When the <code class="code">command</code> parameter is set to <code class="code">delete</code>, exactly one document in ZIP format must appear on the <code class="port">archive</code> port. For every entry in the ZIP file:</p><div class="itemizedlist"><ul><li><p>If the manifest contains a <a href="#cv.entry"><code class="tag-element">c:entry</code></a> with a matching <code class="tag-attribute">name</code>, the entry in the ZIP file is removed from the ZIP archive.</p></li></ul></div><p>If the manifest contains <a href="#cv.entry"><code class="tag-element">c:entry</code></a> elements which do not have a matching entry in the ZIP archive, they are simply ignored.</p></dd></dl></div></dd><dt><span class="term"><code class="code">level</code></span></dt><dd><p>Specifies the default compression level for files added to or updated in the archive. If the <code class="tag-attribute">level</code> attribute is specified on a <a href="#cv.entry"><code class="tag-element">c:entry</code></a>, its value takes precedence for that entry. Values that must be supported for ZIP files are: “<code class="code">smallest</code>”, “<code class="code">fastest</code>”, “<code class="code">default</code>”, “<code class="code">huffman</code>”, and “<code class="code">none</code>”.</p></dd><dt><span class="term"><code class="code">method</code></span></dt><dd><p>Specifies the default compression method for files added to or updated in the archive. If the <code class="tag-attribute">method</code> attribute is specified on a <a href="#cv.entry"><code class="tag-element">c:entry</code></a>, its value takes precedence for that entry. Values that must be supported for ZIP files are: “<code class="code">none</code>” and “<code class="code">deflated</code>”.</p></dd></dl></div><p><a id="err.inline.C0080&#34; port.inline.archive-8"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the number of documents on the <code class="port">archive</code> does not match the expected number of archive input documents for the given <code class="code">format</code> and <code class="code">command</code>.<a id="err.inline.C0080&#34; port.inline.archive-8"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the number of documents on the <code class="port">archive</code> does not match the expected number of archive input documents for the given <code class="code">format</code> and <code class="code">command</code>.</p><p><span style="display: none;" class="delete_version">Implementations of other archive formats <span class="rfc2119" id="cv.archive-zips.7.1">should</span> use the same parameter names if applicable. The value spaces for these parameters may be format-specific though. <span id="impl-15">The actual parameter names supported by <a href="#c.archive"><code class="tag-element">p:archive</code></a> for a particular format are <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span></span><span style="display: none;" class="add_version">Implementations of other archive formats <span class="rfc2119" id="cv.archive-zips.7.1">should</span> use the same parameter names if applicable. The value spaces for these parameters may be format-specific though. <span id="impl-14">The actual parameter names supported by <a href="#c.archive"><code class="tag-element">p:archive</code></a> for a particular format are <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span></span><span class="modify_version">Implementations of other archive formats <span class="rfc2119" id="cv.archive-zips.7.1">should</span> use the same parameter names if applicable. The value spaces for these parameters may be format-specific though. <span id="impl-14">The actual parameter names supported by <a href="#c.archive"><code class="tag-element">p:archive</code></a> for a particular format are <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span></span></p></div></section><section id="c.archive.16" class="simplesect"><div class="section-titlepage"><h4>Document properties</h4></div><div class="content"><p>No document properties are preserved. The archive has no <code class="property">base-uri</code>.</p></div></section></div></section><section id="c.archive-manifest" class="section"><div class="section-titlepage"><h3><bdi class="secno">2.4. </bdi>p:archive-manifest<a aria-label="§" class="self-link" href="#c.archive-manifest"></a></h3></div><div class="content"><p><span style="display: none;" class="delete_version">The <code class="code">p:archive-manifest</code> creates an XML manifest file describing the contents of the archive appearing on its <code class="port">source</code> port.</span><a id="port.inline.source-9"></a>The <code class="code">p:archive-manifest</code> creates an XML manifest file describing the contents of the archive appearing on its <code class="port">source</code> port.<a id="port.inline.source-9"></a>The <code class="code">p:archive-manifest</code> creates an XML manifest file describing the contents of the archive appearing on its <code class="port">source</code> port.</p><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:archive-manifest</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">any</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">false</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">application/xml</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">false</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">format</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:QName?</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                      </span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">parameters</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">map(xs:QName, item()*)?</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">    </span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">relative-to</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:anyURI?</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                </span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">override-content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">array(array(xs:string))?</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><div class="declare-step"><p><span class="deltaxml-new" style="background:#90EE90">Summary</span></p><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Input port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.source-10"><span class="deltaxml-new" style="background:#90EE90">source</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">any </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Output port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.result-5"><span class="deltaxml-new" style="background:#90EE90">result</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">application/xml </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Option name</span></th><th><span class="deltaxml-new" style="background:#90EE90">Type</span></th><th><span class="deltaxml-new" style="background:#90EE90">Default value</span></th></tr></thead><tbody><tr><td><a href="#opt.inline.format-7"><span class="deltaxml-new" style="background:#90EE90">format</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:QName?</span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td></tr><tr><td><a href="#opt.inline.override-content-types-1"><span class="deltaxml-new" style="background:#90EE90">override-content-types</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">array(array(xs:string))?</span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td></tr><tr><td><a href="#opt.inline.parameters-5"><span class="deltaxml-new" style="background:#90EE90">parameters</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">map(xs:QName, item()*)?</span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td></tr><tr><td><a href="#opt.inline.relative-to-6"><span class="deltaxml-new" style="background:#90EE90">relative-to</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:anyURI?</span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td></tr></tbody></table><details><summary><span class="deltaxml-new" style="background:#90EE90">Errors</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Error code</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td class="errcode"><a href="#err.inline.C0079.1&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0079</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the map parameters contains an entry whose key is defined by the implementation and whose value is not valid for that key.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0081.1&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0081</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the format of the archive does not match the format as specified in the format option.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0085.1&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0085</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the format of the archive cannot be understood, determined and/or processed.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0120&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0120</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the relative-to option is not present and the document on the source port does not have a base URI.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0146&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0146</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the specified value for the override-content-types option is not an array of arrays, where the inner arrays have exactly two members of type xs:string.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0147&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0147</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the specified value is not a valid XPath regular expression.</span></td></tr><tr><td class="errcode"><a href="#err.inline.D0064.1&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XD0064</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the base URI is not both absolute and valid according to .</span></td></tr><tr><td class="errcode"><a href="#err.inline.D0079&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XD0079</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if a supplied content-type is not a valid media type of the form “type/subtype+ext” or “type/subtype”.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Implementation details</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Implementation</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td><a href="#impl-15"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is implementation-defined what other formats are supported.</span></td></tr><tr><td><a href="#impl-16"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is implementation-defined how the step determines the archive's format.</span></td></tr><tr><td><a href="#impl-17"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">The semantics of the keys and the allowed values for these keys are implementation-defined.</span></td></tr><tr><td><a href="#impl-18"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">Additional information provided for entries in p:archive-manifest is implementation-defined.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Declaration</span></summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:archive-manifest</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">any</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">false</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">application/xml</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">false</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">format</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:QName?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                      </span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">parameters</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">map(xs:QName, item()*)?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">    </span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">relative-to</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:anyURI?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                </span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">override-content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">array(array(xs:string))?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p></details></div><p><span style="display: none;" class="delete_version">The <code class="code">p:archive-manifest</code> step inspects the archive appearing on its <code class="port">source</code> port and outputs a manifest describing the contents of the archive on its <code class="port">result</code> port. </span><a id="port.inline.source-10 port.inline.result-5"></a>The <code class="code">p:archive-manifest</code> step inspects the archive appearing on its <code class="port">source</code> port and outputs a manifest describing the contents of the archive on its <code class="port">result</code> port. <a id="port.inline.source-10 port.inline.result-5"></a>The <code class="code">p:archive-manifest</code> step inspects the archive appearing on its <code class="port">source</code> port and outputs a manifest describing the contents of the archive on its <code class="port">result</code> port. </p><p>The format of the archive is determined as follows:</p><div class="itemizedlist"><ul><li><p><span style="display: none;" class="delete_version">If the <code class="option">format</code> option is specified, this determines the format of the archive. Implementations <span class="rfc2119" id="c.archive-manifest.6.1.1.2">must</span> support the [<a href="#zip"><span class="abbrev">ZIP</span></a>] format, specified with the value <code class="code">zip</code>. <span id="impl-16">It is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> what other formats are supported.</span></span><a id="opt.inline.format-7 err.inline.C0081.1&#34; opt.inline.format-8"></a>If the <code class="option">format</code> option is specified, this determines the format of the archive. Implementations <span class="rfc2119" id="c.archive-manifest.6.1.1.2">must</span> support the [] format, specified with the value <code class="code">zip</code>. <span id="impl-15">It is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> what other formats are supported.</span><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><span class="deltaxml-new" style="background:#90EE90">) if the format of the archive does not match the format as specified in the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">format</span></code><span class="deltaxml-new" style="background:#90EE90"> option. </span><a id="opt.inline.format-7 err.inline.C0081.1&#34; opt.inline.format-8"></a>If the <code class="option">format</code> option is specified, this determines the format of the archive. Implementations <span class="rfc2119" id="c.archive-manifest.6.1.1.2">must</span> support the [] format, specified with the value <code class="code">zip</code>. <span id="impl-15">It is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> what other formats are supported.</span><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><span class="deltaxml-new" style="background:#90EE90">) if the format of the archive does not match the format as specified in the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">format</span></code><span class="deltaxml-new" style="background:#90EE90"> option. </span></p></li><li><p><span style="display: none;" class="delete_version">If no <code class="option">format</code> option is specified or if its value is the empty sequence, the archive's format will be determined by the step, using the <code class="code">content-type</code> document-property of the document on the <code class="port">source</code> port and/or by inspecting its contents. <span id="impl-17">It is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> how the step determines the archive's format.</span> Implementations <span class="rfc2119" id="c.archive-manifest.6.2.1.5">should</span> recognize archives in [<a href="#zip"><span class="abbrev">ZIP</span></a>] format. </span><a id="opt.inline.format-9 port.inline.source-11"></a>If no <code class="option">format</code> option is specified or if its value is the empty sequence, the archive's format will be determined by the step, using the <code class="code">content-type</code> document-property of the document on the <code class="port">source</code> port and/or by inspecting its contents. <span id="impl-16">It is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> how the step determines the archive's format.</span> Implementations <span class="rfc2119" id="c.archive-manifest.6.2.1.5">should</span> recognize archives in [] format. <a id="opt.inline.format-9 port.inline.source-11"></a>If no <code class="option">format</code> option is specified or if its value is the empty sequence, the archive's format will be determined by the step, using the <code class="code">content-type</code> document-property of the document on the <code class="port">source</code> port and/or by inspecting its contents. <span id="impl-16">It is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> how the step determines the archive's format.</span> Implementations <span class="rfc2119" id="c.archive-manifest.6.2.1.5">should</span> recognize archives in [] format. </p></li></ul></div><p><a id="err.inline.C0085.1&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the format of the archive <span class="deltaxml-old" style="background:#FF5555">does not match the specified format, </span>cannot be understood, determined and/or processed.<a id="err.inline.C0085.1&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the format of the archive <span class="deltaxml-old" style="background:#FF5555">does not match the specified format, </span>cannot be understood, determined and/or processed.</p><p><a id="opt.inline.parameters-5 err.inline.C0079.1&#34; opt.inline.parameters-6"></a>The <code class="option">parameters</code> option can be used to supply parameters to control the archive manifest generation. <span id="impl-17">The semantics of the keys and the allowed values for these keys are <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the map <code class="option">parameters</code> contains an entry whose key is defined by the implementation and whose value is not valid for that key.<a id="opt.inline.parameters-5 err.inline.C0079.1&#34; opt.inline.parameters-6"></a>The <code class="option">parameters</code> option can be used to supply parameters to control the archive manifest generation. <span id="impl-17">The semantics of the keys and the allowed values for these keys are <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the map <code class="option">parameters</code> contains an entry whose key is defined by the implementation and whose value is not valid for that key.</p><p><a id="opt.inline.relative-to-6 err.inline.D0064.1&#34;"></a>The <code class="option">relative-to</code> option, when present, is used in creating the value of the manifest's <code class="code">c:entry/@href</code> attribute. If the option is relative, it is made absolute against the base URI of the element on which it is specified (<code class="tag-element">p:with-option</code> or the step in case of a syntactic shortcut value). It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the base URI is not both absolute and valid according to [].<a id="opt.inline.relative-to-6 err.inline.D0064.1&#34;"></a>The <code class="option">relative-to</code> option, when present, is used in creating the value of the manifest's <code class="code">c:entry/@href</code> attribute. If the option is relative, it is made absolute against the base URI of the element on which it is specified (<code class="tag-element">p:with-option</code> or the step in case of a syntactic shortcut value). It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the base URI is not both absolute and valid according to [].</p><p><a id="err.inline.C0120&#34; opt.inline.relative-to-7 port.inline.source-12"></a>The generated manifest has the format as described in . Implementations <span class="rfc2119" id="c.archive-manifest.10.2">must</span> supply an  element and its <code class="code">name</code> and <code class="code">content-type</code> attributes for every entry in the archive. The value of the generated manifest's <code class="code">c:entry/@href</code> attribute will be determined in the same way as a base URI of an unarchived document by . It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the <code class="option">relative-to</code> option is not present and the document on the <code class="port">source</code> port does not have a base URI. <span id="impl-18">Additional information provided for entries in <code class="tag-element">p:archive-manifest</code> is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span><a id="err.inline.C0120&#34; opt.inline.relative-to-7 port.inline.source-12"></a>The generated manifest has the format as described in . Implementations <span class="rfc2119" id="c.archive-manifest.10.2">must</span> supply an  element and its <code class="code">name</code> and <code class="code">content-type</code> attributes for every entry in the archive. The value of the generated manifest's <code class="code">c:entry/@href</code> attribute will be determined in the same way as a base URI of an unarchived document by . It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the <code class="option">relative-to</code> option is not present and the document on the <code class="port">source</code> port does not have a base URI. <span id="impl-18">Additional information provided for entries in <code class="tag-element">p:archive-manifest</code> is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span></p><section id="override-content-type" class="section"><div class="section-titlepage"><h4><bdi class="secno">2.4.1. </bdi>Overriding content types<a aria-label="§" class="self-link" href="#override-content-type"></a></h4></div><div class="content"><p><span style="display: none;" class="delete_version">The <code class="option">override-content-types</code> option can be used to partially override the content-type determination mechanism. If present, it must be an array of arrays, where the inner arrays consist of exactly two strings: </span><a id="opt.inline.override-content-types-1"></a>The <code class="option">override-content-types</code> option can be used to partially override the content-type determination mechanism. If present, it must be an array of arrays, where the inner arrays consist of exactly two strings: <a id="opt.inline.override-content-types-1"></a>The <code class="option">override-content-types</code> option can be used to partially override the content-type determination mechanism. If present, it must be an array of arrays, where the inner arrays consist of exactly two strings: </p><div class="itemizedlist"><ul><li><p><a id="err.inline.C0147&#34;"></a>The first member in an inner array <span class="rfc2119" id="override-content-type.3.1.1.1">must</span> be a regular expression as specified in [], section 7.61 “<code class="literal">Regular Expression Syntax</code>”. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the specified value is not a valid XPath regular expression.<a id="err.inline.C0147&#34;"></a>The first member in an inner array <span class="rfc2119" id="override-content-type.3.1.1.1">must</span> be a regular expression as specified in [], section 7.61 “<code class="literal">Regular Expression Syntax</code>”. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the specified value is not a valid XPath regular expression.</p></li><li><p><a id="err.inline.D0079&#34;"></a>The second member in an inner array <span class="rfc2119" id="override-content-type.3.2.1.1">must</span> be a valid a MIME content-type. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if a supplied content-type is not a valid media type of the form “<code class="literal"><em class="replaceable"><code>type</code></em>/<em class="replaceable"><code>subtype</code></em>+<em class="replaceable"><code>ext</code></em></code>” or “<code class="literal"><em class="replaceable"><code>type</code></em>/<em class="replaceable"><code>subtype</code></em></code>”.<a id="err.inline.D0079&#34;"></a>The second member in an inner array <span class="rfc2119" id="override-content-type.3.2.1.1">must</span> be a valid a MIME content-type. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if a supplied content-type is not a valid media type of the form “<code class="literal"><em class="replaceable"><code>type</code></em>/<em class="replaceable"><code>subtype</code></em>+<em class="replaceable"><code>ext</code></em></code>” or “<code class="literal"><em class="replaceable"><code>type</code></em>/<em class="replaceable"><code>subtype</code></em></code>”.</p></li></ul></div><p><a id="err.inline.C0146&#34; opt.inline.override-content-types-2"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the specified value for the <code class="option">override-content-types</code> option is not an array of arrays, where the inner arrays have exactly two members of type <code class="code">xs:string</code>.<a id="err.inline.C0146&#34; opt.inline.override-content-types-2"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the specified value for the <code class="option">override-content-types</code> option is not an array of arrays, where the inner arrays have exactly two members of type <code class="code">xs:string</code>.</p><p>Determining an archive entry's content-type is as follows:</p><div class="itemizedlist"><ul><li><p>The XPath regular expressions (the first members of the inner arrays) will be matched against the path of the entry <em>in</em> the archive. This will be done in the order of appearance in the outer array (so order is significant). The matching is done unanchored: it is a match if the regular expression matches part of the entry's path. Informally: matching behaves like applying the XPath <code class="code">matches#2</code> function, like in <code class="code">matches($path-in-archive, $regular-expression)</code>.</p><div class="note admonition"><h3>Note</h3><div class="admonition-body"><p>Depending on how archives are constructed, the path of an entry in an archive can be with or without a leading slash. Usually it will be without. For archives constructed by <a href="#c.archive"><code class="tag-element">p:archive</code></a> no leading slash will be present.</p></div></div></li><li><p>If a match is found, the content-type (the second member of the inner array for which the match was found) is used as the entry's content-type.</p></li><li><p>If no match was found for all inner arrays, the normal (implementation-defined) mechanism for determining the content-type is used. </p></li></ul></div><p><span style="display: none;" class="delete_version">For example: setting the <code class="option">override-content-types</code> option to <code class="code">[ ['.rels$', 'application/xml'], ['^special/', 'application/octet-stream'] ]</code> means that all files ending with <code class="code">.rels</code> will get the content-type <code class="code">application/xml</code>. All files in the archive's <code class="code">special</code> directory (including sub-directories) will get the content-type <code class="code">application/octet-stream</code>.</span><a id="opt.inline.override-content-types-3"></a>For example: setting the <code class="option">override-content-types</code> option to <code class="code">[ ['.rels$', 'application/xml'], ['^special/', 'application/octet-stream'] ]</code> means that all files ending with <code class="code">.rels</code> will get the content-type <code class="code">application/xml</code>. All files in the archive's <code class="code">special</code> directory (including sub-directories) will get the content-type <code class="code">application/octet-stream</code>.<a id="opt.inline.override-content-types-3"></a>For example: setting the <code class="option">override-content-types</code> option to <code class="code">[ ['.rels$', 'application/xml'], ['^special/', 'application/octet-stream'] ]</code> means that all files ending with <code class="code">.rels</code> will get the content-type <code class="code">application/xml</code>. All files in the archive's <code class="code">special</code> directory (including sub-directories) will get the content-type <code class="code">application/octet-stream</code>.</p></div></section><section id="c.archive-manifest.12" class="simplesect"><div class="section-titlepage"><h4>Document properties</h4></div><div class="content"><p>No document properties are preserved. The manifest has no <code class="property">base-uri</code>.</p></div></section></div></section><section id="c.cast-content-type" class="section"><div class="section-titlepage"><h3><bdi class="secno">2.5. </bdi>p:cast-content-type<a aria-label="§" class="self-link" href="#c.cast-content-type"></a></h3></div><div class="content"><p><span style="display: none;" class="delete_version">The <code class="tag-element">p:cast-content-type</code> step creates a new document by changing the media type of its input. If the value of the <code class="option">content-type</code> option and the current media type of the document on <code class="port">source</code> port are the same, this document will appear unchanged on <code class="port">result</code> port.</span><a id="opt.inline.content-type-1 port.inline.source-13 port.inline.result-6"></a>The <code class="tag-element">p:cast-content-type</code> step creates a new document by changing the media type of its input. If the value of the <code class="option">content-type</code> option and the current media type of the document on <code class="port">source</code> port are the same, this document will appear unchanged on <code class="port">result</code> port.<a id="opt.inline.content-type-1 port.inline.source-13 port.inline.result-6"></a>The <code class="tag-element">p:cast-content-type</code> step creates a new document by changing the media type of its input. If the value of the <code class="option">content-type</code> option and the current media type of the document on <code class="port">source</code> port are the same, this document will appear unchanged on <code class="port">result</code> port.</p><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:cast-content-type</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">any</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">any</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">content-type</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:string</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">parameters</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">map(xs:QName,item()*)?</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">     </span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><div class="declare-step"><p><span class="deltaxml-new" style="background:#90EE90">Summary</span></p><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Input port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.source-14"><span class="deltaxml-new" style="background:#90EE90">source</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">any </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Output port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.result-7"><span class="deltaxml-new" style="background:#90EE90">result</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">any </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Option name</span></th><th><span class="deltaxml-new" style="background:#90EE90">Type</span></th><th><span class="deltaxml-new" style="background:#90EE90">Default value</span></th><th><span class="deltaxml-new" style="background:#90EE90">Required</span></th></tr></thead><tbody><tr><td class="required"><a href="#opt.inline.content-type-2"><span class="deltaxml-new" style="background:#90EE90">content-type</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:string</span></td><td><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">✔ </span></td></tr><tr><td><a href="#opt.inline.parameters-7"><span class="deltaxml-new" style="background:#90EE90">parameters</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">map(xs:QName,item()*)?</span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td><td><span class="deltaxml-new" style="background:#90EE90"> </span></td></tr></tbody></table><details><summary><span class="deltaxml-new" style="background:#90EE90">Errors</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Error code</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td class="errcode"><a href="#err.inline.C0052&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0052</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the encoding specified is not supported by the implementation.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0071&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0071</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the p:cast-content-type step cannot perform the requested cast.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0072&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0072</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the c:data contains content is not a valid string according to the encoding.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0073&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0073</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the c:data element does not have a content-type attribute.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0074&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0074</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the content-type is supplied and is not the same as the content-type specified on the c:data element.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0079.2&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0079</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the map parameters contains an entry whose key is defined by the implementation and whose value is not valid for that key.</span></td></tr><tr><td class="errcode"><a href="#err.inline.D0014&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XD0014</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error for any unqualified attribute names to appear on a c:param-set element.</span></td></tr><tr><td class="errcode"><a href="#err.inline.D0018&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XD0018</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the parameter list contains any elements other than c:param.</span></td></tr><tr><td class="errcode"><a href="#err.inline.D0025&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XD0025</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the namespace attribute is specified, the name contains a colon, and the specified namespace is not the same as the in-scope namespace binding for the specified prefix.</span></td></tr><tr><td class="errcode"><a href="#err.inline.D0049&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XD0049</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the text value is not a well-formed XML document</span></td></tr><tr><td class="errcode"><a href="#err.inline.D0057&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XD0057</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the text document does not conform to the JSON grammar, unless the parameter liberal is true and the processor chooses to accept the deviation.</span></td></tr><tr><td class="errcode"><a href="#err.inline.D0058&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XD0058</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the parameter duplicates is reject and the text document contains a JSON object with duplicate keys.</span></td></tr><tr><td class="errcode"><a href="#err.inline.D0059&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XD0059</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the parameter map contains an entry whose key is defined in the specification of fn:parse-json and whose value is not valid for that key, or if it contains an entry with the key fallback when the parameter escape with true() is also present.</span></td></tr><tr><td class="errcode"><a href="#err.inline.D0060&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XD0060</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the text document can not be converted into the XPath data model</span></td></tr><tr><td class="errcode"><a href="#err.inline.D0079.1&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XD0079</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if a supplied content-type is not a valid media type of the form “type/subtype+ext” or “type/subtype”.</span></td></tr><tr><td class="errcode"><a href="#err.inline.D0081&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XD0081</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the c:param element has a value attribute and is not empty.</span></td></tr><tr><td class="errcode"><a href="#err.inline.D0082&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XD0082</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the c:param specifies a sequence type and the value does not satisfy that type.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Implementation details</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Implementation</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td><a href="#impl-19"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">The semantics of the keys and the allowed values for these keys are implementation-defined.</span></td></tr><tr><td><a href="#impl-20"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is implementation-defined if any additional conversions are supported.</span></td></tr><tr><td><a href="#impl-21"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">Casting from an XML media type to any other media type when the input document is not a c:data document is implementation-defined.</span></td></tr><tr><td><a href="#impl-22"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">Casting from an HTML media type to a JSON media type is implementation-defined.</span></td></tr><tr><td><a href="#impl-23"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">Casting from an HTML media type to any other media type is implementation-defined.</span></td></tr><tr><td><a href="#impl-24"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is implementation-defined whether other result formats are supported.</span></td></tr><tr><td><a href="#impl-25"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">Casting from a JSON media type to an HTML media type is implementation-defined.</span></td></tr><tr><td><a href="#impl-26"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">Casting from a JSON media type to any other media type is implementation-defined.</span></td></tr><tr><td><a href="#impl-27"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">The precise way in which text documents are parsed into the XPath data model is implementation-defined.</span></td></tr><tr><td><a href="#impl-28"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">Casting from a text media type to any other media type is implementation-defined.</span></td></tr><tr><td><a href="#impl-29"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">Casting from any other media type to a HTML media type, a JSON media type or a text document is implementation-defined.</span></td></tr><tr><td><a href="#impl-30"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">Casting from any other media type to any other media type is implementation-defined.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Declaration</span></summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:cast-content-type</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">any</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">any</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">content-type</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:string</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">parameters</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">map(xs:QName,item()*)?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">     </span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p></details></div><p><a id="err.inline.D0079.1&#34; err.inline.C0071&#34;"></a>The input document is transformed from one media type to another. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if a supplied content-type is not a valid media type of the form “<code class="literal"><em class="replaceable"><code>type</code></em>/<em class="replaceable"><code>subtype</code></em>+<em class="replaceable"><code>ext</code></em></code>” or “<code class="literal"><em class="replaceable"><code>type</code></em>/<em class="replaceable"><code>subtype</code></em></code>”. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the <code class="tag-element">p:cast-content-type</code> step cannot perform the requested cast. <a id="err.inline.D0079.1&#34; err.inline.C0071&#34;"></a>The input document is transformed from one media type to another. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if a supplied content-type is not a valid media type of the form “<code class="literal"><em class="replaceable"><code>type</code></em>/<em class="replaceable"><code>subtype</code></em>+<em class="replaceable"><code>ext</code></em></code>” or “<code class="literal"><em class="replaceable"><code>type</code></em>/<em class="replaceable"><code>subtype</code></em></code>”. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the <code class="tag-element">p:cast-content-type</code> step cannot perform the requested cast. </p><p><a id="opt.inline.parameters-7 err.inline.C0079.2&#34; opt.inline.parameters-8"></a>The <code class="option">parameters</code> can be used to supply parameters to control casting. <span id="impl-19">The semantics of the keys and the allowed values for these keys are <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the map <code class="option">parameters</code> contains an entry whose key is defined by the implementation and whose value is not valid for that key.<a id="opt.inline.parameters-7 err.inline.C0079.2&#34; opt.inline.parameters-8"></a>The <code class="option">parameters</code> can be used to supply parameters to control casting. <span id="impl-19">The semantics of the keys and the allowed values for these keys are <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the map <code class="option">parameters</code> contains an entry whose key is defined by the implementation and whose value is not valid for that key.</p><section id="casting-from-xml" class="section"><div class="section-titlepage"><h4><bdi class="secno">2.5.1. </bdi>Casting from an XML media type<a aria-label="§" class="self-link" href="#casting-from-xml"></a></h4></div><div class="content"><div class="itemizedlist"><ul><li class="add_version" style="display: none;"><p>If the input document is a <a href="#c.data"><code class="tag-element">c:data</code></a> document, casting decodes the text content of the <a href="#c.data"><code class="tag-element">c:data</code></a> element according to the <code class="tag-attribute">encoding</code> and processes it according to its content type. The resulting document will have the specified content type. The serialization property is removed.</p><p><a id="err.inline.C0052&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.C0052"><code class="errqname">err:XC0052</code></a>) if the encoding specified is not supported by the implementation.</p><p><a id="err.inline.C0072&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.C0072"><code class="errqname">err:XC0072</code></a>) if the <a href="#c.data"><code class="tag-element">c:data</code></a> contains content is not a valid string according to the encoding.</p><p><a id="err.inline.C0073&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.C0073"><code class="errqname">err:XC0073</code></a>) if the <a href="#c.data"><code class="tag-element">c:data</code></a> element does not have a <code class="tag-attribute">content-type</code> attribute.</p><p><a id="err.inline.C0074&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.C0074"><code class="errqname">err:XC0074</code></a>) if the <a id="opt.inline.content-type-2"></a><code class="option">content-type</code> is supplied and is not the same as the <code class="tag-attribute">content-type</code> specified on the <a href="#c.data"><code class="tag-element">c:data</code></a> element. </p></li><li class="modify_version"><p><span class="deltaxml-new" style="background:#90EE90">If the input document is a </span><a href="#c.data"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:data</span></code></a><span class="deltaxml-new" style="background:#90EE90"> document, casting decodes the text content of the </span><a href="#c.data"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:data</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element according to the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">encoding</span></code><span class="deltaxml-new" style="background:#90EE90"> and processes it according to its content type. The resulting document will have the specified content type. The serialization property is removed.</span></p><p><a id="err.inline.C0052&#34;"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0052"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0052</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the encoding specified is not supported by the implementation.</span></p><p><a id="err.inline.C0072&#34;"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0072"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0072</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the </span><a href="#c.data"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:data</span></code></a><span class="deltaxml-new" style="background:#90EE90"> contains content is not a valid string according to the encoding.</span></p><p><a id="err.inline.C0073&#34;"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0073"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0073</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the </span><a href="#c.data"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:data</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element does not have a </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">content-type</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute.</span></p><p><a id="err.inline.C0074&#34;"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0074"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0074</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the </span><a id="opt.inline.content-type-2"></a><code class="option"><span class="deltaxml-new" style="background:#90EE90">content-type</span></code><span class="deltaxml-new" style="background:#90EE90"> is supplied and is not the same as the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">content-type</span></code><span class="deltaxml-new" style="background:#90EE90"> specified on the </span><a href="#c.data"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:data</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element. </span></p></li><li><p><span style="display: none;" class="delete_version">Casting from one XML media type to another simply changes the “<code class="literal">content-type</code>” document property. </span><span style="display: none;" class="add_version">If the input document is not a <a href="#c.data"><code class="tag-element">c:data</code></a> document, casting from one XML media type to another simply changes the “<code class="literal">content-type</code>” document property. </span><span class="modify_version"><span class="deltaxml-old" style="background:#FF5555">Casting</span><span class="deltaxml-new" style="background:#90EE90">If the input document is not a</span> <a href="#c.data"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:data</span></code></a><span class="deltaxml-new" style="background:#90EE90"> document, casting </span>from one XML media type to another simply changes the “<code class="literal">content-type</code>” document property. </span></p></li><li><p>Casting from an XML media type to an HTML media type changes the “<code class="literal">content-type</code>” document property and removes any serialization property. </p></li><li><p><span style="display: none;" class="delete_version">Casting from an XML media type to a JSON media type converts the XML into JSON. <span id="impl-21">The precise nature of the conversion from XML to JSON is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span> If the input document is an XML representation of JSON as defined in [<a href="#xpath31-functions"><span class="abbrev">XPath and XQuery Functions and Operators 3.1</span></a>], implementations <span class="rfc2119" id="casting-from-xml.2.3.1.3">must</span> produce the same result as <code class="literal">fn:parse-json(fn:xml-to-json())</code> by default. If the input document has a <code class="tag-element">c:param-set</code> document element, an instance of <code class="literal">map(xs:QName, xs:string)</code><span class="rfc2119" id="casting-from-xml.2.3.1.7">must</span> be returned that represents the document's <code class="tag-element">c:param</code> elements. The serialization property is removed. </span><span style="display: none;" class="add_version">Casting from an XML media type to a JSON media type converts the XML into JSON. If the input document is an XML representation of JSON as defined in [<a href="#xpath31-functions"><span class="abbrev">XPath and XQuery Functions and Operators 3.1</span></a>], implementations <span class="rfc2119" id="casting-from-xml.2.4.1.2">must</span> produce the same result as <code class="literal">fn:parse-json(fn:xml-to-json())</code> by default. If the input document has a <a href="#cv.param-set"><code class="tag-element">c:param-set</code></a> document element, an instance of <code class="literal">map(xs:QName, xs:string)</code><span class="rfc2119" id="casting-from-xml.2.4.1.6">must</span> be returned that represents the document's <a href="#cv.param"><code class="tag-element">c:param</code></a> elements. <span id="impl-20">It is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> if any additional conversions are supported.</span> The serialization property is removed. </span><span class="modify_version">Casting from an XML media type to a JSON media type converts the XML into JSON. <span class="deltaxml-old" style="background:#FF5555">The precise nature of the conversion from XML to JSON is </span><a href="#dt-implementation-defined"><span class="deltaxml-old" style="background:#FF5555">implementation-defined</span></a><span class="deltaxml-old" style="background:#FF5555">.</span><span class="deltaxml-old" style="background:#FF5555"> </span>If the input document is an XML representation of JSON as defined in [<a href="#xpath31-functions"><span class="abbrev">XPath and XQuery Functions and Operators 3.1</span></a>], implementations <span class="rfc2119" id="casting-from-xml.2.4.1.2">must</span> produce the same result as <code class="literal">fn:parse-json(fn:xml-to-json())</code> by default. If the input document has a <span class="deltaxml-old" style="background:#FF5555">c:param-set</span><a href="#cv.param-set"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:param-set</span></code></a> document element, an instance of <code class="literal">map(xs:QName, xs:string)</code><span class="rfc2119" id="casting-from-xml.2.4.1.6">must</span> be returned that represents the document's <span class="deltaxml-old" style="background:#FF5555">c:param</span><a href="#cv.param"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:param</span></code></a> elements<span class="deltaxml-new" style="background:#90EE90">. </span><span id="impl-20"><span class="deltaxml-new" style="background:#90EE90">It is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em><span class="deltaxml-new" style="background:#90EE90"> if any additional conversions are supported</span>.</span> The serialization property is removed. </span></p></li><li><p><span style="display: none;" class="delete_version">Casting from an XML media type to a text media type serializes the XML document by calling <code class="function">fn:serialize($doc, $param)</code> where <code class="literal">$doc</code> is the document on the <code class="port">source</code> port and <code class="literal">$param</code> is the serialization property of this document. The resulting string is wrapped by a document node and returned on the <code class="port">result</code> port. The serialization property is removed.</span><a id="port.inline.source-14 port.inline.result-7"></a>Casting from an XML media type to a text media type serializes the XML document by calling <code class="function">fn:serialize($doc, $param)</code> where <code class="literal">$doc</code> is the document on the <code class="port">source</code> port and <code class="literal">$param</code> is the serialization property of this document. The resulting string is wrapped by a document node and returned on the <code class="port">result</code> port. The serialization property is removed.<a id="port.inline.source-14 port.inline.result-7"></a>Casting from an XML media type to a text media type serializes the XML document by calling <code class="function">fn:serialize($doc, $param)</code> where <code class="literal">$doc</code> is the document on the <code class="port">source</code> port and <code class="literal">$param</code> is the serialization property of this document. The resulting string is wrapped by a document node and returned on the <code class="port">result</code> port. The serialization property is removed.</p></li><li><p><span class="deltaxml-old" style="background:#FF5555">Casting from an XML media type to any other media type </span><span class="rfc2119" id="casting-from-xml.2.5.1.1"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> support the case where the input document is a </span><a href="#c.data"><code class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:data</span></code></a><span class="deltaxml-old" style="background:#FF5555"> document. The resulting document will have the specified media type and a representation that is the content of the </span><a href="#c.data"><code class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:data</span></code></a><span class="deltaxml-old" style="background:#FF5555"> element after decoding the base64 encoded content The serialization property is removed.</span></p><p><a id="err.inline.C0072"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0072"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0072</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the </span><a href="#c.data"><code class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:data</span></code></a><span class="deltaxml-old" style="background:#FF5555"> contains content is not a valid base64 string.</span></p><p><a id="err.inline.C0073"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0073"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0073</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the </span><a href="#c.data"><code class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:data</span></code></a><span class="deltaxml-old" style="background:#FF5555"> element does not have a </span><code class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">content-type</span></code><span class="deltaxml-old" style="background:#FF5555"> attribute.</span></p><p><a id="err.inline.C0074"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0074"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0074</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the </span><code class="option"><span class="deltaxml-old" style="background:#FF5555">content-type</span></code><span class="deltaxml-old" style="background:#FF5555"> is supplied and is not the same as the </span><code class="tag-attribute"><span class="deltaxml-old" style="background:#FF5555">content-type</span></code><span class="deltaxml-old" style="background:#FF5555"> specified on the </span><a href="#c.data"><code class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:data</span></code></a><span class="deltaxml-old" style="background:#FF5555"> element. </span></p><p><span style="display: none;" class="delete_version"><span id="impl-22">Casting from an XML media type to any other media type when the input document is not a <a href="#c.data"><code class="tag-element">c:data</code></a> document is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span></span><span style="display: none;" class="add_version"><span id="impl-21">Casting from an XML media type to any other media type when the input document is not a <a href="#c.data"><code class="tag-element">c:data</code></a> document is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span></span><span class="modify_version"><span id="impl-21">Casting from an XML media type to any other media type when the input document is not a <a href="#c.data"><code class="tag-element">c:data</code></a> document is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span></span></p></li></ul></div><section id="c.param-set" class="simplesect"><div class="section-titlepage"><h5><span class="deltaxml-new" style="background:#90EE90">Parameter sets</span></h5></div><div class="content"><p><span class="deltaxml-new" style="background:#90EE90">In XProc 3.1, maps are used for parameters. In XProc 1.0, no maps were available, so an XML vocabulary was defined. It is sometimes convenient to generate a map this way, so the vocabulary is retained.</span></p><p><span class="deltaxml-new" style="background:#90EE90">A </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:parameter-set</span></code><span class="deltaxml-new" style="background:#90EE90"> is a wrapper around zero or more </span><a href="#cv.param"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:param</span></code></a><span class="deltaxml-new" style="background:#90EE90"> elements.</span></p><p class="element-syntax element-syntax-step-vocabulary"><code><span class="deltaxml-new" style="background:#90EE90">&lt;c:param-set&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    </span><a href="#cv.param"><span class="deltaxml-new" style="background:#90EE90">c:param</span></a><span class="deltaxml-new" style="background:#90EE90">*</span><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/c:param-set&gt;</span></code></p><p><a id="err.inline.D0018&#34;"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.D0018"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0018</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the parameter list contains any elements other than </span><a href="#cv.param"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:param</span></code></a><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Any namespace-qualified attribute names that appear on the </span><a href="#cv.param-set"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:param-set</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element are ignored. </span><a id="err.inline.D0014&#34;"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.D0014"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0014</span></code></a><span class="deltaxml-new" style="background:#90EE90">) for any unqualified attribute names to appear on a </span><a href="#cv.param-set"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:param-set</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element.</span></p><p><span class="deltaxml-new" style="background:#90EE90">A </span><a href="#cv.param"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:param</span></code></a><span class="deltaxml-new" style="background:#90EE90"> is a name/value pair with an optional namespace.</span></p><p class="element-syntax element-syntax-step-vocabulary"><code><span class="deltaxml-new" style="background:#90EE90">&lt;c:param</span><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">name</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">EQName</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  namespace? = </span><var><span class="deltaxml-new" style="background:#90EE90">anyURI</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  value? = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  as? = </span><var><span class="deltaxml-new" style="background:#90EE90">XPathSequenceType</span></var><span class="deltaxml-new" style="background:#90EE90">&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    </span><var><span class="deltaxml-new" style="background:#90EE90">anyElement</span></var><span class="deltaxml-new" style="background:#90EE90">*</span><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/c:param&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">name</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute of the </span><a href="#cv.param"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:param</span></code></a><span class="deltaxml-new" style="background:#90EE90"> must have the lexical form of a QName.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">namespace</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute is specified, then the expanded name of the parameter is constructed from the specified namespace and the name value. </span><a id="err.inline.D0025&#34;"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.D0025"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0025</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">namespace</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute is specified, the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">name</span></code><span class="deltaxml-new" style="background:#90EE90"> contains a colon, and the specified namespace is not the same as the in-scope namespace binding for the specified prefix.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">namespace</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute is not specified, and the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">name</span></code><span class="deltaxml-new" style="background:#90EE90"> contains a colon, then the expanded name of the parameter is constructed using the name value and the namespace declarations in-scope on the </span><a href="#cv.param"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:param</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">namespace</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute is not specified, and the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">name</span></code><span class="deltaxml-new" style="background:#90EE90"> does not contain a colon, then the expanded name of the parameter is in no namespace.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If the </span><a href="#cv.param"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:param</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element has a </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">value</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute, the element </span><span class="rfc2119" id="c.param-set.13.3"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be empty. If it does not have a </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">value</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute, the content of the element is the value. In either case, the type of the value may be specified with a sequence type in the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">as</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute. </span><a id="err.inline.D0081&#34;"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.D0081"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0081</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the </span><a href="#cv.param"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:param</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element has a </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">value</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute and is not empty. </span><a id="err.inline.D0082&#34;"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.D0082"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0082</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the </span><a href="#cv.param"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:param</span></code></a><span class="deltaxml-new" style="background:#90EE90"> specifies a sequence type and the value does not satisfy that type.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Any namespace-qualified attribute names that appear on the </span><a href="#cv.param"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:param</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element are ignored. </span><a id="err.inline.D0014.1&#34;"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.D0014"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0014</span></code></a><span class="deltaxml-new" style="background:#90EE90">) for any unqualified attribute names other than those specified here to appear on a </span><a href="#cv.param"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:param</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element.</span></p></div></section></div></section><section id="casting-from-html" class="section"><div class="section-titlepage"><h4><bdi class="secno">2.5.2. </bdi>Casting from an HTML media type<a aria-label="§" class="self-link" href="#casting-from-html"></a></h4></div><div class="content"><div class="itemizedlist"><ul><li><p>Casting from an HTML media type to an XML media type changes “<code class="literal">content-type</code>” document property and removes any serialization property. </p></li><li><p>Casting from an HTML media type to another HTML media type changes “<code class="literal">content-type</code>” document property.</p></li><li><p><span style="display: none;" class="delete_version"><span id="impl-23">Casting from an HTML media type to a JSON media type is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span></span><span style="display: none;" class="add_version"><span id="impl-22">Casting from an HTML media type to a JSON media type is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span></span><span class="modify_version"><span id="impl-22">Casting from an HTML media type to a JSON media type is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span></span></p></li><li><p><span style="display: none;" class="delete_version">Casting an an HTML media type to a text media type serializes the HTML document by calling <code class="function">fn:serialize($doc, $param)</code> where <code class="literal">$doc</code> is the document on the <code class="port">source</code> port and <code class="literal">$param</code> is the serialization property of this document. The resulting string is wrapped by a document node and returned on the <code class="port">result</code> port. The serialization property is removed.</span><a id="port.inline.source-15 port.inline.result-8"></a>Casting an an HTML media type to a text media type serializes the HTML document by calling <code class="function">fn:serialize($doc, $param)</code> where <code class="literal">$doc</code> is the document on the <code class="port">source</code> port and <code class="literal">$param</code> is the serialization property of this document. The resulting string is wrapped by a document node and returned on the <code class="port">result</code> port. The serialization property is removed.<a id="port.inline.source-15 port.inline.result-8"></a>Casting an an HTML media type to a text media type serializes the HTML document by calling <code class="function">fn:serialize($doc, $param)</code> where <code class="literal">$doc</code> is the document on the <code class="port">source</code> port and <code class="literal">$param</code> is the serialization property of this document. The resulting string is wrapped by a document node and returned on the <code class="port">result</code> port. The serialization property is removed.</p></li><li><p><span style="display: none;" class="delete_version"><span id="impl-24">Casting from an HTML media type to any other media type is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span></span><span style="display: none;" class="add_version"><span id="impl-23">Casting from an HTML media type to any other media type is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span></span><span class="modify_version"><span id="impl-23">Casting from an HTML media type to any other media type is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span></span></p></li></ul></div></div></section><section id="casting-from-json" class="section"><div class="section-titlepage"><h4><bdi class="secno">2.5.3. </bdi>Casting from a JSON media type<a aria-label="§" class="self-link" href="#casting-from-json"></a></h4></div><div class="content"><div class="itemizedlist"><ul><li><p><span style="display: none;" class="delete_version">Casting from a JSON media type to an XML media type converts the JSON into XML. An implementation <span class="rfc2119" id="casting-from-json.2.1.1.1">must</span> support the format specified in section “XML Representation of JSON” of [<a href="#xpath31-functions"><span class="abbrev">XPath and XQuery Functions and Operators 3.1</span></a>] as default for the resulting XML. <span id="impl-25">It is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> whether other result formats are supported.</span> The serialization property is removed.</span><span style="display: none;" class="add_version">Casting from a JSON media type to an XML media type converts the JSON into XML. An implementation <span class="rfc2119" id="casting-from-json.2.1.1.1">must</span> support the format specified in section “XML Representation of JSON” of [<a href="#xpath31-functions"><span class="abbrev">XPath and XQuery Functions and Operators 3.1</span></a>] as default for the resulting XML. <span id="impl-24">It is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> whether other result formats are supported.</span> The serialization property is removed.</span><span class="modify_version">Casting from a JSON media type to an XML media type converts the JSON into XML. An implementation <span class="rfc2119" id="casting-from-json.2.1.1.1">must</span> support the format specified in section “XML Representation of JSON” of [<a href="#xpath31-functions"><span class="abbrev">XPath and XQuery Functions and Operators 3.1</span></a>] as default for the resulting XML. <span id="impl-24">It is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> whether other result formats are supported.</span> The serialization property is removed.</span></p></li><li><p><span style="display: none;" class="delete_version"><span id="impl-26">Casting from a JSON media type to an HTML media type is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span></span><span style="display: none;" class="add_version"><span id="impl-25">Casting from a JSON media type to an HTML media type is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span></span><span class="modify_version"><span id="impl-25">Casting from a JSON media type to an HTML media type is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span></span></p></li><li><p>Casting from a JSON media type to another JSON media type changes “<code class="literal">content-type</code>” document property.</p></li><li><p><span style="display: none;" class="delete_version">Casting from a JSON media type to a text media type serializes the JSON document by calling <code class="function">fn:serialize($doc, $param)</code> where <code class="literal">$doc</code> is the document on the <code class="port">source</code> port and <code class="literal">$param</code> is the serialization property of this document. The resulting string is wrapped by a document node and returned on the <code class="port">result</code> port. The serialization property is removed.</span><a id="port.inline.source-16 port.inline.result-9"></a>Casting from a JSON media type to a text media type serializes the JSON document by calling <code class="function">fn:serialize($doc, $param)</code> where <code class="literal">$doc</code> is the document on the <code class="port">source</code> port and <code class="literal">$param</code> is the serialization property of this document. The resulting string is wrapped by a document node and returned on the <code class="port">result</code> port. The serialization property is removed.<a id="port.inline.source-16 port.inline.result-9"></a>Casting from a JSON media type to a text media type serializes the JSON document by calling <code class="function">fn:serialize($doc, $param)</code> where <code class="literal">$doc</code> is the document on the <code class="port">source</code> port and <code class="literal">$param</code> is the serialization property of this document. The resulting string is wrapped by a document node and returned on the <code class="port">result</code> port. The serialization property is removed.</p></li><li><p><span style="display: none;" class="delete_version"><span id="impl-27">Casting from a JSON media type to any other media type is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span></span><span style="display: none;" class="add_version"><span id="impl-26">Casting from a JSON media type to any other media type is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span></span><span class="modify_version"><span id="impl-26">Casting from a JSON media type to any other media type is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span></span></p></li></ul></div></div></section><section id="casting-from-text" class="section"><div class="section-titlepage"><h4><bdi class="secno">2.5.4. </bdi>Casting from a text media type<a aria-label="§" class="self-link" href="#casting-from-text"></a></h4></div><div class="content"><div class="itemizedlist"><ul><li><p><a id="port.inline.source-17 err.inline.D0049&#34;"></a>Casting from a text media type to an XML media type parses the text value of the document on <code class="port">source</code> port by calling <code class="function">fn:parse-xml</code>. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the text value is not a well-formed XML document. The serialization property is removed.<a id="port.inline.source-17 err.inline.D0049&#34;"></a>Casting from a text media type to an XML media type parses the text value of the document on <code class="port">source</code> port by calling <code class="function">fn:parse-xml</code>. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the text value is not a well-formed XML document. The serialization property is removed.</p></li><li><p><a id="port.inline.source-18 err.inline.D0060&#34;"></a>Casting from a text media type to an HTML media type parses the text value of the document on <code class="port">source</code> port into an XPath data model document that contains a tree of elements, attributes, and other nodes. <span id="impl-27">The precise way in which text documents are parsed into the XPath data model is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the text document can not be converted into the XPath data model. The serialization property is removed.<a id="port.inline.source-18 err.inline.D0060&#34;"></a>Casting from a text media type to an HTML media type parses the text value of the document on <code class="port">source</code> port into an XPath data model document that contains a tree of elements, attributes, and other nodes. <span id="impl-27">The precise way in which text documents are parsed into the XPath data model is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the text document can not be converted into the XPath data model. The serialization property is removed.</p></li><li><p><a id="port.inline.source-19 opt.inline.parameter-1 err.inline.D0057&#34; err.inline.D0058&#34; err.inline.D0059&#34;"></a>Casting from a text media type to a JSON media type parses the text value of the document on <code class="port">source</code> port by calling <code class="function">fn:parse-json($doc, $par)</code> where <code class="literal">$doc</code> is the text document and <code class="literal">$par</code> is the <code class="option">parameter</code> option. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the text document does not conform to the JSON grammar, unless the parameter liberal is true and the processor chooses to accept the deviation. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the parameter duplicates is reject and the text document contains a JSON object with duplicate keys. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the parameter map contains an entry whose key is defined in the specification of <code class="function">fn:parse-json</code> and whose value is not valid for that key, or if it contains an entry with the key fallback when the parameter <code class="literal">escape</code> with <code class="literal">true()</code> is also present. The serialization property is removed. <a id="port.inline.source-19 opt.inline.parameter-1 err.inline.D0057&#34; err.inline.D0058&#34; err.inline.D0059&#34;"></a>Casting from a text media type to a JSON media type parses the text value of the document on <code class="port">source</code> port by calling <code class="function">fn:parse-json($doc, $par)</code> where <code class="literal">$doc</code> is the text document and <code class="literal">$par</code> is the <code class="option">parameter</code> option. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the text document does not conform to the JSON grammar, unless the parameter liberal is true and the processor chooses to accept the deviation. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the parameter duplicates is reject and the text document contains a JSON object with duplicate keys. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the parameter map contains an entry whose key is defined in the specification of <code class="function">fn:parse-json</code> and whose value is not valid for that key, or if it contains an entry with the key fallback when the parameter <code class="literal">escape</code> with <code class="literal">true()</code> is also present. The serialization property is removed. </p></li><li><p>Casting from a text media type to another text media type changes “<code class="literal">content-type</code>” document property.</p></li><li><p><span style="display: none;" class="delete_version"><span id="impl-29">Casting from a text media type to any other media type is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span></span><span style="display: none;" class="add_version"><span id="impl-28">Casting from a text media type to any other media type is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span></span><span class="modify_version"><span id="impl-28">Casting from a text media type to any other media type is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span></span></p></li></ul></div></div></section><section id="casting-from-other" class="section"><div class="section-titlepage"><h4><bdi class="secno">2.5.5. </bdi>Casting from any other media type<a aria-label="§" class="self-link" href="#casting-from-other"></a></h4></div><div class="content"><div class="itemizedlist"><ul><li id="c.data"><p>Casting from a non-XML media type to an XML media type produces an XML document with a <a href="#c.data"><code class="tag-element">c:data</code></a> document element. The original media type will be preserved in the <code class="tag-attribute">content-type</code> attribute on the <a href="#c.data"><code class="tag-element">c:data</code></a> element.</p><p class="element-syntax element-syntax-step-vocabulary"><code>&lt;c:data<br />  <strong>content-type</strong> = <var>ContentType</var><br />  charset? = <var>string</var><br />  encoding? = <var>string</var>&gt;<br />    <var>string</var><br />&lt;/c:data&gt;</code></p><p>The content of the <a href="#c.data"><code class="tag-element">c:data</code></a> element is the base64 encoded representation of the non-XML content. The serialization property is removed.</p></li><li><p><span style="display: none;" class="delete_version"><span id="impl-30">Casting from any other media type to a HTML media type, a JSON media type or a text document is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span></span><span style="display: none;" class="add_version"><span id="impl-29">Casting from any other media type to a HTML media type, a JSON media type or a text document is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span></span><span class="modify_version"><span id="impl-29">Casting from any other media type to a HTML media type, a JSON media type or a text document is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span></span></p></li><li><p><span style="display: none;" class="delete_version"><span id="impl-31">Casting from any other media type to any other media type is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span></span><span style="display: none;" class="add_version"><span id="impl-30">Casting from any other media type to any other media type is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span></span><span class="modify_version"><span id="impl-30">Casting from any other media type to any other media type is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span></span></p></li></ul></div></div></section><section id="c.cast-content-type.11" class="simplesect"><div class="section-titlepage"><h4>Document properties</h4></div><div class="content"><p>All document properties are preserved except the <code class="code">content-type</code> property which is updated accordingly and the <code class="code">serialization</code> property which is removed by some casting methods.</p></div></section></div></section><section id="c.compare" class="section"><div class="section-titlepage"><h3><bdi class="secno">2.6. </bdi>p:compare<a aria-label="§" class="self-link" href="#c.compare"></a></h3></div><div class="content"><p>The <code class="code">p:compare</code> step compares two documents for equality.</p><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:compare</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">any</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">alternate</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">any</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">application/xml</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">differences</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">any</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">parameters</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">map(xs:QName,item()*)?</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">     </span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">method</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:QName?</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                      </span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">fail-if-not-equal</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:boolean</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">false()</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><div class="declare-step"><p><span class="deltaxml-new" style="background:#90EE90">Summary</span></p><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Input port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.source-20"><span class="deltaxml-new" style="background:#90EE90">source</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">any </span></td></tr><tr><td><a href="#port.inline.alternate-1"><span class="deltaxml-new" style="background:#90EE90">alternate</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">any </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Output port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.result-10"><span class="deltaxml-new" style="background:#90EE90">result</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">application/xml </span></td></tr><tr><td><a href="#port.inline.differences-1"><span class="deltaxml-new" style="background:#90EE90">differences</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td><span class="deltaxml-new" style="background:#90EE90">any </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Option name</span></th><th><span class="deltaxml-new" style="background:#90EE90">Type</span></th><th><span class="deltaxml-new" style="background:#90EE90">Default value</span></th></tr></thead><tbody><tr><td><a href="#opt.inline.fail-if-not-equal-1"><span class="deltaxml-new" style="background:#90EE90">fail-if-not-equal</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:boolean</span></td><td><span class="deltaxml-new" style="background:#90EE90">false()</span></td></tr><tr><td><a href="#opt.inline.method-1"><span class="deltaxml-new" style="background:#90EE90">method</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:QName?</span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td></tr><tr><td><a href="#opt.inline.parameters-9"><span class="deltaxml-new" style="background:#90EE90">parameters</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">map(xs:QName,item()*)?</span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td></tr></tbody></table><details><summary><span class="deltaxml-new" style="background:#90EE90">Errors</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Error code</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td class="errcode"><a href="#err.inline.C0019&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0019</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the documents are not equal according to the specified comparison method, and the value of the fail-if-not-equal option is true.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0076&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0076</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the comparison method specified in p:compare is not supported by the implementation.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0077&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0077</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the media types of the documents supplied are incompatible with the comparison method.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Implementation details</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Implementation</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td><a href="#impl-31"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">Implementations of p:compare must support the deep-equal method; other supported methods are implementation-defined.</span></td></tr><tr><td><a href="#impl-32"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">If fail-if-not-equal is false, and the documents differ, an implementation-defined summary of the differences between the two documents may appear on the differences port.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Declaration</span></summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:compare</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">any</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">alternate</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">any</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">application/xml</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">differences</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">any</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">parameters</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">map(xs:QName,item()*)?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">     </span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">method</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:QName?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                      </span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">fail-if-not-equal</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:boolean</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">false()</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p></details></div><p><a id="opt.inline.method-1 err.inline.C0076&#34; opt.inline.method-3 err.inline.C0077&#34; opt.inline.method-4"></a>This step takes single documents on each of two ports and compares them. If <code class="option">method</code> is not specified, or if <code class="code">deep-equal</code> is specified, the comparison uses <code class="function">fn:deep-equal</code> (as defined in []). <span id="impl-31">Implementations of <code class="tag-element">p:compare</code><span class="rfc2119" id="c.compare.4.5.2">must</span> support the <code class="code">deep-equal</code><a id="opt.inline.method-2"></a><code class="option">method</code>; other supported methods are <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the comparison <code class="option">method</code> specified in <code class="tag-element">p:compare</code> is not supported by the implementation. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the media types of the documents supplied are incompatible with the comparison <code class="option">method</code>. <a id="opt.inline.method-1 err.inline.C0076&#34; opt.inline.method-3 err.inline.C0077&#34; opt.inline.method-4"></a>This step takes single documents on each of two ports and compares them. If <code class="option">method</code> is not specified, or if <code class="code">deep-equal</code> is specified, the comparison uses <code class="function">fn:deep-equal</code> (as defined in []). <span id="impl-31">Implementations of <code class="tag-element">p:compare</code><span class="rfc2119" id="c.compare.4.5.2">must</span> support the <code class="code">deep-equal</code><a id="opt.inline.method-2"></a><code class="option">method</code>; other supported methods are <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the comparison <code class="option">method</code> specified in <code class="tag-element">p:compare</code> is not supported by the implementation. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the media types of the documents supplied are incompatible with the comparison <code class="option">method</code>. </p><p><a id="err.inline.C0019&#34; opt.inline.method-5 opt.inline.fail-if-not-equal-1 opt.inline.fail-if-not-equal-2"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the documents are not equal according to the specified comparison <code class="option">method</code>, and the value of the <code class="option">fail-if-not-equal</code> option is <code class="literal">true</code>. If the documents are equal, or if the value of the <code class="option">fail-if-not-equal</code> option is <code class="literal">false</code>, a  document is produced with contents <code class="literal">true</code> if the documents are equal, otherwise <code class="literal">false</code>.<a id="err.inline.C0019&#34; opt.inline.method-5 opt.inline.fail-if-not-equal-1 opt.inline.fail-if-not-equal-2"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the documents are not equal according to the specified comparison <code class="option">method</code>, and the value of the <code class="option">fail-if-not-equal</code> option is <code class="literal">true</code>. If the documents are equal, or if the value of the <code class="option">fail-if-not-equal</code> option is <code class="literal">false</code>, a  document is produced with contents <code class="literal">true</code> if the documents are equal, otherwise <code class="literal">false</code>.</p><p><span style="display: none;" class="delete_version"><span id="impl-33">If <code class="option">fail-if-not-equal</code> is <code class="code">false</code>, and the documents differ, an <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> summary of the differences between the two documents may appear on the <code class="port">differences</code> port.</span></span><span style="display: none;" class="add_version"><span id="impl-32">If <a id="opt.inline.fail-if-not-equal-3"></a><code class="option">fail-if-not-equal</code> is <code class="code">false</code>, and the documents differ, an <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> summary of the differences between the two documents may appear on the <a id="port.inline.differences-1"></a><code class="port">differences</code> port.</span></span><span class="modify_version"><span id="impl-32">If <a id="opt.inline.fail-if-not-equal-3"></a><code class="option">fail-if-not-equal</code> is <code class="code">false</code>, and the documents differ, an <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> summary of the differences between the two documents may appear on the <a id="port.inline.differences-1"></a><code class="port">differences</code> port.</span></span></p><section id="c.compare.7" class="simplesect"><div class="section-titlepage"><h4>Document properties</h4></div><div class="content"><p>No document properties are preserved. The comparison document has no <code class="property">base-uri</code>.</p></div></section></div></section><section id="c.compress" class="section"><div class="section-titlepage"><h3><bdi class="secno">2.7. </bdi>p:compress<a aria-label="§" class="self-link" href="#c.compress"></a></h3></div><div class="content"><p><span style="display: none;" class="delete_version">The <code class="tag-element">p:compress</code> step serializes the document appearing on its <code class="port">source</code> port and outputs a compressed version of this on its <code class="port">result</code> port.</span><a id="port.inline.source-20 port.inline.result-10"></a>The <code class="tag-element">p:compress</code> step serializes the document appearing on its <code class="port">source</code> port and outputs a compressed version of this on its <code class="port">result</code> port.<a id="port.inline.source-20 port.inline.result-10"></a>The <code class="tag-element">p:compress</code> step serializes the document appearing on its <code class="port">source</code> port and outputs a compressed version of this on its <code class="port">result</code> port.</p><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:compress</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">any</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">false</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">any</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">false</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">format</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:QName</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'gzip'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">       </span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">serialization</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">map(xs:QName,item()*)?</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">  </span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">parameters</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">map(xs:QName, item()*)?</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">    </span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><div class="declare-step"><p><span class="deltaxml-new" style="background:#90EE90">Summary</span></p><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Input port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.source-21"><span class="deltaxml-new" style="background:#90EE90">source</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">any </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Output port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.result-11"><span class="deltaxml-new" style="background:#90EE90">result</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">any </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Option name</span></th><th><span class="deltaxml-new" style="background:#90EE90">Type</span></th><th><span class="deltaxml-new" style="background:#90EE90">Default value</span></th></tr></thead><tbody><tr><td><a href="#c.compress-def-format"><span class="deltaxml-new" style="background:#90EE90">format</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:QName</span></td><td><span class="deltaxml-new" style="background:#90EE90">'gzip'</span></td></tr><tr><td><a href="#c.compress-def-parameters"><span class="deltaxml-new" style="background:#90EE90">parameters</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">map(xs:QName, item()*)?</span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td></tr><tr><td><a href="#c.compress-def-serialization"><span class="deltaxml-new" style="background:#90EE90">serialization</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">map(xs:QName,item()*)?</span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td></tr></tbody></table><details><summary><span class="deltaxml-new" style="background:#90EE90">Errors</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Error code</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td class="errcode"><a href="#err.inline.C0079.3&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0079</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the map parameters contains an entry whose key is defined by the implementation and whose value is not valid for that key.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0202&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0202</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the compression format cannot be understood, determined and/or processed.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Implementation details</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Implementation</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td><a href="#impl-33"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is implementation-defined what other formats are supported.</span></td></tr><tr><td><a href="#impl-34"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">The semantics of the keys and the allowed values for these keys are implementation-defined.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Declaration</span></summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:compress</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">any</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">false</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">any</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">false</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">format</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:QName</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'gzip'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">       </span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">serialization</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">map(xs:QName,item()*)?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">  </span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">parameters</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">map(xs:QName, item()*)?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">    </span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p></details></div><p><span style="display: none;" class="delete_version">The <code class="tag-element">p:compress</code> step first serializes the document appearing on its <code class="port">source</code>. It then compresses the outcome of this serialization and outputs the result on its <code class="port">result</code> port.</span><a id="port.inline.source-21 port.inline.result-11"></a>The <code class="tag-element">p:compress</code> step first serializes the document appearing on its <code class="port">source</code>. It then compresses the outcome of this serialization and outputs the result on its <code class="port">result</code> port.<a id="port.inline.source-21 port.inline.result-11"></a>The <code class="tag-element">p:compress</code> step first serializes the document appearing on its <code class="port">source</code>. It then compresses the outcome of this serialization and outputs the result on its <code class="port">result</code> port.</p><p>The <code class="tag-element">p:compress</code> step has the following options:</p><div class="variablelist"><dl><dt><span style="display: none;" class="delete_version"><span class="term"><code class="option">format</code></span></span><span style="display: none;" class="add_version"><span class="term"><a id="c.compress-def-format"></a><a id="opt.inline.format-10"></a><code class="option">format</code></span></span><span class="modify_version"><span class="term"><a id="c.compress-def-format"></a><a id="opt.inline.format-10"></a><code class="option">format</code></span></span></dt><dd><p><a id="opt.inline.format-11 err.inline.C0202&#34;"></a>The format of the compression can be specified using the <code class="option">format</code> option. Implementations <span class="rfc2119" id="c.compress.6.1.2.1.2">must</span> support the [] format, specified with the value <code class="code">gzip</code>. <span id="impl-33">It is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> what other formats are supported.</span>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the compression format cannot be understood, determined and/or processed. <a id="opt.inline.format-11 err.inline.C0202&#34;"></a>The format of the compression can be specified using the <code class="option">format</code> option. Implementations <span class="rfc2119" id="c.compress.6.1.2.1.2">must</span> support the [] format, specified with the value <code class="code">gzip</code>. <span id="impl-33">It is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> what other formats are supported.</span>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the compression format cannot be understood, determined and/or processed. </p></dd><dt><span style="display: none;" class="delete_version"><span class="term"><code class="option">parameters</code></span></span><span style="display: none;" class="add_version"><span class="term"><a id="c.compress-def-parameters"></a><a id="opt.inline.parameters-9"></a><code class="option">parameters</code></span></span><span class="modify_version"><span class="term"><a id="c.compress-def-parameters"></a><a id="opt.inline.parameters-9"></a><code class="option">parameters</code></span></span></dt><dd><p><a id="opt.inline.parameters-10 err.inline.C0079.3&#34; opt.inline.parameters-11"></a>The <code class="option">parameters</code> option can be used to supply parameters to control the compression. <span id="impl-34">The semantics of the keys and the allowed values for these keys are <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the map <code class="option">parameters</code> contains an entry whose key is defined by the implementation and whose value is not valid for that key.<a id="opt.inline.parameters-10 err.inline.C0079.3&#34; opt.inline.parameters-11"></a>The <code class="option">parameters</code> option can be used to supply parameters to control the compression. <span id="impl-34">The semantics of the keys and the allowed values for these keys are <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the map <code class="option">parameters</code> contains an entry whose key is defined by the implementation and whose value is not valid for that key.</p></dd><dt><span style="display: none;" class="delete_version"><span class="term"><code class="option">serialization</code></span></span><span style="display: none;" class="add_version"><span class="term"><a id="c.compress-def-serialization"></a><a id="opt.inline.serialization-1"></a><code class="option">serialization</code></span></span><span class="modify_version"><span class="term"><a id="c.compress-def-serialization"></a><a id="opt.inline.serialization-1"></a><code class="option">serialization</code></span></span></dt><dd><p><span style="display: none;" class="delete_version">The <code class="option">serialization</code> option is provided to control the serialization of content before compression takes place. If the document to be stored has a <code class="code">serialization</code> property, the serialization is controlled by the merger of the two maps where the entries in the <code class="code">serialization</code> property take precedence. Serialization is described in [<a><span class="delete_version" href="#xproc30"><span class="abbrev">XProc 3.0</span></span><span class="modify_version" href="#xproc30"><span class="abbrev">XProc 3.0</span></span></a>].</span><a id="opt.inline.serialization-2"></a>The <code class="option">serialization</code> option is provided to control the serialization of content before compression takes place. If the document to be stored has a <code class="code">serialization</code> property, the serialization is controlled by the merger of the two maps where the entries in the <code class="code">serialization</code> property take precedence. Serialization is described in [].<a id="opt.inline.serialization-2"></a>The <code class="option">serialization</code> option is provided to control the serialization of content before compression takes place. If the document to be stored has a <code class="code">serialization</code> property, the serialization is controlled by the merger of the two maps where the entries in the <code class="code">serialization</code> property take precedence. Serialization is described in [].</p></dd></dl></div><section id="c.compress.7" class="simplesect"><div class="section-titlepage"><h4>Document properties</h4></div><div class="content"><p>All document properties are preserved, except for the <code class="code">content-type</code> property which is updated accordingly and the <code class="code">serialization</code> property which is removed.</p></div></section></div></section><section id="c.count" class="section"><div class="section-titlepage"><h3><bdi class="secno">2.8. </bdi>p:count<a aria-label="§" class="self-link" href="#c.count"></a></h3></div><div class="content"><p>The <code class="code">p:count</code> step counts the number of documents in the <code class="code">source</code> input sequence and returns a single document on <code class="code">result</code> containing that number. The generated document contains a single <a href="#cv.result"><code class="tag-element">c:result</code></a> element whose contents is the string representation of the number of documents in the sequence.</p><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:count</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">any</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">application/xml</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">limit</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:integer</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">0</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">           </span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><div class="declare-step"><p><span class="deltaxml-new" style="background:#90EE90">Summary</span></p><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Input port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.source-22"><span class="deltaxml-new" style="background:#90EE90">source</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td><span class="deltaxml-new" style="background:#90EE90">any </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Output port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.result-12"><span class="deltaxml-new" style="background:#90EE90">result</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">application/xml </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Option name</span></th><th><span class="deltaxml-new" style="background:#90EE90">Type</span></th><th><span class="deltaxml-new" style="background:#90EE90">Default value</span></th></tr></thead><tbody><tr><td><span class="deltaxml-new" style="background:#90EE90">limit</span></td><td><span class="deltaxml-new" style="background:#90EE90">xs:integer</span></td><td><span class="deltaxml-new" style="background:#90EE90">0</span></td></tr></tbody></table><details><summary><span class="deltaxml-new" style="background:#90EE90">Declaration</span></summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:count</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">any</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">application/xml</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">limit</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:integer</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">0</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">           </span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p></details></div><p><span style="display: none;" class="delete_version">If the <code class="tag-attribute">limit</code> option is specified and is greater than zero, the <code class="tag-element">p:count</code> step will count at most that many documents. This provides a convenient mechanism to discover, for example, if a sequence consists of more than 1 document, without requiring every single document to be buffered before processing can continue.</span><span style="display: none;" class="add_version">If the <code class="tag-attribute">limit</code> option is specified and is greater than zero, the <code class="tag-element">p:count</code> step will count at most that many documents. This provides a convenient mechanism to discover, for example, if a sequence consists of more than 1 document, without requiring every document to be counted.</span><span class="modify_version">If the <code class="tag-attribute">limit</code> option is specified and is greater than zero, the <code class="tag-element">p:count</code> step will count at most that many documents. This provides a convenient mechanism to discover, for example, if a sequence consists of more than<span class="deltaxml-old" style="background:#FF5555"> </span><span class="deltaxml-new" style="background:#90EE90"> </span>1 document, without requiring every <span class="deltaxml-old" style="background:#FF5555">single </span>document to be <span class="deltaxml-old" style="background:#FF5555">buffered before processing can continue</span><span class="deltaxml-new" style="background:#90EE90">counted</span>.</span></p><section id="c.count.5" class="simplesect"><div class="section-titlepage"><h4>Document properties</h4></div><div class="content"><p>No document properties are preserved. The count document has no <code class="property">base-uri</code>.</p></div></section></div></section><section id="c.delete" class="section"><div class="section-titlepage"><h3><bdi class="secno">2.9. </bdi>p:delete<a aria-label="§" class="self-link" href="#c.delete"></a></h3></div><div class="content"><p><span style="display: none;" class="delete_version">The <code class="code">p:delete</code> step deletes items specified by a <em class="glossterm"><a href="#dt-selection-pattern">selection pattern</a></em> from the <code class="code">source</code> input document and produces the resulting document, with the deleted items removed, on the <code class="port">result</code> port.</span><a id="port.inline.result-12"></a>The <code class="code">p:delete</code> step deletes items specified by a <em class="glossterm"><a href="#dt-selection-pattern">selection pattern</a></em> from the <code class="code">source</code> input document and produces the resulting document, with the deleted items removed, on the <code class="port">result</code> port.<a id="port.inline.result-12"></a>The <code class="code">p:delete</code> step deletes items specified by a <em class="glossterm"><a href="#dt-selection-pattern">selection pattern</a></em> from the <code class="code">source</code> input document and produces the resulting document, with the deleted items removed, on the <code class="port">result</code> port.</p><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:delete</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">xml html</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">text xml html</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">match</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:string</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">       </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">XSLTSelectionPattern</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><div class="declare-step"><p><span class="deltaxml-new" style="background:#90EE90">Summary</span></p><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Input port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.source-22"><span class="deltaxml-new" style="background:#90EE90">source</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">xml html </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Output port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.result-13"><span class="deltaxml-new" style="background:#90EE90">result</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">text xml html </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Option name</span></th><th><span class="deltaxml-new" style="background:#90EE90">Type</span></th><th><span class="deltaxml-new" style="background:#90EE90">Required</span></th></tr></thead><tbody><tr><td class="required"><a href="#opt.inline.match-3"><span class="deltaxml-new" style="background:#90EE90">match</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">XSLTSelectionPattern</span></td><td><span class="deltaxml-new" style="background:#90EE90">✔ </span></td></tr></tbody></table><details><summary><span class="deltaxml-new" style="background:#90EE90">Errors</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Error code</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td class="errcode"><a href="#err.inline.C0023.1&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0023</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the match option matches the document node.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0062&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0062</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the match option matches a namespace node.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Declaration</span></summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:delete</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">xml html</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">text xml html</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">match</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:string</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">       </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">XSLTSelectionPattern</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p></details></div><p><span style="display: none;" class="delete_version">The value of the <code class="option">match</code> option <span class="rfc2119" id="c.delete.4.2">must</span> be an XSLTSelectionPattern. A <em class="glossterm"><a href="#dt-selection-pattern">selection pattern</a></em> may match multiple items to be deleted.</span><a id="opt.inline.match-3"></a>The value of the <code class="option">match</code> option <span class="rfc2119" id="c.delete.4.2">must</span> be an XSLTSelectionPattern. A <em class="glossterm"><a href="#dt-selection-pattern">selection pattern</a></em> may match multiple items to be deleted.<a id="opt.inline.match-3"></a>The value of the <code class="option">match</code> option <span class="rfc2119" id="c.delete.4.2">must</span> be an XSLTSelectionPattern. A <em class="glossterm"><a href="#dt-selection-pattern">selection pattern</a></em> may match multiple items to be deleted.</p><p><span style="display: none;" class="delete_version">If an element is selected by the <code class="option">match</code> option, the entire subtree rooted at that element is deleted.</span><a id="opt.inline.match-4"></a>If an element is selected by the <code class="option">match</code> option, the entire subtree rooted at that element is deleted.<a id="opt.inline.match-4"></a>If an element is selected by the <code class="option">match</code> option, the entire subtree rooted at that element is deleted.</p><p><a id="err.inline.C0023.1&#34; opt.inline.match-5"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the <code class="option">match</code> option matches the document node.<a id="err.inline.C0023.1&#34; opt.inline.match-5"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the <code class="option">match</code> option matches the document node.</p><p><a id="err.inline.C0062&#34; opt.inline.match-6"></a>This step cannot be used to remove namespaces. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the <code class="option">match</code> option matches a namespace node. Also, note that deleting an attribute named <code class="tag-attribute">xml:base</code> does not change the base URI of the element on which it occurred.<a id="err.inline.C0062&#34; opt.inline.match-6"></a>This step cannot be used to remove namespaces. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the <code class="option">match</code> option matches a namespace node. Also, note that deleting an attribute named <code class="tag-attribute">xml:base</code> does not change the base URI of the element on which it occurred.</p><section id="c.delete.8" class="simplesect"><div class="section-titlepage"><h4>Document properties</h4></div><div class="content"><p>If the resulting document contains exactly one text node, the <code class="literal">content-type</code> property is changed to <code class="literal">text/plain</code> and the <code class="literal">serialization</code> property is removed, while all other document properties are preserved. In all other cases, all document properties are preserved.</p></div></section></div></section><section id="c.encode" class="section"><div class="section-titlepage"><h3><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.10. </span></bdi><span class="deltaxml-new" style="background:#90EE90">p:encode</span><a aria-label="§" class="self-link" href="#c.encode"></a></h3></div><div class="content"><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">p:encode</span></code><span class="deltaxml-new" style="background:#90EE90"> step encodes an input document, for example with base64 encoding. </span></p><div class="declare-step"><p><span class="deltaxml-new" style="background:#90EE90">Summary</span></p><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Input port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.source-22"><span class="deltaxml-new" style="background:#90EE90">source</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90"> </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Output port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.result-13"><span class="deltaxml-new" style="background:#90EE90">result</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">application/xml </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Option name</span></th><th><span class="deltaxml-new" style="background:#90EE90">Type</span></th><th><span class="deltaxml-new" style="background:#90EE90">Default value</span></th></tr></thead><tbody><tr><td><span class="deltaxml-new" style="background:#90EE90">encoding</span></td><td><span class="deltaxml-new" style="background:#90EE90">xs:string</span></td><td><span class="deltaxml-new" style="background:#90EE90">'base64'</span></td></tr><tr><td><a href="#opt.inline.serialization-3"><span class="deltaxml-new" style="background:#90EE90">serialization</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">map(xs:QName,item()*)?</span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td></tr></tbody></table><details><summary><span class="deltaxml-new" style="background:#90EE90">Errors</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Error code</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td class="errcode"><a href="#err.inline.C0052.1&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0052</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the encoding specified is not supported by the implementation.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Implementation details</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Implementation</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td><a href="#impl-35"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">An implementation may support encodings other than base64, but these encodings and their names are implementation-defined.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Declaration</span></summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:encode</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">application/xml</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">encoding</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:string</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'base64'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">  </span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">serialization</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">map(xs:QName,item()*)?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">  </span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p></details></div><p><span class="deltaxml-new" style="background:#90EE90">The encode step produces an XML document by encoding its input. The encoding value “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">base64</span></code><span class="deltaxml-new" style="background:#90EE90">” </span><span class="rfc2119" id="c.encode.4.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be supported. </span><span id="impl-35"><span class="deltaxml-new" style="background:#90EE90">An implementation may support encodings other than </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">base64</span></code><span class="deltaxml-new" style="background:#90EE90">, but these encodings and their names are </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em><span class="deltaxml-new" style="background:#90EE90">.</span></span><a id="err.inline.C0052.1&#34;"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0052"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0052</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the encoding specified is not supported by the implementation. </span></p><p><span class="deltaxml-new" style="background:#90EE90">If the input document is a binary document, its content is encoded directly, otherwise the content is first serialized and the serialized representation is encoded. The </span><a id="opt.inline.serialization-3"></a><code class="option"><span class="deltaxml-new" style="background:#90EE90">serialization</span></code><span class="deltaxml-new" style="background:#90EE90"> option is provided to control the serialization of content when it is stored. If the document to be stored has a “serialization” property, the serialization is controlled by the merger of the two maps where the entries in the “serialization” property take precedence. Serialization is described in [</span><a href="#xproc31"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">XProc 3.1</span></span></a><span class="deltaxml-new" style="background:#90EE90">].</span></p><p><span class="deltaxml-new" style="background:#90EE90">The result of encoding is a </span><a href="#c.data"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:data</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element.</span></p><p class="element-syntax element-syntax-step-vocabulary"><code><span class="deltaxml-new" style="background:#90EE90">&lt;c:data</span><br /><span class="deltaxml-new" style="background:#90EE90">  </span><strong><span class="deltaxml-new" style="background:#90EE90">content-type</span></strong><span class="deltaxml-new" style="background:#90EE90"> = </span><var><span class="deltaxml-new" style="background:#90EE90">ContentType</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  charset? = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><br /><span class="deltaxml-new" style="background:#90EE90">  encoding? = </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><span class="deltaxml-new" style="background:#90EE90">&gt;</span><br /><span class="deltaxml-new" style="background:#90EE90">    </span><var><span class="deltaxml-new" style="background:#90EE90">string</span></var><br /><span class="deltaxml-new" style="background:#90EE90">&lt;/c:data&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">The content of the </span><a href="#c.data"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:data</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element is the encoded representation of the content.</span></p><div class="note admonition"><h3><span class="deltaxml-new" style="background:#90EE90">Note</span></h3><div class="admonition-body"><p><span class="deltaxml-new" style="background:#90EE90">There is no </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">p:decode</span></code><span class="deltaxml-new" style="background:#90EE90"> step. Decoding is performed by the </span><a href="#c.cast-content-type"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:cast-content-type</span></code></a><span class="deltaxml-new" style="background:#90EE90"> step if the input is a </span><a href="#c.data"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:data</span></code></a><span class="deltaxml-new" style="background:#90EE90"> document.</span></p></div></div><section id="c.encode.10" class="simplesect"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">Document properties</span></h4></div><div class="content"><p><span class="deltaxml-new" style="background:#90EE90">No document properties are preserved.</span></p></div></section></div></section><section id="c.error" class="section"><div class="section-titlepage"><h3><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.10. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.11. </span></bdi>p:error<a aria-label="§" class="self-link" href="#c.error"></a></h3></div><div class="content"><p>The <code class="code">p:error</code> step generates a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> using the input provided to the step.</p><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:error</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">text xml</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">any</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">code</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:QName</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">         </span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">This step uses the document provided on its input as the content of the error raised. An instance of the </span><code class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:errors</span></code><span class="deltaxml-old" style="background:#FF5555"> element will be produced on the error output port, as is always the case for </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic errors</span></a></em><span class="deltaxml-old" style="background:#FF5555">. The error generated can be caught by a </span><code class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:try</span></code><span class="deltaxml-old" style="background:#FF5555"> just like any other dynamic error.</span></p><div class="declare-step"><p><span class="deltaxml-new" style="background:#90EE90">Summary</span></p><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Input port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.source-22"><span class="deltaxml-new" style="background:#90EE90">source</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td><span class="deltaxml-new" style="background:#90EE90">text xml </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Output port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.result-13"><span class="deltaxml-new" style="background:#90EE90">result</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td><span class="deltaxml-new" style="background:#90EE90">any </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Option name</span></th><th><span class="deltaxml-new" style="background:#90EE90">Type</span></th><th><span class="deltaxml-new" style="background:#90EE90">Required</span></th></tr></thead><tbody><tr><td class="required"><a href="#opt.inline.code-1"><span class="deltaxml-new" style="background:#90EE90">code</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:QName</span></td><td><span class="deltaxml-new" style="background:#90EE90">✔ </span></td></tr></tbody></table><details><summary><span class="deltaxml-new" style="background:#90EE90">Declaration</span></summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:error</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">text xml</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">any</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">code</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:QName</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">         </span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p></details></div><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:error</span></code><span class="deltaxml-new" style="background:#90EE90"> step always fails. It generates a single error with the error code specified in the </span><a id="opt.inline.code-1"></a><code class="option"><span class="deltaxml-new" style="background:#90EE90">code</span></code><span class="deltaxml-new" style="background:#90EE90"> option. It also produces a </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:errors</span></code><span class="deltaxml-new" style="background:#90EE90"> document that will be visible on the error port inside a </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:catch</span></code><span class="deltaxml-new" style="background:#90EE90">. (The error vocabulary is described in [</span><a href="#xproc31"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">XProc 3.1</span></span></a><span class="deltaxml-new" style="background:#90EE90">].) </span></p><p><span class="deltaxml-new" style="background:#90EE90">This step </span><span class="rfc2119" id="c.error.5.1"><span class="deltaxml-new" style="background:#90EE90">should</span></span><span class="deltaxml-new" style="background:#90EE90"> include the content of the document that appears on the </span><a id="port.inline.source-22"></a><code class="port"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90"> port in the error. If more than one document appears on the </span><a id="port.inline.source-23"></a><code class="port"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90"> port of the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:error</span></code><span class="deltaxml-new" style="background:#90EE90"> step, all of the documents </span><span class="rfc2119" id="c.error.5.5"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be added to a single </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:error</span></code><span class="deltaxml-new" style="background:#90EE90"> element.</span></p><p>For authoring convenience, the <code class="tag-element">p:error</code> step is declared with a single, primary output port. With respect to connections, this port behaves like any other output port even though nothing can ever appear on it since the step always fails.</p><p>For example, given the following invocation:</p><pre class="programlisting language-markup xml"><code>&lt;p:error xmlns:my="http://www.example.org/error" name="bad-document" code="my:unk12"&gt; &lt;p:with-input port="source"&gt; &lt;message&gt;The document element is unknown.&lt;/message&gt; &lt;/p:with-input&gt; &lt;/p:error&gt;</code></pre><p>The <span class="deltaxml-old" style="background:#FF5555">error vocabulary element (and document)</span><span class="deltaxml-new" style="background:#90EE90">errors document</span> generated on the error output port <span class="deltaxml-old" style="background:#FF5555">would</span><span class="deltaxml-new" style="background:#90EE90">might</span> be:</p><pre class="programlisting language-markup xml"><code>&lt;c:errors xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:p="http://www.w3.org/ns/xproc" xmlns:my="http://www.example.org/error"&gt; &lt;c:error name="bad-document" type="p:error" code="my:unk12"&gt;&lt;message &gt;The document element is unknown.&lt;/message&gt; &lt;/c:error&gt; &lt;/c:errors&gt;</code></pre><p>The <code class="tag-attribute">href</code>, <code class="tag-attribute">line</code> and <code class="tag-attribute">column</code>, or <code class="tag-attribute">offset</code>, might also be present on the <code class="tag-element">c:error</code> to identify the location of the <code class="tag-element">p:error</code> element in the pipeline.</p><section id="c.error.11" class="simplesect"><div class="section-titlepage"><h4><span class="deltaxml-old" style="background:#FF5555">Document properties</span></h4></div><div class="content"><p><span class="deltaxml-old" style="background:#FF5555">No document properties are preserved but that’s irrelevant as no document is ever produced.</span></p></div></section><section id="c.error.12" class="simplesect"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">Document properties</span></h4></div><div class="content"><p><span class="deltaxml-new" style="background:#90EE90">No document properties are preserved but that’s irrelevant as no document is ever produced.</span></p></div></section></div></section><section id="c.filter" class="section"><div class="section-titlepage"><h3><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.11. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.12. </span></bdi>p:filter<a aria-label="§" class="self-link" href="#c.filter"></a></h3></div><div class="content"><p><span class="deltaxml-old" style="background:#FF5555">The </span><code class="code"><span class="deltaxml-old" style="background:#FF5555">p:filter</span></code><span class="deltaxml-old" style="background:#FF5555"> step selects portions of the source document based on a (possibly dynamically constructed) XPath select expression.</span></p><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:filter</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">xml html</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">text xml html</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:string</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">      </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">XPathExpression</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">p:filter</span></code><span class="deltaxml-new" style="background:#90EE90"> step evaluates an XPath expression against the input document.</span></p><div class="declare-step"><p><span class="deltaxml-new" style="background:#90EE90">Summary</span></p><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Input port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.source-24"><span class="deltaxml-new" style="background:#90EE90">source</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">xml html </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Output port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.result-13"><span class="deltaxml-new" style="background:#90EE90">result</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td><span class="deltaxml-new" style="background:#90EE90">text xml html json </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Option name</span></th><th><span class="deltaxml-new" style="background:#90EE90">Type</span></th><th><span class="deltaxml-new" style="background:#90EE90">Required</span></th></tr></thead><tbody><tr><td class="required"><span class="deltaxml-new" style="background:#90EE90">select</span></td><td><span class="deltaxml-new" style="background:#90EE90">XPathExpression</span></td><td><span class="deltaxml-new" style="background:#90EE90">✔ </span></td></tr></tbody></table><details><summary><span class="deltaxml-new" style="background:#90EE90">Declaration</span></summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:filter</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">xml html</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">text xml html json</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:string</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">      </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">XPathExpression</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p></details></div><p><span class="deltaxml-new" style="background:#90EE90">This step evaluates the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">select</span></code><span class="deltaxml-new" style="background:#90EE90"> expression against the input document. The result of that evaluation appears on the </span><a id="port.inline.result-13"></a><code class="port"><span class="deltaxml-new" style="background:#90EE90">result</span></code><span class="deltaxml-new" style="background:#90EE90"> port.</span></p><p><span style="display: none;" class="delete_version">This step behaves just like an <code class="tag-element">p:input</code> with a <code class="tag-attribute">select</code> expression except that the select expression is computed dynamically.</span><span style="display: none;" class="add_version">This step is very similar to a <code class="tag-element">p:with-input</code> with a <code class="tag-attribute">select</code> expression except that the select expression is computed dynamically (because it’s a step option in this case).</span><span class="modify_version">This step <span class="deltaxml-old" style="background:#FF5555">behaves just like an</span><span class="deltaxml-new" style="background:#90EE90">is very similar to a</span> <code class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:input</span><span class="deltaxml-new" style="background:#90EE90">p:with-input</span></code> with a <code class="tag-attribute">select</code> expression except that the select expression is computed dynamically<span class="deltaxml-new" style="background:#90EE90"> (because it’s a step option in this case)</span>.</span></p><section id="c.filter.5" class="simplesect"><div class="section-titlepage"><h4><span class="deltaxml-old" style="background:#FF5555">Document properties</span></h4></div><div class="content"><p><span class="deltaxml-old" style="background:#FF5555">No document properties are preserved. The </span><code class="property"><span class="deltaxml-old" style="background:#FF5555">base-uri</span></code><span class="deltaxml-old" style="background:#FF5555"> property of each document will reflect the base URI of the selected node(s). </span></p></div></section><section id="c.filter.6" class="simplesect"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">Document properties</span></h4></div><div class="content"><p><span class="deltaxml-new" style="background:#90EE90">No document properties are preserved. When portions of the input are selected, the </span><code class="property"><span class="deltaxml-new" style="background:#90EE90">base-uri</span></code><span class="deltaxml-new" style="background:#90EE90"> property of each document constructed from a selected portion will reflect the base URI of the selected node(s). </span></p></div></section></div></section><section id="c.hash" class="section"><div class="section-titlepage"><h3><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.12. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.13. </span></bdi>p:hash<a aria-label="§" class="self-link" href="#c.hash"></a></h3></div><div class="content"><p><span style="display: none;" class="delete_version">The <code class="tag-element">p:hash</code> step generates a hash, or digital “fingerprint”, for some value and injects it into the <code class="port">source</code> document.</span><a id="port.inline.source-24"></a>The <code class="tag-element">p:hash</code> step generates a hash, or digital “fingerprint”, for some value and injects it into the <code class="port">source</code> document.<a id="port.inline.source-24"></a>The <code class="tag-element">p:hash</code> step generates a hash, or digital “fingerprint”, for some value and injects it into the <code class="port">source</code> document.</p><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:hash</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">xml html</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">text xml html</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">parameters</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">map(xs:QName,item()*)?</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">     </span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">value</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:string</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">       </span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">algorithm</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:QName</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">    </span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">match</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:string</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'/*/node()'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">  </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">XSLTSelectionPattern</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">version</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:string?</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                    </span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><div class="declare-step"><p><span class="deltaxml-new" style="background:#90EE90">Summary</span></p><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Input port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.source-25"><span class="deltaxml-new" style="background:#90EE90">source</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">xml html </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Output port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.result-14"><span class="deltaxml-new" style="background:#90EE90">result</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">text xml html </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Option name</span></th><th><span class="deltaxml-new" style="background:#90EE90">Type</span></th><th><span class="deltaxml-new" style="background:#90EE90">Default value</span></th><th><span class="deltaxml-new" style="background:#90EE90">Required</span></th></tr></thead><tbody><tr><td class="required"><a href="#opt.inline.algorithm-1"><span class="deltaxml-new" style="background:#90EE90">algorithm</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:QName</span></td><td><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">✔ </span></td></tr><tr><td class="required"><a href="#opt.inline.value-1"><span class="deltaxml-new" style="background:#90EE90">value</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:string</span></td><td><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">✔ </span></td></tr><tr><td><a href="#opt.inline.match-7"><span class="deltaxml-new" style="background:#90EE90">match</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">XSLTSelectionPattern</span></td><td><span class="deltaxml-new" style="background:#90EE90">'/*/node()'</span></td><td><span class="deltaxml-new" style="background:#90EE90"> </span></td></tr><tr><td><a href="#opt.inline.parameters-12"><span class="deltaxml-new" style="background:#90EE90">parameters</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">map(xs:QName,item()*)?</span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td><td><span class="deltaxml-new" style="background:#90EE90"> </span></td></tr><tr><td><a href="#opt.inline.version-1"><span class="deltaxml-new" style="background:#90EE90">version</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:string?</span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td><td><span class="deltaxml-new" style="background:#90EE90"> </span></td></tr></tbody></table><details><summary><span class="deltaxml-new" style="background:#90EE90">Errors</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Error code</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td class="errcode"><a href="#err.inline.C0036&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0036</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the requested hash algorithm is not one that the processor understands or if the value or parameters are not appropriate for that algorithm.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Implementation details</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Implementation</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td><a href="#impl-36"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is implementation-defined what other algorithms are supported.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Declaration</span></summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:hash</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">xml html</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">text xml html</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">parameters</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">map(xs:QName,item()*)?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">     </span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">value</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:string</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">       </span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">algorithm</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:QName</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">    </span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">match</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:string</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'/*/node()'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">  </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">XSLTSelectionPattern</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">version</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:string?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                    </span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p></details></div><p><span style="display: none;" class="delete_version">The value of the <code class="option">algorithm</code> option must be a QName. If it does not have a prefix, then it must be one of the following values: “crc”, “md”, or “sha”.</span><a id="opt.inline.algorithm-1"></a>The value of the <code class="option">algorithm</code> option must be a QName. If it does not have a prefix, then it must be one of the following values: “crc”, “md”, or “sha”.<a id="opt.inline.algorithm-1"></a>The value of the <code class="option">algorithm</code> option must be a QName. If it does not have a prefix, then it must be one of the following values: “crc”, “md”, or “sha”.</p><p>If a <code class="tag-attribute">version</code> is not specified, the default version is algorithm-defined. For “<code class="literal">crc</code>” it is 32, for “<code class="literal">md</code>” it is 5, for “<code class="literal">sha</code>” it is 1.</p><p><span style="display: none;" class="delete_version">A hash is constructed from the string specified in the <code class="option">value</code> option using the specified algorithm and version. Implementations <span class="rfc2119" id="c.hash.6.2">must</span> support [<a href="#bib.crc"><span class="abbrev">CRC32</span></a>], [<a href="#rfc1321"><span class="abbrev">RFC 1321</span></a>], and [<a href="#bib.sha"><span class="abbrev">SHA1</span></a>] hashes. <span id="impl-36">It is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> what other algorithms are supported.</span> The resulting hash <span class="rfc2119" id="c.hash.6.7">should</span> be returned as a string of hexadecimal characters. </span><a id="opt.inline.value-1"></a>A hash is constructed from the string specified in the <code class="option">value</code> option using the specified algorithm and version. Implementations <span class="rfc2119" id="c.hash.6.2">must</span> support [], [], and [] hashes. <span id="impl-36">It is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> what other algorithms are supported.</span> The resulting hash <span class="rfc2119" id="c.hash.6.7">should</span> be returned as a string of hexadecimal characters. <a id="opt.inline.value-1"></a>A hash is constructed from the string specified in the <code class="option">value</code> option using the specified algorithm and version. Implementations <span class="rfc2119" id="c.hash.6.2">must</span> support [], [], and [] hashes. <span id="impl-36">It is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> what other algorithms are supported.</span> The resulting hash <span class="rfc2119" id="c.hash.6.7">should</span> be returned as a string of hexadecimal characters. </p><p><span style="display: none;" class="delete_version">The value of the <code class="option">match</code> option must be an XSLTSelectionPattern.</span><a id="opt.inline.match-7"></a>The value of the <code class="option">match</code> option must be an XSLTSelectionPattern.<a id="opt.inline.match-7"></a>The value of the <code class="option">match</code> option must be an XSLTSelectionPattern.</p><p><a id="err.inline.C0036&#34;"></a>The hash of the specified value is computed using the algorithm and parameters specified. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the requested hash algorithm is not one that the processor understands or if the value or parameters are not appropriate for that algorithm.<a id="err.inline.C0036&#34;"></a>The hash of the specified value is computed using the algorithm and parameters specified. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the requested hash algorithm is not one that the processor understands or if the value or parameters are not appropriate for that algorithm.</p><p><span style="display: none;" class="delete_version">The matched nodes are specified with the <em class="glossterm"><a href="#dt-selection-pattern">selection pattern</a></em> in the <code class="option">match</code> option. For each matching node, the string value of the computed hash is used in the output (if more than one node matches, the <em>same</em> hash value is used in each match). Nodes that do not match are copied without change.</span><a id="opt.inline.match-8"></a>The matched nodes are specified with the <em class="glossterm"><a href="#dt-selection-pattern">selection pattern</a></em> in the <code class="option">match</code> option. For each matching node, the string value of the computed hash is used in the output (if more than one node matches, the <em>same</em> hash value is used in each match). Nodes that do not match are copied without change.<a id="opt.inline.match-8"></a>The matched nodes are specified with the <em class="glossterm"><a href="#dt-selection-pattern">selection pattern</a></em> in the <code class="option">match</code> option. For each matching node, the string value of the computed hash is used in the output (if more than one node matches, the <em>same</em> hash value is used in each match). Nodes that do not match are copied without change.</p><p><span style="display: none;" class="delete_version">If the expression given in the <code class="option">match</code> option matches an <em>attribute</em>, the hash is used as the new value of the attribute in the output. If the attribute is named “<code class="tag-attribute">xml:base</code>”, the base URI of the element <span class="rfc2119" id="c.hash.10.4">must</span> also be amended accordingly.</span><a id="opt.inline.match-9"></a>If the expression given in the <code class="option">match</code> option matches an <em>attribute</em>, the hash is used as the new value of the attribute in the output. If the attribute is named “<code class="tag-attribute">xml:base</code>”, the base URI of the element <span class="rfc2119" id="c.hash.10.4">must</span> also be amended accordingly.<a id="opt.inline.match-9"></a>If the expression given in the <code class="option">match</code> option matches an <em>attribute</em>, the hash is used as the new value of the attribute in the output. If the attribute is named “<code class="tag-attribute">xml:base</code>”, the base URI of the element <span class="rfc2119" id="c.hash.10.4">must</span> also be amended accordingly.</p><p><span style="display: none;" class="delete_version">If the document node is matched, the entire document is replaced by a text node with the hash. What appears on port <code class="port">result</code> is a text document with the text node wrapped in a document node.</span><span style="display: none;" class="add_version">If the document node is matched, the result is a text document.</span><span class="modify_version">If the document node is matched, the <span class="deltaxml-old" style="background:#FF5555">entire document is replaced by a text node with the hash. What appears on port </span>result is a text document<span class="deltaxml-old" style="background:#FF5555"> with the text node wrapped in a document node</span>.</span></p><p>If the expression matches any other kind of node, the entire node (and <em>not</em> just its contents) is replaced by the hash.</p><section id="c.hash.13" class="simplesect"><div class="section-titlepage"><h4>Document properties</h4></div><div class="content"><p>If the resulting document contains exactly one text node, the <code class="literal">content-type</code> property is changed to <code class="literal">text/plain</code> and the <code class="literal">serialization</code> property is removed, while all other document properties are preserved. For other document types, all document properties are preserved.</p></div></section></div></section><section id="c.http-request" class="section"><div class="section-titlepage"><h3><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.13. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.14. </span></bdi>p:http-request<a aria-label="§" class="self-link" href="#c.http-request"></a></h3></div><div class="content"><p><span style="display: none;" class="delete_version">The <code class="code">p:http-request</code> step allows authors to interact with resources over HTTP or related protocols. Implementations <span class="rfc2119" id="c.http-request.2.2">must</span> support the <code class="literal">http</code> and <code class="literal">https</code> protocols. (Implementors are encouraged to support as many protocols as practical. In particular, pipeline authors may attempt to use <code class="tag-element">p:http-request</code> to load documents with computed URIs using the <code class="literal">file:</code> scheme.)</span><span style="display: none;" class="add_version">The <code class="code">p:http-request</code> step allows authors to interact with resources over HTTP or related protocols. Implementations <span class="rfc2119" id="c.http-request.2.2">must</span> support the <code class="literal">http</code> and <code class="literal">https</code> protocols. </span><span class="modify_version">The <code class="code">p:http-request</code> step allows authors to interact with resources over HTTP or related protocols. Implementations <span class="rfc2119" id="c.http-request.2.2">must</span> support the <code class="literal">http</code> and <code class="literal">https</code> protocols. <span class="deltaxml-old" style="background:#FF5555">(Implementors are encouraged to support as many protocols as practical. In particular, pipeline authors may attempt to use </span><span class="deltaxml-old" style="background:#FF5555">p:http-request</span><span class="deltaxml-old" style="background:#FF5555"> to load documents with computed URIs using the </span><span class="deltaxml-old" style="background:#FF5555">file:</span><span class="deltaxml-old" style="background:#FF5555"> scheme.)</span></span></p><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:http-request</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">any</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">any</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">report</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">application/json</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">href</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:anyURI</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">        </span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">method</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:string?</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'GET'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">      </span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">serialization</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">map(xs:QName,item()*)?</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">  </span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">headers</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">map(xs:string, xs:string)?</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">    </span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">auth</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">map(xs:string, item()+)?</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">         </span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">parameters</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">map(xs:QName, item()*)?</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">    </span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">assert</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:string</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'.?status-code lt 400'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><div class="declare-step"><p><span class="deltaxml-new" style="background:#90EE90">Summary</span></p><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Input port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.source-25"><span class="deltaxml-new" style="background:#90EE90">source</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td><span class="deltaxml-new" style="background:#90EE90">any </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Output port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.result-14"><span class="deltaxml-new" style="background:#90EE90">result</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td><span class="deltaxml-new" style="background:#90EE90">any </span></td></tr><tr><td><a href="#port.inline.report-4"><span class="deltaxml-new" style="background:#90EE90">report</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">application/json </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Option name</span></th><th><span class="deltaxml-new" style="background:#90EE90">Type</span></th><th><span class="deltaxml-new" style="background:#90EE90">Default value</span></th><th><span class="deltaxml-new" style="background:#90EE90">Required</span></th></tr></thead><tbody><tr><td class="required"><a href="#c.http-request-def-href"><span class="deltaxml-new" style="background:#90EE90">href</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:anyURI</span></td><td><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">✔ </span></td></tr><tr><td><a href="#opt.inline.assert-1"><span class="deltaxml-new" style="background:#90EE90">assert</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:string</span></td><td><span class="deltaxml-new" style="background:#90EE90">'.?status-code lt 400'</span></td><td><span class="deltaxml-new" style="background:#90EE90"> </span></td></tr><tr><td><a href="#c.http-request-def-auth"><span class="deltaxml-new" style="background:#90EE90">auth</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">map(xs:string, item()+)?</span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td><td><span class="deltaxml-new" style="background:#90EE90"> </span></td></tr><tr><td><a href="#c.http-request-def-headers"><span class="deltaxml-new" style="background:#90EE90">headers</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">map(xs:string, xs:string)?</span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td><td><span class="deltaxml-new" style="background:#90EE90"> </span></td></tr><tr><td><a href="#c.http-request-def-method"><span class="deltaxml-new" style="background:#90EE90">method</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:string?</span></td><td><span class="deltaxml-new" style="background:#90EE90">'GET'</span></td><td><span class="deltaxml-new" style="background:#90EE90"> </span></td></tr><tr><td><a href="#opt.inline.parameters-12"><span class="deltaxml-new" style="background:#90EE90">parameters</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">map(xs:QName, item()*)?</span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td><td><span class="deltaxml-new" style="background:#90EE90"> </span></td></tr><tr><td><a href="#c.http-request-def-serialization"><span class="deltaxml-new" style="background:#90EE90">serialization</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">map(xs:QName,item()*)?</span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td><td><span class="deltaxml-new" style="background:#90EE90"> </span></td></tr></tbody></table><details><summary><span class="deltaxml-new" style="background:#90EE90">Errors</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Error code</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td class="errcode"><a href="#err.inline.C0003&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0003</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if a “username” or a “password” key is present without specifying a value for the “auth-method” key, if the requested auth-method isn't supported, or the authentication challenge contains an authentication method that isn't supported.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0030&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0030</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the response body cannot be interpreted as requested (e.g. application/json to override application/xml content).</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0078&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0078</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the value associated with the “fail-on-timeout” is associated with true() and a HTTP status code 408 is encountered.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0122&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0122</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the given method is not supported.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0123&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0123</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if any key in the “auth” map is associated with a value that is not an instance of the required type.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0124&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0124</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if any key in the “parameters” map is associated with a value that is not an instance of the required type.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0125&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0125</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the key “accept-multipart” as the value false() and a multipart response is detected.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0126&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0126</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the XPath expression in assert evaluates to false.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0127&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0127</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the headers map contains two keys that are the same when compared in a case-insensitive manner.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0128&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0128</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the URI’s scheme is unknown or not supported.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0131&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0131</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the processor cannot support the requested encoding.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0132&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0132</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the override content encoding cannot be supported.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0133&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0133</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if more than one document appears on the source port and a content-type header is present and the content type specified is not a multipart content type.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0203&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0203</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the specified boundary is not valid (for example, if it begins with two hyphens “--”).</span></td></tr><tr><td class="errcode"><a href="#err.inline.D0079.2&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XD0079</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if a supplied content-type is not a valid media type of the form “type/subtype+ext” or “type/subtype”.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Implementation details</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Implementation</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td><a href="#impl-37"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is implementation-defined which HTTP methods are supported.</span></td></tr><tr><td><a href="#impl-38"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">The interpretation of values associated with the “auth-method” key other than “Basic” or “Digest” is implementation-defined.</span></td></tr><tr><td><a href="#impl-39"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">Other key value pairs in map “auth” are implementation-defined.</span></td></tr><tr><td><a href="#impl-40"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is implementation-defined which other key/value pairs in the parameters option are supported.</span></td></tr><tr><td><a href="#impl-41"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">The default behaviour in case of a redirect response is implementation-defined.</span></td></tr><tr><td><a href="#impl-42"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is implementation-defined how a multipart boundary is constructed.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Declaration</span></summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:http-request</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">any</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">any</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">report</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">application/json</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">href</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:anyURI</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">        </span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">method</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:string?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'GET'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">      </span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">serialization</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">map(xs:QName,item()*)?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">  </span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">headers</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">map(xs:string, xs:string)?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">    </span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">auth</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">map(xs:string, item()+)?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">         </span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">parameters</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">map(xs:QName, item()*)?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">    </span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">assert</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:string</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'.?status-code lt 400'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p></details></div><p><span style="display: none;" class="delete_version">The <code class="tag-element">p:http-request</code> step performs the HTTP request specified by the <code class="option">method</code> option against the URI specified in the <code class="option">href</code> option. In simple cases, for example, a GET request on an unauthenticated URI, nothing else is necessary to form a complete request.</span><a id="opt.inline.method-6 opt.inline.href-3"></a>The <code class="tag-element">p:http-request</code> step performs the HTTP request specified by the <code class="option">method</code> option against the URI specified in the <code class="option">href</code> option. In simple cases, for example, a GET request on an unauthenticated URI, nothing else is necessary to form a complete request.<span class="deltaxml-new" style="background:#90EE90"> (Implementors are encouraged to support as many protocols as practical. In particular, pipeline authors may attempt to use </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:http-request</span></code><span class="deltaxml-new" style="background:#90EE90"> to load documents with computed URIs using the </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">file:</span></code><span class="deltaxml-new" style="background:#90EE90"> scheme.) </span><a id="opt.inline.method-6 opt.inline.href-3"></a>The <code class="tag-element">p:http-request</code> step performs the HTTP request specified by the <code class="option">method</code> option against the URI specified in the <code class="option">href</code> option. In simple cases, for example, a GET request on an unauthenticated URI, nothing else is necessary to form a complete request.<span class="deltaxml-new" style="background:#90EE90"> (Implementors are encouraged to support as many protocols as practical. In particular, pipeline authors may attempt to use </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:http-request</span></code><span class="deltaxml-new" style="background:#90EE90"> to load documents with computed URIs using the </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">file:</span></code><span class="deltaxml-new" style="background:#90EE90"> scheme.) </span></p><p><span style="display: none;" class="delete_version">If the method, for example, POST, supports a body, the request body is constructed using the document(s) appearing on the <code class="port">source</code> port. For the convenience of pipeline authors, documents may appear on the <code class="port">source</code> port even when the request method (such as GET or HEAD) does not define the semantics of a payload. If the semantics are undefined, the documents are ignored when constructing the request unless the <code class="option">parameters</code> option specifies “<code class="literal">send-body-anyway</code>” as <code class="code">true()</code>.</span><a id="port.inline.source-25 port.inline.source-26 opt.inline.parameters-12"></a>If the method, for example, POST, supports a body, the request body is constructed using the document(s) appearing on the <code class="port">source</code> port. For the convenience of pipeline authors, documents may appear on the <code class="port">source</code> port even when the request method (such as GET or HEAD) does not define the semantics of a payload. If the semantics are undefined, the documents are ignored when constructing the request unless the <code class="option">parameters</code> option specifies “<code class="literal">send-body-anyway</code>” as <code class="code">true()</code>.<a id="port.inline.source-25 port.inline.source-26 opt.inline.parameters-12"></a>If the method, for example, POST, supports a body, the request body is constructed using the document(s) appearing on the <code class="port">source</code> port. For the convenience of pipeline authors, documents may appear on the <code class="port">source</code> port even when the request method (such as GET or HEAD) does not define the semantics of a payload. If the semantics are undefined, the documents are ignored when constructing the request unless the <code class="option">parameters</code> option specifies “<code class="literal">send-body-anyway</code>” as <code class="code">true()</code>.</p><p><span style="display: none;" class="delete_version">The headers for the request come from the <code class="option">headers</code> option (see below). If exactly one document appears on the <code class="port">source</code> port, its document properties also contribute to the overall request headers.</span><a id="opt.inline.headers-1 port.inline.source-27"></a>The headers for the request come from the <code class="option">headers</code> option (see below). If exactly one document appears on the <code class="port">source</code> port, its document properties also contribute to the overall request headers.<a id="opt.inline.headers-1 port.inline.source-27"></a>The headers for the request come from the <code class="option">headers</code> option (see below). If exactly one document appears on the <code class="port">source</code> port, its document properties also contribute to the overall request headers.</p><p><span style="display: none;" class="delete_version">The response from the HTTP request appears on the <code class="port">result</code> and <code class="port">report</code> ports. Any documents contained in the response body will appear on the <code class="port">result</code> port. Each document in the response will be parsed according to its content-type (but see “<code class="literal">override-content-type</code>” in the <code class="option">parameters</code> option). Details about the outcome of the request will appear as a map on the <code class="port">report</code> port. The map will always contain: </span><a id="port.inline.result-14 port.inline.report-4 port.inline.result-15 opt.inline.parameters-13 port.inline.report-5"></a>The response from the HTTP request appears on the <code class="port">result</code> and <code class="port">report</code> ports. Any documents contained in the response body will appear on the <code class="port">result</code> port. Each document in the response will be parsed according to its content-type (but see “<code class="literal">override-content-type</code>” in the <code class="option">parameters</code> option). Details about the outcome of the request will appear as a map on the <code class="port">report</code> port. The map will always contain: <a id="port.inline.result-14 port.inline.report-4 port.inline.result-15 opt.inline.parameters-13 port.inline.report-5"></a>The response from the HTTP request appears on the <code class="port">result</code> and <code class="port">report</code> ports. Any documents contained in the response body will appear on the <code class="port">result</code> port. Each document in the response will be parsed according to its content-type (but see “<code class="literal">override-content-type</code>” in the <code class="option">parameters</code> option). Details about the outcome of the request will appear as a map on the <code class="port">report</code> port. The map will always contain: </p><div class="variablelist"><dl><dt><span class="term"><code class="literal">status-code</code> (an <code class="code">xs:integer</code>)</span></dt><dd><p>This is the HTTP status code returned for the request.</p></dd><dt><span class="term"><code class="literal">base-uri</code> (an <code class="code">xs:anyURI</code>)</span></dt><dd><p>This is the URI of the last request made and is always available in the report even when the request does not return any documents. In the case of HTTP redirection, the base URI returned may be different from the original request URI. </p></dd><dt><span class="term"><code class="literal">headers</code> (a <code class="code">map(xs:string, xs:string)</code>)</span></dt><dd><p>These are the HTTP headers returned for the request. The map may be empty. Header names are converted to lowercase.</p></dd></dl></div><p>The <code class="tag-element">p:http-request</code> step has the following options:</p><div class="variablelist"><dl><dt><span style="display: none;" class="delete_version"><span class="term"><code class="option">href</code></span></span><span style="display: none;" class="add_version"><span class="term"><a id="c.http-request-def-href"></a><a id="opt.inline.href-4"></a><code class="option">href</code></span></span><span class="modify_version"><span class="term"><a id="c.http-request-def-href"></a><a id="opt.inline.href-4"></a><code class="option">href</code></span></span></dt><dd><p><span style="display: none;" class="delete_version">The <code class="option">href</code> option specifies the request’s IRI. Relative values are resolved against the base URI of the element on which the option is specified (the relevant <code class="tag-element">p:with-option</code> or the step element in the case of a syntactic shortcut value).</span><a id="opt.inline.href-5"></a>The <code class="option">href</code> option specifies the request’s IRI. Relative values are resolved against the base URI of the element on which the option is specified (the relevant <code class="tag-element">p:with-option</code> or the step element in the case of a syntactic shortcut value).<a id="opt.inline.href-5"></a>The <code class="option">href</code> option specifies the request’s IRI. Relative values are resolved against the base URI of the element on which the option is specified (the relevant <code class="tag-element">p:with-option</code> or the step element in the case of a syntactic shortcut value).</p><p><a id="err.inline.C0128&#34; opt.inline.href-6"></a>Fragment identifiers are removed before making the request. Query parameters are passed through unchanged. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the URI’s scheme is unknown or not supported. It is the pipeline author’s responsibility to escape problematic UTF-8 characters in the <code class="option">href</code> value, for example with <code class="function">escape-html-uri()</code>. <a id="err.inline.C0128&#34; opt.inline.href-6"></a>Fragment identifiers are removed before making the request. Query parameters are passed through unchanged. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the URI’s scheme is unknown or not supported. It is the pipeline author’s responsibility to escape problematic UTF-8 characters in the <code class="option">href</code> value, for example with <code class="function">escape-html-uri()</code>. </p></dd><dt><span style="display: none;" class="delete_version"><span class="term"><code class="option">method</code></span></span><span style="display: none;" class="add_version"><span class="term"><a id="c.http-request-def-method"></a><a id="opt.inline.method-7"></a><code class="option">method</code></span></span><span class="modify_version"><span class="term"><a id="c.http-request-def-method"></a><a id="opt.inline.method-7"></a><code class="option">method</code></span></span></dt><dd><p><a id="opt.inline.method-8 err.inline.C0122&#34;"></a>The <code class="option">method</code> specifies the HTTP request method. The value is implicitly turned into an uppercase string if necessary. <span id="impl-37">It is <em class="glossterm"><a href="#dt-implementation-defined">implementation<span class="deltaxml-old" style="background:#FF5555"> </span><span class="deltaxml-new" style="background:#90EE90">-</span>defined</a></em> which HTTP methods are supported.</span> An implementation <span class="rfc2119" id="c.http-request.10.2.2.1.3">should</span> implement at least the methods <code class="literal">GET</code>, <code class="literal">POST</code>, <code class="literal">PUT</code>, <code class="literal">DELETE</code>, and <code class="literal">HEAD</code> (for HTTP and HTTPS). It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the given method is not supported.<a id="opt.inline.method-8 err.inline.C0122&#34;"></a>The <code class="option">method</code> specifies the HTTP request method. The value is implicitly turned into an uppercase string if necessary. <span id="impl-37">It is <em class="glossterm"><a href="#dt-implementation-defined">implementation<span class="deltaxml-old" style="background:#FF5555"> </span><span class="deltaxml-new" style="background:#90EE90">-</span>defined</a></em> which HTTP methods are supported.</span> An implementation <span class="rfc2119" id="c.http-request.10.2.2.1.3">should</span> implement at least the methods <code class="literal">GET</code>, <code class="literal">POST</code>, <code class="literal">PUT</code>, <code class="literal">DELETE</code>, and <code class="literal">HEAD</code> (for HTTP and HTTPS). It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the given method is not supported.</p></dd><dt><span style="display: none;" class="delete_version"><span class="term"><code class="option">serialization</code></span></span><span style="display: none;" class="add_version"><span class="term"><a id="c.http-request-def-serialization"></a><a id="opt.inline.serialization-4"></a><code class="option">serialization</code></span></span><span class="modify_version"><span class="term"><a id="c.http-request-def-serialization"></a><a id="opt.inline.serialization-4"></a><code class="option">serialization</code></span></span></dt><dd><p><span style="display: none;" class="delete_version">The <code class="option">serialization</code> option is used to control the serialization of documents for the request body. If a document has a “<code class="literal">serialization</code>” document property, the effective value of the serialization options is the union of the two maps, where the entries in the “<code class="literal">serialization</code>” document property take precedence.</span><a id="opt.inline.serialization-5"></a>The <code class="option">serialization</code> option is used to control the serialization of documents for the request body. If a document has a “<code class="literal">serialization</code>” document property, the effective value of the serialization options is the union of the two maps, where the entries in the “<code class="literal">serialization</code>” document property take precedence.<a id="opt.inline.serialization-5"></a>The <code class="option">serialization</code> option is used to control the serialization of documents for the request body. If a document has a “<code class="literal">serialization</code>” document property, the effective value of the serialization options is the union of the two maps, where the entries in the “<code class="literal">serialization</code>” document property take precedence.</p></dd><dt><span style="display: none;" class="delete_version"><span class="term"><code class="option">headers</code></span></span><span style="display: none;" class="add_version"><span class="term"><a id="c.http-request-def-headers"></a><a id="opt.inline.headers-2"></a><code class="option">headers</code></span></span><span class="modify_version"><span class="term"><a id="c.http-request-def-headers"></a><a id="opt.inline.headers-2"></a><code class="option">headers</code></span></span></dt><dd><p><span style="display: none;" class="delete_version">The key/value pairs in the <code class="option">headers</code> map are used to construct the request headers. Each map key is used as a header name and the value associated with that key in the map is used as the header value.</span><a id="opt.inline.headers-3"></a>The key/value pairs in the <code class="option">headers</code> map are used to construct the request headers. Each map key is used as a header name and the value associated with that key in the map is used as the header value.<a id="opt.inline.headers-3"></a>The key/value pairs in the <code class="option">headers</code> map are used to construct the request headers. Each map key is used as a header name and the value associated with that key in the map is used as the header value.</p><p><span style="display: none;" class="delete_version">If a single document appears on the <code class="port">source</code> port, then document properties on that document may be added as additional headers. For XML, HTML, and text documents with a <code class="literal">serialization</code> document property having an <code class="literal">encoding</code> key, a <code class="literal">charset</code> is appended to the created <code class="literal">content-type</code> header of the HTTP request. Properties in the <code class="code">http://www.w3.org/ns/xproc-http</code> namespace will be added to the headers, using the local-name of the property QName as the header name. These properties are only copied if they are not specified in the <code class="option">header</code> map. In other words, if the same header name appears in both places, the value from the map is used and the value from the document properties is ignored. (Header names are case-insensitive, so a case-insensitive comparison must be performed.) If multiple documents appear on the <code class="port">source</code> port, none of their properties are used in the request headers.</span><a id="port.inline.source-28 opt.inline.header-1 port.inline.source-29"></a>If a single document appears on the <code class="port">source</code> port, then document properties on that document may be added as additional headers. For XML, HTML, and text documents with a <code class="literal">serialization</code> document property having an <code class="literal">encoding</code> key, a <code class="literal">charset</code> is appended to the created <code class="literal">content-type</code> header of the HTTP request. Properties in the <code class="code">http://www.w3.org/ns/xproc-http</code> namespace will be added to the headers, using the local-name of the property QName as the header name. These properties are only copied if they are not specified in the <code class="option">header</code> map. In other words, if the same header name appears in both places, the value from the map is used and the value from the document properties is ignored. (Header names are case-insensitive, so a case-insensitive comparison must be performed.) If multiple documents appear on the <code class="port">source</code> port, none of their properties are used in the request headers.<a id="port.inline.source-28 opt.inline.header-1 port.inline.source-29"></a>If a single document appears on the <code class="port">source</code> port, then document properties on that document may be added as additional headers. For XML, HTML, and text documents with a <code class="literal">serialization</code> document property having an <code class="literal">encoding</code> key, a <code class="literal">charset</code> is appended to the created <code class="literal">content-type</code> header of the HTTP request. Properties in the <code class="code">http://www.w3.org/ns/xproc-http</code> namespace will be added to the headers, using the local-name of the property QName as the header name. These properties are only copied if they are not specified in the <code class="option">header</code> map. In other words, if the same header name appears in both places, the value from the map is used and the value from the document properties is ignored. (Header names are case-insensitive, so a case-insensitive comparison must be performed.) If multiple documents appear on the <code class="port">source</code> port, none of their properties are used in the request headers.</p><p>The behavior of the <code class="tag-element">p:http-request</code> depends on the headers specified. In particular:</p><div class="variablelist"><dl><dt><span class="term"><code class="literal">content-type</code></span></dt><dd><p>If a <code class="literal">content-type</code> header is provided, it will be used. For a single document request, this overrides the content type value of the document. If the content type specified begins with “<code class="literal">multipart/</code>”, a multipart request will be sent to the server.</p><p><a id="err.inline.D0079.2&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if a supplied content-type is not a valid media type of the form “<code class="literal"><em class="replaceable"><code>type</code></em>/<em class="replaceable"><code>subtype</code></em>+<em class="replaceable"><code>ext</code></em></code>” or “<code class="literal"><em class="replaceable"><code>type</code></em>/<em class="replaceable"><code>subtype</code></em></code>”.<a id="err.inline.D0079.2&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if a supplied content-type is not a valid media type of the form “<code class="literal"><em class="replaceable"><code>type</code></em>/<em class="replaceable"><code>subtype</code></em>+<em class="replaceable"><code>ext</code></em></code>” or “<code class="literal"><em class="replaceable"><code>type</code></em>/<em class="replaceable"><code>subtype</code></em></code>”.</p></dd><dt><span class="term"><code class="literal">transfer-encoding</code></span></dt><dd><p><a id="err.inline.C0131&#34;"></a>If a <code class="literal">transfer-encoding</code> header is provided, the request <span class="rfc2119" id="c.http-request.10.4.2.4.2.2.1.2">must</span> be sent with that encoding. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the processor cannot support the requested encoding.<a id="err.inline.C0131&#34;"></a>If a <code class="literal">transfer-encoding</code> header is provided, the request <span class="rfc2119" id="c.http-request.10.4.2.4.2.2.1.2">must</span> be sent with that encoding. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the processor cannot support the requested encoding.</p></dd><dt><span class="term"><code class="literal">authorization</code></span></dt><dd><p><span style="display: none;" class="delete_version">The <code class="literal">authorization</code> header is used to authenticate a request. If the <code class="option">auth</code><em>option</em> is specified, any key or property that would have contributed a header named “<code class="literal">authorization</code>” (irrespective of case) is ignored. The authorization header is determined exclusively by the <code class="option">auth</code> option when it is present.</span><a id="opt.inline.auth-1 opt.inline.auth-2"></a>The <code class="literal">authorization</code> header is used to authenticate a request. If the <code class="option">auth</code><em>option</em> is specified, any key or property that would have contributed a header named “<code class="literal">authorization</code>” (irrespective of case) is ignored. The authorization header is determined exclusively by the <code class="option">auth</code> option when it is present.<a id="opt.inline.auth-1 opt.inline.auth-2"></a>The <code class="literal">authorization</code> header is used to authenticate a request. If the <code class="option">auth</code><em>option</em> is specified, any key or property that would have contributed a header named “<code class="literal">authorization</code>” (irrespective of case) is ignored. The authorization header is determined exclusively by the <code class="option">auth</code> option when it is present.</p></dd></dl></div><p><a id="err.inline.C0127&#34; opt.inline.headers-4"></a>HTTP headers are case-insensitive but keys in maps are not; be careful when specifying the request headers. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the <code class="option">headers</code> map contains two keys that are the same when compared in a case-insensitive manner. (That is, when <code class="code">fn:uppercase($key1) = fn:uppercase($key2)</code>.) <a id="err.inline.C0127&#34; opt.inline.headers-4"></a>HTTP headers are case-insensitive but keys in maps are not; be careful when specifying the request headers. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the <code class="option">headers</code> map contains two keys that are the same when compared in a case-insensitive manner. (That is, when <code class="code">fn:uppercase($key1) = fn:uppercase($key2)</code>.) </p></dd><dt><span style="display: none;" class="delete_version"><span class="term"><code class="option">auth</code></span></span><span style="display: none;" class="add_version"><span class="term"><a id="c.http-request-def-auth"></a><a id="opt.inline.auth-3"></a><code class="option">auth</code></span></span><span class="modify_version"><span class="term"><a id="c.http-request-def-auth"></a><a id="opt.inline.auth-3"></a><code class="option">auth</code></span></span></dt><dd><p><span style="display: none;" class="delete_version">Many web services are only available to authenticated users, that is, to users who have “logged in”. The <code class="option">auth</code> option allows the pipeline author to specify information that may be required to generate an “<code class="literal">Authorization</code>” header. The standard values support HTTP “Basic” and “Digest” authentication, but other authentication methods are allowed.</span><a id="opt.inline.auth-4"></a>Many web services are only available to authenticated users, that is, to users who have “logged in”. The <code class="option">auth</code> option allows the pipeline author to specify information that may be required to generate an “<code class="literal">Authorization</code>” header. The standard values support HTTP “Basic” and “Digest” authentication, but other authentication methods are allowed.<a id="opt.inline.auth-4"></a>Many web services are only available to authenticated users, that is, to users who have “logged in”. The <code class="option">auth</code> option allows the pipeline author to specify information that may be required to generate an “<code class="literal">Authorization</code>” header. The standard values support HTTP “Basic” and “Digest” authentication, but other authentication methods are allowed.</p><p>The following standard keys are defined:</p><div class="variablelist"><dl><dt><span class="term"><code class="literal">username</code> (<code class="code">xs:string</code>)</span></dt><dd><p>The username.</p></dd><dt><span class="term"><code class="literal">password</code> (<code class="code">xs:string</code>)</span></dt><dd><p>The password associated with the username.</p></dd><dt><span class="term"><code class="literal">auth-method</code> (<code class="code">xs:string</code>)</span></dt><dd><p><span style="display: none;" class="delete_version">The authentication method. Appropriate values for the “<code class="literal">auth-method</code>” key are “<code class="literal">Basic</code>” or “<code class="literal">Digest</code>” but other values are allowed. If the authentication method is “<code class="literal">Basic</code>” or “<code class="literal">Digest</code>”, authentication is handled as per [<a href="#rfc2617"><span class="abbrev">RFC 2617</span></a>]. <span id="impl-38">The interpretation of values associated with the “<code class="literal">auth-method</code>” key other than “<code class="literal">Basic</code>” or “<code class="literal">Digest</code>” is <em class="glossterm"><a href="#dt-implementation-defined">implementation defined</a></em>.</span></span><span style="display: none;" class="add_version">The authentication method. Appropriate values for the “<code class="literal">auth-method</code>” key are “<code class="literal">Basic</code>” or “<code class="literal">Digest</code>” but other values are allowed. If the authentication method is “<code class="literal">Basic</code>” or “<code class="literal">Digest</code>”, authentication is handled as per [<a href="#rfc2617"><span class="abbrev">RFC 2617</span></a>]. <span id="impl-38">The interpretation of values associated with the “<code class="literal">auth-method</code>” key other than “<code class="literal">Basic</code>” or “<code class="literal">Digest</code>” is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span></span><span class="modify_version">The authentication method. Appropriate values for the “<code class="literal">auth-method</code>” key are “<code class="literal">Basic</code>” or “<code class="literal">Digest</code>” but other values are allowed. If the authentication method is “<code class="literal">Basic</code>” or “<code class="literal">Digest</code>”, authentication is handled as per [<a href="#rfc2617"><span class="abbrev">RFC 2617</span></a>]. <span id="impl-38">The interpretation of values associated with the “<code class="literal">auth-method</code>” key other than “<code class="literal">Basic</code>” or “<code class="literal">Digest</code>” is <em class="glossterm"><a href="#dt-implementation-defined">implementation<span class="deltaxml-old" style="background:#FF5555"> </span><span class="deltaxml-new" style="background:#90EE90">-</span>defined</a></em>.</span></span></p></dd><dt><span class="term"><code class="literal">send-authorization</code> (<code class="code">xs:boolean</code>)</span></dt><dd><p>The “<code class="literal">send-authorization</code>” key can be used to attempt to allow the request to avoid an authentication challenge. If the “<code class="literal">send-authorization</code>” key is “<code class="literal">true()</code>”, and the authentication method specified by the value associated with the “<code class="literal">auth-method</code>” key supports generation of an “<code class="literal">Authorization</code>” header without a challenge, then the header is generated and sent on the first request. If the “<code class="literal">send-authorization</code>” key is absent or does not have the value “<code class="literal">true</code>”, the first request is sent without an “<code class="literal">Authorization</code>” header.</p></dd></dl></div><p><a id="err.inline.C0123&#34;"></a><span id="impl-39">Other key value pairs in map “<code class="literal">auth</code>” are <em class="glossterm"><a href="#dt-implementation-defined">implementation<span class="deltaxml-old" style="background:#FF5555"> </span><span class="deltaxml-new" style="background:#90EE90">-</span>defined</a></em>.</span>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if any key in the “<code class="literal">auth</code>” map is associated with a value that is not an instance of the required type.<a id="err.inline.C0123&#34;"></a><span id="impl-39">Other key value pairs in map “<code class="literal">auth</code>” are <em class="glossterm"><a href="#dt-implementation-defined">implementation<span class="deltaxml-old" style="background:#FF5555"> </span><span class="deltaxml-new" style="background:#90EE90">-</span>defined</a></em>.</span>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if any key in the “<code class="literal">auth</code>” map is associated with a value that is not an instance of the required type.</p><p>If the initial response to the request is an authentication challenge, the values provided in the <code class="literal">auth</code> map and any relevant data from the challenge are used to generate an “<code class="literal">Authorization</code>” header and the request is sent again. If that authorization fails, the request is not retried.</p><p><a id="err.inline.C0003&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if a “<code class="literal">username</code>” or a “<code class="literal">password</code>” key is present without specifying a value for the “<code class="literal">auth-method</code>” key, if the requested <code class="literal">auth-method</code> isn't supported, or the authentication challenge contains an authentication method that isn't supported. All implementations <span class="rfc2119" id="c.http-request.10.5.2.6.2">must</span> support “Basic” and “Digest” authentication per [].<a id="err.inline.C0003&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if a “<code class="literal">username</code>” or a “<code class="literal">password</code>” key is present without specifying a value for the “<code class="literal">auth-method</code>” key, if the requested <code class="literal">auth-method</code> isn't supported, or the authentication challenge contains an authentication method that isn't supported. All implementations <span class="rfc2119" id="c.http-request.10.5.2.6.2">must</span> support “Basic” and “Digest” authentication per [].</p></dd><dt><span class="term">parameters</span></dt><dd><p><span style="display: none;" class="delete_version">The <code class="option">parameter</code> option can be used to provide values for fine tuning the construction of the request and/or handling of the server response. A number of parameters are defined in this specification. <span id="impl-40">It is <em class="glossterm"><a href="#dt-implementation-defined">implementation defined</a></em> which other key/value pairs in the <code class="option">parameters</code> option are supported.</span></span><a id="opt.inline.parameter-2"></a>The <code class="option">parameter</code> option can be used to provide values for fine tuning the construction of the request and/or handling of the server response. A number of parameters are defined in this specification. <span id="impl-40">It is <em class="glossterm"><a href="#dt-implementation-defined">implementation<span class="deltaxml-old" style="background:#FF5555"> </span><span class="deltaxml-new" style="background:#90EE90">-</span>defined</a></em> which other key/value pairs in the <a id="opt.inline.parameters-14"></a><code class="option">parameters</code> option are supported.</span><a id="opt.inline.parameter-2"></a>The <code class="option">parameter</code> option can be used to provide values for fine tuning the construction of the request and/or handling of the server response. A number of parameters are defined in this specification. <span id="impl-40">It is <em class="glossterm"><a href="#dt-implementation-defined">implementation<span class="deltaxml-old" style="background:#FF5555"> </span><span class="deltaxml-new" style="background:#90EE90">-</span>defined</a></em> which other key/value pairs in the <a id="opt.inline.parameters-14"></a><code class="option">parameters</code> option are supported.</span></p><div class="variablelist"><dl><dt><span class="term">override-content-type (<code class="code">xs:string</code>)</span></dt><dd><p><a id="port.inline.report-6 err.inline.D0079.3&#34; err.inline.C0030&#34;"></a>Ordinarily, the value of the <code class="literal">content-type</code> header provided in the server response controls the interpretation of any body in the response. If the “<code class="literal">override-content-type</code>” parameter is provided, then its value is used to interpret the body. The content-type header that appears on the <code class="port">report</code> port is not changed. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if a supplied content-type is not a valid media type of the form “<code class="literal"><em class="replaceable"><code>type</code></em>/<em class="replaceable"><code>subtype</code></em>+<em class="replaceable"><code>ext</code></em></code>” or “<code class="literal"><em class="replaceable"><code>type</code></em>/<em class="replaceable"><code>subtype</code></em></code>”. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the response body cannot be interpreted as requested (e.g. <code class="literal">application/json</code> to override <code class="literal">application/xml</code> content).<a id="port.inline.report-6 err.inline.D0079.3&#34; err.inline.C0030&#34;"></a>Ordinarily, the value of the <code class="literal">content-type</code> header provided in the server response controls the interpretation of any body in the response. If the “<code class="literal">override-content-type</code>” parameter is provided, then its value is used to interpret the body. The content-type header that appears on the <code class="port">report</code> port is not changed. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if a supplied content-type is not a valid media type of the form “<code class="literal"><em class="replaceable"><code>type</code></em>/<em class="replaceable"><code>subtype</code></em>+<em class="replaceable"><code>ext</code></em></code>” or “<code class="literal"><em class="replaceable"><code>type</code></em>/<em class="replaceable"><code>subtype</code></em></code>”. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the response body cannot be interpreted as requested (e.g. <code class="literal">application/json</code> to override <code class="literal">application/xml</code> content).</p></dd><dt><span class="term">http-version (<code class="code">xs:string</code>)</span></dt><dd><p>The <code class="literal">http-version</code> parameter indicates which version of HTTP <span class="rfc2119" id="c.http-request.10.6.2.2.2.2.1.2">must</span> be used for the request.</p></dd><dt><span class="term">accept-multipart (<code class="code">xs:boolean</code>)</span></dt><dd><p><a id="err.inline.C0125&#34;"></a>If the <code class="literal">accept-multipart</code> parameter is present and explicitly has the value <code class="code">false()</code>, a dynamic error will be raised, if a multipart response is received from the server. This feature is a convenience for pipeline authors as it will raise an error when the multipart request is received, rather than having the presence of a sequence raise an error further along in the pipeline, or simply producing anomalous results. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the key “<code class="literal">accept-multipart</code>” as the value <code class="code">false()</code> and a multipart response is detected.<a id="err.inline.C0125&#34;"></a>If the <code class="literal">accept-multipart</code> parameter is present and explicitly has the value <code class="code">false()</code>, a dynamic error will be raised, if a multipart response is received from the server. This feature is a convenience for pipeline authors as it will raise an error when the multipart request is received, rather than having the presence of a sequence raise an error further along in the pipeline, or simply producing anomalous results. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the key “<code class="literal">accept-multipart</code>” as the value <code class="code">false()</code> and a multipart response is detected.</p></dd><dt><span class="term">override-content-encoding (<code class="code">xs:string</code>)</span></dt><dd><p><a id="port.inline.report-7 err.inline.C0132&#34;"></a>If the “<code class="literal">override-content-encoding</code>” parameter is present, the response will be treated as if the response contained a “<code class="literal">content-encoding</code>” header with the specified value. The content-encoding header that appears on the <code class="port">report</code> port is not changed. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the override content encoding cannot be supported. <a id="port.inline.report-7 err.inline.C0132&#34;"></a>If the “<code class="literal">override-content-encoding</code>” parameter is present, the response will be treated as if the response contained a “<code class="literal">content-encoding</code>” header with the specified value. The content-encoding header that appears on the <code class="port">report</code> port is not changed. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the override content encoding cannot be supported. </p></dd><dt><span class="term">permit-expired-ssl-certificate (<code class="code">xs:boolean</code>)</span></dt><dd><p>If “<code class="literal">permit-expired-ssl-certificate</code>” is true, then the processor should not reject responses where the server provides an expired SSL certificate.</p></dd><dt><span class="term">permit-untrusted-ssl-certificate (<code class="code">xs:boolean</code>)</span></dt><dd><p>If “<code class="literal">permit-untrusted-ssl-certificate</code>” is true, then the processor should not reject response where the server provides an SSL certificate which is not trusted, for example, because the certificate authority (CA) is unknown.</p></dd><dt><span class="term">follow-redirect (<code class="code">xs:integer</code>)</span></dt><dd><p><span style="display: none;" class="delete_version">The “<code class="literal">follow-redirect</code>” parameter allows the pipeline author to specify the step’s behaviour in the case of a redirect response. A value of <code class="literal">0</code> indicates that redirects are not to be followed, <code class="literal">-1</code> indicates that redirects are to be followed indefinitely, and a specific number indicates the maximum number of redirects to follow. <span id="impl-41">The default behaviour in case of a redirect response is <em class="glossterm"><a href="#dt-implementation-defined">implementation defined</a></em>.</span></span><span style="display: none;" class="add_version">The “<code class="literal">follow-redirect</code>” parameter allows the pipeline author to specify the step’s behaviour in the case of a redirect response. A value of <code class="literal">0</code> indicates that redirects are not to be followed, <code class="literal">-1</code> indicates that redirects are to be followed indefinitely, and a specific number indicates the maximum number of redirects to follow. <span id="impl-41">The default behaviour in case of a redirect response is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span></span><span class="modify_version">The “<code class="literal">follow-redirect</code>” parameter allows the pipeline author to specify the step’s behaviour in the case of a redirect response. A value of <code class="literal">0</code> indicates that redirects are not to be followed, <code class="literal">-1</code> indicates that redirects are to be followed indefinitely, and a specific number indicates the maximum number of redirects to follow. <span id="impl-41">The default behaviour in case of a redirect response is <em class="glossterm"><a href="#dt-implementation-defined">implementation<span class="deltaxml-old" style="background:#FF5555"> </span><span class="deltaxml-new" style="background:#90EE90">-</span>defined</a></em>.</span></span></p></dd><dt><span class="term">timeout (<code class="code">xs:integer</code>)</span></dt><dd><p>If a “<code class="literal">timeout</code>” is specified, it <span class="rfc2119" id="c.http-request.10.6.2.2.8.2.1.2">must</span> be a non-negative integer. It controls the time the XProc processor waits for the request to be answered. If a value is given, it is taken as the number of seconds to wait for the response to be delivered. If no response is received after that time, the request is terminated and a status-code <code class="literal">408</code> is assumed.</p></dd><dt><span class="term">fail-on-timeout (<code class="code">xs:boolean</code>)</span></dt><dd><p><a id="err.inline.C0078&#34; opt.inline.assert-1"></a>If “<code class="literal">fail-on-timeout</code>” is true, a dynamic error is raised if a <code class="literal">408</code> response is received (either as a consequence of setting a value for the “<code class="literal">timeout</code>” parameter or as status code returned by a server). It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the value associated with the “<code class="literal">fail-on-timeout</code>” is associated with <code class="code">true()</code> and a HTTP status code <code class="literal">408</code> is encountered. If “<code class="literal">fail-on-timeout</code>” is true, it prevents any dynamic error with code <code class="literal">C0126</code> resulting from the <code class="option">assert</code> option to be raised for request's timeout.<a id="err.inline.C0078&#34; opt.inline.assert-1"></a>If “<code class="literal">fail-on-timeout</code>” is true, a dynamic error is raised if a <code class="literal">408</code> response is received (either as a consequence of setting a value for the “<code class="literal">timeout</code>” parameter or as status code returned by a server). It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the value associated with the “<code class="literal">fail-on-timeout</code>” is associated with <code class="code">true()</code> and a HTTP status code <code class="literal">408</code> is encountered. If “<code class="literal">fail-on-timeout</code>” is true, it prevents any dynamic error with code <code class="literal">C0126</code> resulting from the <code class="option">assert</code> option to be raised for request's timeout.</p><div class="note admonition"><h3>Note</h3><div class="admonition-body"><p><span style="display: none;" class="delete_version">Please note that the “<code class="literal">fail-on-timeout</code>” parameter is different from the “<code class="literal">timeout</code>” option on the <code class="tag-element">p:http-request</code> step (see <cite><a href="https://spec.xproc.org/3.0/xproc/#timeout">Controlling long running steps</a></cite> in <cite><a href="https://spec.xproc.org/3.0/xproc/">XProc 3.0: An XML Pipeline Language</a></cite>). If the <em>step</em> does not finish in the specified time, <code class="code">D0053</code> is raised. If the <em>request</em> does not finish in time, and <code class="literal">fail-on-timeout</code> is true, <code class="code">C0078</code> is raised. The actual times after which a timeout is detected may also differ slightly. </span><span style="display: none;" class="add_version">Please note that the “<code class="literal">fail-on-timeout</code>” parameter is different from the “<code class="literal">timeout</code>” option on the <code class="tag-element">p:http-request</code> step (see <cite><a href="../xproc/#timeout">Controlling long running steps</a></cite> in <cite><a href="../xproc/">XProc 3.0: An XML Pipeline Language</a></cite>). If the <em>step</em> does not finish in the specified time, <code class="code">D0053</code> is raised. If the <em>request</em> does not finish in time, and <code class="literal">fail-on-timeout</code> is true, <code class="code">C0078</code> is raised. The actual times after which a timeout is detected may also differ slightly. </span><span class="modify_version">Please note that the “<code class="literal">fail-on-timeout</code>” parameter is different from the “<code class="literal">timeout</code>” option on the <code class="tag-element">p:http-request</code> step (see <cite><a href="../xproc/#timeout">Controlling long running steps</a></cite> in <cite><a href="../xproc/">XProc 3.0: An XML Pipeline Language</a></cite>). If the <em>step</em> does not finish in the specified time, <code class="code">D0053</code> is raised. If the <em>request</em> does not finish in time, and <code class="literal">fail-on-timeout</code> is true, <code class="code">C0078</code> is raised. The actual times after which a timeout is detected may also differ slightly. </span></p></div></div></dd><dt><span class="term">status-only (<code class="code">xs:boolean</code>)</span></dt><dd><p><span style="display: none;" class="delete_version">If the “<code class="literal">status-only</code>” parameter is true, this indicates that the pipeline author is only interested in the response code. An empty sequence is always returned on the <code class="port">result</code> port in this case. The implementation may save resources by ignoring the response body. The map on the <code class="port">report</code> will contain the status code and an empty map for “<code class="literal">headers</code>”.</span><a id="port.inline.result-16 port.inline.report-8"></a>If the “<code class="literal">status-only</code>” parameter is true, this indicates that the pipeline author is only interested in the response code. An empty sequence is always returned on the <code class="port">result</code> port in this case. The implementation may save resources by ignoring the response body. The map on the <code class="port">report</code> will contain the status code and an empty map for “<code class="literal">headers</code>”.<a id="port.inline.result-16 port.inline.report-8"></a>If the “<code class="literal">status-only</code>” parameter is true, this indicates that the pipeline author is only interested in the response code. An empty sequence is always returned on the <code class="port">result</code> port in this case. The implementation may save resources by ignoring the response body. The map on the <code class="port">report</code> will contain the status code and an empty map for “<code class="literal">headers</code>”.</p></dd><dt><span class="term">suppress-cookies (<code class="code">xs:boolean</code>)</span></dt><dd><p>If the “<code class="literal">suppress-cookies</code>” parameter is true, the implementation <span class="rfc2119" id="c.http-request.10.6.2.2.11.2.1.2">must not</span> send any cookies with the request.</p></dd><dt><span class="term">send-body-anyway (<code class="code">xs:boolean</code>)</span></dt><dd><p><span style="display: none;" class="delete_version">If the “<code class="literal">send-body-anyway</code>” parameter is true, and one or more documents appear on the <code class="port">source</code> port, a request body is constructed from the documents and sent with the request, even if the semantics of sending a body are not specified for the HTTP method in use. </span><a id="port.inline.source-30"></a>If the “<code class="literal">send-body-anyway</code>” parameter is true, and one or more documents appear on the <code class="port">source</code> port, a request body is constructed from the documents and sent with the request, even if the semantics of sending a body are not specified for the HTTP method in use. <a id="port.inline.source-30"></a>If the “<code class="literal">send-body-anyway</code>” parameter is true, and one or more documents appear on the <code class="port">source</code> port, a request body is constructed from the documents and sent with the request, even if the semantics of sending a body are not specified for the HTTP method in use. </p></dd></dl></div><p><a id="err.inline.C0124&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if any key in the “parameters” map is associated with a value that is not an instance of the required type.<a id="err.inline.C0124&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if any key in the “parameters” map is associated with a value that is not an instance of the required type.</p></dd><dt><span class="term">assert (<code class="code">xs:string</code>)</span></dt><dd><p><a id="opt.inline.assert-2 port.inline.report-9 err.inline.C0126&#34; opt.inline.assert-3"></a>The <code class="option">assert</code> option can be used by pipeline authors to raise a dynamic error if the response does not fulfill the expectations of the receiver. The option's value (if present) is interpreted as an XPath expression which will be executed using the map that appears on the <code class="port">report</code> port as its context item. If the effective boolean value of the expression is <code class="code">false()</code>, a dynamic error is raised. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the XPath expression in <code class="option">assert</code> evaluates to <code class="code">false</code>. Implementations <span class="rfc2119" id="c.http-request.10.7.2.1.5">should</span> provide an XML representation of the map used as the context item with the error document to enable pipelines to access the error's cause.<a id="opt.inline.assert-2 port.inline.report-9 err.inline.C0126&#34; opt.inline.assert-3"></a>The <code class="option">assert</code> option can be used by pipeline authors to raise a dynamic error if the response does not fulfill the expectations of the receiver. The option's value (if present) is interpreted as an XPath expression which will be executed using the map that appears on the <code class="port">report</code> port as its context item. If the effective boolean value of the expression is <code class="code">false()</code>, a dynamic error is raised. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the XPath expression in <code class="option">assert</code> evaluates to <code class="code">false</code>. Implementations <span class="rfc2119" id="c.http-request.10.7.2.1.5">should</span> provide an XML representation of the map used as the context item with the error document to enable pipelines to access the error's cause.</p></dd></dl></div><section id="c.http-multipart-request" class="section"><div class="section-titlepage"><h4><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.13.1. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.14.1. </span></bdi>Construction of a multipart request<a aria-label="§" class="self-link" href="#c.http-multipart-request"></a></h4></div><div class="content"><p><span style="display: none;" class="delete_version">If more than one document appears on the <code class="port">source</code> port, or if the specified “<code class="literal">content-type</code>” header begins “<code class="literal">multipart/</code>”, a multipart request will be constructed, per [<a href="#rfc1521"><span class="abbrev">RFC 1521</span></a>]. The content type of the request is derived from the “<code class="literal">content-type</code>” header:</span><a id="port.inline.source-31"></a>If more than one document appears on the <code class="port">source</code> port, or if the specified “<code class="literal">content-type</code>” header begins “<code class="literal">multipart/</code>”, a multipart request will be constructed, per []. The content type of the request is derived from the “<code class="literal">content-type</code>” header:<a id="port.inline.source-31"></a>If more than one document appears on the <code class="port">source</code> port, or if the specified “<code class="literal">content-type</code>” header begins “<code class="literal">multipart/</code>”, a multipart request will be constructed, per []. The content type of the request is derived from the “<code class="literal">content-type</code>” header:</p><div class="itemizedlist"><ul><li><p><a id="err.inline.C0203&#34;"></a>If the “<code class="literal">content-type</code>” header specifies a multipart content type, that value will be used as the content type. If the header includes a <code class="literal">boundary</code> parameter, that value will be used as the boundary. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the specified boundary is not valid (for example, if it begins with two hyphens “--”). <a id="err.inline.C0203&#34;"></a>If the “<code class="literal">content-type</code>” header specifies a multipart content type, that value will be used as the content type. If the header includes a <code class="literal">boundary</code> parameter, that value will be used as the boundary. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the specified boundary is not valid (for example, if it begins with two hyphens “--”). </p></li><li><p>If the “<code class="literal">content-type</code>” header is not specified, “<code class="literal">multipart/mixed</code>” will be used.</p></li><li><p><a id="err.inline.C0133&#34; port.inline.source-32"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if more than one document appears on the <code class="port">source</code> port and a <code class="literal">content-type</code> header is present and the content type specified is not a multipart content type. <a id="err.inline.C0133&#34; port.inline.source-32"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if more than one document appears on the <code class="port">source</code> port and a <code class="literal">content-type</code> header is present and the content type specified is not a multipart content type. </p></li></ul></div><p>A multipart request must have a boundary marker, if one isn’t specified in the content type, the implementation <span class="rfc2119" id="c.http-multipart-request.4.1">must</span> construct one. <span id="impl-42">It is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> how a multipart boundary is constructed.</span> Implementations <em>are not</em> required to guarantee that the constructed value does not appear accidentally in the multipart data. If it does, the request will be malformed; pipeline authors must provide a boundary if they wish to assure that this cannot happen.</p><p>Each document in the sequence is serialized. If the document has a “<code class="literal">serialization</code>” document property, its values are used to determine how serialization is performed.</p><p>All of the document properties in the <code class="code">http://www.w3.org/ns/xproc-http</code> namespace will be added as headers for the part, using the local-name of the property QName as the header name. In particular, this is how the “<code class="literal">id</code>”, “<code class="literal">description</code>”, “<code class="literal">disposition</code>” and other multipart headers can be provided.</p></div></section><section id="c.http-multipart-response" class="section"><div class="section-titlepage"><h4><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.13.2. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.14.2. </span></bdi>Managing a multipart response<a aria-label="§" class="self-link" href="#c.http-multipart-response"></a></h4></div><div class="content"><p>When a multipart response is received, each part is interpreted according to <span class="deltaxml-old" style="background:#FF5555">it’s</span><span class="deltaxml-new" style="background:#90EE90">its</span> content type and a pipeline document is constructed. Any additional headers associated with the part are added to the document properties of the constructed document.</p><p>The multipart response is the resulting sequence of documents.</p></div></section><section id="c.http-request.13" class="simplesect"><div class="section-titlepage"><h4>Document properties</h4></div><div class="content"><p>No document properties are preserved.</p></div></section></div></section><section id="c.identity" class="section"><div class="section-titlepage"><h3><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.14. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.15. </span></bdi>p:identity<a aria-label="§" class="self-link" href="#c.identity"></a></h3></div><div class="content"><p>The <code class="code">p:identity</code> step makes a verbatim copy of its input available on its output.</p><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:identity</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">any</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">any</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><div class="declare-step"><p><span class="deltaxml-new" style="background:#90EE90">Summary</span></p><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Input port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.source-33"><span class="deltaxml-new" style="background:#90EE90">source</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td><span class="deltaxml-new" style="background:#90EE90">any </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Output port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.result-17"><span class="deltaxml-new" style="background:#90EE90">result</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td><span class="deltaxml-new" style="background:#90EE90">any </span></td></tr></tbody></table><details><summary><span class="deltaxml-new" style="background:#90EE90">Declaration</span></summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:identity</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">any</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">any</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p></details></div><p>If the implementation supports passing PSVI annotations between steps, the <code class="tag-element">p:identity</code> step <span class="rfc2119" id="c.identity.4.2">must</span> preserve any annotations that appear in the input.</p><section id="c.identity.5" class="simplesect"><div class="section-titlepage"><h4>Document properties</h4></div><div class="content"><p>All document properties are preserved.</p></div></section></div></section><section id="c.insert" class="section"><div class="section-titlepage"><h3><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.15. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.16. </span></bdi>p:insert<a aria-label="§" class="self-link" href="#c.insert"></a></h3></div><div class="content"><p><span style="display: none;" class="delete_version">The <code class="code">p:insert</code> step inserts the <code class="code">insertion</code> port's document into the <code class="port">source</code> port's document relative to the matching elements in the <code class="code">source</code> port's document.</span><a id="port.inline.source-33"></a>The <code class="code">p:insert</code> step inserts the <code class="code">insertion</code> port's document into the <code class="port">source</code> port's document relative to the matching elements in the <code class="code">source</code> port's document.<a id="port.inline.source-33"></a>The <code class="code">p:insert</code> step inserts the <code class="code">insertion</code> port's document into the <code class="port">source</code> port's document relative to the matching elements in the <code class="code">source</code> port's document.</p><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:insert</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">xml html</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">insertion</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">xml html</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">xml html</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">match</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:string</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'/*'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">         </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">XSLTSelectionPattern</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">position</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr values-attr"><span class="deltaxml-old" style="background:#FF5555">values</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value values-value"><span class="deltaxml-old" style="background:#FF5555">('first-child','last-child','before','after')</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'after'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">string</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><div class="declare-step"><p><span class="deltaxml-new" style="background:#90EE90">Summary</span></p><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Input port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.source-34"><span class="deltaxml-new" style="background:#90EE90">source</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">xml html </span></td></tr><tr><td><a href="#port.inline.insertion-1"><span class="deltaxml-new" style="background:#90EE90">insertion</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td><span class="deltaxml-new" style="background:#90EE90">xml html text </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Output port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.result-17"><span class="deltaxml-new" style="background:#90EE90">result</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">xml html text </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Option name</span></th><th><span class="deltaxml-new" style="background:#90EE90">Type</span></th><th><span class="deltaxml-new" style="background:#90EE90">Values</span></th><th><span class="deltaxml-new" style="background:#90EE90">Default value</span></th></tr></thead><tbody><tr><td><a href="#opt.inline.match-10"><span class="deltaxml-new" style="background:#90EE90">match</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">XSLTSelectionPattern</span></td><td><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">'/*'</span></td></tr><tr><td><a href="#opt.inline.position-1"><span class="deltaxml-new" style="background:#90EE90">position</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:string</span></td><td><span class="deltaxml-new" style="background:#90EE90">('first-child','last-child','before','after') </span></td><td><span class="deltaxml-new" style="background:#90EE90">'after'</span></td></tr></tbody></table><details><summary><span class="deltaxml-new" style="background:#90EE90">Errors</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Error code</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td class="errcode"><a href="#err.inline.C0023.2&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0023</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if that pattern matches an attribute or a namespace node.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0024&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0024</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the selection pattern matches a document node and the value of the position is “before” or “after”.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0025&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0025</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the selection pattern matches anything other than an element or a document node and the value of the position option is “first-child” or “last-child”.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Declaration</span></summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:insert</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">xml html</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">insertion</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">xml html text</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">xml html text</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">match</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:string</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'/*'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">         </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">XSLTSelectionPattern</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">position</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr values-attr"><span class="deltaxml-new" style="background:#90EE90">values</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value values-value"><span class="deltaxml-new" style="background:#90EE90">('first-child','last-child','before','after')</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'after'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">string</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p></details></div><p><a id="opt.inline.match-10 err.inline.C0023.2&#34; port.inline.insertion-1"></a>The value of the <code class="option">match</code> option <span class="rfc2119" id="c.insert.4.2">must</span> be an XSLTSelectionPattern. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if that pattern matches an attribute or a namespace node. Multiple matches are allowed, in which case multiple copies of the <code class="port">insertion</code> documents will occur. If no elements match, then the document is unchanged.<a id="opt.inline.match-10 err.inline.C0023.2&#34; port.inline.insertion-1"></a>The value of the <code class="option">match</code> option <span class="rfc2119" id="c.insert.4.2">must</span> be an XSLTSelectionPattern. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if that pattern matches an attribute or a namespace node. Multiple matches are allowed, in which case multiple copies of the <code class="port">insertion</code> documents will occur. If no elements match, then the document is unchanged.</p><p><span style="display: none;" class="delete_version">The value of the <code class="option">position</code> option <span class="rfc2119" id="c.insert.5.2">must</span> be an NMTOKEN in the following list: </span><a id="opt.inline.position-1"></a>The value of the <code class="option">position</code> option <span class="rfc2119" id="c.insert.5.2">must</span> be an NMTOKEN in the following list: <a id="opt.inline.position-1"></a>The value of the <code class="option">position</code> option <span class="rfc2119" id="c.insert.5.2">must</span> be an NMTOKEN in the following list: </p><div class="itemizedlist"><ul><li><p>“<code class="literal">first-child</code>” - the insertion is made as the first child of the match;</p></li><li><p>“<code class="literal">last-child</code>” - the insertion is made as the last child of the match;</p></li><li><p>“<code class="literal">before</code>” - the insertion is made as the immediate preceding sibling of the match;</p></li><li><p>“<code class="literal">after</code>” - the insertion is made as the immediate following sibling of the match.</p></li></ul></div><p><a id="err.inline.C0025&#34; opt.inline.position-2 err.inline.C0024&#34; opt.inline.position-3"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the <em class="glossterm"><a href="#dt-selection-pattern">selection pattern</a></em> matches anything other than an element or a document node and the value of the <code class="option">position</code> option is “<code class="literal">first-child</code>” or “<code class="literal">last-child</code>”. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the <em class="glossterm"><a href="#dt-selection-pattern">selection pattern</a></em> matches a document node and the value of the <code class="option">position</code> is “<code class="literal">before</code>” or “<code class="literal">after</code>”.<a id="err.inline.C0025&#34; opt.inline.position-2 err.inline.C0024&#34; opt.inline.position-3"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the <em class="glossterm"><a href="#dt-selection-pattern">selection pattern</a></em> matches anything other than an element or a document node and the value of the <code class="option">position</code> option is “<code class="literal">first-child</code>” or “<code class="literal">last-child</code>”. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the <em class="glossterm"><a href="#dt-selection-pattern">selection pattern</a></em> matches a document node and the value of the <code class="option">position</code> is “<code class="literal">before</code>” or “<code class="literal">after</code>”.</p><p><span style="display: none;" class="delete_version">As the inserted elements are part of the output of the step they are not considered in determining matching elements. If an empty sequence appears on the <code class="port">insertion</code> port, the result will be the same as the source.</span><a id="port.inline.insertion-2"></a>As the inserted elements are part of the output of the step they are not considered in determining matching elements. If an empty sequence appears on the <code class="port">insertion</code> port, the result will be the same as the source.<a id="port.inline.insertion-2"></a>As the inserted elements are part of the output of the step they are not considered in determining matching elements. If an empty sequence appears on the <code class="port">insertion</code> port, the result will be the same as the source.</p><section id="c.insert.9" class="simplesect"><div class="section-titlepage"><h4>Document properties</h4></div><div class="content"><p><span style="display: none;" class="delete_version">All document properties on the <code class="port">source</code> port are preserved. The document properties on the <code class="port">insertion</code> port are not preserved or present in the result document.</span><a id="port.inline.source-34 port.inline.insertion-3"></a>All document properties on the <code class="port">source</code> port are preserved. The document properties on the <code class="port">insertion</code> port are not preserved or present in the result document.<a id="port.inline.source-34 port.inline.insertion-3"></a>All document properties on the <code class="port">source</code> port are preserved. The document properties on the <code class="port">insertion</code> port are not preserved or present in the result document.</p></div></section></div></section><section id="c.json-join" class="section"><div class="section-titlepage"><h3><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.16. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.17. </span></bdi>p:json-join<a aria-label="§" class="self-link" href="#c.json-join"></a></h3></div><div class="content"><p><span style="display: none;" class="delete_version">The <code class="code">p:json-join</code> step joins the sequence of documents on port <code class="port">source</code> into a single JSON document (an array) appearing on port <code class="port">result</code>. If the sequence on port <code class="code">source</code> is empty, the empty sequence is returned on port <code class="code">result</code>.</span><a id="port.inline.source-35 port.inline.result-17"></a>The <code class="code">p:json-join</code> step joins the sequence of documents on port <code class="port">source</code> into a single JSON document (an array) appearing on port <code class="port">result</code>. If the sequence on port <code class="code">source</code> is empty, the empty sequence is returned on port <code class="code">result</code>.<a id="port.inline.source-35 port.inline.result-17"></a>The <code class="code">p:json-join</code> step joins the sequence of documents on port <code class="port">source</code> into a single JSON document (an array) appearing on port <code class="port">result</code>. If the sequence on port <code class="code">source</code> is empty, the empty sequence is returned on port <code class="code">result</code>.</p><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:json-join</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">any</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">application/json</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">flatten-to-depth</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:string?</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'0'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><div class="declare-step"><p><span class="deltaxml-new" style="background:#90EE90">Summary</span></p><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Input port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.source-36"><span class="deltaxml-new" style="background:#90EE90">source</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td><span class="deltaxml-new" style="background:#90EE90">any </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Output port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.result-18"><span class="deltaxml-new" style="background:#90EE90">result</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">application/json </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Option name</span></th><th><span class="deltaxml-new" style="background:#90EE90">Type</span></th><th><span class="deltaxml-new" style="background:#90EE90">Default value</span></th></tr></thead><tbody><tr><td><a href="#opt.inline.flatten-to-depth-1"><span class="deltaxml-new" style="background:#90EE90">flatten-to-depth</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:string?</span></td><td><span class="deltaxml-new" style="background:#90EE90">'0'</span></td></tr></tbody></table><details><summary><span class="deltaxml-new" style="background:#90EE90">Errors</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Error code</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td class="errcode"><a href="#err.inline.C0111&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0111</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90"> It is a dynamic error if a document of an unsupported document type appears on port source of p:json-join.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0119&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0119</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if flatten is neither “unbounded”, nor a string that may be cast to a non-negative integer.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Implementation details</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Implementation</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td><a href="#impl-43"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is implementation-defined if p:json-join is able to process document types not mentioned yet, i.e. types of binary documents.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Declaration</span></summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:json-join</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">any</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">application/json</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">flatten-to-depth</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:string?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'0'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p></details></div><p><span style="display: none;" class="delete_version">The step inspects the documents on port <code class="port">source</code> in turn to create the resulting array:</span><a id="port.inline.source-36"></a>The step inspects the documents on port <code class="port">source</code> in turn to create the resulting array:<a id="port.inline.source-36"></a>The step inspects the documents on port <code class="port">source</code> in turn to create the resulting array:</p><div class="itemizedlist"><ul><li><p><span style="display: none;" class="delete_version">If the document under inspection is a JSON document representing an array, the array is copied to the resulting array according to the setting of option <code class="option">flatten-to-depth</code>.</span><a id="opt.inline.flatten-to-depth-1"></a>If the document under inspection is a JSON document representing an array, the array is copied to the resulting array according to the setting of option <code class="option">flatten-to-depth</code>.<a id="opt.inline.flatten-to-depth-1"></a>If the document under inspection is a JSON document representing an array, the array is copied to the resulting array according to the setting of option <code class="option">flatten-to-depth</code>.</p></li><li><p>For every other type of JSON document, for XML documents, HTML documents, or text documents, their XDM representation is appended to the resulting array.</p></li><li><p><a id="err.inline.C0111&#34; port.inline.source-37"></a><span id="impl-43">It is <em class="glossterm"><a href="#dt-implementation-defined">implementation<span class="deltaxml-old" style="background:#FF5555"> </span><span class="deltaxml-new" style="background:#90EE90">-</span>defined</a></em> if <code class="code">p:json-join</code> is able to process document types not mentioned yet, i.e. types of binary documents.</span> If a processor supports a given type of documents, an entry is created as described above.  It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if a document of an unsupported document type appears on port <code class="port">source</code> of <code class="code">p:json-join</code>. <a id="err.inline.C0111&#34; port.inline.source-37"></a><span id="impl-43">It is <em class="glossterm"><a href="#dt-implementation-defined">implementation<span class="deltaxml-old" style="background:#FF5555"> </span><span class="deltaxml-new" style="background:#90EE90">-</span>defined</a></em> if <code class="code">p:json-join</code> is able to process document types not mentioned yet, i.e. types of binary documents.</span> If a processor supports a given type of documents, an entry is created as described above.  It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if a document of an unsupported document type appears on port <code class="port">source</code> of <code class="code">p:json-join</code>. </p></li></ul></div><p><a id="opt.inline.flatten-to-depth-2 port.inline.source-38 err.inline.C0119&#34; opt.inline.flatten-1 port.inline.source-39 port.inline.source-40 port.inline.result-18"></a>The option <code class="option">flatten-to-depth</code> controls whether and to which depth members of an array appearing on port <code class="port">source</code> are flattened. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if <code class="option">flatten</code> is neither “<code class="literal">unbounded</code>”, nor a string that may be cast to a non-negative integer. An integer value of <code class="literal">0</code>, which is the default, means that no flattening takes place, so the array appearing on port <code class="port">source</code> will be contained as an array in the resulting array. An integer value of <code class="literal">1</code> means that an array on port <code class="port">source</code> is flattened, i.e. the members of that array will appear as individual members in the resulting array. Any value greater than <code class="literal">1</code> means that the flattening is applied recursively to arrays in arrays up to the given depth. A value of “<code class="literal">unbounded</code>” means that all arrays in arrays will be flattened. As a consequence, the resulting array appearing on port <code class="port">result</code> will not have any arrays as members. <a id="opt.inline.flatten-to-depth-2 port.inline.source-38 err.inline.C0119&#34; opt.inline.flatten-1 port.inline.source-39 port.inline.source-40 port.inline.result-18"></a>The option <code class="option">flatten-to-depth</code> controls whether and to which depth members of an array appearing on port <code class="port">source</code> are flattened. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if <code class="option">flatten</code> is neither “<code class="literal">unbounded</code>”, nor a string that may be cast to a non-negative integer. An integer value of <code class="literal">0</code>, which is the default, means that no flattening takes place, so the array appearing on port <code class="port">source</code> will be contained as an array in the resulting array. An integer value of <code class="literal">1</code> means that an array on port <code class="port">source</code> is flattened, i.e. the members of that array will appear as individual members in the resulting array. Any value greater than <code class="literal">1</code> means that the flattening is applied recursively to arrays in arrays up to the given depth. A value of “<code class="literal">unbounded</code>” means that all arrays in arrays will be flattened. As a consequence, the resulting array appearing on port <code class="port">result</code> will not have any arrays as members. </p><section id="c.json-join.7" class="simplesect"><div class="section-titlepage"><h4>Document properties</h4></div><div class="content"><p>No document properties are preserved. The joined document has no <code class="property">base-uri</code>. </p></div></section></div></section><section id="c.json-merge" class="section"><div class="section-titlepage"><h3><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.17. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.18. </span></bdi>p:json-merge<a aria-label="§" class="self-link" href="#c.json-merge"></a></h3></div><div class="content"><p><span style="display: none;" class="delete_version">The <code class="tag-element">p:json-merge</code> step merges the sequence of appearing on port <code class="port">source</code> into a single JSON object appearing on port <code class="port">result</code>. If the sequence on port <code class="port">source</code> is empty, the empty sequence is returned on port <code class="port">result</code>.</span><a id="port.inline.source-41 port.inline.result-19 port.inline.source-42 port.inline.result-20"></a>The <code class="tag-element">p:json-merge</code> step merges the sequence of appearing on port <code class="port">source</code> into a single JSON object appearing on port <code class="port">result</code>. If the sequence on port <code class="port">source</code> is empty, the empty sequence is returned on port <code class="port">result</code>.<a id="port.inline.source-41 port.inline.result-19 port.inline.source-42 port.inline.result-20"></a>The <code class="tag-element">p:json-merge</code> step merges the sequence of appearing on port <code class="port">source</code> into a single JSON object appearing on port <code class="port">result</code>. If the sequence on port <code class="port">source</code> is empty, the empty sequence is returned on port <code class="port">result</code>.</p><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:json-merge</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">any</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">application/json</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">duplicates</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr values-attr"><span class="deltaxml-old" style="background:#FF5555">values</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value values-value"><span class="deltaxml-old" style="background:#FF5555">('reject', 'use-first', 'use-last', 'use-any', 'combine')</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'use-first'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">string</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">key</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:string</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'concat("_",$p:index)'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">XPathExpression</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><div class="declare-step"><p><span class="deltaxml-new" style="background:#90EE90">Summary</span></p><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Input port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.source-43"><span class="deltaxml-new" style="background:#90EE90">source</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td><span class="deltaxml-new" style="background:#90EE90">any </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Output port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.result-21"><span class="deltaxml-new" style="background:#90EE90">result</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">application/json </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Option name</span></th><th><span class="deltaxml-new" style="background:#90EE90">Type</span></th><th><span class="deltaxml-new" style="background:#90EE90">Values</span></th><th><span class="deltaxml-new" style="background:#90EE90">Default value</span></th></tr></thead><tbody><tr><td><a href="#opt.inline.duplicates-1"><span class="deltaxml-new" style="background:#90EE90">duplicates</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:string</span></td><td><span class="deltaxml-new" style="background:#90EE90">('reject', 'use-first', 'use-last', 'use-any', 'combine') </span></td><td><span class="deltaxml-new" style="background:#90EE90">'use-first'</span></td></tr><tr><td><a href="#opt.inline.key-1"><span class="deltaxml-new" style="background:#90EE90">key</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">XPathExpression</span></td><td><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">'concat("_",$p:index)'</span></td></tr></tbody></table><details><summary><span class="deltaxml-new" style="background:#90EE90">Errors</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Error code</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td class="errcode"><a href="#err.inline.C0106&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0106</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if duplicate keys are encountered and option duplicates has value “reject”.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0107&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0107</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90"> It is a dynamic error if a document of a not supported document type appears on port source of p:json-merge.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0110&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0110</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the evaluation of the XPath expression in option key for a given item returns either a sequence, an array, a map, or a function.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Implementation details</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Implementation</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td><a href="#impl-44"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is implementation-defined if p:json-merge is able to process document types not mentioned yet, i.e. types of binary documents.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Declaration</span></summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:json-merge</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">any</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">application/json</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">duplicates</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr values-attr"><span class="deltaxml-new" style="background:#90EE90">values</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value values-value"><span class="deltaxml-new" style="background:#90EE90">('reject', 'use-first', 'use-last', 'use-any', 'combine')</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'use-first'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">string</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">key</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:string</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'concat("_",$p:index)'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">XPathExpression</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p></details></div><p><span style="display: none;" class="delete_version">The step inspects the documents on port <code class="port">source</code> in turn to create the resulting map:</span><a id="port.inline.source-43"></a>The step inspects the documents on port <code class="port">source</code> in turn to create the resulting map:<a id="port.inline.source-43"></a>The step inspects the documents on port <code class="port">source</code> in turn to create the resulting map:</p><div class="itemizedlist"><ul><li><p><a id="opt.inline.duplicates-1 err.inline.C0106&#34; opt.inline.duplicates-2"></a>If the document under inspection is a JSON document representing a map, all key-value pairs are copied into the result map unless this map already contains an entry with the given key. In this case the value of option <code class="option">duplicates</code> determines the policy for handling duplicate keys as specified for function <code class="code">map:merge</code> in []. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if duplicate keys are encountered and option <code class="option">duplicates</code> has value “<code class="literal">reject</code>”.<a id="opt.inline.duplicates-1 err.inline.C0106&#34; opt.inline.duplicates-2"></a>If the document under inspection is a JSON document representing a map, all key-value pairs are copied into the result map unless this map already contains an entry with the given key. In this case the value of option <code class="option">duplicates</code> determines the policy for handling duplicate keys as specified for function <code class="code">map:merge</code> in []. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if duplicate keys are encountered and option <code class="option">duplicates</code> has value “<code class="literal">reject</code>”.</p></li><li><p><a id="opt.inline.key-1 err.inline.C0110&#34; opt.inline.key-2"></a>For every other type of JSON document, for XML documents, HTML documents, or text documents a new key-value pair is created and put into the resulting map. The key is created by evaluating the XPath expression in option <code class="option">key</code> with the inspected document as context item. If the evaluation result is a single atomic value, it is taken as key. If the evaluation result is a node, its string value is taken as key. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the evaluation of the XPath expression in option <code class="option">key</code> for a given item returns either a sequence, an array, a map, or a function. Duplicate keys are handled as described above. The XDM representation of the inspected document is taken as value of the key-value pair.<a id="opt.inline.key-1 err.inline.C0110&#34; opt.inline.key-2"></a>For every other type of JSON document, for XML documents, HTML documents, or text documents a new key-value pair is created and put into the resulting map. The key is created by evaluating the XPath expression in option <code class="option">key</code> with the inspected document as context item. If the evaluation result is a single atomic value, it is taken as key. If the evaluation result is a node, its string value is taken as key. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the evaluation of the XPath expression in option <code class="option">key</code> for a given item returns either a sequence, an array, a map, or a function. Duplicate keys are handled as described above. The XDM representation of the inspected document is taken as value of the key-value pair.</p></li><li><p><a id="err.inline.C0107&#34; port.inline.source-44"></a><span id="impl-44">It is <em class="glossterm"><a href="#dt-implementation-defined">implementation<span class="deltaxml-old" style="background:#FF5555"> </span><span class="deltaxml-new" style="background:#90EE90">-</span>defined</a></em> if <code class="code">p:json-merge</code> is able to process document types not mentioned yet, i.e. types of binary documents.</span> If a processor supports a given type of documents, the key-value pair is created as described above.  It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if a document of a not supported document type appears on port <code class="port">source</code> of <code class="code">p:json-merge</code>. <a id="err.inline.C0107&#34; port.inline.source-44"></a><span id="impl-44">It is <em class="glossterm"><a href="#dt-implementation-defined">implementation<span class="deltaxml-old" style="background:#FF5555"> </span><span class="deltaxml-new" style="background:#90EE90">-</span>defined</a></em> if <code class="code">p:json-merge</code> is able to process document types not mentioned yet, i.e. types of binary documents.</span> If a processor supports a given type of documents, the key-value pair is created as described above.  It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if a document of a not supported document type appears on port <code class="port">source</code> of <code class="code">p:json-merge</code>. </p></li></ul></div><p><span style="display: none;" class="delete_version">An implementation must bind the variable “<code class="code">p:index</code>” in the static context of each evaluation of the XPath expression to the position of the document in the sequence of documents on port <code class="port">source</code>, starting with “<code class="literal">1</code>”. </span><a id="port.inline.source-45"></a>An implementation must bind the variable “<code class="code">p:index</code>” in the static context of each evaluation of the XPath expression to the position of the document in the sequence of documents on port <code class="port">source</code>, starting with “<code class="literal">1</code>”. <a id="port.inline.source-45"></a>An implementation must bind the variable “<code class="code">p:index</code>” in the static context of each evaluation of the XPath expression to the position of the document in the sequence of documents on port <code class="port">source</code>, starting with “<code class="literal">1</code>”. </p><section id="c.json-merge.7" class="simplesect"><div class="section-titlepage"><h4>Document properties</h4></div><div class="content"><p>No document properties are preserved. The merged document has no <code class="property">base-uri</code>. </p></div></section></div></section><section id="c.label-elements" class="section"><div class="section-titlepage"><h3><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.18. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.19. </span></bdi>p:label-elements<a aria-label="§" class="self-link" href="#c.label-elements"></a></h3></div><div class="content"><p>The <code class="code">p:label-elements</code> step generates a label for each matched element and stores that label in the specified attribute.</p><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:label-elements</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">xml html</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">xml html</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">attribute</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:QName</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'xml:id'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">  </span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">label</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:string</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'concat("_",$p:index)'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">XPathExpression</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">match</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:string</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'*'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">          </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">XSLTSelectionPattern</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">replace</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:boolean</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">true()</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">    </span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><div class="declare-step"><p><span class="deltaxml-new" style="background:#90EE90">Summary</span></p><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Input port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.source-46"><span class="deltaxml-new" style="background:#90EE90">source</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">xml html </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Output port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.result-21"><span class="deltaxml-new" style="background:#90EE90">result</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">xml html </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Option name</span></th><th><span class="deltaxml-new" style="background:#90EE90">Type</span></th><th><span class="deltaxml-new" style="background:#90EE90">Default value</span></th></tr></thead><tbody><tr><td><a href="#opt.inline.attribute-1"><span class="deltaxml-new" style="background:#90EE90">attribute</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:QName</span></td><td><span class="deltaxml-new" style="background:#90EE90">'xml:id'</span></td></tr><tr><td><a href="#opt.inline.label-1"><span class="deltaxml-new" style="background:#90EE90">label</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">XPathExpression</span></td><td><span class="deltaxml-new" style="background:#90EE90">'concat("_",$p:index)'</span></td></tr><tr><td><a href="#opt.inline.match-11"><span class="deltaxml-new" style="background:#90EE90">match</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">XSLTSelectionPattern</span></td><td><span class="deltaxml-new" style="background:#90EE90">'*'</span></td></tr><tr><td><a href="#opt.inline.replace-1"><span class="deltaxml-new" style="background:#90EE90">replace</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:boolean</span></td><td><span class="deltaxml-new" style="background:#90EE90">true()</span></td></tr></tbody></table><details><summary><span class="deltaxml-new" style="background:#90EE90">Errors</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Error code</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td class="errcode"><a href="#err.inline.C0023.3&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0023</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if that expression matches anything other than element nodes.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Declaration</span></summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:label-elements</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">xml html</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">xml html</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">attribute</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:QName</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'xml:id'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">  </span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">label</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:string</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'concat("_",$p:index)'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">XPathExpression</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">match</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:string</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'*'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">          </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">XSLTSelectionPattern</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">replace</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:boolean</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">true()</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">    </span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p></details></div><p><span style="display: none;" class="delete_version">The value of the <code class="option">label</code> option is an XPath expression used to generate the value of the attribute label.</span><a id="opt.inline.label-1"></a>The value of the <code class="option">label</code> option is an XPath expression used to generate the value of the attribute label.<a id="opt.inline.label-1"></a>The value of the <code class="option">label</code> option is an XPath expression used to generate the value of the attribute label.</p><p><a id="opt.inline.match-11 err.inline.C0023.3&#34;"></a>The value of the <code class="option">match</code> option <span class="rfc2119" id="c.label-elements.5.2">must</span> be an XSLTSelectionPattern. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if that expression matches anything other than element nodes.<a id="opt.inline.match-11 err.inline.C0023.3&#34;"></a>The value of the <code class="option">match</code> option <span class="rfc2119" id="c.label-elements.5.2">must</span> be an XSLTSelectionPattern. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if that expression matches anything other than element nodes.</p><p><span style="display: none;" class="delete_version">The value of the <code class="option">replace</code><span class="rfc2119" id="c.label-elements.6.2">must</span> be a boolean value and is used to indicate whether existing attribute values are replaced.</span><a id="opt.inline.replace-1"></a>The value of the <code class="option">replace</code><span class="rfc2119" id="c.label-elements.6.2">must</span> be a boolean value and is used to indicate whether existing attribute values are replaced.<a id="opt.inline.replace-1"></a>The value of the <code class="option">replace</code><span class="rfc2119" id="c.label-elements.6.2">must</span> be a boolean value and is used to indicate whether existing attribute values are replaced.</p><p><span style="display: none;" class="delete_version">This step operates by generating attribute labels for each element matched. For every matched element, the expression is evaluated with the context node set to the matched element. An attribute is added to the matched element using the attribute name is specified the <code class="option">attribute</code> option and the string value of result of evaluating the expression. If the attribute already exists on the matched element, the value is replaced with the string value only if the <code class="option">replace</code> option has the value of <code class="literal">true</code>.</span><a id="opt.inline.attribute-1 opt.inline.replace-2"></a>This step operates by generating attribute labels for each element matched. For every matched element, the expression is evaluated with the context node set to the matched element. An attribute is added to the matched element using the attribute name is specified the <code class="option">attribute</code> option and the string value of result of evaluating the expression. If the attribute already exists on the matched element, the value is replaced with the string value only if the <code class="option">replace</code> option has the value of <code class="literal">true</code>.<a id="opt.inline.attribute-1 opt.inline.replace-2"></a>This step operates by generating attribute labels for each element matched. For every matched element, the expression is evaluated with the context node set to the matched element. An attribute is added to the matched element using the attribute name is specified the <code class="option">attribute</code> option and the string value of result of evaluating the expression. If the attribute already exists on the matched element, the value is replaced with the string value only if the <code class="option">replace</code> option has the value of <code class="literal">true</code>.</p><p>If this step is used to add or change the value of an attribute named “<code class="literal">xml:base</code>”, the base URI of the element <span class="rfc2119" id="c.label-elements.8.2">must</span> also be amended accordingly.</p><p>An implementation must bind the variable “<code class="literal">p:index</code>” in the static context of each evaluation of the XPath expression to the position of the element in the sequence of matched elements. In other words, the first element (in document order) matched gets the value “<code class="literal">1</code>”, the second gets the value “<code class="literal">2</code>”, the third, “<code class="literal">3</code>”, etc.</p><p>The result of the p:label-elements step is the input document with the attribute labels associated with matched elements. All other non-matching content remains the same.</p><section id="c.label-elements.11" class="simplesect"><div class="section-titlepage"><h4>Document properties</h4></div><div class="content"><p>All document properties are preserved.</p></div></section></div></section><section id="c.load" class="section"><div class="section-titlepage"><h3><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.19. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.20. </span></bdi>p:load<a aria-label="§" class="self-link" href="#c.load"></a></h3></div><div class="content"><p>The <code class="code">p:load</code> step has no inputs but produces as its result a document specified by an IRI.</p><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:load</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">any</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">href</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:anyURI</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">        </span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">parameters</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">map(xs:QName,item()*)?</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">     </span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">content-type</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:string?</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">               </span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">document-properties</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">map(xs:QName, item()*)?</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><div class="declare-step"><p><span class="deltaxml-new" style="background:#90EE90">Summary</span></p><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Output port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.result-21"><span class="deltaxml-new" style="background:#90EE90">result</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">any </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Option name</span></th><th><span class="deltaxml-new" style="background:#90EE90">Type</span></th><th><span class="deltaxml-new" style="background:#90EE90">Default value</span></th><th><span class="deltaxml-new" style="background:#90EE90">Required</span></th></tr></thead><tbody><tr><td class="required"><a href="#opt.inline.href-7"><span class="deltaxml-new" style="background:#90EE90">href</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:anyURI</span></td><td><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">✔ </span></td></tr><tr><td><a href="#opt.inline.content-type-3"><span class="deltaxml-new" style="background:#90EE90">content-type</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:string?</span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td><td><span class="deltaxml-new" style="background:#90EE90"> </span></td></tr><tr><td><a href="#opt.inline.document-properties-1"><span class="deltaxml-new" style="background:#90EE90">document-properties</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">map(xs:QName, item()*)?</span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td><td><span class="deltaxml-new" style="background:#90EE90"> </span></td></tr><tr><td><a href="#opt.inline.parameters-15"><span class="deltaxml-new" style="background:#90EE90">parameters</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">map(xs:QName,item()*)?</span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td><td><span class="deltaxml-new" style="background:#90EE90"> </span></td></tr></tbody></table><details><summary><span class="deltaxml-new" style="background:#90EE90">Errors</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Error code</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td class="errcode"><a href="#err.inline.D0011.1&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XD0011</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the resource referenced by a p:load element does not exist, cannot be accessed, or if the access reports error (for example, an HTTP 404 error).</span></td></tr><tr><td class="errcode"><a href="#err.inline.D0023&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XD0023</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if a DTD validation is performed and either the document is not valid or no DTD is found.</span></td></tr><tr><td class="errcode"><a href="#err.inline.D0043&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XD0043</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the dtd-validate parameter is true and the processor does not support DTD validation.</span></td></tr><tr><td class="errcode"><a href="#err.inline.D0049.1&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XD0049</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the loaded content is not a well-formed XML document.</span></td></tr><tr><td class="errcode"><a href="#err.inline.D0057.1&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XD0057</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the loaded content does not conform to the JSON grammar, unless the parameter liberal is true and the processor chooses to accept the deviation.</span></td></tr><tr><td class="errcode"><a href="#err.inline.D0058.1&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XD0058</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the parameter duplicates is reject and the value of loaded content contains a JSON object with duplicate keys.</span></td></tr><tr><td class="errcode"><a href="#err.inline.D0059.1&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XD0059</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the parameter map contains an entry whose key is defined in the specification of fn:parse-json and whose value is not valid for that key, or if it contains an entry with the key fallback when the parameter escape with true() is also present.</span></td></tr><tr><td class="errcode"><a href="#err.inline.D0060.1&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XD0060</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the content-type specifies a charset (sometimes called the character encoding) that is not supported by the processor.</span></td></tr><tr><td class="errcode"><a href="#err.inline.D0062&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XD0062</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the content-type is specified and the document-properties has a “content-type” that is not the same.</span></td></tr><tr><td class="errcode"><a href="#err.inline.D0064.2&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XD0064</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the base URI is not both absolute and valid according to .</span></td></tr><tr><td class="errcode"><a href="#err.inline.D0078&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XD0078</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the loaded document cannot be represented as an HTML document in the XPath data model.</span></td></tr><tr><td class="errcode"><a href="#err.inline.D0079.4&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XD0079</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if a supplied content-type is not a valid media type of the form “type/subtype+ext” or “type/subtype”.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Implementation details</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Implementation</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td><a href="#impl-45"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">In the absence of an explicit type, the content type is implementation-defined</span></td></tr><tr><td><a href="#impl-46"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">Additional XML parameters are implementation-defined. </span></td></tr><tr><td><a href="#impl-47"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">Text parameters are implementation-defined. </span></td></tr><tr><td><a href="#impl-48"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">Support for other charsets is implementation-defined.</span></td></tr><tr><td><a href="#impl-49"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">Additional JSON parameters are implementation-defined. </span></td></tr><tr><td><a href="#impl-50"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">The precise way in which HTML documents are parsed into the XPath data model is implementation-defined.</span></td></tr><tr><td><a href="#impl-51"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">HTML parameters are implementation-defined. </span></td></tr><tr><td><a href="#impl-52"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">How a processor interprets other media types is implementation-defined. </span></td></tr><tr><td><a href="#impl-53"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">Parameters for other media types are implementation-defined. </span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Declaration</span></summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:load</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">any</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">href</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:anyURI</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">        </span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">parameters</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">map(xs:QName,item()*)?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">     </span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">content-type</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:string?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">               </span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">document-properties</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">map(xs:QName, item()*)?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p></details></div><p><a id="opt.inline.href-7 err.inline.D0064.2&#34;"></a>If the <span class="deltaxml-old" style="background:#FF5555">option</span><span class="deltaxml-old" style="background:#FF5555"> is relative, it is made absolute against the base URI of the element on which it is specified (</span><span class="deltaxml-old" style="background:#FF5555">p:with-option</span><span class="deltaxml-old" style="background:#FF5555"> or the step in case of a syntactic shortcut value). If the </span><code class="option">href</code> is relative, it is made absolute against the base URI of the element on which it is specified (<code class="tag-element">p:with-option</code> or <code class="tag-element">p:load</code> in the case of a syntactic shortcut value). It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the base URI is not both absolute and valid according to [].<a id="opt.inline.href-7 err.inline.D0064.2&#34;"></a>If the <span class="deltaxml-old" style="background:#FF5555">option</span><span class="deltaxml-old" style="background:#FF5555"> is relative, it is made absolute against the base URI of the element on which it is specified (</span><span class="deltaxml-old" style="background:#FF5555">p:with-option</span><span class="deltaxml-old" style="background:#FF5555"> or the step in case of a syntactic shortcut value). If the </span><code class="option">href</code> is relative, it is made absolute against the base URI of the element on which it is specified (<code class="tag-element">p:with-option</code> or <code class="tag-element">p:load</code> in the case of a syntactic shortcut value). It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the base URI is not both absolute and valid according to [].</p><p><span style="display: none;" class="delete_version">The document identified by the <code class="option">href</code> URI is loaded and returned. If the URI protocol supports redirection, then redirects <span class="rfc2119" id="c.load.5.2">must</span> be followed.</span><a id="opt.inline.href-8"></a>The document identified by the <code class="option">href</code> URI is loaded and returned. If the URI protocol supports redirection, then redirects <span class="rfc2119" id="c.load.5.2">must</span> be followed.<a id="opt.inline.href-8"></a>The document identified by the <code class="option">href</code> URI is loaded and returned. If the URI protocol supports redirection, then redirects <span class="rfc2119" id="c.load.5.2">must</span> be followed.</p><p><a id="err.inline.D0011.1&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the resource referenced by a <code class="code">p:load</code> element does not exist<span class="deltaxml-old" style="background:#FF5555"> or</span><span class="deltaxml-new" style="background:#90EE90">,</span> cannot be accessed<span class="deltaxml-new" style="background:#90EE90">, or if the access reports error (for example, an HTTP 404 error)</span>.<a id="err.inline.D0011.1&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the resource referenced by a <code class="code">p:load</code> element does not exist<span class="deltaxml-old" style="background:#FF5555"> or</span><span class="deltaxml-new" style="background:#90EE90">,</span> cannot be accessed<span class="deltaxml-new" style="background:#90EE90">, or if the access reports error (for example, an HTTP 404 error)</span>.</p><p>The behavior of this step depends on the content type of the document loaded. The content type of a document is determined as follows:</p><div class="orderedlist"><ol style="list-style: decimal;"><li><p><a id="opt.inline.document-properties-1 opt.inline.content-type-3 err.inline.D0079.4&#34; err.inline.D0062&#34;"></a>If a <code class="property">content-type</code> property is specified in <code class="option">document-properties</code> or <code class="option">content-type</code> is present, then the document <span class="rfc2119" id="c.load.8.1.1.4">must</span> be interpreted according to that content type. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if a supplied content-type is not a valid media type of the form “<code class="literal"><em class="replaceable"><code>type</code></em>/<em class="replaceable"><code>subtype</code></em>+<em class="replaceable"><code>ext</code></em></code>” or “<code class="literal"><em class="replaceable"><code>type</code></em>/<em class="replaceable"><code>subtype</code></em></code>”. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the <code class="tag-attribute">content-type</code> is specified and the document-properties has a “<code class="code">content-type</code>” that is not the same. <a id="opt.inline.document-properties-1 opt.inline.content-type-3 err.inline.D0079.4&#34; err.inline.D0062&#34;"></a>If a <code class="property">content-type</code> property is specified in <code class="option">document-properties</code> or <code class="option">content-type</code> is present, then the document <span class="rfc2119" id="c.load.8.1.1.4">must</span> be interpreted according to that content type. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if a supplied content-type is not a valid media type of the form “<code class="literal"><em class="replaceable"><code>type</code></em>/<em class="replaceable"><code>subtype</code></em>+<em class="replaceable"><code>ext</code></em></code>” or “<code class="literal"><em class="replaceable"><code>type</code></em>/<em class="replaceable"><code>subtype</code></em></code>”. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the <code class="tag-attribute">content-type</code> is specified and the document-properties has a “<code class="code">content-type</code>” that is not the same. </p></li><li><p>If the document is retrieved with a URI protocol that specifies a content type (for example, <code class="literal">http:</code>), then the document <span class="rfc2119" id="c.load.8.2.1.2">must</span> be interpreted according to that content type. </p></li><li><p><span id="impl-45">In the absence of an explicit type, the content type is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em></span>.</p></li></ol></div><p><span style="display: none;" class="delete_version">The <code class="option">parameters</code> map contains additional, optional parameters that may influence the way that content is loaded. The interpretation of this map varies according to the content type. Parameter names that are in no namespace are treated as strings using only the local-name where appropriate.</span><a id="opt.inline.parameters-15"></a>The <code class="option">parameters</code> map contains additional, optional parameters that may influence the way that content is loaded. The interpretation of this map varies according to the content type. Parameter names that are in no namespace are treated as strings using only the local-name where appropriate.<a id="opt.inline.parameters-15"></a>The <code class="option">parameters</code> map contains additional, optional parameters that may influence the way that content is loaded. The interpretation of this map varies according to the content type. Parameter names that are in no namespace are treated as strings using only the local-name where appropriate.</p><p>Broadly speaking, there are five categories of data that might be loaded: <a href="#c.load.xml">XML</a>, <a href="#c.load.text">text</a>, <a href="#c.load.json">JSON</a>, <a href="#c.load.html">HTML</a>, and “other” <a href="#c.load.binary">binary</a> data.</p><section id="c.load.xml" class="section"><div class="section-titlepage"><h4><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.19.1. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.20.1. </span></bdi>Loading XML data<a aria-label="§" class="self-link" href="#c.load.xml"></a></h4></div><div class="content"><p>For an XML media type, the content is loaded and parsed as XML.</p><p><a id="err.inline.D0049.1&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the loaded content is not a well-formed XML document.<a id="err.inline.D0049.1&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the loaded content is not a well-formed XML document.</p><p><a id="opt.inline.dtd-validate-1 err.inline.D0023&#34; err.inline.D0043&#34; opt.inline.dtd-validate-2"></a>If the <code class="option">dtd-validate</code> parameter is <code class="literal">true</code>, then DTD validation must be performed when parsing the document. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if a DTD validation is performed and either the document is not valid or no DTD is found. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the <code class="option">dtd-validate</code> parameter is <code class="literal">true</code> and the processor does not support DTD validation.<a id="opt.inline.dtd-validate-1 err.inline.D0023&#34; err.inline.D0043&#34; opt.inline.dtd-validate-2"></a>If the <code class="option">dtd-validate</code> parameter is <code class="literal">true</code>, then DTD validation must be performed when parsing the document. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if a DTD validation is performed and either the document is not valid or no DTD is found. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the <code class="option">dtd-validate</code> parameter is <code class="literal">true</code> and the processor does not support DTD validation.</p><p><span id="impl-46">Additional XML parameters are <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>. </span></p></div></section><section id="c.load.text" class="section"><div class="section-titlepage"><h4><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.19.2. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.20.2. </span></bdi>Loading text data<a aria-label="§" class="self-link" href="#c.load.text"></a></h4></div><div class="content"><p>For a text media type, the content is loaded as a text document. (A text document is an XPath data model document consisting of a single text node.)</p><p><a id="err.inline.D0060.1&#34; opt.inline.content-type-4"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the <code class="option">content-type</code> specifies <span class="deltaxml-old" style="background:#FF5555">an encoding, which</span><span class="deltaxml-new" style="background:#90EE90">a charset (sometimes called the character encoding) that</span> is not supported by the processor.<a id="err.inline.D0060.1&#34; opt.inline.content-type-4"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the <code class="option">content-type</code> specifies <span class="deltaxml-old" style="background:#FF5555">an encoding, which</span><span class="deltaxml-new" style="background:#90EE90">a charset (sometimes called the character encoding) that</span> is not supported by the processor.</p><p><span id="impl-47">Text parameters are <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>. </span></p><section id="text-bom" class="section"><div class="section-titlepage"><h5><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.20.2.1. </span></bdi><span class="deltaxml-new" style="background:#90EE90">Byte order marks</span><a aria-label="§" class="self-link" href="#text-bom"></a></h5></div><div class="content"><p><span class="deltaxml-new" style="background:#90EE90">UTF-8 and UTF-16 inputs can begin with a byte order mark. The byte order mark is not considered part of the text and is not included in the text document.</span></p><p><span class="deltaxml-new" style="background:#90EE90">In order to identify the byte order mark, it is first necessary to identify the charset that is being used. The charset of an external resource is determined as follows:</span></p><div class="orderedlist"><ol style="list-style: decimal;"><li><p><span class="deltaxml-new" style="background:#90EE90">external charset information is used if available (for example, if the resource is loaded with HTTP or HTTPS and the server provided a charset), otherwise </span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">the charset from the content type if specified, otherwise </span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">the processor may use implementation-defined heuristics to determine the likely charset, otherwise </span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">UTF-8 is assumed.</span></p></li></ol></div><p><span class="deltaxml-new" style="background:#90EE90">Processors </span><span class="rfc2119" id="text-bom.5.1"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> support UTF-8 and UTF-16. </span><span id="impl-48"><span class="deltaxml-new" style="background:#90EE90">Support for other charsets is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em><span class="deltaxml-new" style="background:#90EE90">.</span></span></p><p><span class="deltaxml-new" style="background:#90EE90">If the encoding is UTF-8, UTF-16, UTF-16LE, or UTF-16BE, a byte order mark may be present. (For any other encoding, there is no byte order mark and all of the text is returned.)</span></p><div class="itemizedlist"><ul><li><p><span class="deltaxml-new" style="background:#90EE90">If the encoding is UTF-8 and the document begins with the bytes EF BB BF, those bytes are the byte order mark. They are discarded.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">If the encoding is UTF-16 and the document begins with the bytes FE FF or FF FE, those bytes are the byte order mark. They are discarded.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">If the encoding is UTF-16LE and the document begins with the bytes FF FE, those bytes are the byte order mark. They are discarded.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">If the encoding is UTF-16BE and the document begins with the bytes FE FF, those bytes are the byte order mark. They are discarded.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">If the encoding isn’t specified, but the file begins with a byte order mark (FE FF or FF FE), treat the charset as UTF-16 and discard the byte order mark.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Otherwise, there is no byte order mark, nothing is discarded. </span></p></li></ul></div></div></section></div></section><section id="c.load.json" class="section"><div class="section-titlepage"><h4><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.19.3. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.20.3. </span></bdi>Loading JSON data<a aria-label="§" class="self-link" href="#c.load.json"></a></h4></div><div class="content"><p>For a JSON media type, the content is loaded and parsed as JSON<span class="deltaxml-new" style="background:#90EE90"> [</span><a href="#rfc8259"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">RFC 8259</span></span></a><span class="deltaxml-new" style="background:#90EE90">]</span>.</p><p><span style="display: none;" class="delete_version">The parameters specified for the <code class="code">fn:parse-json</code> function in [<a href="#xpath31-functions"><span class="abbrev">XPath and XQuery Functions and Operators 3.1</span></a>] <span class="rfc2119" id="c.load.json.3.3">must</span> be supported. <span id="impl-48">Additional JSON parameters are <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>. </span></span><span style="display: none;" class="add_version">The parameters specified for the <code class="code">fn:parse-json</code> function in [<a href="#xpath31-functions"><span class="abbrev">XPath and XQuery Functions and Operators 3.1</span></a>] <span class="rfc2119" id="c.load.json.3.3">must</span> be supported. <span id="impl-49">Additional JSON parameters are <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>. </span></span><span class="modify_version">The parameters specified for the <code class="code">fn:parse-json</code> function in [<a href="#xpath31-functions"><span class="abbrev">XPath and XQuery Functions and Operators 3.1</span></a>] <span class="rfc2119" id="c.load.json.3.3">must</span> be supported. <span id="impl-49">Additional JSON parameters are <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>. </span></span></p><p><a id="err.inline.D0057.1&#34; opt.inline.liberal-1"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the loaded content does not conform to the JSON grammar, unless the parameter <code class="option">liberal</code> is <code class="literal">true</code> and the processor chooses to accept the deviation.<a id="err.inline.D0057.1&#34; opt.inline.liberal-1"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the loaded content does not conform to the JSON grammar, unless the parameter <code class="option">liberal</code> is <code class="literal">true</code> and the processor chooses to accept the deviation.</p><p><a id="err.inline.D0058.1&#34; opt.inline.duplicates-3"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the parameter <code class="option">duplicates</code> is <code class="literal">reject</code> and the value of loaded content contains a JSON object with duplicate keys.<a id="err.inline.D0058.1&#34; opt.inline.duplicates-3"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the parameter <code class="option">duplicates</code> is <code class="literal">reject</code> and the value of loaded content contains a JSON object with duplicate keys.</p><p><a id="err.inline.D0059.1&#34; opt.inline.escape-1"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the parameter map contains an entry whose key is defined in the specification of <code class="code">fn:parse-json</code> and whose value is not valid for that key, or if it contains an entry with the key fallback when the parameter <code class="option">escape</code> with <code class="literal">true()</code> is also present.<a id="err.inline.D0059.1&#34; opt.inline.escape-1"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the parameter map contains an entry whose key is defined in the specification of <code class="code">fn:parse-json</code> and whose value is not valid for that key, or if it contains an entry with the key fallback when the parameter <code class="option">escape</code> with <code class="literal">true()</code> is also present.</p><section id="json-bom" class="section"><div class="section-titlepage"><h5><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.20.3.1. </span></bdi><span class="deltaxml-new" style="background:#90EE90">Byte order mark</span><a aria-label="§" class="self-link" href="#json-bom"></a></h5></div><div class="content"><p><span class="deltaxml-new" style="background:#90EE90">JSON data transmitted with the UTF-8 encoding may begin with a byte order mark. If it does, the byte order mark is discarded before parsing the input.</span></p></div></section></div></section><section id="c.load.html" class="section"><div class="section-titlepage"><h4><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.19.4. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.20.4. </span></bdi>Loading HTML data<a aria-label="§" class="self-link" href="#c.load.html"></a></h4></div><div class="content"><p>For an HTML media type, the content is loaded and parsed into an XPath data model document that contains a tree of elements, attributes, and other nodes.</p><p><span style="display: none;" class="delete_version"><span id="impl-49">The precise way in which HTML documents are parsed into the XPath data model is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span></span><span style="display: none;" class="add_version"><span id="impl-50">The precise way in which HTML documents are parsed into the XPath data model is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span></span><span class="modify_version"><span id="impl-50">The precise way in which HTML documents are parsed into the XPath data model is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span></span></p><p><a id="err.inline.D0078&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the loaded document cannot be represented as an HTML document in the XPath data model.<a id="err.inline.D0078&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the loaded document cannot be represented as an HTML document in the XPath data model.</p><p><span style="display: none;" class="delete_version"><span id="impl-50">HTML parameters are <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>. </span></span><span style="display: none;" class="add_version"><span id="impl-51">HTML parameters are <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>. </span></span><span class="modify_version"><span id="impl-51">HTML parameters are <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>. </span></span></p></div></section><section id="c.load.binary" class="section"><div class="section-titlepage"><h4><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.19.5. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.20.5. </span></bdi>Loading binary data<a aria-label="§" class="self-link" href="#c.load.binary"></a></h4></div><div class="content"><p><span style="display: none;" class="delete_version">An XProc processor may load other, arbitrary data types. <span id="impl-51">How a processor interprets other media types is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>. </span></span><span style="display: none;" class="add_version">An XProc processor may load other, arbitrary data types. <span id="impl-52">How a processor interprets other media types is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>. </span></span><span class="modify_version">An XProc processor may load other, arbitrary data types. <span id="impl-52">How a processor interprets other media types is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>. </span></span></p><p><span style="display: none;" class="delete_version"><span id="impl-52">Parameters for other media types are <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>. </span></span><span style="display: none;" class="add_version"><span id="impl-53">Parameters for other media types are <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>. </span></span><span class="modify_version"><span id="impl-53">Parameters for other media types are <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>. </span></span></p></div></section><section id="c.load.16" class="simplesect"><div class="section-titlepage"><h4>Document properties</h4></div><div class="content"><p><span style="display: none;" class="delete_version">The properties specified in <code class="option">document-properties</code> are applied. If the properties do not specify a <code class="property">base-uri</code>, the <code class="property">base-uri</code> property will reflect the base URI of the loaded document. </span><a id="opt.inline.document-properties-2"></a>The properties specified in <code class="option">document-properties</code> are applied. If the properties do not specify a <code class="property">base-uri</code>, the <code class="property">base-uri</code> property will reflect the base URI of the loaded document. <a id="opt.inline.document-properties-2"></a>The properties specified in <code class="option">document-properties</code> are applied. If the properties do not specify a <code class="property">base-uri</code>, the <code class="property">base-uri</code> property will reflect the base URI of the loaded document. </p></div></section></div></section><section id="c.make-absolute-uris" class="section"><div class="section-titlepage"><h3><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.20. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.21. </span></bdi>p:make-absolute-uris<a aria-label="§" class="self-link" href="#c.make-absolute-uris"></a></h3></div><div class="content"><p>The <code class="code">p:make-absolute-uris</code> step makes an element or attribute's value in the source document an absolute IRI value in the result document.</p><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:make-absolute-uris</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">xml html</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">xml html</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">match</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:string</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">       </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">XSLTSelectionPattern</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">base-uri</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:anyURI?</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                   </span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><div class="declare-step"><p><span class="deltaxml-new" style="background:#90EE90">Summary</span></p><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Input port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.source-46"><span class="deltaxml-new" style="background:#90EE90">source</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">xml html </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Output port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.result-21"><span class="deltaxml-new" style="background:#90EE90">result</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">xml html </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Option name</span></th><th><span class="deltaxml-new" style="background:#90EE90">Type</span></th><th><span class="deltaxml-new" style="background:#90EE90">Default value</span></th><th><span class="deltaxml-new" style="background:#90EE90">Required</span></th></tr></thead><tbody><tr><td class="required"><a href="#opt.inline.match-12"><span class="deltaxml-new" style="background:#90EE90">match</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">XSLTSelectionPattern</span></td><td><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">✔ </span></td></tr><tr><td><a href="#opt.inline.base-uri-1"><span class="deltaxml-new" style="background:#90EE90">base-uri</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:anyURI?</span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td><td><span class="deltaxml-new" style="background:#90EE90"> </span></td></tr></tbody></table><details><summary><span class="deltaxml-new" style="background:#90EE90">Errors</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Error code</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td class="errcode"><a href="#err.inline.C0023.4&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0023</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the pattern matches anything other than element or attribute nodes.</span></td></tr><tr><td class="errcode"><a href="#err.inline.D0064.3&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XD0064</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the base URI is not both absolute and valid according to .</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Implementation details</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Implementation</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td><a href="#impl-54"><span class="deltaxml-new" style="background:#90EE90">Dependent</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">If the IRI reference specified by the base-uri option on p:make-absolute-uris is absent and the input document has no base URI, the results are implementation-dependent.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Declaration</span></summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:make-absolute-uris</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">xml html</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">xml html</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">match</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:string</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">       </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">XSLTSelectionPattern</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">base-uri</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:anyURI?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                   </span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p></details></div><p><a id="opt.inline.match-12 err.inline.C0023.4&#34;"></a>The value of the <code class="option">match</code> option <span class="rfc2119" id="c.make-absolute-uris.4.2">must</span> be an XSLTSelectionPattern. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the pattern matches anything other than element or attribute nodes.<a id="opt.inline.match-12 err.inline.C0023.4&#34;"></a>The value of the <code class="option">match</code> option <span class="rfc2119" id="c.make-absolute-uris.4.2">must</span> be an XSLTSelectionPattern. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the pattern matches anything other than element or attribute nodes.</p><p><a id="opt.inline.base-uri-1 err.inline.D0064.3&#34;"></a>The value of the <code class="option">base-uri</code> option <span class="rfc2119" id="c.make-absolute-uris.5.2">must</span> be an <code class="type">anyURI</code>. It is interpreted as an IRI reference. If it is relative, it is made absolute against the base URI of the element on which it is specified (<code class="tag-element">p:with-option</code> or <code class="tag-element">p:make-absolute-uris</code> in the case of a syntactic shortcut value). It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the base URI is not both absolute and valid according to [].<a id="opt.inline.base-uri-1 err.inline.D0064.3&#34;"></a>The value of the <code class="option">base-uri</code> option <span class="rfc2119" id="c.make-absolute-uris.5.2">must</span> be an <code class="type">anyURI</code>. It is interpreted as an IRI reference. If it is relative, it is made absolute against the base URI of the element on which it is specified (<code class="tag-element">p:with-option</code> or <code class="tag-element">p:make-absolute-uris</code> in the case of a syntactic shortcut value). It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the base URI is not both absolute and valid according to [].</p><p>For every element or attribute in the input document which matches the specified pattern, its XPath string-value is resolved against the specified base URI and the resulting absolute IRI is used as the matched node's entire contents in the output.</p><p><span style="display: none;" class="delete_version">The base URI used for resolution defaults to the matched attribute's element or the matched element's base URI unless the <code class="option">base-uri</code> option is specified. When the <code class="option">base-uri</code> option is specified, the option value is used as the base URI regardless of any contextual base URI value in the document. This option value is resolved against the base URI of the <code class="tag-element">p:option</code> element used to set the option.</span><a id="opt.inline.base-uri-2 opt.inline.base-uri-3"></a>The base URI used for resolution defaults to the matched attribute's element or the matched element's base URI unless the <code class="option">base-uri</code> option is specified. When the <code class="option">base-uri</code> option is specified, the option value is used as the base URI regardless of any contextual base URI value in the document. This option value is resolved against the base URI of the <code class="tag-element">p:option</code> element used to set the option.<a id="opt.inline.base-uri-2 opt.inline.base-uri-3"></a>The base URI used for resolution defaults to the matched attribute's element or the matched element's base URI unless the <code class="option">base-uri</code> option is specified. When the <code class="option">base-uri</code> option is specified, the option value is used as the base URI regardless of any contextual base URI value in the document. This option value is resolved against the base URI of the <code class="tag-element">p:option</code> element used to set the option.</p><p><span style="display: none;" class="delete_version"><span id="impl-53">If the IRI reference specified by the <code class="option">base-uri</code> option on <code class="tag-element">p:make-absolute-uris</code> is absent and the input document has no base URI, the results are <em class="glossterm"><a href="#dt-implementation-dependent">implementation-dependent</a></em>.</span></span><span style="display: none;" class="add_version"><span id="impl-54">If the IRI reference specified by the <a id="opt.inline.base-uri-4"></a><code class="option">base-uri</code> option on <code class="tag-element">p:make-absolute-uris</code> is absent and the input document has no base URI, the results are <em class="glossterm"><a href="#dt-implementation-dependent">implementation-dependent</a></em>.</span></span><span class="modify_version"><span id="impl-54">If the IRI reference specified by the <a id="opt.inline.base-uri-4"></a><code class="option">base-uri</code> option on <code class="tag-element">p:make-absolute-uris</code> is absent and the input document has no base URI, the results are <em class="glossterm"><a href="#dt-implementation-dependent">implementation-dependent</a></em>.</span></span></p><section id="c.make-absolute-uris.9" class="simplesect"><div class="section-titlepage"><h4>Document properties</h4></div><div class="content"><p>All document properties are preserved.</p></div></section></div></section><section id="c.message" class="section"><div class="section-titlepage"><h3><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.22. </span></bdi><span class="deltaxml-new" style="background:#90EE90">p:message</span><a aria-label="§" class="self-link" href="#c.message"></a></h3></div><div class="content"><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">p:message</span></code><span class="deltaxml-new" style="background:#90EE90"> step conditionally produces a message.</span></p><div class="declare-step"><p><span class="deltaxml-new" style="background:#90EE90">Summary</span></p><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Input port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.source-46"><span class="deltaxml-new" style="background:#90EE90">source</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td><span class="deltaxml-new" style="background:#90EE90"> </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Output port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.result-21"><span class="deltaxml-new" style="background:#90EE90">result</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td><span class="deltaxml-new" style="background:#90EE90"> </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Option name</span></th><th><span class="deltaxml-new" style="background:#90EE90">Type</span></th><th><span class="deltaxml-new" style="background:#90EE90">Default value</span></th><th><span class="deltaxml-new" style="background:#90EE90">Required</span></th></tr></thead><tbody><tr><td class="required"><span class="deltaxml-new" style="background:#90EE90">select</span></td><td><span class="deltaxml-new" style="background:#90EE90">item()*</span></td><td><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">✔ </span></td></tr><tr><td><a href="#opt.inline.test-1"><span class="deltaxml-new" style="background:#90EE90">test</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:boolean</span></td><td><span class="deltaxml-new" style="background:#90EE90">true()</span></td><td><span class="deltaxml-new" style="background:#90EE90"> </span></td></tr></tbody></table><details><summary><span class="deltaxml-new" style="background:#90EE90">Implementation details</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Implementation</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td><a href="#impl-55"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">Precisely what “made available” means is implementation-defined.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Declaration</span></summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:message</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">test</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:boolean</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">true()</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">       </span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">item()*</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">        </span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p></details></div><p><span class="deltaxml-new" style="background:#90EE90">Steps that produce messages offer one way for an author to keep track of the progress of a pipeline. The </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">[p:]message</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute can be added to any step to display a message when it runs.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Status and debugging messages that are appropriate during pipeline development may be distracting when the pipeline is running “in production”. Existing mechanisms for conditional compilation can be used to mediate between “development” and “production” runs, but they are a bit heavyweight. Adding many steps with </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">[p:]use-when</span></code><span class="deltaxml-new" style="background:#90EE90"> attributes and managing the connections between steps that may be conditionally removed can make pipelines harder to read and understand.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:message</span></code><span class="deltaxml-new" style="background:#90EE90"> step can be used to achieve much the same effect and is considerably less verbose.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">test</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute is “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90">”, the result of evaluating the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">select</span></code><span class="deltaxml-new" style="background:#90EE90"> option is serialized and made available. (As with the </span><a href="https://spec.xproc.org/master/head/xproc/#messages"><span class="deltaxml-new" style="background:#90EE90">message attribute</span></a><span class="deltaxml-new" style="background:#90EE90">, this is intentionally vague. </span><span id="impl-55"><span class="deltaxml-new" style="background:#90EE90">Precisely what “made available” means is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em><span class="deltaxml-new" style="background:#90EE90">.</span></span><span class="deltaxml-new" style="background:#90EE90"> Often it means “printed on the console”.)</span></p><p><span class="deltaxml-new" style="background:#90EE90">Irrespective of the value of the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">test</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute, the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:message</span></code><span class="deltaxml-new" style="background:#90EE90"> passes all of the documents that appear on its </span><a id="port.inline.source-46"></a><code class="port"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90"> port through to the </span><a id="port.inline.result-21"></a><code class="port"><span class="deltaxml-new" style="background:#90EE90">result</span></code><span class="deltaxml-new" style="background:#90EE90"> port, unchanged and in the same order.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If exactly one document appears on the </span><a id="port.inline.source-47"></a><code class="port"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90"> port, it is the context item when the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">test</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">select</span></code><span class="deltaxml-new" style="background:#90EE90"> expressions are evaluated. In all other cases, the context item is undefined.</span></p><div class="note admonition"><h3><span class="deltaxml-new" style="background:#90EE90">Note</span></h3><div class="admonition-body"><p><span class="deltaxml-new" style="background:#90EE90">If it can be determined statically that </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">test</span></code><span class="deltaxml-new" style="background:#90EE90"> expression is </span><em><span class="deltaxml-new" style="background:#90EE90">always</span></em><span class="deltaxml-new" style="background:#90EE90"> “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">false</span></code><span class="deltaxml-new" style="background:#90EE90">”, the processor may remove the step from the pipeline entirely, although it must guarantee that all of the connections are preserved.</span></p></div></div><section id="c.message.11" class="simplesect"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">Document properties</span></h4></div><div class="content"><p><span class="deltaxml-new" style="background:#90EE90">All document properties are preserved.</span></p></div></section></div></section><section id="c.namespace-delete" class="section"><div class="section-titlepage"><h3><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.21. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.23. </span></bdi>p:namespace-delete<a aria-label="§" class="self-link" href="#c.namespace-delete"></a></h3></div><div class="content"><p><span style="display: none;" class="delete_version">The <code class="tag-element">p:namespace-delete</code> step deletes all of the namespaces identified by the specified prefixes from the document appearing on port <code class="port">source</code>.</span><a id="port.inline.source-48"></a>The <code class="tag-element">p:namespace-delete</code> step deletes all of the namespaces identified by the specified prefixes from the document appearing on port <code class="port">source</code>.<a id="port.inline.source-48"></a>The <code class="tag-element">p:namespace-delete</code> step deletes all of the namespaces identified by the specified prefixes from the document appearing on port <code class="port">source</code>.</p><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:namespace-delete</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">xml html</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">xml html</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">prefixes</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:string</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">    </span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><div class="declare-step"><p><span class="deltaxml-new" style="background:#90EE90">Summary</span></p><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Input port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.source-49"><span class="deltaxml-new" style="background:#90EE90">source</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">xml html </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Output port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.result-22"><span class="deltaxml-new" style="background:#90EE90">result</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">xml html </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Option name</span></th><th><span class="deltaxml-new" style="background:#90EE90">Type</span></th><th><span class="deltaxml-new" style="background:#90EE90">Required</span></th></tr></thead><tbody><tr><td class="required"><a href="#opt.inline.prefixes-1"><span class="deltaxml-new" style="background:#90EE90">prefixes</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:string</span></td><td><span class="deltaxml-new" style="background:#90EE90">✔ </span></td></tr></tbody></table><details><summary><span class="deltaxml-new" style="background:#90EE90">Errors</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Error code</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td class="errcode"><a href="#err.inline.C0108&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0108</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if any prefix is not in-scope at the point where the p:namespace-delete occurs.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0109&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0109</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if a namespace is to be removed from an attribute and the element already has an attribute with the resulting name.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Declaration</span></summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:namespace-delete</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">xml html</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">xml html</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">prefixes</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:string</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">    </span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p></details></div><p><a id="opt.inline.prefixes-1 err.inline.C0108&#34;"></a>The value of option <code class="option">prefixes</code> is taken as a space separated list of prefixes. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if any prefix is not in-scope at the point where the <code class="code">p:namespace-delete</code> occurs.<a id="opt.inline.prefixes-1 err.inline.C0108&#34;"></a>The value of option <code class="option">prefixes</code> is taken as a space separated list of prefixes. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if any prefix is not in-scope at the point where the <code class="code">p:namespace-delete</code> occurs.</p><p><span style="display: none;" class="delete_version">For any prefix the associated namespace is removed from the elements and attributes in the document appearing on port <code class="port">source</code>. The respective elements or attributes in the document appearing on port <code class="port">result</code> will be in no namespace.</span><a id="port.inline.source-49 port.inline.result-22"></a>For any prefix the associated namespace is removed from the elements and attributes in the document appearing on port <code class="port">source</code>. The respective elements or attributes in the document appearing on port <code class="port">result</code> will be in no namespace.<a id="port.inline.source-49 port.inline.result-22"></a>For any prefix the associated namespace is removed from the elements and attributes in the document appearing on port <code class="port">source</code>. The respective elements or attributes in the document appearing on port <code class="port">result</code> will be in no namespace.</p><p><a id="err.inline.C0109&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if a namespace is to be removed from an attribute and the element already has an attribute with the resulting name.<a id="err.inline.C0109&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if a namespace is to be removed from an attribute and the element already has an attribute with the resulting name.</p><section id="c.namespace-delete.7" class="simplesect"><div class="section-titlepage"><h4>Document properties</h4></div><div class="content"><p>All document properties are preserved.</p></div></section></div></section><section id="c.namespace-rename" class="section"><div class="section-titlepage"><h3><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.22. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.24. </span></bdi>p:namespace-rename<a aria-label="§" class="self-link" href="#c.namespace-rename"></a></h3></div><div class="content"><p>The <code class="code">p:namespace-rename</code> step renames any namespace declaration or use of a namespace in a document to a new IRI value.</p><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:namespace-rename</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">xml html</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">xml html</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">from</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:anyURI?</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                       </span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">to</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:anyURI?</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                         </span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">apply-to</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'all'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr values-attr"><span class="deltaxml-old" style="background:#FF5555">values</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value values-value"><span class="deltaxml-old" style="background:#FF5555">('all','elements','attributes')</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">string</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><div class="declare-step"><p><span class="deltaxml-new" style="background:#90EE90">Summary</span></p><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Input port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.source-50"><span class="deltaxml-new" style="background:#90EE90">source</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">xml html </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Output port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.result-23"><span class="deltaxml-new" style="background:#90EE90">result</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">xml html </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Option name</span></th><th><span class="deltaxml-new" style="background:#90EE90">Type</span></th><th><span class="deltaxml-new" style="background:#90EE90">Values</span></th><th><span class="deltaxml-new" style="background:#90EE90">Default value</span></th></tr></thead><tbody><tr><td><a href="#opt.inline.apply-to-1"><span class="deltaxml-new" style="background:#90EE90">apply-to</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:string</span></td><td><span class="deltaxml-new" style="background:#90EE90">('all','elements','attributes') </span></td><td><span class="deltaxml-new" style="background:#90EE90">'all'</span></td></tr><tr><td><a href="#opt.inline.from-1"><span class="deltaxml-new" style="background:#90EE90">from</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:anyURI?</span></td><td><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td></tr><tr><td><a href="#opt.inline.to-1"><span class="deltaxml-new" style="background:#90EE90">to</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:anyURI?</span></td><td><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td></tr></tbody></table><details><summary><span class="deltaxml-new" style="background:#90EE90">Errors</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Error code</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td class="errcode"><a href="#err.inline.C0014&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0014</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the XML namespace (http://www.w3.org/XML/1998/namespace) or the XMLNS namespace (http://www.w3.org/2000/xmlns/) is the value of either the from option or the to option.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0092&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0092</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if as a consequence of changing or removing the namespace of an attribute the attribute's name is not unique on the respective element.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Declaration</span></summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:namespace-rename</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">xml html</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">xml html</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">from</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:anyURI?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                       </span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">to</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:anyURI?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                         </span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">apply-to</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'all'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr values-attr"><span class="deltaxml-new" style="background:#90EE90">values</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value values-value"><span class="deltaxml-new" style="background:#90EE90">('all','elements','attributes')</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">string</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p></details></div><p><span style="display: none;" class="delete_version">The value of the <code class="option">from</code> option <span class="rfc2119" id="c.namespace-rename.4.2">must</span> be an <code class="type">anyURI</code>. It <span class="rfc2119" id="c.namespace-rename.4.4">should</span> be either empty or absolute, but will not be resolved in any case.</span><a id="opt.inline.from-1"></a>The value of the <code class="option">from</code> option <span class="rfc2119" id="c.namespace-rename.4.2">must</span> be an <code class="type">anyURI</code>. It <span class="rfc2119" id="c.namespace-rename.4.4">should</span> be either empty or absolute, but will not be resolved in any case.<a id="opt.inline.from-1"></a>The value of the <code class="option">from</code> option <span class="rfc2119" id="c.namespace-rename.4.2">must</span> be an <code class="type">anyURI</code>. It <span class="rfc2119" id="c.namespace-rename.4.4">should</span> be either empty or absolute, but will not be resolved in any case.</p><p><span style="display: none;" class="delete_version">The value of the <code class="option">to</code> option <span class="rfc2119" id="c.namespace-rename.5.2">must</span> be an <code class="type">anyURI</code>. It <span class="rfc2119" id="c.namespace-rename.5.4">should</span> be empty or absolute, but will not be resolved in any case.</span><a id="opt.inline.to-1"></a>The value of the <code class="option">to</code> option <span class="rfc2119" id="c.namespace-rename.5.2">must</span> be an <code class="type">anyURI</code>. It <span class="rfc2119" id="c.namespace-rename.5.4">should</span> be empty or absolute, but will not be resolved in any case.<a id="opt.inline.to-1"></a>The value of the <code class="option">to</code> option <span class="rfc2119" id="c.namespace-rename.5.2">must</span> be an <code class="type">anyURI</code>. It <span class="rfc2119" id="c.namespace-rename.5.4">should</span> be empty or absolute, but will not be resolved in any case.</p><p><span style="display: none;" class="delete_version">The value of the <code class="option">apply-to</code> option <span class="rfc2119" id="c.namespace-rename.6.2">must</span> be one of “<code class="literal">all</code>”, “<code class="literal">elements</code>”, or “<code class="literal">attributes</code>”. If the value is “<code class="literal">elements</code>”, only elements will be renamed, if the value is “<code class="literal">attributes</code>”, only attributes will be renamed, if the value is “<code class="literal">all</code>”, both elements and attributes will be renamed.</span><a id="opt.inline.apply-to-1"></a>The value of the <code class="option">apply-to</code> option <span class="rfc2119" id="c.namespace-rename.6.2">must</span> be one of “<code class="literal">all</code>”, “<code class="literal">elements</code>”, or “<code class="literal">attributes</code>”. If the value is “<code class="literal">elements</code>”, only elements will be renamed, if the value is “<code class="literal">attributes</code>”, only attributes will be renamed, if the value is “<code class="literal">all</code>”, both elements and attributes will be renamed.<a id="opt.inline.apply-to-1"></a>The value of the <code class="option">apply-to</code> option <span class="rfc2119" id="c.namespace-rename.6.2">must</span> be one of “<code class="literal">all</code>”, “<code class="literal">elements</code>”, or “<code class="literal">attributes</code>”. If the value is “<code class="literal">elements</code>”, only elements will be renamed, if the value is “<code class="literal">attributes</code>”, only attributes will be renamed, if the value is “<code class="literal">all</code>”, both elements and attributes will be renamed.</p><p><a id="err.inline.C0014&#34; opt.inline.from-2 opt.inline.to-2"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the XML namespace (<code class="uri">http://www.w3.org/XML/1998/namespace</code>) or the XMLNS namespace (<code class="uri">http://www.w3.org/2000/xmlns/</code>) is the value of either the <code class="option">from</code> option or the <code class="option">to</code> option.<a id="err.inline.C0014&#34; opt.inline.from-2 opt.inline.to-2"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the XML namespace (<code class="uri">http://www.w3.org/XML/1998/namespace</code>) or the XMLNS namespace (<code class="uri">http://www.w3.org/2000/xmlns/</code>) is the value of either the <code class="option">from</code> option or the <code class="option">to</code> option.</p><p><span style="display: none;" class="delete_version">If the value of the <code class="option">from</code> option is the same as the value of the <code class="option">to</code> option, the input is reproduced unchanged on the output. Otherwise, namespace bindings, namespace attributes and element and attribute names are changed as follows:</span><a id="opt.inline.from-3 opt.inline.to-3"></a>If the value of the <code class="option">from</code> option is the same as the value of the <code class="option">to</code> option, the input is reproduced unchanged on the output. Otherwise, namespace bindings, namespace attributes and element and attribute names are changed as follows:<a id="opt.inline.from-3 opt.inline.to-3"></a>If the value of the <code class="option">from</code> option is the same as the value of the <code class="option">to</code> option, the input is reproduced unchanged on the output. Otherwise, namespace bindings, namespace attributes and element and attribute names are changed as follows:</p><div class="itemizedlist"><ul><li><p><span style="display: none;" class="delete_version">Namespace bindings: If the <code class="option">from</code> option is present and its value is not the empty string, then every binding of a prefix (or the default namespace) in the input document whose value is the same as the value of the <code class="option">from</code> option is</span><a id="opt.inline.from-4 opt.inline.from-5"></a>Namespace bindings: If the <code class="option">from</code> option is present and its value is not the empty string, then every binding of a prefix (or the default namespace) in the input document whose value is the same as the value of the <code class="option">from</code> option is<a id="opt.inline.from-4 opt.inline.from-5"></a>Namespace bindings: If the <code class="option">from</code> option is present and its value is not the empty string, then every binding of a prefix (or the default namespace) in the input document whose value is the same as the value of the <code class="option">from</code> option is</p><div class="itemizedlist"><ul><li><p><span style="display: none;" class="delete_version">replaced in the output with a binding to the value of the <code class="option">to</code> option, provided it is present and not the empty string;</span><a id="opt.inline.to-4"></a>replaced in the output with a binding to the value of the <code class="option">to</code> option, provided it is present and not the empty string;<a id="opt.inline.to-4"></a>replaced in the output with a binding to the value of the <code class="option">to</code> option, provided it is present and not the empty string;</p></li><li><p><span style="display: none;" class="delete_version">otherwise (the <code class="option">to</code> option is not specified or has an empty string as its value) absent from the output.</span><a id="opt.inline.to-5"></a>otherwise (the <code class="option">to</code> option is not specified or has an empty string as its value) absent from the output.<a id="opt.inline.to-5"></a>otherwise (the <code class="option">to</code> option is not specified or has an empty string as its value) absent from the output.</p></li></ul></div><p><span style="display: none;" class="delete_version">If the <code class="option">from</code> option is absent, or its value is the empty string, then no bindings are changed or removed.</span><a id="opt.inline.from-6"></a>If the <code class="option">from</code> option is absent, or its value is the empty string, then no bindings are changed or removed.<a id="opt.inline.from-6"></a>If the <code class="option">from</code> option is absent, or its value is the empty string, then no bindings are changed or removed.</p></li><li><p><span style="display: none;" class="delete_version">Elements and attributes: If the <code class="option">from</code> option is present and its value is not the empty string, for every element and attribute, as appropriate, in the input whose namespace name is the same as the value of the <code class="option">from</code> option, in the output its namespace name is</span><a id="opt.inline.from-7 opt.inline.from-8"></a>Elements and attributes: If the <code class="option">from</code> option is present and its value is not the empty string, for every element and attribute, as appropriate, in the input whose namespace name is the same as the value of the <code class="option">from</code> option, in the output its namespace name is<a id="opt.inline.from-7 opt.inline.from-8"></a>Elements and attributes: If the <code class="option">from</code> option is present and its value is not the empty string, for every element and attribute, as appropriate, in the input whose namespace name is the same as the value of the <code class="option">from</code> option, in the output its namespace name is</p><div class="itemizedlist"><ul><li><p><span style="display: none;" class="delete_version">replaced with the value of the <code class="option">to</code> option, provided it is present and not the empty string;</span><a id="opt.inline.to-6"></a>replaced with the value of the <code class="option">to</code> option, provided it is present and not the empty string;<a id="opt.inline.to-6"></a>replaced with the value of the <code class="option">to</code> option, provided it is present and not the empty string;</p></li><li><p><span style="display: none;" class="delete_version">otherwise (the <code class="option">to</code> option is not specified or has an empty string as its value) changed to have no value.</span><a id="opt.inline.to-7"></a>otherwise (the <code class="option">to</code> option is not specified or has an empty string as its value) changed to have no value.<a id="opt.inline.to-7"></a>otherwise (the <code class="option">to</code> option is not specified or has an empty string as its value) changed to have no value.</p></li></ul></div><p><span style="display: none;" class="delete_version">If the <code class="option">from</code> option is absent, or its value is the empty string, then for every element and attribute, as appropriate, whose namespace name has no value, in the output its namespace name is set to the value of the <code class="option">to</code> option.</span><a id="opt.inline.from-9 opt.inline.to-8"></a>If the <code class="option">from</code> option is absent, or its value is the empty string, then for every element and attribute, as appropriate, whose namespace name has no value, in the output its namespace name is set to the value of the <code class="option">to</code> option.<a id="opt.inline.from-9 opt.inline.to-8"></a>If the <code class="option">from</code> option is absent, or its value is the empty string, then for every element and attribute, as appropriate, whose namespace name has no value, in the output its namespace name is set to the value of the <code class="option">to</code> option.</p><p><a id="err.inline.C0092&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if as a consequence of changing or removing the namespace of an attribute the attribute's name is not unique on the respective element.<a id="err.inline.C0092&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if as a consequence of changing or removing the namespace of an attribute the attribute's name is not unique on the respective element.</p></li><li><p><span style="display: none;" class="delete_version">Namespace attributes: If the <code class="option">from</code> option is present and its value is not the empty string, for every namespace attribute in the input whose value is the same as the value of the <code class="option">from</code> option, in the output</span><a id="opt.inline.from-10 opt.inline.from-11"></a>Namespace attributes: If the <code class="option">from</code> option is present and its value is not the empty string, for every namespace attribute in the input whose value is the same as the value of the <code class="option">from</code> option, in the output<a id="opt.inline.from-10 opt.inline.from-11"></a>Namespace attributes: If the <code class="option">from</code> option is present and its value is not the empty string, for every namespace attribute in the input whose value is the same as the value of the <code class="option">from</code> option, in the output</p><div class="itemizedlist"><ul><li><p><span style="display: none;" class="delete_version">the namespace attribute's value is replaced with the value of the <code class="option">to</code> option, provided it is present and not the empty string;</span><a id="opt.inline.to-9"></a>the namespace attribute's value is replaced with the value of the <code class="option">to</code> option, provided it is present and not the empty string;<a id="opt.inline.to-9"></a>the namespace attribute's value is replaced with the value of the <code class="option">to</code> option, provided it is present and not the empty string;</p></li><li><p><span style="display: none;" class="delete_version">otherwise (the <code class="option">to</code> option is not specified or has an empty string as its value) the namespace attribute is absent.</span><a id="opt.inline.to-10"></a>otherwise (the <code class="option">to</code> option is not specified or has an empty string as its value) the namespace attribute is absent.<a id="opt.inline.to-10"></a>otherwise (the <code class="option">to</code> option is not specified or has an empty string as its value) the namespace attribute is absent.</p></li></ul></div></li></ul></div><div id="note-apply-to" class="note admonition"><h3>Note</h3><div class="admonition-body"><p><span style="display: none;" class="delete_version">The <code class="option">apply-to</code> option is primarily intended to make it possible to avoid renaming attributes when the <code class="option">from</code> option specifies no namespace, since many attributes are in no namespace.</span><a id="opt.inline.apply-to-2 opt.inline.from-12"></a>The <code class="option">apply-to</code> option is primarily intended to make it possible to avoid renaming attributes when the <code class="option">from</code> option specifies no namespace, since many attributes are in no namespace.<a id="opt.inline.apply-to-2 opt.inline.from-12"></a>The <code class="option">apply-to</code> option is primarily intended to make it possible to avoid renaming attributes when the <code class="option">from</code> option specifies no namespace, since many attributes are in no namespace.</p><p><span style="display: none;" class="delete_version">Care should be taken when specifying no namespace with the <code class="option">to</code> option. Prefixed names in content, for example QNames and XPath expressions, may end up with no appropriate namespace binding.</span><a id="opt.inline.to-11"></a>Care should be taken when specifying no namespace with the <code class="option">to</code> option. Prefixed names in content, for example QNames and XPath expressions, may end up with no appropriate namespace binding.<a id="opt.inline.to-11"></a>Care should be taken when specifying no namespace with the <code class="option">to</code> option. Prefixed names in content, for example QNames and XPath expressions, may end up with no appropriate namespace binding.</p></div></div><section id="c.namespace-rename.11" class="simplesect"><div class="section-titlepage"><h4>Document properties</h4></div><div class="content"><p>All document properties are preserved.</p></div></section></div></section><section id="c.pack" class="section"><div class="section-titlepage"><h3><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.23. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.25. </span></bdi>p:pack<a aria-label="§" class="self-link" href="#c.pack"></a></h3></div><div class="content"><p>The <code class="code">p:pack</code> step merges two document sequences in a pair-wise fashion.</p><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:pack</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">text xml html</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">alternate</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">text xml html</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">application/xml</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">wrapper</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:QName</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">      </span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><div class="declare-step"><p><span class="deltaxml-new" style="background:#90EE90">Summary</span></p><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Input port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.source-50"><span class="deltaxml-new" style="background:#90EE90">source</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td><span class="deltaxml-new" style="background:#90EE90">text xml html </span></td></tr><tr><td><a href="#port.inline.alternate-1"><span class="deltaxml-new" style="background:#90EE90">alternate</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td><span class="deltaxml-new" style="background:#90EE90">text xml html </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Output port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.result-23"><span class="deltaxml-new" style="background:#90EE90">result</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td><span class="deltaxml-new" style="background:#90EE90">application/xml </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Option name</span></th><th><span class="deltaxml-new" style="background:#90EE90">Type</span></th><th><span class="deltaxml-new" style="background:#90EE90">Default value</span></th><th><span class="deltaxml-new" style="background:#90EE90">Required</span></th></tr></thead><tbody><tr><td class="required"><a href="#opt.inline.wrapper-1"><span class="deltaxml-new" style="background:#90EE90">wrapper</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:QName</span></td><td><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">✔ </span></td></tr><tr><td><a href="#opt.inline.attributes-1"><span class="deltaxml-new" style="background:#90EE90">attributes</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">map(xs:QName, xs:anyAtomicType)?</span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td><td><span class="deltaxml-new" style="background:#90EE90"> </span></td></tr></tbody></table><details><summary><span class="deltaxml-new" style="background:#90EE90">Errors</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Error code</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td class="errcode"><a href="#err.inline.C0059.1&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0059</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the name of any attribute is “xmlns” or uses the prefix “xmlns” or any other prefix that resolves to the namespace name http://www.w3.org/2000/xmlns/.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Declaration</span></summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:pack</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">text xml html</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">alternate</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">text xml html</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">application/xml</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">wrapper</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:QName</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">      </span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">attributes</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">map(xs:QName, xs:anyAtomicType)?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p></details></div><p><span style="display: none;" class="delete_version">The step takes each pair of documents, in order, one from the <code class="port">source</code> port and one from the <code class="port">alternate</code> port, wraps them with a new element node whose QName is the value specified in the <code class="option">wrapper</code> option, and writes that element to the <code class="port">result</code> port as a document.</span><a id="port.inline.source-50 port.inline.alternate-1 opt.inline.wrapper-1 port.inline.result-23"></a>The step takes each pair of documents, in order, one from the <code class="port">source</code> port and one from the <code class="port">alternate</code> port, wraps them with a new element node whose QName is the value specified in the <code class="option">wrapper</code> option, and writes that element to the <code class="port">result</code> port as a document.<a id="port.inline.source-50 port.inline.alternate-1 opt.inline.wrapper-1 port.inline.result-23"></a>The step takes each pair of documents, in order, one from the <code class="port">source</code> port and one from the <code class="port">alternate</code> port, wraps them with a new element node whose QName is the value specified in the <code class="option">wrapper</code> option, and writes that element to the <code class="port">result</code> port as a document.</p><p>If the step reaches the end of one input sequence before the other, then it simply wraps each of the remaining documents in the longer sequence.</p><div id="note-two-docs" class="note admonition"><h3>Note</h3><div class="admonition-body"><p><span style="display: none;" class="delete_version">In the common case, where the document element of a document in the <code class="port">result</code> sequence has two element children, any comments, processing instructions, or white space text nodes that occur between them may have come from either of the input documents; this step does not attempt to distinguish which one.</span><a id="port.inline.result-24"></a>In the common case, where the document element of a document in the <code class="port">result</code> sequence has two element children, any comments, processing instructions, or white space text nodes that occur between them may have come from either of the input documents; this step does not attempt to distinguish which one.<a id="port.inline.result-24"></a>In the common case, where the document element of a document in the <code class="port">result</code> sequence has two element children, any comments, processing instructions, or white space text nodes that occur between them may have come from either of the input documents; this step does not attempt to distinguish which one.</p></div></div><section id="c.pack.7" class="simplesect"><div class="section-titlepage"><h4><span class="deltaxml-old" style="background:#FF5555">Document properties</span></h4></div><div class="content"><p><span class="deltaxml-old" style="background:#FF5555">No document properties are preserved. The result documents do not have a </span><code class="property"><span class="deltaxml-old" style="background:#FF5555">base-uri</span></code><span class="deltaxml-old" style="background:#FF5555"> property. </span></p></div></section><p><span class="deltaxml-new" style="background:#90EE90">If the </span><a id="opt.inline.attributes-1"></a><code class="option"><span class="deltaxml-new" style="background:#90EE90">attributes</span></code><span class="deltaxml-new" style="background:#90EE90"> option is used, a new attribute is created on the wrapper element for each entry in the map. The attribute name is taken from the entry's key while the attribute value is taken from the string value of the entry's value.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Namespace declarations cannot be added with the </span><a id="opt.inline.attributes-2"></a><code class="option"><span class="deltaxml-new" style="background:#90EE90">attributes</span></code><span class="deltaxml-new" style="background:#90EE90"> option. </span><a id="err.inline.C0059.1&#34;"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0059"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0059</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the name of any attribute is “</span><code class="code"><span class="deltaxml-new" style="background:#90EE90">xmlns</span></code><span class="deltaxml-new" style="background:#90EE90">” or uses the prefix “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">xmlns</span></code><span class="deltaxml-new" style="background:#90EE90">” or any other prefix that resolves to the namespace name </span><code class="uri"><span class="deltaxml-new" style="background:#90EE90">http://www.w3.org/2000/xmlns/</span></code><span class="deltaxml-new" style="background:#90EE90">. However, if the attributes taken from the </span><a id="opt.inline.attributes-3"></a><code class="option"><span class="deltaxml-new" style="background:#90EE90">attributes</span></code><span class="deltaxml-new" style="background:#90EE90"> use namespaces, prefixes, or prefixes bound to different namespaces, the document produced on the </span><a id="port.inline.result-25"></a><code class="port"><span class="deltaxml-new" style="background:#90EE90">result</span></code><span class="deltaxml-new" style="background:#90EE90"> output port will require namespace fixup.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If an attribute named </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">xml:base</span></code><span class="deltaxml-new" style="background:#90EE90"> is added, the base URI of the element </span><span class="rfc2119" id="c.pack.9.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> also be amended accordingly.</span></p><section id="c.pack.10" class="simplesect"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">Document properties</span></h4></div><div class="content"><p><span class="deltaxml-new" style="background:#90EE90">No document properties are preserved. The result documents do not have a </span><code class="property"><span class="deltaxml-new" style="background:#90EE90">base-uri</span></code><span class="deltaxml-new" style="background:#90EE90"> property unless one is specified with the </span><a id="opt.inline.attributes-4"></a><code class="option"><span class="deltaxml-new" style="background:#90EE90">attributes</span></code><span class="deltaxml-new" style="background:#90EE90"> option. </span></p></div></section></div></section><section id="c.rename" class="section"><div class="section-titlepage"><h3><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.24. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.26. </span></bdi>p:rename<a aria-label="§" class="self-link" href="#c.rename"></a></h3></div><div class="content"><p>The <code class="code">p:rename</code> step renames elements, attributes, or processing-instruction targets in a document.</p><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:rename</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">xml html</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">xml html</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">match</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:string</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'/*'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">         </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">XSLTSelectionPattern</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">new-name</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:QName</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">     </span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><div class="declare-step"><p><span class="deltaxml-new" style="background:#90EE90">Summary</span></p><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Input port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.source-51"><span class="deltaxml-new" style="background:#90EE90">source</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">xml html </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Output port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.result-26"><span class="deltaxml-new" style="background:#90EE90">result</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">xml html </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Option name</span></th><th><span class="deltaxml-new" style="background:#90EE90">Type</span></th><th><span class="deltaxml-new" style="background:#90EE90">Default value</span></th><th><span class="deltaxml-new" style="background:#90EE90">Required</span></th></tr></thead><tbody><tr><td class="required"><a href="#opt.inline.new-name-1"><span class="deltaxml-new" style="background:#90EE90">new-name</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:QName</span></td><td><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">✔ </span></td></tr><tr><td><a href="#opt.inline.match-13"><span class="deltaxml-new" style="background:#90EE90">match</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">XSLTSelectionPattern</span></td><td><span class="deltaxml-new" style="background:#90EE90">'/*'</span></td><td><span class="deltaxml-new" style="background:#90EE90"> </span></td></tr></tbody></table><details><summary><span class="deltaxml-new" style="background:#90EE90">Errors</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Error code</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td class="errcode"><a href="#err.inline.C0013&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0013</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the pattern matches a processing instruction and the new name has a non-null namespace.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0023.5&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0023</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the pattern matches anything other than element, attribute, or processing instruction nodes, or if it matches more than one attribute on a single element.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Declaration</span></summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:rename</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">xml html</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">xml html</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">match</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:string</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'/*'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">         </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">XSLTSelectionPattern</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">new-name</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:QName</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">     </span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p></details></div><p><a id="opt.inline.match-13 err.inline.C0023.5&#34;"></a>The value of the <code class="option">match</code> option must be an XSLTSelectionPattern. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the pattern matches anything other than element, attribute<span class="deltaxml-new" style="background:#90EE90">,</span> or processing instruction nodes<span class="deltaxml-new" style="background:#90EE90">, or if it matches more than one attribute on a single element</span>.<a id="opt.inline.match-13 err.inline.C0023.5&#34;"></a>The value of the <code class="option">match</code> option must be an XSLTSelectionPattern. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the pattern matches anything other than element, attribute<span class="deltaxml-new" style="background:#90EE90">,</span> or processing instruction nodes<span class="deltaxml-new" style="background:#90EE90">, or if it matches more than one attribute on a single element</span>.</p><p><span style="display: none;" class="delete_version">Each element, attribute, or processing-instruction in the input matched by the <em class="glossterm"><a href="#dt-selection-pattern">selection pattern</a></em> specified in the <code class="option">match</code> option is renamed in the output to the name specified by the <code class="option">new-name</code> option.</span><a id="opt.inline.match-14 opt.inline.new-name-1"></a>Each element, attribute, or processing-instruction in the input matched by the <em class="glossterm"><a href="#dt-selection-pattern">selection pattern</a></em> specified in the <code class="option">match</code> option is renamed in the output to the name specified by the <code class="option">new-name</code> option.<a id="opt.inline.match-14 opt.inline.new-name-1"></a>Each element, attribute, or processing-instruction in the input matched by the <em class="glossterm"><a href="#dt-selection-pattern">selection pattern</a></em> specified in the <code class="option">match</code> option is renamed in the output to the name specified by the <code class="option">new-name</code> option.</p><p><span style="display: none;" class="delete_version">If the <code class="option">match</code> option matches an attribute and if the element on which it occurs already has an attribute whose expanded name is the same as the expanded name of the specified <code class="option">new-name</code>, then the results is as if the current attribute named “<em class="replaceable"><code>new-name</code></em>” was deleted before renaming the matched attribute.</span><a id="opt.inline.match-15 opt.inline.new-name-2"></a>If the <code class="option">match</code> option matches an attribute and if the element on which it occurs already has an attribute whose expanded name is the same as the expanded name of the specified <code class="option">new-name</code>, then the results is as if the current attribute named “<em class="replaceable"><code>new-name</code></em>” was deleted before renaming the matched attribute.<a id="opt.inline.match-15 opt.inline.new-name-2"></a>If the <code class="option">match</code> option matches an attribute and if the element on which it occurs already has an attribute whose expanded name is the same as the expanded name of the specified <code class="option">new-name</code>, then the results is as if the current attribute named “<em class="replaceable"><code>new-name</code></em>” was deleted before renaming the matched attribute.</p><p>With respect to attributes named “<code class="literal">xml:base</code>”, the following semantics apply: renaming an <em>from</em> “<code class="literal">xml:base</code>” <em>to</em> something else has no effect on the underlying base URI of the element; however, if an attribute is renamed <em>from</em> something else <em>to</em> “<code class="literal">xml:base</code>”, the base URI of the element <span class="rfc2119" id="c.rename.7.8">must</span> also be amended accordingly.</p><p><a id="err.inline.C0013&#34;"></a>If the pattern matches processing instructions, then it is the processing instruction target that is renamed. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the pattern matches a processing instruction and the new name has a non-null namespace. <a id="err.inline.C0013&#34;"></a>If the pattern matches processing instructions, then it is the processing instruction target that is renamed. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the pattern matches a processing instruction and the new name has a non-null namespace. </p><section id="c.rename.9" class="simplesect"><div class="section-titlepage"><h4>Document properties</h4></div><div class="content"><p>All document properties are preserved.</p></div></section></div></section><section id="c.replace" class="section"><div class="section-titlepage"><h3><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.25. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.27. </span></bdi>p:replace<a aria-label="§" class="self-link" href="#c.replace"></a></h3></div><div class="content"><p><span style="display: none;" class="delete_version">The <code class="code">p:replace</code> step replaces matching nodes in its primary input with the top-level node(s) of the <code class="code">replacement</code> port's document.</span><a id="port.inline.replacement-1"></a>The <code class="code">p:replace</code> step replaces matching nodes in its primary input with the <span class="deltaxml-old" style="background:#FF5555">top-level node(s) of the</span><span class="deltaxml-new" style="background:#90EE90">content of the document that appears on the</span> <code class="port">replacement</code> <span class="deltaxml-old" style="background:#FF5555">port's document</span><span class="deltaxml-new" style="background:#90EE90">port</span>.<a id="port.inline.replacement-1"></a>The <code class="code">p:replace</code> step replaces matching nodes in its primary input with the <span class="deltaxml-old" style="background:#FF5555">top-level node(s) of the</span><span class="deltaxml-new" style="background:#90EE90">content of the document that appears on the</span> <code class="port">replacement</code> <span class="deltaxml-old" style="background:#FF5555">port's document</span><span class="deltaxml-new" style="background:#90EE90">port</span>.</p><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:replace</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">xml html</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">replacement</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">text xml html</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">text xml html</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">match</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:string</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">       </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">XSLTSelectionPattern</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><div class="declare-step"><p><span class="deltaxml-new" style="background:#90EE90">Summary</span></p><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Input port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.source-51"><span class="deltaxml-new" style="background:#90EE90">source</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">xml html </span></td></tr><tr><td><a href="#port.inline.replacement-2"><span class="deltaxml-new" style="background:#90EE90">replacement</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">text xml html </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Output port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.result-26"><span class="deltaxml-new" style="background:#90EE90">result</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">text xml html </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Option name</span></th><th><span class="deltaxml-new" style="background:#90EE90">Type</span></th><th><span class="deltaxml-new" style="background:#90EE90">Required</span></th></tr></thead><tbody><tr><td class="required"><a href="#opt.inline.match-16"><span class="deltaxml-new" style="background:#90EE90">match</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">XSLTSelectionPattern</span></td><td><span class="deltaxml-new" style="background:#90EE90">✔ </span></td></tr></tbody></table><details><summary><span class="deltaxml-new" style="background:#90EE90">Errors</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Error code</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td class="errcode"><a href="#err.inline.C0023.6&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0023</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if that pattern matches an attribute or a namespace nodes. </span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Declaration</span></summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:replace</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">xml html</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">replacement</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">text xml html</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">text xml html</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">match</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:string</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">       </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">XSLTSelectionPattern</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p></details></div><p><a id="opt.inline.match-16 err.inline.C0023.6&#34; port.inline.replacement-2"></a>The value of the <code class="option">match</code> option <span class="rfc2119" id="c.replace.4.2">must</span> be an XSLTSelectionPattern. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if that pattern matches an attribute or a namespace nodes. Multiple matches are allowed, in which case multiple copies of the <code class="port">replacement</code> document will occur.<a id="opt.inline.match-16 err.inline.C0023.6&#34; port.inline.replacement-2"></a>The value of the <code class="option">match</code> option <span class="rfc2119" id="c.replace.4.2">must</span> be an XSLTSelectionPattern. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if that pattern matches an attribute or a namespace nodes. Multiple matches are allowed, in which case multiple copies of the <code class="port">replacement</code> document will occur.</p><p><span style="display: none;" class="delete_version">Every node in the primary input matching the specified pattern is replaced in the output by the top-level node(s) of the <code class="port">replacement</code> document. Only non-nested matches are replaced. That is, once a node is replaced, its descendants cannot be matched.</span><a id="port.inline.replacement-3"></a>Every node in the primary input matching the specified pattern is replaced in the output by the <span class="deltaxml-old" style="background:#FF5555">top-level node(s)</span><span class="deltaxml-new" style="background:#90EE90">content</span> of the <code class="port">replacement</code> document. Only non-nested matches are replaced. That is, once a node is replaced, its descendants cannot be matched.<a id="port.inline.replacement-3"></a>Every node in the primary input matching the specified pattern is replaced in the output by the <span class="deltaxml-old" style="background:#FF5555">top-level node(s)</span><span class="deltaxml-new" style="background:#90EE90">content</span> of the <code class="port">replacement</code> document. Only non-nested matches are replaced. That is, once a node is replaced, its descendants cannot be matched.</p><p><span style="display: none;" class="delete_version">If the document node is matched and port <code class="port">replacement</code> contains a text document, the entire document is replaced by the text node. What appears on port <code class="port">result</code> is a text document with the text node wrapped in a document node.</span><a id="port.inline.replacement-4 port.inline.result-26"></a>If the document node is matched<span class="deltaxml-new" style="background:#90EE90">,</span> and <span class="deltaxml-old" style="background:#FF5555">port</span><span class="deltaxml-new" style="background:#90EE90">the</span> <code class="port">replacement</code> <span class="deltaxml-old" style="background:#FF5555">contains</span><span class="deltaxml-new" style="background:#90EE90">document is</span> a text document, the <span class="deltaxml-old" style="background:#FF5555">entire</span><span class="deltaxml-old" style="background:#FF5555"> document is replaced by the text node. What appears on port </span><code class="port">result</code> is a text document<span class="deltaxml-old" style="background:#FF5555"> with the text node wrapped in a document node</span>.<a id="port.inline.replacement-4 port.inline.result-26"></a>If the document node is matched<span class="deltaxml-new" style="background:#90EE90">,</span> and <span class="deltaxml-old" style="background:#FF5555">port</span><span class="deltaxml-new" style="background:#90EE90">the</span> <code class="port">replacement</code> <span class="deltaxml-old" style="background:#FF5555">contains</span><span class="deltaxml-new" style="background:#90EE90">document is</span> a text document, the <span class="deltaxml-old" style="background:#FF5555">entire</span><span class="deltaxml-old" style="background:#FF5555"> document is replaced by the text node. What appears on port </span><code class="port">result</code> is a text document<span class="deltaxml-old" style="background:#FF5555"> with the text node wrapped in a document node</span>.</p><section id="c.replace.7" class="simplesect"><div class="section-titlepage"><h4>Document properties</h4></div><div class="content"><p>If the resulting document contains exactly one text node, the <code class="literal">content-type</code> property is changed to <code class="literal">text/plain</code> and the <code class="literal">serialization</code> property is removed, while all other document properties are preserved. For other document types, all document properties are preserved.</p></div></section></div></section><section id="c.set-attributes" class="section"><div class="section-titlepage"><h3><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.26. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.28. </span></bdi>p:set-attributes<a aria-label="§" class="self-link" href="#c.set-attributes"></a></h3></div><div class="content"><p>The <code class="tag-element">p:set-attributes</code> step sets attributes on matching elements.</p><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:set-attributes</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">xml html</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">xml html</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">match</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:string</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'/*'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">         </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">XSLTSelectionPattern</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">attributes</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">map(xs:QName, xs:anyAtomicType)</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><div class="declare-step"><p><span class="deltaxml-new" style="background:#90EE90">Summary</span></p><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Input port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.source-51"><span class="deltaxml-new" style="background:#90EE90">source</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">xml html </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Output port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.result-27"><span class="deltaxml-new" style="background:#90EE90">result</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">xml html </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Option name</span></th><th><span class="deltaxml-new" style="background:#90EE90">Type</span></th><th><span class="deltaxml-new" style="background:#90EE90">Default value</span></th><th><span class="deltaxml-new" style="background:#90EE90">Required</span></th></tr></thead><tbody><tr><td class="required"><a href="#opt.inline.attributes-5"><span class="deltaxml-new" style="background:#90EE90">attributes</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">map(xs:QName, xs:anyAtomicType)</span></td><td><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">✔ </span></td></tr><tr><td><a href="#opt.inline.match-17"><span class="deltaxml-new" style="background:#90EE90">match</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">XSLTSelectionPattern</span></td><td><span class="deltaxml-new" style="background:#90EE90">'/*'</span></td><td><span class="deltaxml-new" style="background:#90EE90"> </span></td></tr></tbody></table><details><summary><span class="deltaxml-new" style="background:#90EE90">Errors</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Error code</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td class="errcode"><a href="#err.inline.C0023.7&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0023</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if that pattern matches anything other than element nodes.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0059.2&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0059</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the name of any attribute is “xmlns” or uses the prefix “xmlns” or any other prefix that resolves to the namespace name http://www.w3.org/2000/xmlns/.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Declaration</span></summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:set-attributes</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">xml html</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">xml html</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">match</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:string</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'/*'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">         </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">XSLTSelectionPattern</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">attributes</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">map(xs:QName, xs:anyAtomicType)</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p></details></div><p><a id="opt.inline.match-17 err.inline.C0023.7&#34;"></a>The value of the <code class="option">match</code> option <span class="rfc2119" id="c.set-attributes.4.2">must</span> be an XSLTSelectionPattern. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if that pattern matches anything other than element nodes.<a id="opt.inline.match-17 err.inline.C0023.7&#34;"></a>The value of the <code class="option">match</code> option <span class="rfc2119" id="c.set-attributes.4.2">must</span> be an XSLTSelectionPattern. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if that pattern matches anything other than element nodes.</p><p><span style="display: none;" class="delete_version">A new attribute is created for each entry in the map appearing on the <code class="option">attributes</code> option. The attribute name is taken from the entry's key while the attribute value is taken from the string value of the entry's value.</span><a id="opt.inline.attributes-5"></a>A new attribute is created for each entry in the map appearing on the <code class="option">attributes</code> option. The attribute name is taken from the entry's key while the attribute value is taken from the string value of the entry's value.<a id="opt.inline.attributes-5"></a>A new attribute is created for each entry in the map appearing on the <code class="option">attributes</code> option. The attribute name is taken from the entry's key while the attribute value is taken from the string value of the entry's value.</p><p><span style="display: none;" class="delete_version">If an attribute with the same name as one of the attributes to be created already exists, the value specified on the <code class="option">attributes</code> option is used. The result port of this step produces a copy of the <code class="port">source</code> port's document with the matching elements' attributes modified.</span><a id="opt.inline.attributes-6 port.inline.source-51"></a>If an attribute with the same name as one of the attributes to be created already exists, the value specified on the <code class="option">attributes</code> option is used. The result port of this step produces a copy of the <code class="port">source</code> port's document with the matching elements' attributes modified.<a id="opt.inline.attributes-6 port.inline.source-51"></a>If an attribute with the same name as one of the attributes to be created already exists, the value specified on the <code class="option">attributes</code> option is used. The result port of this step produces a copy of the <code class="port">source</code> port's document with the matching elements' attributes modified.</p><p><span style="display: none;" class="delete_version">The matching elements are specified by the <em class="glossterm"><a href="#dt-selection-pattern">selection pattern</a></em> in the <code class="option">match</code> option. All matching elements are processed. If no elements match, the step will not change any elements.</span><a id="opt.inline.match-18"></a>The matching elements are specified by the <em class="glossterm"><a href="#dt-selection-pattern">selection pattern</a></em> in the <code class="option">match</code> option. All matching elements are processed. If no elements match, the step will not change any elements.<a id="opt.inline.match-18"></a>The matching elements are specified by the <em class="glossterm"><a href="#dt-selection-pattern">selection pattern</a></em> in the <code class="option">match</code> option. All matching elements are processed. If no elements match, the step will not change any elements.</p><p><span style="display: none;" class="delete_version">If the attributes taken from the <code class="option">attributes</code> use namespaces, prefixes, or prefixes bound to different namespaces, the document produced on the <code class="port">result</code> output port will require namespace fixup.</span><a id="err.inline.C0059.2&#34; opt.inline.attributes-7 port.inline.result-27"></a><span class="deltaxml-old" style="background:#FF5555">If</span><span class="deltaxml-new" style="background:#90EE90">This step cannot be used to add namespace declarations.</span> <span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><span class="deltaxml-old" style="background:#FF5555">the </span><span class="deltaxml-new" style="background:#90EE90">) if the name of any attribute is “</span><code class="code"><span class="deltaxml-new" style="background:#90EE90">xmlns</span></code><span class="deltaxml-new" style="background:#90EE90">” or uses the prefix “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">xmlns</span></code><span class="deltaxml-new" style="background:#90EE90">” or any other prefix that resolves to the namespace name </span><code class="uri"><span class="deltaxml-new" style="background:#90EE90">http://www.w3.org/2000/xmlns/</span></code><span class="deltaxml-new" style="background:#90EE90">. However, if the </span>attributes taken from the <code class="option">attributes</code> use namespaces, prefixes, or prefixes bound to different namespaces, the document produced on the <code class="port">result</code> output port will require namespace fixup.<a id="err.inline.C0059.2&#34; opt.inline.attributes-7 port.inline.result-27"></a><span class="deltaxml-old" style="background:#FF5555">If</span><span class="deltaxml-new" style="background:#90EE90">This step cannot be used to add namespace declarations.</span> <span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><span class="deltaxml-old" style="background:#FF5555">the </span><span class="deltaxml-new" style="background:#90EE90">) if the name of any attribute is “</span><code class="code"><span class="deltaxml-new" style="background:#90EE90">xmlns</span></code><span class="deltaxml-new" style="background:#90EE90">” or uses the prefix “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">xmlns</span></code><span class="deltaxml-new" style="background:#90EE90">” or any other prefix that resolves to the namespace name </span><code class="uri"><span class="deltaxml-new" style="background:#90EE90">http://www.w3.org/2000/xmlns/</span></code><span class="deltaxml-new" style="background:#90EE90">. However, if the </span>attributes taken from the <code class="option">attributes</code> use namespaces, prefixes, or prefixes bound to different namespaces, the document produced on the <code class="port">result</code> output port will require namespace fixup.</p><p>If an attribute named <code class="tag-attribute">xml:base</code> is added or changed, the base URI of the element <span class="rfc2119" id="c.set-attributes.9.2">must</span> also be amended accordingly.</p><section id="c.set-attributes.10" class="simplesect"><div class="section-titlepage"><h4>Document properties</h4></div><div class="content"><p>All document properties are preserved.</p></div></section></div></section><section id="c.set-properties" class="section"><div class="section-titlepage"><h3><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.27. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.29. </span></bdi>p:set-properties<a aria-label="§" class="self-link" href="#c.set-properties"></a></h3></div><div class="content"><p>The <code class="tag-element">p:set-properties</code> step sets document properties on the source document.</p><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:set-properties</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">any</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">any</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">properties</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">map(xs:QName,item()*)</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">merge</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">true()</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:boolean</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">      </span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><div class="declare-step"><p><span class="deltaxml-new" style="background:#90EE90">Summary</span></p><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Input port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.source-52"><span class="deltaxml-new" style="background:#90EE90">source</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">any </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Output port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.result-28"><span class="deltaxml-new" style="background:#90EE90">result</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">any </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Option name</span></th><th><span class="deltaxml-new" style="background:#90EE90">Type</span></th><th><span class="deltaxml-new" style="background:#90EE90">Default value</span></th><th><span class="deltaxml-new" style="background:#90EE90">Required</span></th></tr></thead><tbody><tr><td class="required"><a href="#opt.inline.properties-1"><span class="deltaxml-new" style="background:#90EE90">properties</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">map(xs:QName,item()*)</span></td><td><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">✔ </span></td></tr><tr><td><a href="#opt.inline.merge-1"><span class="deltaxml-new" style="background:#90EE90">merge</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:boolean</span></td><td><span class="deltaxml-new" style="background:#90EE90">true()</span></td><td><span class="deltaxml-new" style="background:#90EE90"> </span></td></tr></tbody></table><details><summary><span class="deltaxml-new" style="background:#90EE90">Errors</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Error code</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td class="errcode"><a href="#err.inline.C0069&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0069</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the properties map contains a key equal to the string “content-type”.</span></td></tr><tr><td class="errcode"><a href="#err.inline.D0064.4&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XD0064</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the base URI is not both absolute and valid according to .</span></td></tr><tr><td class="errcode"><a href="#err.inline.D0070&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XD0070</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if a value is assigned to the serialization document property that cannot be converted into map(xs:QName, item()*) according to the rules in section “QName handling” of .</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Declaration</span></summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:set-properties</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">any</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">any</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">properties</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">map(xs:QName,item()*)</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">merge</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">true()</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:boolean</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">      </span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p></details></div><p><span style="display: none;" class="delete_version">The document properties of the document on the <code class="port">source</code> port are augmented with the values specified in the <code class="option">properties</code> option. The document produced on the <code class="port">result</code> port has the same representation but the adjusted property values.</span><a id="port.inline.source-52 opt.inline.properties-1 port.inline.result-28"></a>The document properties of the document on the <code class="port">source</code> port are augmented with the values specified in the <code class="option">properties</code> option. The document produced on the <code class="port">result</code> port has the same representation but the adjusted property values.<a id="port.inline.source-52 opt.inline.properties-1 port.inline.result-28"></a>The document properties of the document on the <code class="port">source</code> port are augmented with the values specified in the <code class="option">properties</code> option. The document produced on the <code class="port">result</code> port has the same representation but the adjusted property values.</p><p><span style="display: none;" class="delete_version">If the <code class="option">merge</code> option is true, then the supplied properties are added to the existing properties, overwriting already existing values for a given key. If it is false, the document’s properties are replaced by the new set.</span><a id="opt.inline.merge-1"></a>If the <code class="option">merge</code> option is true, then the supplied properties are added to the existing properties, overwriting already existing values for a given key. If it is false, the document’s properties are replaced by the new set.<a id="opt.inline.merge-1"></a>If the <code class="option">merge</code> option is true, then the supplied properties are added to the existing properties, overwriting already existing values for a given key. If it is false, the document’s properties are replaced by the new set.</p><p><a id="err.inline.D0070&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if a value is assigned to the <code class="code">serialization</code> document property that cannot be converted into <code class="code">map(xs:QName, item()*)</code> according to the rules in section “QName handling” of [].<a id="err.inline.D0070&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if a value is assigned to the <code class="code">serialization</code> document property that cannot be converted into <code class="code">map(xs:QName, item()*)</code> according to the rules in section “QName handling” of [].</p><p><a id="err.inline.C0069&#34; opt.inline.properties-2"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the <code class="option">properties</code> map contains a key equal to the string “<code class="literal">content-type</code>”. <a id="err.inline.C0069&#34; opt.inline.properties-2"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the <code class="option">properties</code> map contains a key equal to the string “<code class="literal">content-type</code>”. </p><p><a id="opt.inline.properties-3 err.inline.D0064.4&#34;"></a>If the <code class="option">properties</code> map contains a key equal to the string “<code class="literal">base-uri</code>” the associated value is taken as the new base URI of the resulting document. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the base URI is not both absolute and valid according to [].<a id="opt.inline.properties-3 err.inline.D0064.4&#34;"></a>If the <code class="option">properties</code> map contains a key equal to the string “<code class="literal">base-uri</code>” the associated value is taken as the new base URI of the resulting document. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the base URI is not both absolute and valid according to [].</p><section id="c.set-properties.9" class="simplesect"><div class="section-titlepage"><h4>Document properties</h4></div><div class="content"><p><span style="display: none;" class="delete_version">If <code class="option">merge</code> is true, document properties not overridden by settings in the <code class="option">properties</code> map are preserved, otherwise the resulting document has only the <code class="literal">content-type</code> property and the properties specified in the <code class="option">properties</code> map. In particular, if <code class="option">merge</code> is false, the <code class="literal">base-uri</code> property will not be preserved. This means that the resulting document will not have a base URI if the <code class="option">properties</code> map does not contain a <code class="literal">base-uri</code> entry. </span><a id="opt.inline.merge-2 opt.inline.properties-4 opt.inline.properties-5 opt.inline.merge-3 opt.inline.properties-6"></a>If <code class="option">merge</code> is true, document properties not overridden by settings in the <code class="option">properties</code> map are preserved, otherwise the resulting document has only the <code class="literal">content-type</code> property and the properties specified in the <code class="option">properties</code> map. In particular, if <code class="option">merge</code> is false, the <code class="literal">base-uri</code> property will not be preserved. This means that the resulting document will not have a base URI if the <code class="option">properties</code> map does not contain a <code class="literal">base-uri</code> entry. <a id="opt.inline.merge-2 opt.inline.properties-4 opt.inline.properties-5 opt.inline.merge-3 opt.inline.properties-6"></a>If <code class="option">merge</code> is true, document properties not overridden by settings in the <code class="option">properties</code> map are preserved, otherwise the resulting document has only the <code class="literal">content-type</code> property and the properties specified in the <code class="option">properties</code> map. In particular, if <code class="option">merge</code> is false, the <code class="literal">base-uri</code> property will not be preserved. This means that the resulting document will not have a base URI if the <code class="option">properties</code> map does not contain a <code class="literal">base-uri</code> entry. </p></div></section></div></section><section id="c.sink" class="section"><div class="section-titlepage"><h3><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.28. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.30. </span></bdi>p:sink<a aria-label="§" class="self-link" href="#c.sink"></a></h3></div><div class="content"><p>The <code class="tag-element">p:sink</code> step accepts a sequence of documents and discards them. It has no output.</p><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:sink</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">any</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><div class="declare-step"><p><span class="deltaxml-new" style="background:#90EE90">Summary</span></p><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Input port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.source-53"><span class="deltaxml-new" style="background:#90EE90">source</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td><span class="deltaxml-new" style="background:#90EE90">any </span></td></tr></tbody></table><details><summary><span class="deltaxml-new" style="background:#90EE90">Declaration</span></summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:sink</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">any</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p></details></div><section id="c.sink.4" class="simplesect"><div class="section-titlepage"><h4>Document properties</h4></div><div class="content"><p>Not applicable.</p></div></section></div></section><section id="c.sleep" class="section"><div class="section-titlepage"><h3><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.31. </span></bdi><span class="deltaxml-new" style="background:#90EE90">p:sleep</span><a aria-label="§" class="self-link" href="#c.sleep"></a></h3></div><div class="content"><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:sleep</span></code><span class="deltaxml-new" style="background:#90EE90"> step introduces a delay.</span></p><div class="declare-step"><p><span class="deltaxml-new" style="background:#90EE90">Summary</span></p><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Input port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.source-53"><span class="deltaxml-new" style="background:#90EE90">source</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td><span class="deltaxml-new" style="background:#90EE90">any </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Output port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.result-29"><span class="deltaxml-new" style="background:#90EE90">result</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td><span class="deltaxml-new" style="background:#90EE90">any </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Option name</span></th><th><span class="deltaxml-new" style="background:#90EE90">Type</span></th><th><span class="deltaxml-new" style="background:#90EE90">Required</span></th></tr></thead><tbody><tr><td class="required"><a href="#opt.inline.duration-1"><span class="deltaxml-new" style="background:#90EE90">duration</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:string</span></td><td><span class="deltaxml-new" style="background:#90EE90">✔ </span></td></tr></tbody></table><details><summary><span class="deltaxml-new" style="background:#90EE90">Errors</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Error code</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td class="errcode"><a href="#err.inline.D0036&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XD0036</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the specified duration is not a positive number or a valid xs:dayTimeDuration.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Declaration</span></summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:sleep</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">any</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">any</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">duration</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:string</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">    </span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p></details></div><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:sleep</span></code><span class="deltaxml-new" style="background:#90EE90"> step copies each of the documents on the </span><a id="port.inline.source-53"></a><code class="port"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90"> port to the </span><a id="port.inline.result-29"></a><code class="port"><span class="deltaxml-new" style="background:#90EE90">result</span></code><span class="deltaxml-new" style="background:#90EE90"> port without changing them. Before copying the documents, it pauses for a period of time not less than the specified </span><a id="opt.inline.duration-1"></a><code class="option"><span class="deltaxml-new" style="background:#90EE90">duration</span></code><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The duration may be specified as an </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">xs:double</span></code><span class="deltaxml-new" style="background:#90EE90">, indicating a number of seconds, or as a duration using a string that satisfies the constraints of an </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">xs:dayTimeDuration</span></code><span class="deltaxml-new" style="background:#90EE90">. The duration </span><span class="rfc2119" id="c.sleep.5.3"><span class="deltaxml-new" style="background:#90EE90">must not</span></span><span class="deltaxml-new" style="background:#90EE90"> be negative. </span><a id="err.inline.D0036&#34;"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.D0036"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0036</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the specified duration is not a positive number or a valid </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">xs:dayTimeDuration</span></code><span class="deltaxml-new" style="background:#90EE90">. The following table summarizes some example durations: </span></p><figure id="c.sleep.6" class="informaltable-wrapper"><div class="informaltable"><table border="0" style="border-collapse: collapse;border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; "><code class="code"><span class="deltaxml-new" style="background:#90EE90">duration</span></code></th><th style="border-right: 1px solid ; border-bottom: 1px solid ; "><span class="deltaxml-new" style="background:#90EE90">Delay</span></th><th style="border-bottom: 1px solid ; "><span class="deltaxml-new" style="background:#90EE90">Notes</span></th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><code class="code"><span class="deltaxml-new" style="background:#90EE90">10</span></code></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><span class="deltaxml-new" style="background:#90EE90">10 seconds</span></td><td style="border-bottom: 1px solid ; "><span class="deltaxml-new" style="background:#90EE90"> </span></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><code class="code"><span class="deltaxml-new" style="background:#90EE90">3.5</span></code></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><span class="deltaxml-new" style="background:#90EE90">3.5 seconds</span></td><td style="border-bottom: 1px solid ; "><span class="deltaxml-new" style="background:#90EE90"> </span></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><code class="code"><span class="deltaxml-new" style="background:#90EE90">0.271</span></code></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><span class="deltaxml-new" style="background:#90EE90">271 milliseconds</span></td><td style="border-bottom: 1px solid ; "><span class="deltaxml-new" style="background:#90EE90"> </span></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><code class="code"><span class="deltaxml-new" style="background:#90EE90">PT3H1M41S</span></code></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><span class="deltaxml-new" style="background:#90EE90">3 hours, 1 minute, and 41 seconds</span></td><td style="border-bottom: 1px solid ; "><span class="deltaxml-new" style="background:#90EE90"> </span></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><code class="code"><span class="deltaxml-new" style="background:#90EE90">-7</span></code></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><span class="deltaxml-new" style="background:#90EE90">—</span></td><td style="border-bottom: 1px solid ; "><span class="deltaxml-new" style="background:#90EE90">Raises </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">err:XD0036</span></code></td></tr><tr><td style="border-right: 1px solid ; "><code class="code"><span class="deltaxml-new" style="background:#90EE90">3H</span></code></td><td style="border-right: 1px solid ; "><span class="deltaxml-new" style="background:#90EE90">—</span></td><td><span class="deltaxml-new" style="background:#90EE90">Raises </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">err:XD0036</span></code></td></tr></tbody></table></div></figure><div class="note admonition"><h3><span class="deltaxml-new" style="background:#90EE90">Note</span></h3><div class="admonition-body"><p><span class="deltaxml-new" style="background:#90EE90">In multi-threaded implementations, there is no guarantee that this will pause the execution of more than one thread. However, any steps that depend on the output of this step will wait for this step to complete.</span></p></div></div><p><span class="deltaxml-new" style="background:#90EE90">Implementations are expected to make a reasonable effort to delay for the specified duration, but XProc imposes no specific constraints on the precision of the timer.</span></p><section id="c.sleep.9" class="simplesect"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">Document properties</span></h4></div><div class="content"><p><span class="deltaxml-new" style="background:#90EE90">All document properties are preserved.</span></p></div></section></div></section><section id="c.split-sequence" class="section"><div class="section-titlepage"><h3><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.29. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.32. </span></bdi>p:split-sequence<a aria-label="§" class="self-link" href="#c.split-sequence"></a></h3></div><div class="content"><p>The <code class="tag-element">p:split-sequence</code> step accepts a sequence of documents and divides it into two sequences.</p><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:split-sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">any</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">matched</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">any</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">not-matched</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">any</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">initial-only</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:boolean</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">false()</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">test</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:string</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">        </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">XPathExpression</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><div class="declare-step"><p><span class="deltaxml-new" style="background:#90EE90">Summary</span></p><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Input port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.source-54"><span class="deltaxml-new" style="background:#90EE90">source</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td><span class="deltaxml-new" style="background:#90EE90">any </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Output port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.matched-1"><span class="deltaxml-new" style="background:#90EE90">matched</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td><span class="deltaxml-new" style="background:#90EE90">any </span></td></tr><tr><td><a href="#port.inline.not-matched-1"><span class="deltaxml-new" style="background:#90EE90">not-matched</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td><span class="deltaxml-new" style="background:#90EE90">any </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Option name</span></th><th><span class="deltaxml-new" style="background:#90EE90">Type</span></th><th><span class="deltaxml-new" style="background:#90EE90">Default value</span></th><th><span class="deltaxml-new" style="background:#90EE90">Required</span></th></tr></thead><tbody><tr><td class="required"><a href="#opt.inline.test-1"><span class="deltaxml-new" style="background:#90EE90">test</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">XPathExpression</span></td><td><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">✔ </span></td></tr><tr><td><a href="#opt.inline.initial-only-1"><span class="deltaxml-new" style="background:#90EE90">initial-only</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:boolean</span></td><td><span class="deltaxml-new" style="background:#90EE90">false()</span></td><td><span class="deltaxml-new" style="background:#90EE90"> </span></td></tr></tbody></table><details><summary><span class="deltaxml-new" style="background:#90EE90">Errors</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Error code</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td class="errcode"><a href="#err.inline.C0150&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0150</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if evaluating the XPath expression in option test on a context document results in an error.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Declaration</span></summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:split-sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">any</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">matched</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">any</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">not-matched</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">any</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">initial-only</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:boolean</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">false()</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">test</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:string</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">        </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">XPathExpression</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p></details></div><p><span style="display: none;" class="delete_version">The value of the <code class="option">test</code> option <span class="rfc2119" id="c.split-sequence.4.2">must</span> be an XPathExpression.</span><a id="opt.inline.test-1"></a>The value of the <code class="option">test</code> option <span class="rfc2119" id="c.split-sequence.4.2">must</span> be an XPathExpression.<a id="opt.inline.test-1"></a>The value of the <code class="option">test</code> option <span class="rfc2119" id="c.split-sequence.4.2">must</span> be an XPathExpression.</p><p><span style="display: none;" class="delete_version">The XPath expression in the <code class="option">test</code> option is applied to each document in the input sequence. If the effective boolean value of the expression is true, the document is copied to the <code class="port">matched</code> port; otherwise it is copied to the <code class="port">not-matched</code> port.</span><a id="opt.inline.test-2 port.inline.matched-1 port.inline.not-matched-1"></a>The XPath expression in the <code class="option">test</code> option is applied to each document in the input sequence. If the effective boolean value of the expression is true, the document is copied to the <code class="port">matched</code> port; otherwise it is copied to the <code class="port">not-matched</code> port.<a id="opt.inline.test-2 port.inline.matched-1 port.inline.not-matched-1"></a>The XPath expression in the <code class="option">test</code> option is applied to each document in the input sequence. If the effective boolean value of the expression is true, the document is copied to the <code class="port">matched</code> port; otherwise it is copied to the <code class="port">not-matched</code> port.</p><p><span style="display: none;" class="delete_version">If the <code class="option">initial-only</code> option is true, then when the first document that does not satisfy the test expression is encountered, it <em>and all the documents that follow it</em> are written to the <code class="port">not-matched</code> port. In other words, it only writes the initial series of matched documents (which may be empty) to the <code class="port">matched</code> port. All other documents are written to the <code class="port">not-matched</code> port, irrespective of whether or not they match.</span><a id="opt.inline.initial-only-1 port.inline.not-matched-2 port.inline.matched-2 port.inline.not-matched-3"></a>If the <code class="option">initial-only</code> option is true, then when the first document that does not satisfy the test expression is encountered, it <em>and all the documents that follow it</em> are written to the <code class="port">not-matched</code> port. In other words, it only writes the initial series of matched documents (which may be empty) to the <code class="port">matched</code> port. All other documents are written to the <code class="port">not-matched</code> port, irrespective of whether or not they match.<a id="opt.inline.initial-only-1 port.inline.not-matched-2 port.inline.matched-2 port.inline.not-matched-3"></a>If the <code class="option">initial-only</code> option is true, then when the first document that does not satisfy the test expression is encountered, it <em>and all the documents that follow it</em> are written to the <code class="port">not-matched</code> port. In other words, it only writes the initial series of matched documents (which may be empty) to the <code class="port">matched</code> port. All other documents are written to the <code class="port">not-matched</code> port, irrespective of whether or not they match.</p><p><a id="opt.inline.test-3 err.inline.C0150&#34; opt.inline.test-4"></a>The XPath context for the <code class="option">test</code> option changes over time. For each document that appears on the <code class="code">source</code> port, the expression is evaluated with that document as the context document. The context position (<code class="code">position()</code>) is the position of that document within the sequence and the context size (<code class="code">last()</code>) is the total number of documents in the sequence. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if evaluating the XPath expression in option <code class="option">test</code> on a context document results in an error.<a id="opt.inline.test-3 err.inline.C0150&#34; opt.inline.test-4"></a>The XPath context for the <code class="option">test</code> option changes over time. For each document that appears on the <code class="code">source</code> port, the expression is evaluated with that document as the context document. The context position (<code class="code">position()</code>) is the position of that document within the sequence and the context size (<code class="code">last()</code>) is the total number of documents in the sequence. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if evaluating the XPath expression in option <code class="option">test</code> on a context document results in an error.</p><div id="note-stream" class="note admonition"><h3>Note</h3><div class="admonition-body"><p>In principle, this component cannot stream because it must buffer all of the input sequence in order to find the context size. In practice, if the test expression does not use the <code class="function">last()</code> function, the implementation can stream and ignore the context size.</p></div></div><p><span class="deltaxml-old" style="background:#FF5555">If the implementation supports passing PSVI annotations between steps, the </span><code class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:split-sequence</span></code><span class="deltaxml-old" style="background:#FF5555"> step </span><span class="rfc2119" id="c.split-sequence.9.2"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> preserve any annotations that appear in the input.</span></p><section id="c.split-sequence.10" class="simplesect"><div class="section-titlepage"><h4><span class="deltaxml-old" style="background:#FF5555">Document properties</span></h4></div><div class="content"><p><span class="deltaxml-old" style="background:#FF5555">All document properties are preserved.</span></p></div></section><section id="c.split-sequence.9" class="simplesect"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">Document properties</span></h4></div><div class="content"><p><span class="deltaxml-new" style="background:#90EE90">All document properties are preserved.</span></p></div></section></div></section><section id="c.store" class="section"><div class="section-titlepage"><h3><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.30. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.33. </span></bdi>p:store<a aria-label="§" class="self-link" href="#c.store"></a></h3></div><div class="content"><p><span style="display: none;" class="delete_version">The <code class="tag-element">p:store</code> step stores (a possibly serialized version of) its input to a URI. It outputs a reference to the location of the stored document on the <code class="port">result-uri</code> port. Aside from these side-effects, it behaves like a <a href="#c.identity"><code class="tag-element">p:identity</code></a> step, copying its input to the <code class="port">result</code> port.</span><a id="port.inline.result-uri-1 port.inline.result-30"></a>The <code class="tag-element">p:store</code> step stores (a possibly serialized version of) its input to a URI. It outputs a reference to the location of the stored document on the <code class="port">result-uri</code> port. Aside from these side-effects, it behaves like a  step, copying its input to the <code class="port">result</code> port.<a id="port.inline.result-uri-1 port.inline.result-30"></a>The <code class="tag-element">p:store</code> step stores (a possibly serialized version of) its input to a URI. It outputs a reference to the location of the stored document on the <code class="port">result-uri</code> port. Aside from these side-effects, it behaves like a  step, copying its input to the <code class="port">result</code> port.</p><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:store</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">any</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">any</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result-uri</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">application/xml</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">href</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:anyURI</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">        </span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">serialization</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">map(xs:QName,item()*)?</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">  </span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><div class="declare-step"><p><span class="deltaxml-new" style="background:#90EE90">Summary</span></p><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Input port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.source-54"><span class="deltaxml-new" style="background:#90EE90">source</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">any </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Output port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.result-31"><span class="deltaxml-new" style="background:#90EE90">result</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">any </span></td></tr><tr><td><a href="#port.inline.result-uri-2"><span class="deltaxml-new" style="background:#90EE90">result-uri</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">application/xml </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Option name</span></th><th><span class="deltaxml-new" style="background:#90EE90">Type</span></th><th><span class="deltaxml-new" style="background:#90EE90">Default value</span></th><th><span class="deltaxml-new" style="background:#90EE90">Required</span></th></tr></thead><tbody><tr><td class="required"><a href="#opt.inline.href-9"><span class="deltaxml-new" style="background:#90EE90">href</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:anyURI</span></td><td><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">✔ </span></td></tr><tr><td><a href="#opt.inline.serialization-6"><span class="deltaxml-new" style="background:#90EE90">serialization</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">map(xs:QName,item()*)?</span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td><td><span class="deltaxml-new" style="background:#90EE90"> </span></td></tr></tbody></table><details><summary><span class="deltaxml-new" style="background:#90EE90">Errors</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Error code</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td class="errcode"><a href="#err.inline.C0050&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0050</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the URI scheme is not supported or the step cannot store to the specified location.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Declaration</span></summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:store</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">any</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">any</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result-uri</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">application/xml</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">href</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:anyURI</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">        </span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">serialization</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">map(xs:QName,item()*)?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">  </span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p></details></div><p><span style="display: none;" class="delete_version">The value of the <code class="option">href</code> option <span class="rfc2119" id="c.store.4.2">must</span> be an <code class="type">anyURI</code>. If it is relative, it is made absolute against the base URI of the element on which it is specified (<code class="tag-element">p:with-option</code> or <code class="tag-element">p:store</code> in the case of a syntactic shortcut value).</span><a id="opt.inline.href-9"></a>The value of the <code class="option">href</code> option <span class="rfc2119" id="c.store.4.2">must</span> be an <code class="type">anyURI</code>. If it is relative, it is made absolute against the base URI of the element on which it is specified (<code class="tag-element">p:with-option</code> or <code class="tag-element">p:store</code> in the case of a syntactic shortcut value).<a id="opt.inline.href-9"></a>The value of the <code class="option">href</code> option <span class="rfc2119" id="c.store.4.2">must</span> be an <code class="type">anyURI</code>. If it is relative, it is made absolute against the base URI of the element on which it is specified (<code class="tag-element">p:with-option</code> or <code class="tag-element">p:store</code> in the case of a syntactic shortcut value).</p><p><a id="err.inline.C0050&#34;"></a>The step attempts to store the document to the specified URI. If the URI scheme “<code class="literal">file:</code>” is supported, the processor <span class="rfc2119" id="c.store.5.2">should</span> try to create all non existing folders in the URI’s path. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the URI scheme is not supported or the step cannot store to the specified location.<a id="err.inline.C0050&#34;"></a>The step attempts to store the document to the specified URI. If the URI scheme “<code class="literal">file:</code>” is supported, the processor <span class="rfc2119" id="c.store.5.2">should</span> try to create all non existing folders in the URI’s path. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the URI scheme is not supported or the step cannot store to the specified location.</p><p><span style="display: none;" class="delete_version">The output of this step on the <code class="port">result-uri</code> port is a document containing a single <a href="#cv.result"><code class="tag-element">c:result</code></a> element whose content is the absolute URI of the document stored by the step.</span><a id="port.inline.result-uri-2"></a>The output of this step on the <code class="port">result-uri</code> port is a document containing a single  element whose content is the absolute URI of the document stored by the step.<a id="port.inline.result-uri-2"></a>The output of this step on the <code class="port">result-uri</code> port is a document containing a single  element whose content is the absolute URI of the document stored by the step.</p><p><span style="display: none;" class="delete_version">The <code class="option">serialization</code> option is provided to control the serialization of content when it is stored. If the document to be stored has a “serialization” property, the serialization is controlled by the merger of the two maps where the entries in the “serialization” property take precedence. Serialization is described in [<a><span class="delete_version" href="#xproc30"><span class="abbrev">XProc 3.0</span></span><span class="modify_version" href="#xproc30"><span class="abbrev">XProc 3.0</span></span></a>].</span><a id="opt.inline.serialization-6"></a>The <code class="option">serialization</code> option is provided to control the serialization of content when it is stored. If the document to be stored has a “serialization” property, the serialization is controlled by the merger of the two maps where the entries in the “serialization” property take precedence. Serialization is described in [].<a id="opt.inline.serialization-6"></a>The <code class="option">serialization</code> option is provided to control the serialization of content when it is stored. If the document to be stored has a “serialization” property, the serialization is controlled by the merger of the two maps where the entries in the “serialization” property take precedence. Serialization is described in [].</p><section id="c.store.8" class="simplesect"><div class="section-titlepage"><h4>Document properties</h4></div><div class="content"><p>All document properties are preserved.</p></div></section></div></section><section id="c.string-replace" class="section"><div class="section-titlepage"><h3><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.31. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.34. </span></bdi>p:string-replace<a aria-label="§" class="self-link" href="#c.string-replace"></a></h3></div><div class="content"><p><span style="display: none;" class="delete_version">The <code class="tag-element">p:string-replace</code> step matches nodes in the document provided on the <code class="port">source</code> port and replaces them with the string result of evaluating an XPath expression.</span><a id="port.inline.source-54"></a>The <code class="tag-element">p:string-replace</code> step matches nodes in the document provided on the <code class="port">source</code> port and replaces them with the string result of evaluating an XPath expression.<a id="port.inline.source-54"></a>The <code class="tag-element">p:string-replace</code> step matches nodes in the document provided on the <code class="port">source</code> port and replaces them with the string result of evaluating an XPath expression.</p><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:string-replace</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">xml html</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">text xml html</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">match</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:string</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">       </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">XSLTSelectionPattern</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">replace</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:string</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">     </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">XPathExpression</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><div class="declare-step"><p><span class="deltaxml-new" style="background:#90EE90">Summary</span></p><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Input port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.source-55"><span class="deltaxml-new" style="background:#90EE90">source</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">xml html </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Output port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.result-31"><span class="deltaxml-new" style="background:#90EE90">result</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">text xml html </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Option name</span></th><th><span class="deltaxml-new" style="background:#90EE90">Type</span></th><th><span class="deltaxml-new" style="background:#90EE90">Required</span></th></tr></thead><tbody><tr><td class="required"><a href="#opt.inline.match-19"><span class="deltaxml-new" style="background:#90EE90">match</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">XSLTSelectionPattern</span></td><td><span class="deltaxml-new" style="background:#90EE90">✔ </span></td></tr><tr><td class="required"><a href="#opt.inline.replace-3"><span class="deltaxml-new" style="background:#90EE90">replace</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">XPathExpression</span></td><td><span class="deltaxml-new" style="background:#90EE90">✔ </span></td></tr></tbody></table><details><summary><span class="deltaxml-new" style="background:#90EE90">Declaration</span></summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:string-replace</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">xml html</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">text xml html</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">match</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:string</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">       </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">XSLTSelectionPattern</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">replace</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:string</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">     </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">XPathExpression</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p></details></div><p><span style="display: none;" class="delete_version">The value of the <code class="option">match</code> option <span class="rfc2119" id="c.string-replace.4.2">must</span> be an XSLTSelectionPattern.</span><a id="opt.inline.match-19"></a>The value of the <code class="option">match</code> option <span class="rfc2119" id="c.string-replace.4.2">must</span> be an XSLTSelectionPattern.<a id="opt.inline.match-19"></a>The value of the <code class="option">match</code> option <span class="rfc2119" id="c.string-replace.4.2">must</span> be an XSLTSelectionPattern.</p><p><span style="display: none;" class="delete_version">The value of the <code class="option">replace</code> option <span class="rfc2119" id="c.string-replace.5.2">must</span> be an XPathExpression.</span><a id="opt.inline.replace-3"></a>The value of the <code class="option">replace</code> option <span class="rfc2119" id="c.string-replace.5.2">must</span> be an XPathExpression.<a id="opt.inline.replace-3"></a>The value of the <code class="option">replace</code> option <span class="rfc2119" id="c.string-replace.5.2">must</span> be an XPathExpression.</p><p><span style="display: none;" class="delete_version">The matched nodes are specified with the <em class="glossterm"><a href="#dt-selection-pattern">selection pattern</a></em> in the <code class="option">match</code> option. For each matching node, the XPath expression provided by the <code class="option">replace</code> option is evaluated with the matching node as the XPath context node. The string value of the result is used in the output. Nodes that do not match are copied without change.</span><a id="opt.inline.match-20 opt.inline.replace-4"></a>The matched nodes are specified with the <em class="glossterm"><a href="#dt-selection-pattern">selection pattern</a></em> in the <code class="option">match</code> option. For each matching node, the XPath expression provided by the <code class="option">replace</code> option is evaluated with the matching node as the XPath context node. The string value of the result is used in the output. Nodes that do not match are copied without change.<a id="opt.inline.match-20 opt.inline.replace-4"></a>The matched nodes are specified with the <em class="glossterm"><a href="#dt-selection-pattern">selection pattern</a></em> in the <code class="option">match</code> option. For each matching node, the XPath expression provided by the <code class="option">replace</code> option is evaluated with the matching node as the XPath context node. The string value of the result is used in the output. Nodes that do not match are copied without change.</p><p><span style="display: none;" class="delete_version">If the expression given in the <code class="option">match</code> option matches an <em>attribute</em>, the string value of the <code class="option">replace</code> expression is used as the new value of the attribute in the output. If the attribute is named “<code class="tag-attribute">xml:base</code>”, the base URI of the element <span class="rfc2119" id="c.string-replace.7.5">must</span> also be amended accordingly.</span><a id="opt.inline.match-21 opt.inline.replace-5"></a>If the expression given in the <code class="option">match</code> option matches an <em>attribute</em>, the string value of the <code class="option">replace</code> expression is used as the new value of the attribute in the output. If the attribute is named “<code class="tag-attribute">xml:base</code>”, the base URI of the element <span class="rfc2119" id="c.string-replace.7.5">must</span> also be amended accordingly.<a id="opt.inline.match-21 opt.inline.replace-5"></a>If the expression given in the <code class="option">match</code> option matches an <em>attribute</em>, the string value of the <code class="option">replace</code> expression is used as the new value of the attribute in the output. If the attribute is named “<code class="tag-attribute">xml:base</code>”, the base URI of the element <span class="rfc2119" id="c.string-replace.7.5">must</span> also be amended accordingly.</p><p><span style="display: none;" class="delete_version">If the document node is matched, the entire document is replaced by the string value of the <code class="option">replace</code> expression. What appears on port <code class="port">result</code> is a text document with the text node wrapped in a document node.</span><span style="display: none;" class="add_version">If the document node is matched, the result is a text document.</span><span class="modify_version">If the document node is matched, the <span class="deltaxml-old" style="background:#FF5555">entire document is replaced by the string value of the </span><span class="deltaxml-old" style="background:#FF5555">replace</span><span class="deltaxml-old" style="background:#FF5555"> expression. What appears on port </span>result is a text document<span class="deltaxml-old" style="background:#FF5555"> with the text node wrapped in a document node</span>.</span></p><p><span style="display: none;" class="delete_version">If the expression matches any other kind of node, the entire node (and <em>not</em> just its contents) is replaced by the string value of the <code class="option">replace</code> expression.</span><a id="opt.inline.replace-6"></a>If the expression matches any other kind of node, the entire node (and <em>not</em> just its contents) is replaced by the string value of the <code class="option">replace</code> expression.<a id="opt.inline.replace-6"></a>If the expression matches any other kind of node, the entire node (and <em>not</em> just its contents) is replaced by the string value of the <code class="option">replace</code> expression.</p><section id="c.string-replace.10" class="simplesect"><div class="section-titlepage"><h4>Document properties</h4></div><div class="content"><p>If the resulting document contains exactly one text node, the <code class="literal">content-type</code> property is changed to <code class="literal">text/plain</code> and the <code class="literal">serialization</code> property is removed, while all other document properties are preserved. For other document types, all document properties are preserved.</p></div></section></div></section><section id="c.text-count" class="section"><div class="section-titlepage"><h3><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.32. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.35. </span></bdi>p:text-count<a aria-label="§" class="self-link" href="#c.text-count"></a></h3></div><div class="content"><p>The <code class="code">p:text-count</code> step counts the number of lines in a text document and returns a single XML document containing that number.</p><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:text-count</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">false</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">text</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">false</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">application/xml</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><div class="declare-step"><p><span class="deltaxml-new" style="background:#90EE90">Summary</span></p><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Input port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.source-55"><span class="deltaxml-new" style="background:#90EE90">source</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">text </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Output port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.result-31"><span class="deltaxml-new" style="background:#90EE90">result</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">application/xml </span></td></tr></tbody></table><details><summary><span class="deltaxml-new" style="background:#90EE90">Declaration</span></summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:text-count</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">false</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">text</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">false</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">application/xml</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p></details></div><p><span style="display: none;" class="delete_version">The <code class="tag-element">p:text-count</code> step counts the number of lines in the text document appearing on its <code class="port">source</code> port. It returns on its <code class="port">result</code> port an XML document containing a single <a href="#cv.result"><code class="tag-element">c:result</code></a> element whose contents is the string representing this count.</span><a id="port.inline.source-55 port.inline.result-31"></a>The <code class="tag-element">p:text-count</code> step counts the number of lines in the text document appearing on its <code class="port">source</code> port. It returns on its <code class="port">result</code> port an XML document containing a single  element whose contents is the string representing this count.<a id="port.inline.source-55 port.inline.result-31"></a>The <code class="tag-element">p:text-count</code> step counts the number of lines in the text document appearing on its <code class="port">source</code> port. It returns on its <code class="port">result</code> port an XML document containing a single  element whose contents is the string representing this count.</p><p>Lines are identified as described in <a href="https://www.w3.org/TR/xml/#sec-line-ends">XML, 2.11 End-of-Line Handling</a>. For the purpose of identifying lines, if the very last character in the text document is a newline (&amp;#10;), that newline is ignored. (It is not a separator between that line and a following line that contains no characters.) </p><section id="c.text-count.6" class="simplesect"><div class="section-titlepage"><h4>Document properties</h4></div><div class="content"><p>No document properties are preserved. The count document does not have a <code class="property">base-uri</code> property. </p></div></section></div></section><section id="c.text-head" class="section"><div class="section-titlepage"><h3><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.33. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.36. </span></bdi>p:text-head<a aria-label="§" class="self-link" href="#c.text-head"></a></h3></div><div class="content"><p>The <code class="code">p:text-head</code> step returns lines from the beginning of a text document.</p><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:text-head</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">false</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">text</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">false</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">text</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">count</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:integer</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">      </span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><div class="declare-step"><p><span class="deltaxml-new" style="background:#90EE90">Summary</span></p><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Input port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.source-56"><span class="deltaxml-new" style="background:#90EE90">source</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">text </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Output port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.result-32"><span class="deltaxml-new" style="background:#90EE90">result</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">text </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Option name</span></th><th><span class="deltaxml-new" style="background:#90EE90">Type</span></th><th><span class="deltaxml-new" style="background:#90EE90">Required</span></th></tr></thead><tbody><tr><td class="required"><a href="#opt.inline.count-1"><span class="deltaxml-new" style="background:#90EE90">count</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:integer</span></td><td><span class="deltaxml-new" style="background:#90EE90">✔ </span></td></tr></tbody></table><details><summary><span class="deltaxml-new" style="background:#90EE90">Declaration</span></summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:text-head</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">false</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">text</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">false</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">text</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">count</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:integer</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">      </span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p></details></div><p><span style="display: none;" class="delete_version">The <code class="tag-element">p:text-head</code> step returns on its <code class="port">result</code> port lines from the text document that appears on its <code class="port">source</code> port:</span><a id="port.inline.result-32 port.inline.source-56"></a>The <code class="tag-element">p:text-head</code> step returns on its <code class="port">result</code> port lines from the text document that appears on its <code class="port">source</code> port:<a id="port.inline.result-32 port.inline.source-56"></a>The <code class="tag-element">p:text-head</code> step returns on its <code class="port">result</code> port lines from the text document that appears on its <code class="port">source</code> port:</p><div class="itemizedlist"><ul><li><p><span style="display: none;" class="delete_version">If the <code class="option">count</code> option is positive, the <code class="tag-element">p:text-head</code> step returns the first <code class="option">count</code> lines</span><a id="opt.inline.count-1 opt.inline.count-2"></a>If the <code class="option">count</code> option is positive, the <code class="tag-element">p:text-head</code> step returns the first <code class="option">count</code> lines<a id="opt.inline.count-1 opt.inline.count-2"></a>If the <code class="option">count</code> option is positive, the <code class="tag-element">p:text-head</code> step returns the first <code class="option">count</code> lines</p></li><li><p><span style="display: none;" class="delete_version">If the <code class="option">count</code> option is zero, the <code class="tag-element">p:text-head</code> step returns all lines</span><a id="opt.inline.count-3"></a>If the <code class="option">count</code> option is zero, the <code class="tag-element">p:text-head</code> step returns all lines<a id="opt.inline.count-3"></a>If the <code class="option">count</code> option is zero, the <code class="tag-element">p:text-head</code> step returns all lines</p></li><li><p><span style="display: none;" class="delete_version">If the <code class="option">count</code> option is negative, the <code class="tag-element">p:text-head</code> step returns all lines except the first <code class="option">count</code> lines</span><a id="opt.inline.count-4 opt.inline.count-5"></a>If the <code class="option">count</code> option is negative, the <code class="tag-element">p:text-head</code> step returns all lines except the first <code class="option">count</code> lines<a id="opt.inline.count-4 opt.inline.count-5"></a>If the <code class="option">count</code> option is negative, the <code class="tag-element">p:text-head</code> step returns all lines except the first <code class="option">count</code> lines</p></li></ul></div><p>Lines are identified as described in <a href="https://www.w3.org/TR/xml/#sec-line-ends">XML, 2.11 End-of-Line Handling</a>. All lines returned by <code class="tag-element">p:text-head</code> are terminated with a single newline (&amp;#10;).</p><section id="c.text-head.7" class="simplesect"><div class="section-titlepage"><h4>Document properties</h4></div><div class="content"><p>All document properties are preserved.</p></div></section></div></section><section id="c.text-join" class="section"><div class="section-titlepage"><h3><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.34. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.37. </span></bdi>p:text-join<a aria-label="§" class="self-link" href="#c.text-join"></a></h3></div><div class="content"><p>The <code class="code">p:text-join</code> step concatenates text documents.</p><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:text-join</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">text</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">text</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">separator</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:string?</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                  </span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">prefix</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:string?</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                     </span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">suffix</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:string?</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                     </span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">override-content-type</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:string?</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">      </span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><div class="declare-step"><p><span class="deltaxml-new" style="background:#90EE90">Summary</span></p><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Input port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.source-57"><span class="deltaxml-new" style="background:#90EE90">source</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td><span class="deltaxml-new" style="background:#90EE90">text </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Output port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.result-33"><span class="deltaxml-new" style="background:#90EE90">result</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">text </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Option name</span></th><th><span class="deltaxml-new" style="background:#90EE90">Type</span></th><th><span class="deltaxml-new" style="background:#90EE90">Default value</span></th></tr></thead><tbody><tr><td><a href="#opt.inline.override-content-type-1"><span class="deltaxml-new" style="background:#90EE90">override-content-type</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:string?</span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td></tr><tr><td><a href="#opt.inline.prefix-1"><span class="deltaxml-new" style="background:#90EE90">prefix</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:string?</span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td></tr><tr><td><a href="#opt.inline.separator-1"><span class="deltaxml-new" style="background:#90EE90">separator</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:string?</span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td></tr><tr><td><a href="#opt.inline.suffix-1"><span class="deltaxml-new" style="background:#90EE90">suffix</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:string?</span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td></tr></tbody></table><details><summary><span class="deltaxml-new" style="background:#90EE90">Errors</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Error code</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td class="errcode"><a href="#err.inline.C0001&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0001</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the value of option override-content-type is not a text media type.</span></td></tr><tr><td class="errcode"><a href="#err.inline.D0079.5&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XD0079</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if a supplied content-type is not a valid media type of the form “type/subtype+ext” or “type/subtype”.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Declaration</span></summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:text-join</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">text</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">text</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">separator</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:string?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                  </span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">prefix</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:string?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                     </span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">suffix</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:string?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                     </span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">override-content-type</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:string?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">      </span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p></details></div><p><span style="display: none;" class="delete_version">The <code class="code">p:text-join</code> step concatenates the text documents appearing on its <code class="port">source</code> port into a single document on its <code class="port">result</code> port. The documents will be concatenated in order of appearance. </span><a id="port.inline.source-57 port.inline.result-33"></a>The <code class="code">p:text-join</code> step concatenates the text documents appearing on its <code class="port">source</code> port into a single document on its <code class="port">result</code> port. The documents will be concatenated in order of appearance. <a id="port.inline.source-57 port.inline.result-33"></a>The <code class="code">p:text-join</code> step concatenates the text documents appearing on its <code class="port">source</code> port into a single document on its <code class="port">result</code> port. The documents will be concatenated in order of appearance. </p><div class="itemizedlist"><ul><li><p><span style="display: none;" class="delete_version">When the <code class="option">separator</code> option is specified, its value will be inserted in between adjacent documents.</span><a id="opt.inline.separator-1"></a>When the <code class="option">separator</code> option is specified, its value will be inserted in between adjacent documents.<a id="opt.inline.separator-1"></a>When the <code class="option">separator</code> option is specified, its value will be inserted in between adjacent documents.</p></li><li><p><span style="display: none;" class="delete_version">When the <code class="option">prefix</code> option is specified, the document appearing on the <code class="port">result</code> port will always start with its value (also when there are no documents on the <code class="port">source</code> port).</span><a id="opt.inline.prefix-1 port.inline.result-34 port.inline.source-58"></a>When the <code class="option">prefix</code> option is specified, the document appearing on the <code class="port">result</code> port will always start with its value (also when there are no documents on the <code class="port">source</code> port).<a id="opt.inline.prefix-1 port.inline.result-34 port.inline.source-58"></a>When the <code class="option">prefix</code> option is specified, the document appearing on the <code class="port">result</code> port will always start with its value (also when there are no documents on the <code class="port">source</code> port).</p></li><li><p><span style="display: none;" class="delete_version">When the <code class="option">suffix</code> option is specified, the document appearing on the <code class="port">result</code> port will always end with its value (also when there are no documents on the <code class="port">source</code> port).</span><a id="opt.inline.suffix-1 port.inline.result-35 port.inline.source-59"></a>When the <code class="option">suffix</code> option is specified, the document appearing on the <code class="port">result</code> port will always end with its value (also when there are no documents on the <code class="port">source</code> port).<a id="opt.inline.suffix-1 port.inline.result-35 port.inline.source-59"></a>When the <code class="option">suffix</code> option is specified, the document appearing on the <code class="port">result</code> port will always end with its value (also when there are no documents on the <code class="port">source</code> port).</p></li></ul></div><p><a id="opt.inline.override-content-type-1 port.inline.result-36 err.inline.D0079.5&#34; err.inline.C0001&#34; opt.inline.override-content-type-2"></a>When the <code class="option">override-content-type</code> option is specified, the document appearing on the port <code class="port">result</code> will have this media type as part of its document properties. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if a supplied content-type is not a valid media type of the form “<code class="literal"><em class="replaceable"><code>type</code></em>/<em class="replaceable"><code>subtype</code></em>+<em class="replaceable"><code>ext</code></em></code>” or “<code class="literal"><em class="replaceable"><code>type</code></em>/<em class="replaceable"><code>subtype</code></em></code>”. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the value of option <code class="option">override-content-type</code> is not a text media type. <a id="opt.inline.override-content-type-1 port.inline.result-36 err.inline.D0079.5&#34; err.inline.C0001&#34; opt.inline.override-content-type-2"></a>When the <code class="option">override-content-type</code> option is specified, the document appearing on the port <code class="port">result</code> will have this media type as part of its document properties. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if a supplied content-type is not a valid media type of the form “<code class="literal"><em class="replaceable"><code>type</code></em>/<em class="replaceable"><code>subtype</code></em>+<em class="replaceable"><code>ext</code></em></code>” or “<code class="literal"><em class="replaceable"><code>type</code></em>/<em class="replaceable"><code>subtype</code></em></code>”. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the value of option <code class="option">override-content-type</code> is not a text media type. </p><p>Concatenating text documents does not require identifying individual lines in each document, consequently no special end-of-line handling is performed.</p><section id="c.text-join.8" class="simplesect"><div class="section-titlepage"><h4>Document properties</h4></div><div class="content"><p>No document properties are preserved. The joined document has no <code class="property">base-uri</code> property. </p></div></section></div></section><section id="c.text-replace" class="section"><div class="section-titlepage"><h3><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.35. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.38. </span></bdi>p:text-replace<a aria-label="§" class="self-link" href="#c.text-replace"></a></h3></div><div class="content"><p>The <code class="code">p:text-replace</code> step replaces all occurrences of substrings in a text document that match a supplied regular expression with a given replacement string.</p><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:text-replace</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">false</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">text</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">false</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">text</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">pattern</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:string</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">     </span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">replacement</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:string</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555"> </span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">flags</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:string?</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                      </span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><div class="declare-step"><p><span class="deltaxml-new" style="background:#90EE90">Summary</span></p><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Input port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.source-60"><span class="deltaxml-new" style="background:#90EE90">source</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">text </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Output port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.result-37"><span class="deltaxml-new" style="background:#90EE90">result</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">text </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Option name</span></th><th><span class="deltaxml-new" style="background:#90EE90">Type</span></th><th><span class="deltaxml-new" style="background:#90EE90">Default value</span></th><th><span class="deltaxml-new" style="background:#90EE90">Required</span></th></tr></thead><tbody><tr><td class="required"><a href="#opt.inline.pattern-1"><span class="deltaxml-new" style="background:#90EE90">pattern</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:string</span></td><td><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">✔ </span></td></tr><tr><td class="required"><a href="#opt.inline.replacement-1"><span class="deltaxml-new" style="background:#90EE90">replacement</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:string</span></td><td><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">✔ </span></td></tr><tr><td><a href="#opt.inline.flags-1"><span class="deltaxml-new" style="background:#90EE90">flags</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:string?</span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td><td><span class="deltaxml-new" style="background:#90EE90"> </span></td></tr></tbody></table><details><summary><span class="deltaxml-new" style="background:#90EE90">Errors</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Error code</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td class="errcode"><a href="#err.inline.C0147.1&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0147</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the specified value is not a valid XPath regular expression.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Declaration</span></summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:text-replace</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">false</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">text</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">false</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">text</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">pattern</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:string</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">     </span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">replacement</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:string</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90"> </span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">flags</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:string?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                      </span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p></details></div><p><span style="display: none;" class="delete_version">The <code class="code">p:text-replace</code> step replaces all occurrences of substrings in the text document appearing on its <code class="port">source</code> port that match a supplied regular expression with a given replacement string. The result is returned (as another text document) on its <code class="port">result</code> port. </span><a id="port.inline.source-60 port.inline.result-37"></a>The <code class="code">p:text-replace</code> step replaces all occurrences of substrings in the text document appearing on its <code class="port">source</code> port that match a supplied regular expression with a given replacement string. The result is returned (as another text document) on its <code class="port">result</code> port. <a id="port.inline.source-60 port.inline.result-37"></a>The <code class="code">p:text-replace</code> step replaces all occurrences of substrings in the text document appearing on its <code class="port">source</code> port that match a supplied regular expression with a given replacement string. The result is returned (as another text document) on its <code class="port">result</code> port. </p><p>This step is a convenience wrapper around the XPath <a href="https://www.w3.org/TR/xpath-functions-31/#func-replace"><code class="function">fn:replace</code></a> function to ease text replacements in the document flow of a pipeline.</p><p><a id="opt.inline.pattern-1 opt.inline.replacement-1 opt.inline.flags-1 opt.inline.pattern-2 err.inline.C0147.1&#34;"></a>The <code class="option">pattern</code>, <code class="option">replacement</code> and <code class="option">flags</code> options are specified the same as the parameters with the same names of the  function. The <code class="option">pattern</code> option <span class="rfc2119" id="c.text-replace.6.6">must</span> be a regular expression as specified in [], section 7.61 “<code class="literal">Regular Expression Syntax</code>”. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the specified value is not a valid XPath regular expression.<a id="opt.inline.pattern-1 opt.inline.replacement-1 opt.inline.flags-1 opt.inline.pattern-2 err.inline.C0147.1&#34;"></a>The <code class="option">pattern</code>, <code class="option">replacement</code> and <code class="option">flags</code> options are specified the same as the parameters with the same names of the  function. The <code class="option">pattern</code> option <span class="rfc2119" id="c.text-replace.6.6">must</span> be a regular expression as specified in [], section 7.61 “<code class="literal">Regular Expression Syntax</code>”. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the specified value is not a valid XPath regular expression.</p><p>Replacing strings in text documents does not require identifying individual lines in each document, consequently no special end-of-line handling is performed.</p><section id="c.text-replace.8" class="simplesect"><div class="section-titlepage"><h4>Document properties</h4></div><div class="content"><p>All document properties are preserved.</p></div></section></div></section><section id="c.text-sort" class="section"><div class="section-titlepage"><h3><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.36. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.39. </span></bdi>p:text-sort<a aria-label="§" class="self-link" href="#c.text-sort"></a></h3></div><div class="content"><p>The <code class="code">p:text-sort</code> step sorts lines in a text document.</p><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:text-sort</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">false</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">text</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">false</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">text</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">sort-key</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:string</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'.'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">       </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">XPathExpression</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">order</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:string</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'ascending'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr values-attr"><span class="deltaxml-old" style="background:#FF5555">values</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value values-value"><span class="deltaxml-old" style="background:#FF5555">('ascending', 'descending')</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">string</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">case-order</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:string?</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr values-attr"><span class="deltaxml-old" style="background:#FF5555">values</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value values-value"><span class="deltaxml-old" style="background:#FF5555">('upper-first', 'lower-first')</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">string</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">lang</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:language?</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                     </span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">collation</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:string</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'https://www.w3.org/2005/xpath-functions/collation/codepoint'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">stable</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:boolean</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">true()</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">     </span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><div class="declare-step"><p><span class="deltaxml-new" style="background:#90EE90">Summary</span></p><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Input port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.source-61"><span class="deltaxml-new" style="background:#90EE90">source</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">text </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Output port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.result-38"><span class="deltaxml-new" style="background:#90EE90">result</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">text </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Option name</span></th><th><span class="deltaxml-new" style="background:#90EE90">Type</span></th><th><span class="deltaxml-new" style="background:#90EE90">Values</span></th><th><span class="deltaxml-new" style="background:#90EE90">Default value</span></th></tr></thead><tbody><tr><td><a href="#opt.inline.case-order-1"><span class="deltaxml-new" style="background:#90EE90">case-order</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:string?</span></td><td><span class="deltaxml-new" style="background:#90EE90">('upper-first', 'lower-first') </span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td></tr><tr><td><a href="#opt.inline.collation-1"><span class="deltaxml-new" style="background:#90EE90">collation</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:string</span></td><td><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">'http://www.w3.org/2005/xpath-functions/collation/codepoint'</span></td></tr><tr><td><a href="#opt.inline.lang-1"><span class="deltaxml-new" style="background:#90EE90">lang</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:language?</span></td><td><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td></tr><tr><td><a href="#opt.inline.order-1"><span class="deltaxml-new" style="background:#90EE90">order</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:string</span></td><td><span class="deltaxml-new" style="background:#90EE90">('ascending', 'descending') </span></td><td><span class="deltaxml-new" style="background:#90EE90">'ascending'</span></td></tr><tr><td><a href="#opt.inline.sort-key-1"><span class="deltaxml-new" style="background:#90EE90">sort-key</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">XPathExpression</span></td><td><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">'.'</span></td></tr><tr><td><a href="#opt.inline.stable-1"><span class="deltaxml-new" style="background:#90EE90">stable</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:boolean</span></td><td><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">true()</span></td></tr></tbody></table><details><summary><span class="deltaxml-new" style="background:#90EE90">Errors</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Error code</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td class="errcode"><a href="#err.inline.C0098&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0098</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if a dynamic XPath error occurred while applying sort-key to a line.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0099&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0099</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the result of applying sort-key to a given line results in a sequence with more than one item.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Implementation details</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Implementation</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td><a href="#impl-56"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">Support for other collations is implementation-defined.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Declaration</span></summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:text-sort</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">false</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">text</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">false</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">text</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">sort-key</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:string</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'.'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">       </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">XPathExpression</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">order</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:string</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'ascending'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr values-attr"><span class="deltaxml-new" style="background:#90EE90">values</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value values-value"><span class="deltaxml-new" style="background:#90EE90">('ascending', 'descending')</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">string</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">case-order</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:string?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr values-attr"><span class="deltaxml-new" style="background:#90EE90">values</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value values-value"><span class="deltaxml-new" style="background:#90EE90">('upper-first', 'lower-first')</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">string</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">lang</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:language?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                     </span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">collation</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:string</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'http://www.w3.org/2005/xpath-functions/collation/codepoint'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">stable</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:boolean</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">true()</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">     </span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p></details></div><p><span style="display: none;" class="delete_version">The <code class="tag-element">p:text-sort</code> step sorts the lines in the text document appearing on its <code class="port">source</code> port and returns the result as another text document on its <code class="port">result</code> port. The sort key is obtained by applying the XPath expression in <code class="option">sort-key</code> to each line in turn.</span><a id="port.inline.source-61 port.inline.result-38 opt.inline.sort-key-1"></a>The <code class="tag-element">p:text-sort</code> step sorts the lines in the text document appearing on its <code class="port">source</code> port and returns the result as another text document on its <code class="port">result</code> port. The sort key is obtained by applying the XPath expression in <code class="option">sort-key</code> to each line in turn.<a id="port.inline.source-61 port.inline.result-38 opt.inline.sort-key-1"></a>The <code class="tag-element">p:text-sort</code> step sorts the lines in the text document appearing on its <code class="port">source</code> port and returns the result as another text document on its <code class="port">result</code> port. The sort key is obtained by applying the XPath expression in <code class="option">sort-key</code> to each line in turn.</p><div class="itemizedlist"><ul><li><p><a id="opt.inline.sort-key-2 port.inline.source-62 port.inline.source-63 err.inline.C0098&#34; err.inline.C0099&#34;"></a>The <code class="option">sort-key</code> is used to obtain a sort key for each of the lines in the document appearing on <code class="port">source</code>. The <code class="code">context item</code> is the line as an instance of <code class="code">xs:string</code>, the <code class="code">context position</code> is the number of the line in the document on port <code class="port">source</code>, the <code class="code">context size</code> is the number of lines in this document. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if a dynamic XPath error occurred while applying sort-key to a line. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the result of applying <code class="code">sort-key</code> to a given line results in a sequence with more than one item. <a id="opt.inline.sort-key-2 port.inline.source-62 port.inline.source-63 err.inline.C0098&#34; err.inline.C0099&#34;"></a>The <code class="option">sort-key</code> is used to obtain a sort key for each of the lines in the document appearing on <code class="port">source</code>. The <code class="code">context item</code> is the line as an instance of <code class="code">xs:string</code>, the <code class="code">context position</code> is the number of the line in the document on port <code class="port">source</code>, the <code class="code">context size</code> is the number of lines in this document. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if a dynamic XPath error occurred while applying sort-key to a line. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the result of applying <code class="code">sort-key</code> to a given line results in a sequence with more than one item. </p></li><li><p><span style="display: none;" class="delete_version">The <code class="option">order</code> option defines whether the lines are processed in ascending or descending order. Its value <span class="rfc2119" id="c.text-sort.5.2.1.2">must</span> be one of <code class="code">ascending</code> or <code class="code">descending</code>. The default is <code class="code">ascending</code>.</span><a id="opt.inline.order-1"></a>The <code class="option">order</code> option defines whether the lines are processed in ascending or descending order. Its value <span class="rfc2119" id="c.text-sort.5.2.1.2">must</span> be one of <code class="code">ascending</code> or <code class="code">descending</code>. The default is <code class="code">ascending</code>.<a id="opt.inline.order-1"></a>The <code class="option">order</code> option defines whether the lines are processed in ascending or descending order. Its value <span class="rfc2119" id="c.text-sort.5.2.1.2">must</span> be one of <code class="code">ascending</code> or <code class="code">descending</code>. The default is <code class="code">ascending</code>.</p></li><li><p><span style="display: none;" class="delete_version">The <code class="option">case-order</code> option defines whether upper-case letters are to be collated before or after lower-case letters. Its value <span class="rfc2119" id="c.text-sort.5.3.1.2">must</span> be one of <code class="code">upper-first</code> or <code class="code">lower-first</code>. The default is language-dependent.</span><a id="opt.inline.case-order-1"></a>The <code class="option">case-order</code> option defines whether upper-case letters are to be collated before or after lower-case letters. Its value <span class="rfc2119" id="c.text-sort.5.3.1.2">must</span> be one of <code class="code">upper-first</code> or <code class="code">lower-first</code>. The default is language-dependent.<a id="opt.inline.case-order-1"></a>The <code class="option">case-order</code> option defines whether upper-case letters are to be collated before or after lower-case letters. Its value <span class="rfc2119" id="c.text-sort.5.3.1.2">must</span> be one of <code class="code">upper-first</code> or <code class="code">lower-first</code>. The default is language-dependent.</p></li><li><p><span style="display: none;" class="delete_version">The <code class="option">lang</code> option defines the language whose collating conventions are to be used. The default depends on the processing environment. Its value must be a valid language code (e.g. <code class="code">en-EN</code>).</span><a id="opt.inline.lang-1"></a>The <code class="option">lang</code> option defines the language whose collating conventions are to be used. The <code class="code"><span class="deltaxml-new" style="background:#90EE90">xs:language</span></code><span class="deltaxml-new" style="background:#90EE90"> data type represents natural language identifiers as defined by [</span><span class="deltaxml-new" style="background:#90EE90">] (currently represented by [</span><span class="deltaxml-new" style="background:#90EE90">] and [</span><span class="deltaxml-new" style="background:#90EE90">] or its successor(s).) The </span>default depends on the processing environment. Its value must be a valid language code (e.g. <code class="code">en-EN</code>).<span class="deltaxml-new" style="background:#90EE90"> </span><a id="opt.inline.lang-1"></a>The <code class="option">lang</code> option defines the language whose collating conventions are to be used. The <code class="code"><span class="deltaxml-new" style="background:#90EE90">xs:language</span></code><span class="deltaxml-new" style="background:#90EE90"> data type represents natural language identifiers as defined by [</span><span class="deltaxml-new" style="background:#90EE90">] (currently represented by [</span><span class="deltaxml-new" style="background:#90EE90">] and [</span><span class="deltaxml-new" style="background:#90EE90">] or its successor(s).) The </span>default depends on the processing environment. Its value must be a valid language code (e.g. <code class="code">en-EN</code>).<span class="deltaxml-new" style="background:#90EE90"> </span></p></li><li><p><span style="display: none;" class="delete_version">The <code class="option">collation</code> option identifies how strings are to be compared with each other. Its value must be a valid collation URI. The only collation XProc processors <span class="rfc2119" id="c.text-sort.5.5.1.2">must</span> support is the Unicode Codepoint Collation <a><span class="delete_version" href="https://www.w3.org/2005/xpath-functions/collation/codepoint/"><code class="code">http://www.w3.org/2005/xpath-functions/collation/codepoint</code></span><span class="modify_version" href="https://www.w3.org/2005/xpath-functions/collation/codepoint/"><code class="code">http://www.w3.org/2005/xpath-functions/collation/codepoint</code></span></a>. This is also its default. <span id="impl-54">Support for other collations is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span></span><a id="opt.inline.collation-1"></a>The <code class="option">collation</code> option identifies how strings are to be compared with each other. Its value must be a valid collation URI. The only collation XProc processors <span class="rfc2119" id="c.text-sort.5.5.1.2">must</span> support is the Unicode Codepoint Collation . This is also its default. <span id="impl-56">Support for other collations is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span><a id="opt.inline.collation-1"></a>The <code class="option">collation</code> option identifies how strings are to be compared with each other. Its value must be a valid collation URI. The only collation XProc processors <span class="rfc2119" id="c.text-sort.5.5.1.2">must</span> support is the Unicode Codepoint Collation . This is also its default. <span id="impl-56">Support for other collations is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span></p></li><li><p><span style="display: none;" class="delete_version">If the <code class="option">stable</code> option is set to <code class="code">false</code> this indicates that there is no requirement to retain the original order of items that have equal values for all the sort keys.</span><a id="opt.inline.stable-1"></a>If the <code class="option">stable</code> option is set to <code class="code">false</code> this indicates that there is no requirement to retain the original order of items that have equal values for all the sort keys.<a id="opt.inline.stable-1"></a>If the <code class="option">stable</code> option is set to <code class="code">false</code> this indicates that there is no requirement to retain the original order of items that have equal values for all the sort keys.</p></li></ul></div><p>Lines are identified as described in <a href="https://www.w3.org/TR/xml/#sec-line-ends">XML, 2.11 End-of-Line Handling</a>. For the purpose of identifying lines, if the very last character in the text document is a newline (&amp;#10;), that newline is ignored. (It is not a separator between that line and a following line that contains no characters.) All lines returned by <code class="tag-element">p:text-sort</code> are terminated with a single newline (&amp;#10;).</p><p><span style="display: none;" class="delete_version">The sort process performed by this step is the same as described in <a href="https://www.w3.org/TR/xslt-30/#xsl-sort">The xsl:sort Element</a>. Options <code class="option">lang</code> and <code class="option">case-order</code> are only taken into consideration if no value is selected for option <code class="option">collation</code>.</span><a id="opt.inline.lang-2 opt.inline.case-order-2 opt.inline.collation-2"></a>The sort process performed by this step is the same as <span class="deltaxml-new" style="background:#90EE90">the process </span>described in <span class="deltaxml-new" style="background:#90EE90">[</span><span class="deltaxml-new" style="background:#90EE90">] for the </span><span class="deltaxml-old" style="background:#FF5555">. Options</span><span class="deltaxml-new" style="background:#90EE90"> element. The options</span> <code class="option">lang</code> and <code class="option">case-order</code> are <span class="deltaxml-old" style="background:#FF5555">only taken into consideration if no value is selected</span><span class="deltaxml-new" style="background:#90EE90">considered only if the value of the</span> <code class="option"><span class="deltaxml-old" style="background:#FF5555">for</span><span class="deltaxml-new" style="background:#90EE90">collation</span></code> option <span class="deltaxml-old" style="background:#FF5555">collation</span><span class="deltaxml-new" style="background:#90EE90">is</span><span class="deltaxml-new" style="background:#90EE90"> the empty sequence</span>.<a id="opt.inline.lang-2 opt.inline.case-order-2 opt.inline.collation-2"></a>The sort process performed by this step is the same as <span class="deltaxml-new" style="background:#90EE90">the process </span>described in <span class="deltaxml-new" style="background:#90EE90">[</span><span class="deltaxml-new" style="background:#90EE90">] for the </span><span class="deltaxml-old" style="background:#FF5555">. Options</span><span class="deltaxml-new" style="background:#90EE90"> element. The options</span> <code class="option">lang</code> and <code class="option">case-order</code> are <span class="deltaxml-old" style="background:#FF5555">only taken into consideration if no value is selected</span><span class="deltaxml-new" style="background:#90EE90">considered only if the value of the</span> <code class="option"><span class="deltaxml-old" style="background:#FF5555">for</span><span class="deltaxml-new" style="background:#90EE90">collation</span></code> option <span class="deltaxml-old" style="background:#FF5555">collation</span><span class="deltaxml-new" style="background:#90EE90">is</span><span class="deltaxml-new" style="background:#90EE90"> the empty sequence</span>.</p><section id="c.text-sort.8" class="simplesect"><div class="section-titlepage"><h4>Document properties</h4></div><div class="content"><p>All document properties are preserved.</p></div></section></div></section><section id="c.text-tail" class="section"><div class="section-titlepage"><h3><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.37. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.40. </span></bdi>p:text-tail<a aria-label="§" class="self-link" href="#c.text-tail"></a></h3></div><div class="content"><p>The <code class="code">p:text-tail</code> step returns lines from the end of a text document.</p><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:text-tail</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">false</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">text</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">false</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">text</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">count</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:integer</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">      </span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><div class="declare-step"><p><span class="deltaxml-new" style="background:#90EE90">Summary</span></p><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Input port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.source-64"><span class="deltaxml-new" style="background:#90EE90">source</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">text </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Output port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.result-39"><span class="deltaxml-new" style="background:#90EE90">result</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">text </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Option name</span></th><th><span class="deltaxml-new" style="background:#90EE90">Type</span></th><th><span class="deltaxml-new" style="background:#90EE90">Required</span></th></tr></thead><tbody><tr><td class="required"><a href="#opt.inline.count-6"><span class="deltaxml-new" style="background:#90EE90">count</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:integer</span></td><td><span class="deltaxml-new" style="background:#90EE90">✔ </span></td></tr></tbody></table><details><summary><span class="deltaxml-new" style="background:#90EE90">Declaration</span></summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:text-tail</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">false</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">text</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">false</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">text</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">count</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:integer</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">      </span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p></details></div><p><span style="display: none;" class="delete_version">The <code class="tag-element">p:text-tail</code> step returns on its <code class="port">result</code> port lines from the text document that appears on its <code class="port">source</code> port:</span><a id="port.inline.result-39 port.inline.source-64"></a>The <code class="tag-element">p:text-tail</code> step returns on its <code class="port">result</code> port lines from the text document that appears on its <code class="port">source</code> port:<a id="port.inline.result-39 port.inline.source-64"></a>The <code class="tag-element">p:text-tail</code> step returns on its <code class="port">result</code> port lines from the text document that appears on its <code class="port">source</code> port:</p><div class="itemizedlist"><ul><li><p><span style="display: none;" class="delete_version">If the <code class="option">count</code> option is positive, the <code class="tag-element">p:text-tail</code> step returns the last <code class="option">count</code> lines</span><a id="opt.inline.count-6 opt.inline.count-7"></a>If the <code class="option">count</code> option is positive, the <code class="tag-element">p:text-tail</code> step returns the last <code class="option">count</code> lines<a id="opt.inline.count-6 opt.inline.count-7"></a>If the <code class="option">count</code> option is positive, the <code class="tag-element">p:text-tail</code> step returns the last <code class="option">count</code> lines</p></li><li><p><span style="display: none;" class="delete_version">If the <code class="option">count</code> option is zero, the <code class="tag-element">p:text-tail</code> step returns all lines</span><a id="opt.inline.count-8"></a>If the <code class="option">count</code> option is zero, the <code class="tag-element">p:text-tail</code> step returns all lines<a id="opt.inline.count-8"></a>If the <code class="option">count</code> option is zero, the <code class="tag-element">p:text-tail</code> step returns all lines</p></li><li><p><span style="display: none;" class="delete_version">If the <code class="option">count</code> option is negative, the <code class="tag-element">p:text-tail</code> step returns all lines except the last <code class="option">count</code> lines</span><a id="opt.inline.count-9 opt.inline.count-10"></a>If the <code class="option">count</code> option is negative, the <code class="tag-element">p:text-tail</code> step returns all lines except the last <code class="option">count</code> lines<a id="opt.inline.count-9 opt.inline.count-10"></a>If the <code class="option">count</code> option is negative, the <code class="tag-element">p:text-tail</code> step returns all lines except the last <code class="option">count</code> lines</p></li></ul></div><p>Lines are identified as described in <a href="https://www.w3.org/TR/xml/#sec-line-ends">XML, 2.11 End-of-Line Handling</a>. All lines returned by <code class="tag-element">p:text-tail</code> are terminated with a single newline (&amp;#10;).</p><section id="c.text-tail.7" class="simplesect"><div class="section-titlepage"><h4>Document properties</h4></div><div class="content"><p>All document properties are preserved.</p></div></section></div></section><section id="c.unarchive" class="section"><div class="section-titlepage"><h3><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.38. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.41. </span></bdi>p:unarchive<a aria-label="§" class="self-link" href="#c.unarchive"></a></h3></div><div class="content"><p><span style="display: none;" class="delete_version">The <code class="code">p:unarchive</code> step outputs on its <code class="port">result</code> port specific entries in an archive (for instance from a zip file).</span><a id="port.inline.result-40"></a>The <code class="code">p:unarchive</code> step outputs on its <code class="port">result</code> port specific entries in an archive (for instance from a zip file).<a id="port.inline.result-40"></a>The <code class="code">p:unarchive</code> step outputs on its <code class="port">result</code> port specific entries in an archive (for instance from a zip file).</p><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:unarchive</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">any</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">false</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">any</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">include-filter</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:string*</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">             </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">RegularExpression</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">exclude-filter</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:string*</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">             </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">RegularExpression</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">format</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:QName?</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                      </span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">parameters</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">map(xs:QName, item()*)?</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">    </span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">relative-to</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:anyURI?</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                </span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">override-content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">array(array(xs:string))?</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><div class="declare-step"><p><span class="deltaxml-new" style="background:#90EE90">Summary</span></p><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Input port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.source-65"><span class="deltaxml-new" style="background:#90EE90">source</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">any </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Output port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.result-41"><span class="deltaxml-new" style="background:#90EE90">result</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td><span class="deltaxml-new" style="background:#90EE90">any </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Option name</span></th><th><span class="deltaxml-new" style="background:#90EE90">Type</span></th><th><span class="deltaxml-new" style="background:#90EE90">Default value</span></th></tr></thead><tbody><tr><td><a href="#opt.inline.exclude-filter-1"><span class="deltaxml-new" style="background:#90EE90">exclude-filter</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">RegularExpression</span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td></tr><tr><td><a href="#opt.inline.format-12"><span class="deltaxml-new" style="background:#90EE90">format</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:QName?</span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td></tr><tr><td><a href="#opt.inline.include-filter-1"><span class="deltaxml-new" style="background:#90EE90">include-filter</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">RegularExpression</span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td></tr><tr><td><a href="#opt.inline.override-content-types-4"><span class="deltaxml-new" style="background:#90EE90">override-content-types</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">array(array(xs:string))?</span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td></tr><tr><td><a href="#opt.inline.parameters-16"><span class="deltaxml-new" style="background:#90EE90">parameters</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">map(xs:QName, item()*)?</span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td></tr><tr><td><a href="#opt.inline.relative-to-8"><span class="deltaxml-new" style="background:#90EE90">relative-to</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:anyURI?</span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td></tr></tbody></table><details><summary><span class="deltaxml-new" style="background:#90EE90">Errors</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Error code</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td class="errcode"><a href="#err.inline.C0079.4&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0079</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the map parameters contains an entry whose key is defined by the implementation and whose value is not valid for that key.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0085.2&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0085</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the format of the archive does not match the specified format, cannot be understood, determined and/or processed.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0120.1&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0120</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the relative-to option is not present and the document on the source port does not have a base URI.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0147.2&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0147</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if a specified value is not a valid XPath regular expression.</span></td></tr><tr><td class="errcode"><a href="#err.inline.D0064.5&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XD0064</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the option is not a valid URI according to .</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Implementation details</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Implementation</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td><a href="#impl-57"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is implementation-defined what other formats are supported.</span></td></tr><tr><td><a href="#impl-58"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is implementation-defined how the step determines the archive's format.</span></td></tr><tr><td><a href="#impl-59"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">The semantics of the keys and the allowed values for these keys are implementation-defined.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Declaration</span></summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:unarchive</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">any</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">false</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">any</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">include-filter</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:string*</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">             </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">RegularExpression</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">exclude-filter</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:string*</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">             </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">RegularExpression</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">format</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:QName?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                      </span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">parameters</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">map(xs:QName, item()*)?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">    </span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">relative-to</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:anyURI?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                </span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">override-content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">array(array(xs:string))?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p></details></div><p>The meaning and interpretation of the <code class="code">p:unarchive</code> step's options is as follows:</p><div class="itemizedlist"><ul><li><p>The format of the archive is determined as follows:</p><div class="itemizedlist"><ul><li><p><span style="display: none;" class="delete_version">If the <code class="option">format</code> option is specified, this determines the format of the archive. Implementations <span class="rfc2119" id="c.unarchive.5.1.2.1.1.2">must</span> support the [<a href="#zip"><span class="abbrev">ZIP</span></a>] format, specified with the value <code class="code">zip</code>. <span id="impl-55">It is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> what other formats are supported.</span></span><a id="opt.inline.format-12"></a>If the <code class="option">format</code> option is specified, this determines the format of the archive. Implementations <span class="rfc2119" id="c.unarchive.5.1.2.1.1.2">must</span> support the [] format, specified with the value <code class="code">zip</code>. <span id="impl-57">It is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> what other formats are supported.</span><a id="opt.inline.format-12"></a>If the <code class="option">format</code> option is specified, this determines the format of the archive. Implementations <span class="rfc2119" id="c.unarchive.5.1.2.1.1.2">must</span> support the [] format, specified with the value <code class="code">zip</code>. <span id="impl-57">It is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> what other formats are supported.</span></p></li><li><p><span style="display: none;" class="delete_version">If no <code class="option">format</code> option is specified or if its value is the empty sequence, the archive's format will be determined by the step, using the <code class="code">content-type</code> document-property of the document on the <code class="port">source</code> port and/or by inspecting its contents. <span id="impl-56">It is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> how the step determines the archive's format.</span> Implementations <span class="rfc2119" id="c.unarchive.5.1.2.2.1.5">should</span> recognize archives in [<a href="#zip"><span class="abbrev">ZIP</span></a>] format. </span><a id="opt.inline.format-13 port.inline.source-65"></a>If no <code class="option">format</code> option is specified or if its value is the empty sequence, the archive's format will be determined by the step, using the <code class="code">content-type</code> document-property of the document on the <code class="port">source</code> port and/or by inspecting its contents. <span id="impl-58">It is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> how the step determines the archive's format.</span> Implementations <span class="rfc2119" id="c.unarchive.5.1.2.2.1.5">should</span> recognize archives in [] format. <a id="opt.inline.format-13 port.inline.source-65"></a>If no <code class="option">format</code> option is specified or if its value is the empty sequence, the archive's format will be determined by the step, using the <code class="code">content-type</code> document-property of the document on the <code class="port">source</code> port and/or by inspecting its contents. <span id="impl-58">It is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> how the step determines the archive's format.</span> Implementations <span class="rfc2119" id="c.unarchive.5.1.2.2.1.5">should</span> recognize archives in [] format. </p></li><li><p><a id="err.inline.C0085.2&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the format of the archive does not match the specified format, cannot be understood, determined and/or processed.<a id="err.inline.C0085.2&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the format of the archive does not match the specified format, cannot be understood, determined and/or processed.</p></li></ul></div></li><li><p><a id="opt.inline.parameters-16 err.inline.C0079.4&#34; opt.inline.parameters-17"></a>The <code class="option">parameters</code> option can be used to supply parameters to control the unarchiving. <span id="impl-59">The semantics of the keys and the allowed values for these keys are <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the map <code class="option">parameters</code> contains an entry whose key is defined by the implementation and whose value is not valid for that key.<a id="opt.inline.parameters-16 err.inline.C0079.4&#34; opt.inline.parameters-17"></a>The <code class="option">parameters</code> option can be used to supply parameters to control the unarchiving. <span id="impl-59">The semantics of the keys and the allowed values for these keys are <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the map <code class="option">parameters</code> contains an entry whose key is defined by the implementation and whose value is not valid for that key.</p></li><li><p><a id="opt.inline.include-filter-1 opt.inline.exclude-filter-1 err.inline.C0147.2&#34;"></a>If present, the value of the <code class="option">include-filter</code> or <code class="option">exclude-filter</code> option <span class="rfc2119" id="c.unarchive.5.3.1.3">must</span> be a sequence of strings, each one representing a regular expressions as specified in [], section 7.61 “<code class="literal">Regular Expression Syntax</code>”. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if a specified value is not a valid XPath regular expression.<a id="opt.inline.include-filter-1 opt.inline.exclude-filter-1 err.inline.C0147.2&#34;"></a>If present, the value of the <code class="option">include-filter</code> or <code class="option">exclude-filter</code> option <span class="rfc2119" id="c.unarchive.5.3.1.3">must</span> be a sequence of strings, each one representing a regular expressions as specified in [], section 7.61 “<code class="literal">Regular Expression Syntax</code>”. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if a specified value is not a valid XPath regular expression.</p><p><span style="display: none;" class="delete_version">If neither the <code class="option">include-filter</code> option nor the <code class="option">exclude-filter</code> option is specified, the <code class="code">p:unarchive</code> step outputs on its <code class="port">result</code> port all entries in the archive.</span><a id="opt.inline.include-filter-2 opt.inline.exclude-filter-2 port.inline.result-41"></a>If neither the <code class="option">include-filter</code> option nor the <code class="option">exclude-filter</code> option is specified, the <code class="code">p:unarchive</code> step outputs on its <code class="port">result</code> port all entries in the archive.<a id="opt.inline.include-filter-2 opt.inline.exclude-filter-2 port.inline.result-41"></a>If neither the <code class="option">include-filter</code> option nor the <code class="option">exclude-filter</code> option is specified, the <code class="code">p:unarchive</code> step outputs on its <code class="port">result</code> port all entries in the archive.</p><p><span style="display: none;" class="delete_version">If the <code class="option">include-filter</code> option or the <code class="option">exclude-filter</code> option is specified, the <code class="code">p:archive</code> step outputs on the <code class="port">result</code> port the entries from the archive that conform to the following rules:</span><a id="opt.inline.include-filter-3 opt.inline.exclude-filter-3 port.inline.result-42"></a>If the <code class="option">include-filter</code> option or the <code class="option">exclude-filter</code> option is specified, the <code class="code">p:archive</code> step outputs on the <code class="port">result</code> port the entries from the archive that conform to the following rules:<a id="opt.inline.include-filter-3 opt.inline.exclude-filter-3 port.inline.result-42"></a>If the <code class="option">include-filter</code> option or the <code class="option">exclude-filter</code> option is specified, the <code class="code">p:archive</code> step outputs on the <code class="port">result</code> port the entries from the archive that conform to the following rules:</p><div class="itemizedlist"><ul><li><p><span style="display: none;" class="delete_version">If any <code class="option">include-filter</code> pattern matches an archive entry's name, the entry is included in the output.</span><a id="opt.inline.include-filter-4"></a>If any <code class="option">include-filter</code> pattern matches an archive entry's name, the entry is included in the output.<a id="opt.inline.include-filter-4"></a>If any <code class="option">include-filter</code> pattern matches an archive entry's name, the entry is included in the output.</p></li><li><p><span style="display: none;" class="delete_version">If any <code class="option">exclude-filter</code> pattern matches an archive entry's name, the entry is excluded in the output.</span><a id="opt.inline.exclude-filter-4"></a>If any <code class="option">exclude-filter</code> pattern matches an archive entry's name, the entry is excluded in the output.<a id="opt.inline.exclude-filter-4"></a>If any <code class="option">exclude-filter</code> pattern matches an archive entry's name, the entry is excluded in the output.</p></li><li><p>If both options are provided, the include filter is processed first, then the exclude filter. </p></li><li><p>Names of entries in archives are always relative names. For instance, the name of a file called <code class="code">xyz.xml</code> in a <code class="code">specs</code> subdirectory in an archive is called in full <code class="code">specs/xyz.xml</code> (and not <code class="code">/specs/xyz.xml</code>).</p></li></ul></div><p><span style="display: none;" class="delete_version">As a result: an item is included if it matches (at least) one of the <code class="option">include-filter</code> values and none of the <code class="option">exclude-filter</code> values.</span><a id="opt.inline.include-filter-5 opt.inline.exclude-filter-5"></a>As a result: an item is included if it matches (at least) one of the <code class="option">include-filter</code> values and none of the <code class="option">exclude-filter</code> values.<a id="opt.inline.include-filter-5 opt.inline.exclude-filter-5"></a>As a result: an item is included if it matches (at least) one of the <code class="option">include-filter</code> values and none of the <code class="option">exclude-filter</code> values.</p><p><span style="display: none;" class="delete_version">The regular expressions specified in the <code class="option">include-filter</code> and <code class="option">exclude-filter</code> options will be matched against the path of the entry <em>in</em> the archive. The matching is done unanchored: it is a match if the regular expression matches part of the entry's path. Informally: matching behaves like applying the XPath <code class="code">matches#2</code> function, like in <code class="code">matches($path-in-archive, $regular-expression)</code>.</span><a id="opt.inline.include-filter-6 opt.inline.exclude-filter-6"></a>The regular expressions specified in the <code class="option">include-filter</code> and <code class="option">exclude-filter</code> options will be matched against the path of the entry <em>in</em> the archive. The matching is done unanchored: it is a match if the regular expression matches part of the entry's path. Informally: matching behaves like applying the XPath <code class="code">matches#2</code> function, like in <code class="code">matches($path-in-archive, $regular-expression)</code>.<a id="opt.inline.include-filter-6 opt.inline.exclude-filter-6"></a>The regular expressions specified in the <code class="option">include-filter</code> and <code class="option">exclude-filter</code> options will be matched against the path of the entry <em>in</em> the archive. The matching is done unanchored: it is a match if the regular expression matches part of the entry's path. Informally: matching behaves like applying the XPath <code class="code">matches#2</code> function, like in <code class="code">matches($path-in-archive, $regular-expression)</code>.</p><div class="note admonition"><h3>Note</h3><div class="admonition-body"><p>Depending on how archives are constructed, the path of an entry in an archive can be with or without a leading slash. Usually it will be without. For archives constructed by <a href="#c.archive"><code class="tag-element">p:archive</code></a> no leading slash will be present.</p></div></div></li><li><p><span style="display: none;" class="delete_version">The <code class="option">relative-to</code> option, when present, is used in creating the base URI of the unarchived documents. If the option is relative, it is made absolute against the base URI of the element on which it is specified (<code class="tag-element">p:with-option</code> or the step in case of a syntactic shortcut value).</span><a id="opt.inline.relative-to-8"></a>The <code class="option">relative-to</code> option, when present, is used in creating the base URI of the unarchived documents. If the option is relative, it is made absolute against the base URI of the element on which it is specified (<code class="tag-element">p:with-option</code> or the step in case of a syntactic shortcut value).<a id="opt.inline.relative-to-8"></a>The <code class="option">relative-to</code> option, when present, is used in creating the base URI of the unarchived documents. If the option is relative, it is made absolute against the base URI of the element on which it is specified (<code class="tag-element">p:with-option</code> or the step in case of a syntactic shortcut value).</p></li><li><p><span style="display: none;" class="delete_version">The <code class="option">override-content-types</code> option can be used to partially override the content-type determination mechanism, as described in <a href="#override-content-type" title="Overriding content types">Section 2.4.1, “Overriding content types”</a>.</span><a id="opt.inline.override-content-types-4"></a>The <code class="option">override-content-types</code> option can be used to partially override the content-type determination mechanism, as described in .<a id="opt.inline.override-content-types-4"></a>The <code class="option">override-content-types</code> option can be used to partially override the content-type determination mechanism, as described in .</p></li></ul></div><p><span style="display: none;" class="delete_version">The base URI of an unarchived document appearing on the <code class="port">result</code> port is: </span><a id="port.inline.result-43"></a>The base URI of an unarchived document appearing on the <code class="port">result</code> port is: <a id="port.inline.result-43"></a>The base URI of an unarchived document appearing on the <code class="port">result</code> port is: </p><div class="itemizedlist"><ul><li><p><span style="display: none;" class="delete_version">If the <code class="option">relative-to</code> option is present: Function <code class="code">p:urify()</code> is called with the value of this option as second parameter (<code class="code">$basedir</code>) and with the relative path of this document as it was in the archive as first parameter</span><a id="opt.inline.relative-to-9"></a>If the <code class="option">relative-to</code> option is present: Function <code class="code">p:urify()</code> is called with the value of this option as second parameter (<code class="code">$basedir</code>) and with the relative path of this document as it was in the archive as first parameter<a id="opt.inline.relative-to-9"></a>If the <code class="option">relative-to</code> option is present: Function <code class="code">p:urify()</code> is called with the value of this option as second parameter (<code class="code">$basedir</code>) and with the relative path of this document as it was in the archive as first parameter</p></li><li><p><span style="display: none;" class="delete_version">If the <code class="option">relative-to</code> option is <em>not</em> present: Function <code class="code">p:urify()</code>is called with the value of the base URI of the archive appended with a “<code class="literal">/</code>” as second parameter (<code class="code">$baseDir</code>) and the relative path of this document as it was in the archive as first parameter</span><a id="opt.inline.relative-to-10"></a>If the <code class="option">relative-to</code> option is <em>not</em> present: Function <code class="code">p:urify()</code>is called with the value of the base URI of the archive appended with a “<code class="literal">/</code>” as second parameter (<code class="code">$baseDir</code>) and the relative path of this document as it was in the archive as first parameter<a id="opt.inline.relative-to-10"></a>If the <code class="option">relative-to</code> option is <em>not</em> present: Function <code class="code">p:urify()</code>is called with the value of the base URI of the archive appended with a “<code class="literal">/</code>” as second parameter (<code class="code">$baseDir</code>) and the relative path of this document as it was in the archive as first parameter</p></li></ul></div><p><a id="err.inline.C0120.1&#34; opt.inline.relative-to-11 port.inline.source-66 err.inline.D0064.5&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the <code class="option">relative-to</code> option is not present and the document on the <code class="port">source</code> port does not have a base URI. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the option is not a valid URI according to [].<a id="err.inline.C0120.1&#34; opt.inline.relative-to-11 port.inline.source-66 err.inline.D0064.5&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the <code class="option">relative-to</code> option is not present and the document on the <code class="port">source</code> port does not have a base URI. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the option is not a valid URI according to [].</p><p>For instance, the base URI of an unarchived file called <code class="code">xyz.xml</code> that resided in the <code class="code">specs</code> subdirectory in an archive with base URI <code class="code">file:///a/b/c.zip</code> will become: </p><div class="itemizedlist"><ul><li><p><span style="display: none;" class="delete_version">With the <code class="option">relative-to</code> option set to <code class="code">file:///x/y/z</code>: <code class="code">file:///x/y/z/specs/xyz.xml</code></span><a id="opt.inline.relative-to-12"></a>With the <code class="option">relative-to</code> option set to <code class="code">file:///x/y/z</code>: <code class="code">file:///x/y/z/specs/xyz.xml</code><a id="opt.inline.relative-to-12"></a>With the <code class="option">relative-to</code> option set to <code class="code">file:///x/y/z</code>: <code class="code">file:///x/y/z/specs/xyz.xml</code></p></li><li><p><span style="display: none;" class="delete_version">Without a <code class="option">relative-to</code> option set: <code class="code">file:///a/b/c.zip/specs/xyz.xml</code></span><a id="opt.inline.relative-to-13"></a>Without a <code class="option">relative-to</code> option set: <code class="code">file:///a/b/c.zip/specs/xyz.xml</code><a id="opt.inline.relative-to-13"></a>Without a <code class="option">relative-to</code> option set: <code class="code">file:///a/b/c.zip/specs/xyz.xml</code></p></li></ul></div><section id="c.unarchive.11" class="simplesect"><div class="section-titlepage"><h4>Document properties</h4></div><div class="content"><p>No document properties are preserved. The <code class="property">base-uri</code> property of each unarchived document is reflective of the base URI of the document. </p></div></section></div></section><section id="c.uncompress" class="section"><div class="section-titlepage"><h3><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.39. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.42. </span></bdi>p:uncompress<a aria-label="§" class="self-link" href="#c.uncompress"></a></h3></div><div class="content"><p><span style="display: none;" class="delete_version">The <code class="tag-element">p:uncompress</code> step expects on its <code class="port">source</code> port a compressed document. It outputs an uncompressed version of this on its <code class="port">result</code> port.</span><a id="port.inline.source-67 port.inline.result-44"></a>The <code class="tag-element">p:uncompress</code> step expects on its <code class="port">source</code> port a compressed document. It outputs an uncompressed version of this on its <code class="port">result</code> port.<a id="port.inline.source-67 port.inline.result-44"></a>The <code class="tag-element">p:uncompress</code> step expects on its <code class="port">source</code> port a compressed document. It outputs an uncompressed version of this on its <code class="port">result</code> port.</p><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:uncompress</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">any</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">false</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">any</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">false</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">format</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:QName?</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                      </span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">parameters</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">map(xs:QName,item()*)?</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">     </span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">content-type</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:string</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'application/octet-stream'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><div class="declare-step"><p><span class="deltaxml-new" style="background:#90EE90">Summary</span></p><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Input port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.source-68"><span class="deltaxml-new" style="background:#90EE90">source</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">any </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Output port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.result-45"><span class="deltaxml-new" style="background:#90EE90">result</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">any </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Option name</span></th><th><span class="deltaxml-new" style="background:#90EE90">Type</span></th><th><span class="deltaxml-new" style="background:#90EE90">Default value</span></th></tr></thead><tbody><tr><td><a href="#opt.inline.content-type-5"><span class="deltaxml-new" style="background:#90EE90">content-type</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:string</span></td><td><span class="deltaxml-new" style="background:#90EE90">'application/octet-stream'</span></td></tr><tr><td><a href="#opt.inline.format-14"><span class="deltaxml-new" style="background:#90EE90">format</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:QName?</span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td></tr><tr><td><a href="#opt.inline.parameters-18"><span class="deltaxml-new" style="background:#90EE90">parameters</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">map(xs:QName,item()*)?</span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td></tr></tbody></table><details><summary><span class="deltaxml-new" style="background:#90EE90">Errors</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Error code</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td class="errcode"><a href="#err.inline.C0079.5&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0079</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the map parameters contains an entry whose key is defined by the implementation and whose value is not valid for that key.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0201&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0201</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the p:uncompress step cannot perform the requested content-type cast.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0202.1&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0202</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the compression format cannot be understood, determined and/or processed.</span></td></tr><tr><td class="errcode"><a href="#err.inline.D0079.6&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XD0079</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if a supplied content-type is not a valid media type of the form “type/subtype+ext” or “type/subtype”.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Implementation details</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Implementation</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td><a href="#impl-60"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is implementation-defined what other formats are supported.</span></td></tr><tr><td><a href="#impl-61"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is implementation-defined how the step determines the compression format.</span></td></tr><tr><td><a href="#impl-62"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">The semantics of the keys and the allowed values for these keys are implementation-defined.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Declaration</span></summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:uncompress</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">any</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">false</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">any</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">false</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">format</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:QName?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                      </span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">parameters</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">map(xs:QName,item()*)?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">     </span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">content-type</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:string</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'application/octet-stream'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p></details></div><p><span style="display: none;" class="delete_version">The compression format of the document appearing on the <code class="port">source</code> port is determined as follows:</span><a id="port.inline.source-68"></a>The compression format of the document appearing on the <code class="port">source</code> port is determined as follows:<a id="port.inline.source-68"></a>The compression format of the document appearing on the <code class="port">source</code> port is determined as follows:</p><div class="itemizedlist"><ul><li><p><a id="opt.inline.format-14 err.inline.C0202.1&#34;"></a>If the <code class="option">format</code> option is specified, this determines the compression format. Implementations <span class="rfc2119" id="c.uncompress.5.1.1.2">must</span> support the [] format, specified with the value <code class="code">gzip</code>. <span id="impl-60">It is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> what other formats are supported.</span>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the compression format cannot be understood, determined and/or processed.<a id="opt.inline.format-14 err.inline.C0202.1&#34;"></a>If the <code class="option">format</code> option is specified, this determines the compression format. Implementations <span class="rfc2119" id="c.uncompress.5.1.1.2">must</span> support the [] format, specified with the value <code class="code">gzip</code>. <span id="impl-60">It is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> what other formats are supported.</span>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the compression format cannot be understood, determined and/or processed.</p></li><li><p><span style="display: none;" class="delete_version">If no <code class="option">format</code> option is specified or its value is the empty sequence, the compression format will be determined by the step, using the <code class="code">content-type</code> document-property of the document on the <code class="port">source</code> port and/or by inspecting its contents. <span id="impl-59">It is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> how the step determines the compression format.</span> Implementations <span class="rfc2119" id="c.uncompress.5.2.1.5">should</span> recognize archives in [<a href="#gzip"><span class="abbrev">GZIP</span></a>] format. </span><a id="opt.inline.format-15 port.inline.source-69"></a>If no <code class="option">format</code> option is specified or its value is the empty sequence, the compression format will be determined by the step, using the <code class="code">content-type</code> document-property of the document on the <code class="port">source</code> port and/or by inspecting its contents. <span id="impl-61">It is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> how the step determines the compression format.</span> Implementations <span class="rfc2119" id="c.uncompress.5.2.1.5">should</span> recognize archives in [] format. <a id="opt.inline.format-15 port.inline.source-69"></a>If no <code class="option">format</code> option is specified or its value is the empty sequence, the compression format will be determined by the step, using the <code class="code">content-type</code> document-property of the document on the <code class="port">source</code> port and/or by inspecting its contents. <span id="impl-61">It is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> how the step determines the compression format.</span> Implementations <span class="rfc2119" id="c.uncompress.5.2.1.5">should</span> recognize archives in [] format. </p></li></ul></div><p><a id="opt.inline.parameters-18 err.inline.C0079.5&#34; opt.inline.parameters-19"></a>The <code class="option">parameters</code> option can be used to supply parameters to control the uncompression. <span id="impl-62">The semantics of the keys and the allowed values for these keys are <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the map <code class="option">parameters</code> contains an entry whose key is defined by the implementation and whose value is not valid for that key.<a id="opt.inline.parameters-18 err.inline.C0079.5&#34; opt.inline.parameters-19"></a>The <code class="option">parameters</code> option can be used to supply parameters to control the uncompression. <span id="impl-62">The semantics of the keys and the allowed values for these keys are <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the map <code class="option">parameters</code> contains an entry whose key is defined by the implementation and whose value is not valid for that key.</p><p>Identification of the uncompressed document's content-type is done as follows:</p><div class="orderedlist"><ol style="list-style: decimal;"><li><p><a id="opt.inline.content-type-5 err.inline.D0079.6&#34; err.inline.C0201&#34;"></a>If the <code class="option">content-type</code> option is specified, the uncompressed document <span class="rfc2119" id="c.uncompress.8.1.1.2">must</span> be interpreted according to that content-type. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if a supplied content-type is not a valid media type of the form “<code class="literal"><em class="replaceable"><code>type</code></em>/<em class="replaceable"><code>subtype</code></em>+<em class="replaceable"><code>ext</code></em></code>” or “<code class="literal"><em class="replaceable"><code>type</code></em>/<em class="replaceable"><code>subtype</code></em></code>”. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the <code class="tag-element">p:uncompress</code> step cannot perform the requested content-type cast. <a id="opt.inline.content-type-5 err.inline.D0079.6&#34; err.inline.C0201&#34;"></a>If the <code class="option">content-type</code> option is specified, the uncompressed document <span class="rfc2119" id="c.uncompress.8.1.1.2">must</span> be interpreted according to that content-type. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if a supplied content-type is not a valid media type of the form “<code class="literal"><em class="replaceable"><code>type</code></em>/<em class="replaceable"><code>subtype</code></em>+<em class="replaceable"><code>ext</code></em></code>” or “<code class="literal"><em class="replaceable"><code>type</code></em>/<em class="replaceable"><code>subtype</code></em></code>”. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the <code class="tag-element">p:uncompress</code> step cannot perform the requested content-type cast. </p></li><li><p><span style="display: none;" class="delete_version"><span id="impl-61">In the absence of an explicit type, the content will be interpreted as content type <code class="code">application/octet-stream</code></span>.</span><span style="display: none;" class="add_version">In the absence of an explicit type, the content will be interpreted as content type <code class="code">application/octet-stream</code>.</span><span class="modify_version">In the absence of an explicit type, the content will be interpreted as content type <code class="code">application/octet-stream</code>.</span></p></li></ol></div><section id="c.uncompress.9" class="simplesect"><div class="section-titlepage"><h4>Document properties</h4></div><div class="content"><p>All document properties are preserved, except for the <code class="code">content-type</code> property which is updated accordingly.</p></div></section></div></section><section id="c.unwrap" class="section"><div class="section-titlepage"><h3><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.40. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.43. </span></bdi>p:unwrap<a aria-label="§" class="self-link" href="#c.unwrap"></a></h3></div><div class="content"><p>The <code class="tag-element">p:unwrap</code> step replaces matched elements with their children.</p><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:unwrap</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">xml html</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">text xml html</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">match</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:string</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'/*'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">         </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">XSLTSelectionPattern</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><div class="declare-step"><p><span class="deltaxml-new" style="background:#90EE90">Summary</span></p><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Input port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.source-70"><span class="deltaxml-new" style="background:#90EE90">source</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">xml html </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Output port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.result-45"><span class="deltaxml-new" style="background:#90EE90">result</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">text xml html </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Option name</span></th><th><span class="deltaxml-new" style="background:#90EE90">Type</span></th><th><span class="deltaxml-new" style="background:#90EE90">Default value</span></th></tr></thead><tbody><tr><td><a href="#opt.inline.match-22"><span class="deltaxml-new" style="background:#90EE90">match</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">XSLTSelectionPattern</span></td><td><span class="deltaxml-new" style="background:#90EE90">'/*'</span></td></tr></tbody></table><details><summary><span class="deltaxml-new" style="background:#90EE90">Errors</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Error code</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td class="errcode"><a href="#err.inline.C0023.8&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0023</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if that pattern matches anything other than the document node or element nodes.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Declaration</span></summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:unwrap</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">xml html</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">text xml html</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">match</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:string</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'/*'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">         </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">XSLTSelectionPattern</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p></details></div><p><a id="opt.inline.match-22 err.inline.C0023.8&#34;"></a>The value of the <code class="option">match</code> option <span class="rfc2119" id="c.unwrap.4.2">must</span> be an XSLTSelectionPattern. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if that pattern matches anything other than the document node or element nodes.<a id="opt.inline.match-22 err.inline.C0023.8&#34;"></a>The value of the <code class="option">match</code> option <span class="rfc2119" id="c.unwrap.4.2">must</span> be an XSLTSelectionPattern. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if that pattern matches anything other than the document node or element nodes.</p><p><span style="display: none;" class="delete_version">Every element in the <code class="port">source</code> document that matches the specified <code class="option">match</code> pattern is replaced by its children, effectively “unwrapping” the children from their parent. Non-element nodes and unmatched elements are passed through unchanged.</span><a id="port.inline.source-70 opt.inline.match-23"></a>Every element in the <code class="port">source</code> document that matches the specified <code class="option">match</code> pattern is replaced by its children, effectively “unwrapping” the children from their parent. Non-element nodes and unmatched elements are passed through unchanged.<a id="port.inline.source-70 opt.inline.match-23"></a>Every element in the <code class="port">source</code> document that matches the specified <code class="option">match</code> pattern is replaced by its children, effectively “unwrapping” the children from their parent. Non-element nodes and unmatched elements are passed through unchanged.</p><div id="note-match-doc" class="note admonition"><h3>Note</h3><div class="admonition-body"><p>The matching applies to the entire document, not just the “top-most” matches. A pattern of the form <code class="literal">h:div</code> will replace <em>all</em><code class="tag-element">h:div</code> elements, not just the top-most ones.</p></div></div><p>This step produces a single document. Special cases:</p><div class="itemizedlist"><ul><li><p>If the document element is unwrapped, the result might not be well-formed XML.</p><p>For instance unwrapping the root element of <code class="code">&lt;!-- COMMENT --&gt;&lt;root-element/&gt;</code> will result in a document node with a single comment node child, which is not well-formed.</p></li><li><p>If a document consisting of only an empty root element is unwrapped, the result will be a document node without children. The result document’s content type will not change.</p></li><li><p>If a document consisting of a root element containing only text is unwrapped, the result will be a document node with a single text node child. The result document’s content type will become “<code class="literal">text/plain</code>”.</p></li></ul></div><p>As specified in the core language specification: if the content type changes, the <code class="code">serialization</code> document property, if present, will be removed.</p><section id="c.unwrap.10" class="simplesect"><div class="section-titlepage"><h4>Document properties</h4></div><div class="content"><p>If the resulting document contains exactly one text node, the <code class="literal">content-type</code> property is changed to <code class="literal">text/plain</code> and the <code class="literal">serialization</code> property is removed, while all other document properties are preserved. In all other cases, all document properties are preserved.</p></div></section></div></section><section id="c.uuid" class="section"><div class="section-titlepage"><h3><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.41. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.44. </span></bdi>p:uuid<a aria-label="§" class="self-link" href="#c.uuid"></a></h3></div><div class="content"><p><span style="display: none;" class="delete_version">The <code class="tag-element">p:uuid</code> step generates a [<a href="#bib.uuid"><span class="abbrev">UUID</span></a>] and injects it into the <code class="port">source</code> document.</span><a id="port.inline.source-71"></a>The <code class="tag-element">p:uuid</code> step generates a [] and injects it into the <code class="port">source</code> document.<a id="port.inline.source-71"></a>The <code class="tag-element">p:uuid</code> step generates a [] and injects it into the <code class="port">source</code> document.</p><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:uuid</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">xml html</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">text xml html</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">match</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:string</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'/*'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">         </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">XSLTSelectionPattern</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">version</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:integer?</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                   </span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><div class="declare-step"><p><span class="deltaxml-new" style="background:#90EE90">Summary</span></p><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Input port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.source-72"><span class="deltaxml-new" style="background:#90EE90">source</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">xml html </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Output port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.result-45"><span class="deltaxml-new" style="background:#90EE90">result</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">text xml html </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Option name</span></th><th><span class="deltaxml-new" style="background:#90EE90">Type</span></th><th><span class="deltaxml-new" style="background:#90EE90">Default value</span></th></tr></thead><tbody><tr><td><a href="#opt.inline.match-24"><span class="deltaxml-new" style="background:#90EE90">match</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">XSLTSelectionPattern</span></td><td><span class="deltaxml-new" style="background:#90EE90">'/*'</span></td></tr><tr><td><a href="#opt.inline.parameters-20"><span class="deltaxml-new" style="background:#90EE90">parameters</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">map(xs:QName, item()*)?</span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td></tr><tr><td><a href="#opt.inline.version-1"><span class="deltaxml-new" style="background:#90EE90">version</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:integer?</span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td></tr></tbody></table><details><summary><span class="deltaxml-new" style="background:#90EE90">Errors</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Error code</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td class="errcode"><a href="#err.inline.C0060&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0060</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the processor does not support the specified version of the UUID algorithm.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Implementation details</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Implementation</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td><a href="#impl-63"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">If the version is not specified, the version of UUID computed is implementation-defined.</span></td></tr><tr><td><a href="#impl-64"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">Support for other versions of UUID is implementation-defined.</span></td></tr><tr><td><a href="#impl-65"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">The names and values of parameters to p:uuid are implementation-defined.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Declaration</span></summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:uuid</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">xml html</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">text xml html</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">match</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:string</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'/*'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">         </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">XSLTSelectionPattern</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">version</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:integer?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                   </span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">parameters</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">map(xs:QName, item()*)?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">    </span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p></details></div><p><span style="display: none;" class="delete_version">The value of the <code class="option">match</code> option must be an XSLTSelectionPattern. The value of the <code class="option">version</code> option must be an integer.</span><a id="opt.inline.match-24 opt.inline.version-1"></a>The value of the <code class="option">match</code> option must be an XSLTSelectionPattern. The value of the <code class="option">version</code> option must be an integer.<a id="opt.inline.match-24 opt.inline.version-1"></a>The value of the <code class="option">match</code> option must be an XSLTSelectionPattern. The value of the <code class="option">version</code> option must be an integer.</p><p><a id="opt.inline.version-2 err.inline.C0060&#34; opt.inline.version-3"></a>If the <code class="option">version</code> is specified, that version of UUID must be computed. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the processor does not support the specified <code class="option">version</code> of the UUID algorithm. <span id="impl-63">If the <a id="opt.inline.version-4"></a><code class="option">version</code> is not specified, the version of UUID computed is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span><a id="opt.inline.version-2 err.inline.C0060&#34; opt.inline.version-3"></a>If the <code class="option">version</code> is specified, that version of UUID must be computed. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the processor does not support the specified <code class="option">version</code> of the UUID algorithm. <span id="impl-63">If the <a id="opt.inline.version-4"></a><code class="option">version</code> is not specified, the version of UUID computed is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span></p><p><span style="display: none;" class="delete_version">Implementations <span class="rfc2119" id="c.uuid.6.1">must</span> support version 4 UUIDs. <span id="impl-63">Support for other versions of UUID, and the mechanism by which the necessary inputs are made available for computing other versions, is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span></span><a id="opt.inline.parameters-20"></a>Implementations <span class="rfc2119" id="c.uuid.6.1">must</span> support version 4 UUIDs. <span id="impl-64">Support for other versions of UUID<span class="deltaxml-old" style="background:#FF5555">,</span><span class="deltaxml-new" style="background:#90EE90"> is</span> <em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em><span class="deltaxml-new" style="background:#90EE90">.</span></span><span class="deltaxml-new" style="background:#90EE90"> Some UUID schemes require additional parameters which may be provided in the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">parameters</span></code><span class="deltaxml-new" style="background:#90EE90"> option. </span><span id="impl-65"><span class="deltaxml-old" style="background:#FF5555">and the mechanism</span><span class="deltaxml-new" style="background:#90EE90">The names and values of</span> <a id="opt.inline.parameters-21"></a><code class="option"><span class="deltaxml-old" style="background:#FF5555">by</span><span class="deltaxml-new" style="background:#90EE90">parameters</span></code> <span class="deltaxml-old" style="background:#FF5555">which</span><span class="deltaxml-new" style="background:#90EE90">to</span> <code class="tag-element"><span class="deltaxml-old" style="background:#FF5555">the</span><span class="deltaxml-new" style="background:#90EE90">p:uuid</span></code> <span class="deltaxml-old" style="background:#FF5555">necessary inputs are made available for computing other versions, is</span><span class="deltaxml-new" style="background:#90EE90">are</span> <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span><a id="opt.inline.parameters-20"></a>Implementations <span class="rfc2119" id="c.uuid.6.1">must</span> support version 4 UUIDs. <span id="impl-64">Support for other versions of UUID<span class="deltaxml-old" style="background:#FF5555">,</span><span class="deltaxml-new" style="background:#90EE90"> is</span> <em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em><span class="deltaxml-new" style="background:#90EE90">.</span></span><span class="deltaxml-new" style="background:#90EE90"> Some UUID schemes require additional parameters which may be provided in the </span><code class="option"><span class="deltaxml-new" style="background:#90EE90">parameters</span></code><span class="deltaxml-new" style="background:#90EE90"> option. </span><span id="impl-65"><span class="deltaxml-old" style="background:#FF5555">and the mechanism</span><span class="deltaxml-new" style="background:#90EE90">The names and values of</span> <a id="opt.inline.parameters-21"></a><code class="option"><span class="deltaxml-old" style="background:#FF5555">by</span><span class="deltaxml-new" style="background:#90EE90">parameters</span></code> <span class="deltaxml-old" style="background:#FF5555">which</span><span class="deltaxml-new" style="background:#90EE90">to</span> <code class="tag-element"><span class="deltaxml-old" style="background:#FF5555">the</span><span class="deltaxml-new" style="background:#90EE90">p:uuid</span></code> <span class="deltaxml-old" style="background:#FF5555">necessary inputs are made available for computing other versions, is</span><span class="deltaxml-new" style="background:#90EE90">are</span> <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span></p><p><span style="display: none;" class="delete_version">The matched nodes are specified with the <em class="glossterm"><a href="#dt-selection-pattern">selection pattern</a></em> in the <code class="option">match</code> option. For each matching node, the generated UUID is used in the output (if more than one node matches, the <em>same</em> UUID is used in each match). Nodes that do not match are copied without change.</span><a id="opt.inline.match-25"></a>The matched nodes are specified with the <em class="glossterm"><a href="#dt-selection-pattern">selection pattern</a></em> in the <code class="option">match</code> option. For each matching node, the generated UUID is used in the output (if more than one node matches, the <em>same</em> UUID is used in each match). Nodes that do not match are copied without change.<a id="opt.inline.match-25"></a>The matched nodes are specified with the <em class="glossterm"><a href="#dt-selection-pattern">selection pattern</a></em> in the <code class="option">match</code> option. For each matching node, the generated UUID is used in the output (if more than one node matches, the <em>same</em> UUID is used in each match). Nodes that do not match are copied without change.</p><p><span style="display: none;" class="delete_version">If the expression given in the <code class="option">match</code> option matches an <em>attribute</em>, the UUID is used as the new value of the attribute in the output. If the attribute is named “<code class="tag-attribute">xml:base</code>”, the base URI of the element <span class="rfc2119" id="c.uuid.8.4">must</span> also be amended accordingly.</span><a id="opt.inline.match-26"></a>If the expression given in the <code class="option">match</code> option matches an <em>attribute</em>, the UUID is used as the new value of the attribute in the output. If the attribute is named “<code class="tag-attribute">xml:base</code>”, the base URI of the element <span class="rfc2119" id="c.uuid.8.4">must</span> also be amended accordingly.<a id="opt.inline.match-26"></a>If the expression given in the <code class="option">match</code> option matches an <em>attribute</em>, the UUID is used as the new value of the attribute in the output. If the attribute is named “<code class="tag-attribute">xml:base</code>”, the base URI of the element <span class="rfc2119" id="c.uuid.8.4">must</span> also be amended accordingly.</p><p><span style="display: none;" class="delete_version">If the document node is matched, the entire document is replaced by a text node with the UUID. What appears on port <code class="port">result</code> is a text document with the text node wrapped in a document node.</span><span style="display: none;" class="add_version">If the document node is matched, the result is a text document.</span><span class="modify_version">If the document node is matched, the <span class="deltaxml-old" style="background:#FF5555">entire document is replaced by a text node with the UUID. What appears on port </span>result is a text document<span class="deltaxml-old" style="background:#FF5555"> with the text node wrapped in a document node</span>.</span></p><p>If the expression matches any other kind of node, the entire node (and <em>not</em> just its contents) is replaced by the UUID.</p><section id="c.uuid.11" class="simplesect"><div class="section-titlepage"><h4>Document properties</h4></div><div class="content"><p>If the resulting document contains exactly one text node, the <code class="literal">content-type</code> property is changed to <code class="literal">text/plain</code> and the <code class="literal">serialization</code> property is removed, while all other document properties are preserved. For other document types, all document properties are preserved.</p></div></section></div></section><section id="c.wrap-sequence" class="section"><div class="section-titlepage"><h3><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.42. </span></bdi><span class="deltaxml-old" style="background:#FF5555">p:wrap-sequence</span><a aria-label="§" class="self-link" href="#c.wrap-sequence"></a></h3></div><div class="content"><p><span class="deltaxml-old" style="background:#FF5555">The </span><code class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:wrap-sequence</span></code><span class="deltaxml-old" style="background:#FF5555"> step accepts a sequence of documents and produces either a single document or a new sequence of documents.</span></p><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:wrap-sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">text xml html</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">application/xml</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">wrapper</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:QName</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">      </span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">group-adjacent</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:string?</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">             </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">XPathExpression</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><p><span class="deltaxml-old" style="background:#FF5555">The value of the </span><code class="option"><span class="deltaxml-old" style="background:#FF5555">group-adjacent</span></code><span class="deltaxml-old" style="background:#FF5555"> option </span><span class="rfc2119" id="c.wrap-sequence.4.2"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be an XPathExpression.</span></p><p><span class="deltaxml-old" style="background:#FF5555">In its simplest form, </span><code class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:wrap-sequence</span></code><span class="deltaxml-old" style="background:#FF5555"> takes a sequence of documents and produces a single, new document by placing each document in the </span><code class="port"><span class="deltaxml-old" style="background:#FF5555">source</span></code><span class="deltaxml-old" style="background:#FF5555"> sequence inside a new document element as sequential siblings. The name of the document element is the value specified in the </span><code class="option"><span class="deltaxml-old" style="background:#FF5555">wrapper</span></code><span class="deltaxml-old" style="background:#FF5555"> option.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><code class="option"><span class="deltaxml-old" style="background:#FF5555">group-adjacent</span></code><span class="deltaxml-old" style="background:#FF5555"> option can be used to group adjacent documents. The XPath context for the </span><code class="option"><span class="deltaxml-old" style="background:#FF5555">group-adjacent</span></code><span class="deltaxml-old" style="background:#FF5555"> option changes over time. For each document that appears on the </span><code class="code"><span class="deltaxml-old" style="background:#FF5555">source</span></code><span class="deltaxml-old" style="background:#FF5555"> port, the expression is evaluated with that document as the context document. The context position (</span><code class="code"><span class="deltaxml-old" style="background:#FF5555">position()</span></code><span class="deltaxml-old" style="background:#FF5555">) is the position of that document within the sequence and the context size (</span><code class="code"><span class="deltaxml-old" style="background:#FF5555">last()</span></code><span class="deltaxml-old" style="background:#FF5555">) is the total number of documents in the sequence. Whenever two or more sequentially adjacent documents have the same “group adjacent” value, they are wrapped together in a single wrapper element. Two “group adjacent” values are the same if the standard XPath function </span><code class="code"><span class="deltaxml-old" style="background:#FF5555">deep-equal()</span></code><span class="deltaxml-old" style="background:#FF5555"> returns true for them.</span></p><section id="c.wrap-sequence.7" class="simplesect"><div class="section-titlepage"><h4><span class="deltaxml-old" style="background:#FF5555">Document properties</span></h4></div><div class="content"><p><span class="deltaxml-old" style="background:#FF5555">No document properties are preserved. The document produced has no </span><code class="property"><span class="deltaxml-old" style="background:#FF5555">base-uri</span></code><span class="deltaxml-old" style="background:#FF5555"> property. </span></p></div></section></div></section><section id="c.wrap" class="section"><div class="section-titlepage"><h3><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.43. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.45. </span></bdi>p:wrap<a aria-label="§" class="self-link" href="#c.wrap"></a></h3></div><div class="content"><p><span style="display: none;" class="delete_version">The <code class="tag-element">p:wrap</code> step wraps matching nodes in the <code class="port">source</code> document with a new parent element.</span><a id="port.inline.source-72"></a>The <code class="tag-element">p:wrap</code> step wraps matching nodes in the <code class="port">source</code> document with a new parent element.<a id="port.inline.source-72"></a>The <code class="tag-element">p:wrap</code> step wraps matching nodes in the <code class="port">source</code> document with a new parent element.</p><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:wrap</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">xml html</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">application/xml</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">wrapper</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:QName</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">      </span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">match</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:string</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">       </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">XSLTSelectionPattern</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">group-adjacent</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:string?</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">             </span></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">XPathExpression</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><div class="declare-step"><p><span class="deltaxml-new" style="background:#90EE90">Summary</span></p><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Input port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.source-73"><span class="deltaxml-new" style="background:#90EE90">source</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">xml html </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Output port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.result-45"><span class="deltaxml-new" style="background:#90EE90">result</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">application/xml </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Option name</span></th><th><span class="deltaxml-new" style="background:#90EE90">Type</span></th><th><span class="deltaxml-new" style="background:#90EE90">Default value</span></th><th><span class="deltaxml-new" style="background:#90EE90">Required</span></th></tr></thead><tbody><tr><td class="required"><a href="#opt.inline.match-27"><span class="deltaxml-new" style="background:#90EE90">match</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">XSLTSelectionPattern</span></td><td><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">✔ </span></td></tr><tr><td class="required"><a href="#opt.inline.wrapper-2"><span class="deltaxml-new" style="background:#90EE90">wrapper</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:QName</span></td><td><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">✔ </span></td></tr><tr><td><a href="#opt.inline.attributes-8"><span class="deltaxml-new" style="background:#90EE90">attributes</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">map(xs:QName, xs:anyAtomicType)?</span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td><td><span class="deltaxml-new" style="background:#90EE90"> </span></td></tr><tr><td><a href="#opt.inline.group-adjacent-1"><span class="deltaxml-new" style="background:#90EE90">group-adjacent</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">XPathExpression</span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td><td><span class="deltaxml-new" style="background:#90EE90"> </span></td></tr></tbody></table><details><summary><span class="deltaxml-new" style="background:#90EE90">Errors</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Error code</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td class="errcode"><a href="#err.inline.C0023.9&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0023</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the pattern matches anything other than document, element, text, processing instruction, and comment nodes.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0059.3&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0059</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the name of any attribute is “xmlns” or uses the prefix “xmlns” or any other prefix that resolves to the namespace name http://www.w3.org/2000/xmlns/.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Declaration</span></summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:wrap</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">xml html</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">application/xml</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">wrapper</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:QName</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">      </span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">match</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:string</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">       </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">XSLTSelectionPattern</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">group-adjacent</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:string?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">             </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">XPathExpression</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">attributes</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">map(xs:QName, xs:anyAtomicType)?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p></details></div><p><a id="opt.inline.match-27 err.inline.C0023.9&#34;"></a>The value of the <code class="option">match</code> option <span class="rfc2119" id="c.wrap.4.2">must</span> be an XSLTSelectionPattern. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the pattern matches anything other than document, element, text, processing instruction, and comment nodes. <a id="opt.inline.match-27 err.inline.C0023.9&#34;"></a>The value of the <code class="option">match</code> option <span class="rfc2119" id="c.wrap.4.2">must</span> be an XSLTSelectionPattern. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the pattern matches anything other than document, element, text, processing instruction, and comment nodes. </p><p><span style="display: none;" class="delete_version">The value of the <code class="option">group-adjacent</code> option <span class="rfc2119" id="c.wrap.5.2">must</span> be an XPathExpression.</span><a id="opt.inline.group-adjacent-1"></a>The value of the <code class="option">group-adjacent</code> option <span class="rfc2119" id="c.wrap.5.2">must</span> be an XPathExpression.<a id="opt.inline.group-adjacent-1"></a>The value of the <code class="option">group-adjacent</code> option <span class="rfc2119" id="c.wrap.5.2">must</span> be an XPathExpression.</p><p><span style="display: none;" class="delete_version">If the node matched is the document node (<code class="code">match="/"</code>), the result is a new document where the document element is a new element node whose QName is the value specified in the <code class="option">wrapper</code> option. That new element contains copies of all of the children of the original document node.</span><a id="opt.inline.wrapper-2"></a>If the node matched is the document node (<code class="code">match="/"</code>), the result is a new document where the document element is a new element node whose QName is the value specified in the <code class="option">wrapper</code> option. That new element contains copies of all of the children of the original document node.<a id="opt.inline.wrapper-2"></a>If the node matched is the document node (<code class="code">match="/"</code>), the result is a new document where the document element is a new element node whose QName is the value specified in the <code class="option">wrapper</code> option. That new element contains copies of all of the children of the original document node.</p><p><span style="display: none;" class="delete_version">When the <em class="glossterm"><a href="#dt-selection-pattern">selection pattern</a></em> does not match the document node, every node that matches the specified <code class="option">match</code> pattern is replaced with a new element node whose QName is the value specified in the <code class="option">wrapper</code> option. The content of that new element is a copy of the original, matching node. The <code class="tag-element">p:wrap</code> step performs a "deep" wrapping, the children of the matching node and their descendants are processed and wrappers are added to all matching nodes. </span><a id="opt.inline.match-28 opt.inline.wrapper-3"></a>When the <em class="glossterm"><a href="#dt-selection-pattern">selection pattern</a></em> does not match the document node, every node that matches the specified <code class="option">match</code> pattern is replaced with a new element node whose QName is the value specified in the <code class="option">wrapper</code> option. The content of that new element is a copy of the original, matching node. The <code class="tag-element">p:wrap</code> step performs a "deep" wrapping, the children of the matching node and their descendants are processed and wrappers are added to all matching nodes. <a id="opt.inline.match-28 opt.inline.wrapper-3"></a>When the <em class="glossterm"><a href="#dt-selection-pattern">selection pattern</a></em> does not match the document node, every node that matches the specified <code class="option">match</code> pattern is replaced with a new element node whose QName is the value specified in the <code class="option">wrapper</code> option. The content of that new element is a copy of the original, matching node. The <code class="tag-element">p:wrap</code> step performs a "deep" wrapping, the children of the matching node and their descendants are processed and wrappers are added to all matching nodes. </p><p><span style="display: none;" class="delete_version">The <code class="option">group-adjacent</code> option can be used to group adjacent matching nodes in a single wrapper element. The specified XPath expression is evaluated for each matching node with that node as the XPath context node. Whenever two or more adjacent matching nodes have the same “group adjacent” value, they are wrapped together in a single wrapper element. Two “group adjacent” values are the same if the standard XPath function <code class="code">deep-equal()</code> returns true for them.</span><a id="opt.inline.group-adjacent-2"></a>The <code class="option">group-adjacent</code> option can be used to group adjacent matching nodes in a single wrapper element. The specified XPath expression is evaluated for each matching node with that node as the XPath context node. Whenever two or more adjacent matching nodes have the same “group adjacent” value, they are wrapped together in a single wrapper element. Two “group adjacent” values are the same if the standard XPath function <code class="code">deep-equal()</code> returns true for them.<a id="opt.inline.group-adjacent-2"></a>The <code class="option">group-adjacent</code> option can be used to group adjacent matching nodes in a single wrapper element. The specified XPath expression is evaluated for each matching node with that node as the XPath context node. Whenever two or more adjacent matching nodes have the same “group adjacent” value, they are wrapped together in a single wrapper element. Two “group adjacent” values are the same if the standard XPath function <code class="code">deep-equal()</code> returns true for them.</p><p>Two matching nodes are considered adjacent if and only if they are siblings and either there are no nodes between them or all intervening, non-matching nodes are whitespace text, comment, or processing instruction nodes.</p><section id="c.wrap.10" class="simplesect"><div class="section-titlepage"><h4><span class="deltaxml-old" style="background:#FF5555">Document properties</span></h4></div><div class="content"><p><span class="deltaxml-old" style="background:#FF5555">All document properties are preserved.</span></p></div></section><p><span class="deltaxml-new" style="background:#90EE90">If the </span><a id="opt.inline.attributes-8"></a><code class="option"><span class="deltaxml-new" style="background:#90EE90">attributes</span></code><span class="deltaxml-new" style="background:#90EE90"> option is used, a new attribute is created on the wrapper element for each entry in the map. The attribute name is taken from the entry's key while the attribute value is taken from the string value of the entry's value.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Namespace declarations cannot be added with the </span><a id="opt.inline.attributes-9"></a><code class="option"><span class="deltaxml-new" style="background:#90EE90">attributes</span></code><span class="deltaxml-new" style="background:#90EE90"> option. </span><a id="err.inline.C0059.3&#34;"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0059"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0059</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the name of any attribute is “</span><code class="code"><span class="deltaxml-new" style="background:#90EE90">xmlns</span></code><span class="deltaxml-new" style="background:#90EE90">” or uses the prefix “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">xmlns</span></code><span class="deltaxml-new" style="background:#90EE90">” or any other prefix that resolves to the namespace name </span><code class="uri"><span class="deltaxml-new" style="background:#90EE90">http://www.w3.org/2000/xmlns/</span></code><span class="deltaxml-new" style="background:#90EE90">. However, if the attributes taken from the </span><a id="opt.inline.attributes-10"></a><code class="option"><span class="deltaxml-new" style="background:#90EE90">attributes</span></code><span class="deltaxml-new" style="background:#90EE90"> use namespaces, prefixes, or prefixes bound to different namespaces, the document produced on the </span><a id="port.inline.result-45"></a><code class="port"><span class="deltaxml-new" style="background:#90EE90">result</span></code><span class="deltaxml-new" style="background:#90EE90"> output port will require namespace fixup.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If an attribute named </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">xml:base</span></code><span class="deltaxml-new" style="background:#90EE90"> is added, the base URI of the element </span><span class="rfc2119" id="c.wrap.12.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> also be amended accordingly.</span></p><section id="c.wrap.13" class="simplesect"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">Document properties</span></h4></div><div class="content"><p><span class="deltaxml-new" style="background:#90EE90">All document properties are preserved.</span></p></div></section></div></section><section id="c.wrap-sequence" class="section"><div class="section-titlepage"><h3><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.46. </span></bdi><span class="deltaxml-new" style="background:#90EE90">p:wrap-sequence</span><a aria-label="§" class="self-link" href="#c.wrap-sequence"></a></h3></div><div class="content"><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:wrap-sequence</span></code><span class="deltaxml-new" style="background:#90EE90"> step accepts a sequence of documents and produces either a single document or a new sequence of documents.</span></p><div class="declare-step"><p><span class="deltaxml-new" style="background:#90EE90">Summary</span></p><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Input port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.source-73"><span class="deltaxml-new" style="background:#90EE90">source</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td><span class="deltaxml-new" style="background:#90EE90">text xml html </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Output port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.result-46"><span class="deltaxml-new" style="background:#90EE90">result</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td><span class="deltaxml-new" style="background:#90EE90">application/xml </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Option name</span></th><th><span class="deltaxml-new" style="background:#90EE90">Type</span></th><th><span class="deltaxml-new" style="background:#90EE90">Default value</span></th><th><span class="deltaxml-new" style="background:#90EE90">Required</span></th></tr></thead><tbody><tr><td class="required"><a href="#opt.inline.wrapper-4"><span class="deltaxml-new" style="background:#90EE90">wrapper</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:QName</span></td><td><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">✔ </span></td></tr><tr><td><a href="#opt.inline.attributes-11"><span class="deltaxml-new" style="background:#90EE90">attributes</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">map(xs:QName, xs:anyAtomicType)?</span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td><td><span class="deltaxml-new" style="background:#90EE90"> </span></td></tr><tr><td><a href="#opt.inline.group-adjacent-3"><span class="deltaxml-new" style="background:#90EE90">group-adjacent</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">XPathExpression</span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td><td><span class="deltaxml-new" style="background:#90EE90"> </span></td></tr></tbody></table><details><summary><span class="deltaxml-new" style="background:#90EE90">Errors</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Error code</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td class="errcode"><a href="#err.inline.C0059.4&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0059</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the name of any attribute is “xmlns” or uses the prefix “xmlns” or any other prefix that resolves to the namespace name http://www.w3.org/2000/xmlns/.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Declaration</span></summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:wrap-sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">text xml html</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">application/xml</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">wrapper</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:QName</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">      </span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">group-adjacent</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:string?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">             </span></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">XPathExpression</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">attributes</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">map(xs:QName, xs:anyAtomicType)?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p></details></div><p><span class="deltaxml-new" style="background:#90EE90">The value of the </span><a id="opt.inline.group-adjacent-3"></a><code class="option"><span class="deltaxml-new" style="background:#90EE90">group-adjacent</span></code><span class="deltaxml-new" style="background:#90EE90"> option </span><span class="rfc2119" id="c.wrap-sequence.4.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be an XPathExpression.</span></p><p><span class="deltaxml-new" style="background:#90EE90">In its simplest form, </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:wrap-sequence</span></code><span class="deltaxml-new" style="background:#90EE90"> takes a sequence of documents and produces a single, new document by placing each document in the </span><a id="port.inline.source-73"></a><code class="port"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90"> sequence inside a new document element as sequential siblings. The name of the document element is the value specified in the </span><a id="opt.inline.wrapper-4"></a><code class="option"><span class="deltaxml-new" style="background:#90EE90">wrapper</span></code><span class="deltaxml-new" style="background:#90EE90"> option.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><a id="opt.inline.group-adjacent-4"></a><code class="option"><span class="deltaxml-new" style="background:#90EE90">group-adjacent</span></code><span class="deltaxml-new" style="background:#90EE90"> option can be used to group adjacent documents. The XPath context for the </span><a id="opt.inline.group-adjacent-5"></a><code class="option"><span class="deltaxml-new" style="background:#90EE90">group-adjacent</span></code><span class="deltaxml-new" style="background:#90EE90"> option changes over time. For each document that appears on the </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90"> port, the expression is evaluated with that document as the context document. The context position (</span><code class="code"><span class="deltaxml-new" style="background:#90EE90">position()</span></code><span class="deltaxml-new" style="background:#90EE90">) is the position of that document within the sequence and the context size (</span><code class="code"><span class="deltaxml-new" style="background:#90EE90">last()</span></code><span class="deltaxml-new" style="background:#90EE90">) is the total number of documents in the sequence. Whenever two or more sequentially adjacent documents have the same “group adjacent” value, they are wrapped together in a single wrapper element. Two “group adjacent” values are the same if the standard XPath function </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">deep-equal()</span></code><span class="deltaxml-new" style="background:#90EE90"> returns true for them.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If the </span><a id="opt.inline.attributes-11"></a><code class="option"><span class="deltaxml-new" style="background:#90EE90">attributes</span></code><span class="deltaxml-new" style="background:#90EE90"> option is used, a new attribute is created on the wrapper element for each entry in the map. The attribute name is taken from the entry's key while the attribute value is taken from the string value of the entry's value.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Namespace declarations cannot be added with the </span><a id="opt.inline.attributes-12"></a><code class="option"><span class="deltaxml-new" style="background:#90EE90">attributes</span></code><span class="deltaxml-new" style="background:#90EE90"> option. </span><a id="err.inline.C0059.4&#34;"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0059"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0059</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the name of any attribute is “</span><code class="code"><span class="deltaxml-new" style="background:#90EE90">xmlns</span></code><span class="deltaxml-new" style="background:#90EE90">” or uses the prefix “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">xmlns</span></code><span class="deltaxml-new" style="background:#90EE90">” or any other prefix that resolves to the namespace name </span><code class="uri"><span class="deltaxml-new" style="background:#90EE90">http://www.w3.org/2000/xmlns/</span></code><span class="deltaxml-new" style="background:#90EE90">. However, if the attributes taken from the </span><a id="opt.inline.attributes-13"></a><code class="option"><span class="deltaxml-new" style="background:#90EE90">attributes</span></code><span class="deltaxml-new" style="background:#90EE90"> use namespaces, prefixes, or prefixes bound to different namespaces, the document produced on the </span><a id="port.inline.result-46"></a><code class="port"><span class="deltaxml-new" style="background:#90EE90">result</span></code><span class="deltaxml-new" style="background:#90EE90"> output port will require namespace fixup.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If an attribute named </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">xml:base</span></code><span class="deltaxml-new" style="background:#90EE90"> is added, the base URI of the element </span><span class="rfc2119" id="c.wrap-sequence.9.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> also be amended accordingly.</span></p><section id="c.wrap-sequence.10" class="simplesect"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">Document properties</span></h4></div><div class="content"><p><span class="deltaxml-new" style="background:#90EE90">No document properties are preserved. The result documents do not have a </span><code class="property"><span class="deltaxml-new" style="background:#90EE90">base-uri</span></code><span class="deltaxml-new" style="background:#90EE90"> property unless one is specified with the </span><a id="opt.inline.attributes-14"></a><code class="option"><span class="deltaxml-new" style="background:#90EE90">attributes</span></code><span class="deltaxml-new" style="background:#90EE90"> option. </span></p></div></section></div></section><section id="c.www-form-urldecode" class="section"><div class="section-titlepage"><h3><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.44. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.47. </span></bdi>p:www-form-urldecode<a aria-label="§" class="self-link" href="#c.www-form-urldecode"></a></h3></div><div class="content"><p>The <code class="tag-element">p:www-form-urldecode</code> step decodes a <code class="literal">x-www-form-urlencoded</code> string into a JSON representation.</p><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:www-form-urldecode</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">application/json</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">value</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:string</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">       </span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><div class="declare-step"><p><span class="deltaxml-new" style="background:#90EE90">Summary</span></p><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Output port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.result-47"><span class="deltaxml-new" style="background:#90EE90">result</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">application/json </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Option name</span></th><th><span class="deltaxml-new" style="background:#90EE90">Type</span></th><th><span class="deltaxml-new" style="background:#90EE90">Required</span></th></tr></thead><tbody><tr><td class="required"><a href="#opt.inline.value-2"><span class="deltaxml-new" style="background:#90EE90">value</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:string</span></td><td><span class="deltaxml-new" style="background:#90EE90">✔ </span></td></tr></tbody></table><details><summary><span class="deltaxml-new" style="background:#90EE90">Errors</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Error code</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td class="errcode"><a href="#err.inline.C0037&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0037</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the value provided is not a properly x-www-form-urlencoded value.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Declaration</span></summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:www-form-urldecode</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">application/json</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">value</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:string</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">       </span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p></details></div><p><span style="display: none;" class="delete_version">A JSON object of the form “<code class="literal">map(xs:string, xs:string+)</code>” will appear on <code class="port">result</code> port. The <code class="option">value</code> option is interpreted as a string of parameter values encoded using the <code class="literal">x-www-form-urlencoded</code> algorithm. Each name/value pair is represented in the JSON object as key/value entry. </span><a id="port.inline.result-47 opt.inline.value-2"></a>A JSON object of the form “<code class="literal">map(xs:string, xs:string+)</code>” will appear on <code class="port">result</code> port. The <code class="option">value</code> option is interpreted as a string of parameter values encoded using the <code class="literal">x-www-form-urlencoded</code> algorithm. Each name/value pair is represented in the JSON object as key/value entry. <a id="port.inline.result-47 opt.inline.value-2"></a>A JSON object of the form “<code class="literal">map(xs:string, xs:string+)</code>” will appear on <code class="port">result</code> port. The <code class="option">value</code> option is interpreted as a string of parameter values encoded using the <code class="literal">x-www-form-urlencoded</code> algorithm. Each name/value pair is represented in the JSON object as key/value entry. </p><p><a id="err.inline.C0037&#34; opt.inline.value-3"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the <code class="option">value</code> provided is not a properly <code class="literal">x-www-form-urlencoded</code> value. <a id="err.inline.C0037&#34; opt.inline.value-3"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the <code class="option">value</code> provided is not a properly <code class="literal">x-www-form-urlencoded</code> value. </p><p>If any parameter name occurs more than once in the encoded string, a sequence will be associated with the respective key. The order in the sequence retains the order of name/value pairs in the encoded string.</p><section id="c.www-form-urldecode.7" class="simplesect"><div class="section-titlepage"><h4>Document properties</h4></div><div class="content"><p>The resulting JSON document has no properties apart from <code class="property">content-type</code>. In particular, it has no <code class="property">base-uri</code>.</p></div></section></div></section><section id="c.www-form-urlencode" class="section"><div class="section-titlepage"><h3><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.45. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.48. </span></bdi>p:www-form-urlencode<a aria-label="§" class="self-link" href="#c.www-form-urlencode"></a></h3></div><div class="content"><p>The <code class="tag-element">p:www-form-urlencode</code> step encodes a set of parameter values as a <code class="literal">x-www-form-urlencoded</code> string.</p><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:www-form-urlencode</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">text/plain</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-req"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">parameters</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr required-attr"><span class="deltaxml-old" style="background:#FF5555">required</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value required-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">map(xs:string,xs:anyAtomicType+)</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><div class="declare-step"><p><span class="deltaxml-new" style="background:#90EE90">Summary</span></p><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Output port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.result-48"><span class="deltaxml-new" style="background:#90EE90">result</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">text/plain </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Option name</span></th><th><span class="deltaxml-new" style="background:#90EE90">Type</span></th><th><span class="deltaxml-new" style="background:#90EE90">Required</span></th></tr></thead><tbody><tr><td class="required"><a href="#opt.inline.parameters-22"><span class="deltaxml-new" style="background:#90EE90">parameters</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">map(xs:string,xs:anyAtomicType+)</span></td><td><span class="deltaxml-new" style="background:#90EE90">✔ </span></td></tr></tbody></table><details><summary><span class="deltaxml-new" style="background:#90EE90">Declaration</span></summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:www-form-urlencode</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">text/plain</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-req"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">parameters</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr required-attr"><span class="deltaxml-new" style="background:#90EE90">required</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value required-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">map(xs:string,xs:anyAtomicType+)</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p></details></div><p><span style="display: none;" class="delete_version">The map entries of <code class="option">parameters</code> option are encoded as a single <code class="literal">x-www-form-urlencoded</code> string of name/value pairs. This string is returned on the <code class="port">result</code> port as a text document. </span><a id="opt.inline.parameters-22 port.inline.result-48"></a>The map entries of <code class="option">parameters</code> option are encoded as a single <code class="literal">x-www-form-urlencoded</code> string of name/value pairs. This string is returned on the <code class="port">result</code> port as a text document. <a id="opt.inline.parameters-22 port.inline.result-48"></a>The map entries of <code class="option">parameters</code> option are encoded as a single <code class="literal">x-www-form-urlencoded</code> string of name/value pairs. This string is returned on the <code class="port">result</code> port as a text document. </p><p><span style="display: none;" class="delete_version">If more than one value is associated with a given key in <code class="option">parameters</code> option, a name/value pair is created for each value.</span><a id="opt.inline.parameters-23"></a>If more than one value is associated with a given key in <code class="option">parameters</code> option, a name/value pair is created for each value.<a id="opt.inline.parameters-23"></a>If more than one value is associated with a given key in <code class="option">parameters</code> option, a name/value pair is created for each value.</p><section id="c.www-form-urlencode.6" class="simplesect"><div class="section-titlepage"><h4>Document properties</h4></div><div class="content"><p>The resulting text document has no properties apart from <code class="property">content-type</code>. In particular, it has no <code class="property">base-uri</code>.</p></div></section></div></section><section id="c.xinclude" class="section"><div class="section-titlepage"><h3><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.46. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.49. </span></bdi>p:xinclude<a aria-label="§" class="self-link" href="#c.xinclude"></a></h3></div><div class="content"><p><span style="display: none;" class="delete_version">The <code class="tag-element">p:xinclude</code> step applies [<a href="#xinclude"><span class="abbrev">XInclude</span></a>] processing to the <code class="port">source</code> document.</span><a id="port.inline.source-74"></a>The <code class="tag-element">p:xinclude</code> step applies [] processing to the <code class="port">source</code> document.<a id="port.inline.source-74"></a>The <code class="tag-element">p:xinclude</code> step applies [] processing to the <code class="port">source</code> document.</p><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:xinclude</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">xml html</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">xml html</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">fixup-xml-base</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:boolean</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">false()</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">fixup-xml-lang</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:boolean</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">false()</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><div class="declare-step"><p><span class="deltaxml-new" style="background:#90EE90">Summary</span></p><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Input port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.source-75"><span class="deltaxml-new" style="background:#90EE90">source</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">xml html </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Output port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.result-49"><span class="deltaxml-new" style="background:#90EE90">result</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">xml html </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Option name</span></th><th><span class="deltaxml-new" style="background:#90EE90">Type</span></th><th><span class="deltaxml-new" style="background:#90EE90">Default value</span></th></tr></thead><tbody><tr><td><a href="#opt.inline.fixup-xml-base-1"><span class="deltaxml-new" style="background:#90EE90">fixup-xml-base</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:boolean</span></td><td><span class="deltaxml-new" style="background:#90EE90">false()</span></td></tr><tr><td><a href="#opt.inline.fixup-xml-lang-1"><span class="deltaxml-new" style="background:#90EE90">fixup-xml-lang</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:boolean</span></td><td><span class="deltaxml-new" style="background:#90EE90">false()</span></td></tr></tbody></table><details><summary><span class="deltaxml-new" style="background:#90EE90">Errors</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Error code</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td class="errcode"><a href="#err.inline.C0029&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0029</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if an XInclude error occurs during processing.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Declaration</span></summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:xinclude</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">xml html</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">xml html</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">fixup-xml-base</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:boolean</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">false()</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">fixup-xml-lang</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:boolean</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">false()</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p></details></div><p><span style="display: none;" class="delete_version">The value of the <code class="option">fixup-xml-base</code> option <span class="rfc2119" id="c.xinclude.4.2">must</span> be a boolean. If it is true, base URI fixup will be performed as per [<a href="#xinclude"><span class="abbrev">XInclude</span></a>].</span><a id="opt.inline.fixup-xml-base-1"></a>The value of the <code class="option">fixup-xml-base</code> option <span class="rfc2119" id="c.xinclude.4.2">must</span> be a boolean. If it is true, base URI fixup will be performed as per [].<a id="opt.inline.fixup-xml-base-1"></a>The value of the <code class="option">fixup-xml-base</code> option <span class="rfc2119" id="c.xinclude.4.2">must</span> be a boolean. If it is true, base URI fixup will be performed as per [].</p><p><span style="display: none;" class="delete_version">The value of the <code class="option">fixup-xml-lang</code> option <span class="rfc2119" id="c.xinclude.5.2">must</span> be a boolean. If it is true, language fixup will be performed as per [<a href="#xinclude"><span class="abbrev">XInclude</span></a>].</span><a id="opt.inline.fixup-xml-lang-1"></a>The value of the <code class="option">fixup-xml-lang</code> option <span class="rfc2119" id="c.xinclude.5.2">must</span> be a boolean. If it is true, language fixup will be performed as per [].<a id="opt.inline.fixup-xml-lang-1"></a>The value of the <code class="option">fixup-xml-lang</code> option <span class="rfc2119" id="c.xinclude.5.2">must</span> be a boolean. If it is true, language fixup will be performed as per [].</p><p>The included documents are located with the base URI of the input document and are not provided as input to the step.</p><p><a id="err.inline.C0029&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if an XInclude error occurs during processing. <a id="err.inline.C0029&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if an XInclude error occurs during processing. </p><section id="c.xinclude.8" class="simplesect"><div class="section-titlepage"><h4>Document properties</h4></div><div class="content"><p>All document properties are preserved.</p></div></section></div></section><section id="c.xquery" class="section"><div class="section-titlepage"><h3><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.47. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.50. </span></bdi>p:xquery<a aria-label="§" class="self-link" href="#c.xquery"></a></h3></div><div class="content"><p><span style="display: none;" class="delete_version">The <code class="tag-element">p:xquery</code> step applies an XQuery query to the sequence of documents provided on the <code class="port">source</code> port.</span><a id="port.inline.source-75"></a>The <code class="tag-element">p:xquery</code> step applies an XQuery query to the sequence of documents provided on the <code class="port">source</code> port.<a id="port.inline.source-75"></a>The <code class="tag-element">p:xquery</code> step applies an XQuery query to the sequence of documents provided on the <code class="port">source</code> port.</p><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:xquery</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">any</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">query</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">text xml</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">any</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">parameters</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">map(xs:QName,item()*)?</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">     </span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">version</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:string?</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                    </span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><div class="declare-step"><p><span class="deltaxml-new" style="background:#90EE90">Summary</span></p><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Input port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.source-76"><span class="deltaxml-new" style="background:#90EE90">source</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td><span class="deltaxml-new" style="background:#90EE90">any </span></td></tr><tr><td><a href="#port.inline.query-1"><span class="deltaxml-new" style="background:#90EE90">query</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">text xml </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Output port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.result-49"><span class="deltaxml-new" style="background:#90EE90">result</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td><span class="deltaxml-new" style="background:#90EE90">any </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Option name</span></th><th><span class="deltaxml-new" style="background:#90EE90">Type</span></th><th><span class="deltaxml-new" style="background:#90EE90">Default value</span></th></tr></thead><tbody><tr><td><a href="#opt.inline.parameters-24"><span class="deltaxml-new" style="background:#90EE90">parameters</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">map(xs:QName,item()*)?</span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td></tr><tr><td><a href="#opt.inline.version-5"><span class="deltaxml-new" style="background:#90EE90">version</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:string?</span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td></tr></tbody></table><details><summary><span class="deltaxml-new" style="background:#90EE90">Errors</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Error code</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td class="errcode"><a href="#err.inline.C0009&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0009</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the specified XQuery version is not available.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0101&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0101</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if a document appearing on port source cannot be represented in the XDM version associated with the chosen XQuery version, e.g. when a JSON document contains a map and XDM 3.0 is used.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0102&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0102</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if any key in option parameters is associated to a value that cannot be represented in the XDM version associated with the chosen XQuery version, e.g. with a map, an array, or a function when XDM 3.0 is used.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0103&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0103</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if any error occurs during XQuery’s static analysis phase.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0104&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0104</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if any error occurs during XQuery’s dynamic evaluation phase.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Implementation details</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Implementation</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td><a href="#impl-66"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">Support for XQueryX is implementation-defined.</span></td></tr><tr><td><a href="#impl-67"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is implementation-defined which XQuery version(s) is/are supported.</span></td></tr><tr><td><a href="#impl-68"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">The point in time returned as the current dateTime is implementation-defined.</span></td></tr><tr><td><a href="#impl-69"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">The implicit timezone is implementation-defined. </span></td></tr><tr><td><a href="#impl-70"><span class="deltaxml-new" style="background:#90EE90">Dependent</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">The set of available documents (those that may be retrieved with a URI) is implementation-dependent.</span></td></tr><tr><td><a href="#impl-71"><span class="deltaxml-new" style="background:#90EE90">Dependent</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">The set of available collections is implementation-dependent.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Declaration</span></summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:xquery</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">any</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">query</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">text xml</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">any</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">parameters</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">map(xs:QName,item()*)?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">     </span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">version</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:string?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                    </span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p></details></div><p><span style="display: none;" class="delete_version">If a sequence of documents is provided on the <code class="port">source</code> port, the first document is used as the initial context item. The whole sequence is also the default collection. If no documents are provided on the <code class="port">source</code> port, the initial context item is undefined and the default collection is empty.</span><a id="port.inline.source-76 port.inline.source-77"></a>If a sequence of documents is provided on the <code class="port">source</code> port, the first document is used as the initial context item. The whole sequence is also the default collection. If no documents are provided on the <code class="port">source</code> port, the initial context item is undefined and the default collection is empty.<a id="port.inline.source-76 port.inline.source-77"></a>If a sequence of documents is provided on the <code class="port">source</code> port, the first document is used as the initial context item. The whole sequence is also the default collection. If no documents are provided on the <code class="port">source</code> port, the initial context item is undefined and the default collection is empty.</p><p><span style="display: none;" class="delete_version">The <code class="port">query</code> port must receive a single document which is either an XML document or a text document. A text document <span class="rfc2119" id="c.xquery.5.2">must</span> be treated as the query. For an XML document the following rules apply:</span><a id="port.inline.query-1"></a>The <code class="port">query</code> port must receive a single document which is either an XML document or a text document. A text document <span class="rfc2119" id="c.xquery.5.2">must</span> be treated as the query. For an XML document the following rules apply:<a id="port.inline.query-1"></a>The <code class="port">query</code> port must receive a single document which is either an XML document or a text document. A text document <span class="rfc2119" id="c.xquery.5.2">must</span> be treated as the query. For an XML document the following rules apply:</p><div class="itemizedlist"><ul><li><p>If the document root element is <a href="#cv.query"><code id="cv.query" class="tag-element">c:query</code></a>, the text descendants of this element are considered the query.</p><p class="element-syntax element-syntax-step-vocabulary"><code>&lt;c:query&gt;<br />    <var>string</var><br />&lt;/c:query&gt;</code></p></li><li><p><span style="display: none;" class="delete_version">If the document root element is in the XQueryX namespace, the document is treated as an XQueryX-encoded query. <span id="impl-64">Support for XQueryX is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span></span><span style="display: none;" class="add_version">If the document root element is in the XQueryX namespace, the document is treated as an XQueryX-encoded query. <span id="impl-66">Support for XQueryX is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span></span><span class="modify_version">If the document root element is in the XQueryX namespace, the document is treated as an XQueryX-encoded query. <span id="impl-66">Support for XQueryX is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span></span></p></li><li><p>Otherwise the serialization of the document <span class="rfc2119" id="c.xquery.6.3.1.1">must</span> be treated as the query. The document's serialization property (if present) is used.</p></li></ul></div><p><a id="opt.inline.version-5 err.inline.C0009&#34;"></a>If the step specifies a <code class="option">version</code>, then that version of XQuery <span class="rfc2119" id="c.xquery.7.2">must</span> be used to process the transformation. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the specified XQuery version is not available. If the step does not specify a version, the implementation may use any version it has available and may use any means to determine what version to use, including, but not limited to, examining the version of the query.<span id="impl-67">It is <em class="glossterm"><a href="#dt-implementation-defined">implementation<span class="deltaxml-old" style="background:#FF5555"> </span><span class="deltaxml-new" style="background:#90EE90">-</span>defined</a></em> which XQuery version(s) is/are supported.</span><a id="opt.inline.version-5 err.inline.C0009&#34;"></a>If the step specifies a <code class="option">version</code>, then that version of XQuery <span class="rfc2119" id="c.xquery.7.2">must</span> be used to process the transformation. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the specified XQuery version is not available. If the step does not specify a version, the implementation may use any version it has available and may use any means to determine what version to use, including, but not limited to, examining the version of the query.<span id="impl-67">It is <em class="glossterm"><a href="#dt-implementation-defined">implementation<span class="deltaxml-old" style="background:#FF5555"> </span><span class="deltaxml-new" style="background:#90EE90">-</span>defined</a></em> which XQuery version(s) is/are supported.</span></p><p><span style="display: none;" class="delete_version">The name/value pairs in option <code class="option">parameters</code> are used to set the query’s external variables.</span><a id="opt.inline.parameters-24"></a>The name/value pairs in option <code class="option">parameters</code> are used to set the query’s external variables.<a id="opt.inline.parameters-24"></a>The name/value pairs in option <code class="option">parameters</code> are used to set the query’s external variables.</p><p><a id="err.inline.C0101&#34; port.inline.source-78 err.inline.C0102&#34; opt.inline.parameters-25"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if a document appearing on port <code class="port">source</code> cannot be represented in the XDM version associated with the chosen XQuery version, e.g. when a JSON document contains a map and XDM 3.0 is used. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if any key in option <code class="option">parameters</code> is associated to a value that cannot be represented in the XDM version associated with the chosen XQuery version, e.g. with a map, an array, or a function when XDM 3.0 is used.<a id="err.inline.C0101&#34; port.inline.source-78 err.inline.C0102&#34; opt.inline.parameters-25"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if a document appearing on port <code class="port">source</code> cannot be represented in the XDM version associated with the chosen XQuery version, e.g. when a JSON document contains a map and XDM 3.0 is used. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if any key in option <code class="option">parameters</code> is associated to a value that cannot be represented in the XDM version associated with the chosen XQuery version, e.g. with a map, an array, or a function when XDM 3.0 is used.</p><p><a id="err.inline.C0103&#34; err.inline.C0104&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if any error occurs during XQuery’s static analysis phase. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if any error occurs during XQuery’s dynamic evaluation phase.<a id="err.inline.C0103&#34; err.inline.C0104&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if any error occurs during XQuery’s static analysis phase. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if any error occurs during XQuery’s dynamic evaluation phase.</p><p>The output of this step <span class="rfc2119" id="c.xquery.11.1">may</span> include PSVI annotations.</p><p>The static context of the XQuery processor is augmented in the following way:</p><div class="variablelist"><dl><dt><span class="term">Statically known default collection type</span></dt><dd><p><code class="literal">document()*</code></p></dd><dt><span class="term">Statically known namespaces:</span></dt><dd><p>Unchanged from the implementation defaults. No namespace declarations in the XProc pipeline are automatically exposed in the static context. </p></dd></dl></div><p>The dynamic context of the XQuery processor is augmented in the following way:</p><div class="variablelist"><dl><dt><span class="term">Context item</span></dt><dd><p><span style="display: none;" class="delete_version">The first document that appears on the <code class="port">source</code> port. </span><a id="port.inline.source-79"></a>The first document that appears on the <code class="port">source</code> port. <a id="port.inline.source-79"></a>The first document that appears on the <code class="port">source</code> port. </p></dd><dt><span class="term">Context position</span></dt><dd><p><code class="literal">1</code></p></dd><dt><span class="term">Context size</span></dt><dd><p><code class="literal">1</code></p></dd><dt><span class="term">Variable values</span></dt><dd><p><span style="display: none;" class="delete_version">Any parameters passed in the <code class="option">parameters</code> option augment any implementation-defined variable bindings known to the XQuery processor. </span><a id="opt.inline.parameters-26"></a>Any parameters passed in the <code class="option">parameters</code> option augment any implementation-defined variable bindings known to the XQuery processor. <a id="opt.inline.parameters-26"></a>Any parameters passed in the <code class="option">parameters</code> option augment any implementation-defined variable bindings known to the XQuery processor. </p></dd><dt><span class="term">Function implementations</span></dt><dd><p>The function implementations provided by the XQuery processor.</p></dd><dt><span class="term">Current dateTime</span></dt><dd><p><span style="display: none;" class="delete_version"><span id="impl-66">The point in time returned as the current dateTime is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span></span><span style="display: none;" class="add_version"><span id="impl-68">The point in time returned as the current dateTime is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span></span><span class="modify_version"><span id="impl-68">The point in time returned as the current dateTime is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span></span></p></dd><dt><span class="term">Implicit timezone</span></dt><dd><p><span style="display: none;" class="delete_version"><span id="impl-67">The implicit timezone is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>. </span></span><span style="display: none;" class="add_version"><span id="impl-69">The implicit timezone is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>. </span></span><span class="modify_version"><span id="impl-69">The implicit timezone is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>. </span></span></p></dd><dt><span class="term">Available documents</span></dt><dd><p><span style="display: none;" class="delete_version"><span id="impl-68">The set of available documents (those that may be retrieved with a URI) is <em class="glossterm"><a href="#dt-implementation-dependent">implementation-dependent</a></em>.</span></span><span style="display: none;" class="add_version"><span id="impl-70">The set of available documents (those that may be retrieved with a URI) is <em class="glossterm"><a href="#dt-implementation-dependent">implementation-dependent</a></em>.</span></span><span class="modify_version"><span id="impl-70">The set of available documents (those that may be retrieved with a URI) is <em class="glossterm"><a href="#dt-implementation-dependent">implementation-dependent</a></em>.</span></span></p></dd><dt><span class="term">Available collections</span></dt><dd><p><span style="display: none;" class="delete_version"><span id="impl-69">The set of available collections is <em class="glossterm"><a href="#dt-implementation-dependent">implementation-dependent</a></em>.</span></span><span style="display: none;" class="add_version"><span id="impl-71">The set of available collections is <em class="glossterm"><a href="#dt-implementation-dependent">implementation-dependent</a></em>.</span></span><span class="modify_version"><span id="impl-71">The set of available collections is <em class="glossterm"><a href="#dt-implementation-dependent">implementation-dependent</a></em>.</span></span></p></dd><dt><span class="term">Default collection</span></dt><dd><p><span style="display: none;" class="delete_version">The sequence of documents provided on the <code class="port">source</code> port. </span><a id="port.inline.source-80"></a>The sequence of documents provided on the <code class="port">source</code> port. <a id="port.inline.source-80"></a>The sequence of documents provided on the <code class="port">source</code> port. </p></dd></dl></div><section id="example-xquery" class="section tocsuppress"><div class="section-titlepage"><h4><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.47.1. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.50.1. </span></bdi>Example<a aria-label="§" class="self-link" href="#example-xquery"></a></h4></div><div class="content"><p>The following pipeline applies XInclude processing and schema validation before using XQuery:</p><figure id="ex.c.xquery" class="example-wrapper"><div class="title">Example 1. A Sample Pipeline Document</div><div class="example"><pre class="programlisting language-markup xml"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step xmlns:p="http://www.w3.org/ns/xproc" version="3.0"&gt; &lt;p:input port="source"/&gt; &lt;p:output port="result"/&gt; &lt;p:xinclude/&gt; &lt;p:validate-with-xml-schema name="validate"&gt; &lt;p:with-input port="schema" href="http://example.com/path/to/schema.xsd"/&gt; &lt;/p:validate-with-xml-schema&gt; &lt;p:xquery&gt; &lt;p:with-input port="query" href="countp.xq"/&gt; &lt;/p:xquery&gt; &lt;/p:declare-step&gt;</span></code></pre><pre class="programlisting language-markup xml"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step xmlns:p="http://www.w3.org/ns/xproc" version="3.1"&gt; &lt;p:input port="source"/&gt; &lt;p:output port="result"/&gt; &lt;p:xinclude/&gt; &lt;p:validate-with-xml-schema name="validate"&gt; &lt;p:with-input port="schema" href="http://example.com/path/to/schema.xsd"/&gt; &lt;/p:validate-with-xml-schema&gt; &lt;p:xquery&gt; &lt;p:with-input port="query" href="countp.xq"/&gt; &lt;/p:xquery&gt; &lt;/p:declare-step&gt;</span></code></pre></div></figure><p>Where <code class="filename">countp.xq</code> might contain:</p><pre class="programlisting language-markup xml"><code>&lt;count&gt;{count(.//p)}&lt;/count&gt;</code></pre></div></section><section id="c.xquery.17" class="section"><div class="section-titlepage"><h4><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.47.2. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.50.2. </span></bdi>Document properties<a aria-label="§" class="self-link" href="#"></a></h4></div><div class="content"><p>No document properties are preserved. The <code class="property">base-uri</code> property of each document will reflect the base URI specified by the query. If the query does not establish a base URI, the document will not have one. </p></div></section></div></section><section id="c.xslt" class="section"><div class="section-titlepage"><h3><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.48. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.51. </span></bdi>p:xslt<a aria-label="§" class="self-link" href="#c.xslt"></a></h3></div><div class="content"><p>The <code class="tag-element">p:xslt</code> step invokes an XSLT stylesheet.</p><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:xslt</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">any</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">stylesheet</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">xml</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">any</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">secondary</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">any</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">parameters</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">map(xs:QName,item()*)?</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">     </span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">static-parameters</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">map(xs:QName,item()*)?</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">global-context-item</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">item()?</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">           </span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">populate-default-collection</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:boolean?</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">true()</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">initial-mode</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:QName?</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                </span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">template-name</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:QName?</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">               </span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">output-base-uri</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:anyURI?</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">            </span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">version</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:string?</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                    </span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p><div class="declare-step"><p><span class="deltaxml-new" style="background:#90EE90">Summary</span></p><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Input port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.source-81"><span class="deltaxml-new" style="background:#90EE90">source</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td><span class="deltaxml-new" style="background:#90EE90">any </span></td></tr><tr><td><a href="#port.inline.stylesheet-1"><span class="deltaxml-new" style="background:#90EE90">stylesheet</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">xml </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Output port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.result-49"><span class="deltaxml-new" style="background:#90EE90">result</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td><span class="deltaxml-new" style="background:#90EE90">any </span></td></tr><tr><td><a href="#port.inline.secondary-1"><span class="deltaxml-new" style="background:#90EE90">secondary</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td><span class="deltaxml-new" style="background:#90EE90">any </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Option name</span></th><th><span class="deltaxml-new" style="background:#90EE90">Type</span></th><th><span class="deltaxml-new" style="background:#90EE90">Default value</span></th></tr></thead><tbody><tr><td><a href="#opt.inline.global-context-item-1"><span class="deltaxml-new" style="background:#90EE90">global-context-item</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">item()?</span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td></tr><tr><td><a href="#opt.inline.initial-mode-1"><span class="deltaxml-new" style="background:#90EE90">initial-mode</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:QName?</span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td></tr><tr><td><a href="#opt.inline.output-base-uri-1"><span class="deltaxml-new" style="background:#90EE90">output-base-uri</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:anyURI?</span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td></tr><tr><td><a href="#opt.inline.parameters-27"><span class="deltaxml-new" style="background:#90EE90">parameters</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">map(xs:QName,item()*)?</span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td></tr><tr><td><a href="#opt.inline.populate-default-collection-1"><span class="deltaxml-new" style="background:#90EE90">populate-default-collection</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:boolean?</span></td><td><span class="deltaxml-new" style="background:#90EE90">true()</span></td></tr><tr><td><a href="#opt.inline.static-parameters-1"><span class="deltaxml-new" style="background:#90EE90">static-parameters</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">map(xs:QName,item()*)?</span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td></tr><tr><td><a href="#opt.inline.template-name-1"><span class="deltaxml-new" style="background:#90EE90">template-name</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:QName?</span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td></tr><tr><td><a href="#opt.inline.version-6"><span class="deltaxml-new" style="background:#90EE90">version</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:string?</span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td></tr></tbody></table><details><summary><span class="deltaxml-new" style="background:#90EE90">Errors</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Error code</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td class="errcode"><a href="#err.inline.C0007&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0007</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if any key in parameters is associated to a value which is not an instance of the XQuery 1.0 and XPath 2.0 Data Model, e.g. with a map, an array, or a function.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0008&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0008</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the stylesheet does not support a given mode.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0038&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0038</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the specified xslt version is not available.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0039&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0039</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the source port does not contain exactly one XML document or one HTML document if XSLT 1.0 is used.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0056&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0056</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the stylesheet does not provide a given template.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0093&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0093</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90"> It is a dynamic error if a static error occurs during the static analysis of the XSLT stylesheet.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0094&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0094</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if any document supplied on the source port is not an XML document, an HTML documents, or a Text document if XSLT 2.0 is used.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0095&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0095</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if an error occurred during the transformation.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0096&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0096</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the transformation is terminated by XSLT message termination.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0105&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0105</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if an XSLT 1.0 stylesheet is invoked and option parameters contains a value that is not an atomic value or a node.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0121&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0121</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if a document appearing on the secondary port has a base URI that is not both absolute and valid according to .</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Implementation details</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Implementation</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td><a href="#impl-72"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is implementation-defined which XSLT version(s) is/are supported.</span></td></tr><tr><td><a href="#impl-73"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">Whether static parameters are supported is implementation-defined and depends on the XSLT version (which must be 3.0 or higher).</span></td></tr><tr><td><a href="#impl-74"><span class="deltaxml-new" style="background:#90EE90">Dependent</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">How XSLT message termination errors are reported to the XProc processor is implementation-dependent.</span></td></tr><tr><td><a href="#impl-75"><span class="deltaxml-new" style="background:#90EE90">Dependent</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">The order in which result documents appear on the secondary port is implementation-dependent.</span></td></tr><tr><td><a href="#impl-76"><span class="deltaxml-new" style="background:#90EE90">Dependent</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">The order in which result documents appear on the secondary port is implementation-dependent.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Declaration</span></summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:xslt</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">any</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">stylesheet</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">xml</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">any</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">secondary</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">any</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">parameters</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">map(xs:QName,item()*)?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">     </span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">static-parameters</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">map(xs:QName,item()*)?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">global-context-item</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">item()?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">           </span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">populate-default-collection</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:boolean?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">true()</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">initial-mode</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:QName?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                </span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">template-name</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:QName?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">               </span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">output-base-uri</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:anyURI?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">            </span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">version</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:string?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                    </span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p></details></div><p><span style="display: none;" class="delete_version">If <code class="option">output-base-uri</code> is relative, it is made absolute against the base URI of the element on which it is specified (<code class="tag-element">p:with-option</code> or <code class="tag-element">p:xslt</code> in the case of a syntactic shortcut value).</span><a id="opt.inline.output-base-uri-1"></a>If <code class="option">output-base-uri</code> is relative, it is made absolute against the base URI of the element on which it is specified (<code class="tag-element">p:with-option</code> or <code class="tag-element">p:xslt</code> in the case of a syntactic shortcut value).<a id="opt.inline.output-base-uri-1"></a>If <code class="option">output-base-uri</code> is relative, it is made absolute against the base URI of the element on which it is specified (<code class="tag-element">p:with-option</code> or <code class="tag-element">p:xslt</code> in the case of a syntactic shortcut value).</p><p><a id="opt.inline.version-6 err.inline.C0038&#34;"></a>If the step specifies a <code class="option">version</code>, then that version of XSLT <span class="rfc2119" id="c.xslt.5.2">must</span> be used to process the transformation. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the specified xslt version is not available. If the step does not specify a version, the implementation may use any version it has available and may use any means to determine what version to use, including, but not limited to, examining the version of the stylesheet. <span id="impl-72">It is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> which XSLT version(s) is/are supported.</span><a id="opt.inline.version-6 err.inline.C0038&#34;"></a>If the step specifies a <code class="option">version</code>, then that version of XSLT <span class="rfc2119" id="c.xslt.5.2">must</span> be used to process the transformation. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the specified xslt version is not available. If the step does not specify a version, the implementation may use any version it has available and may use any means to determine what version to use, including, but not limited to, examining the version of the stylesheet. <span id="impl-72">It is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> which XSLT version(s) is/are supported.</span></p><p><a id="port.inline.stylesheet-1 err.inline.C0093&#34; opt.inline.parameters-27"></a>The XSLT stylesheet provided on the <code class="port">stylesheet</code> port is invoked.  It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if a static error occurs during the static analysis of the XSLT stylesheet. Any parameters passed in the <code class="option">parameters</code> option are used to define top-level stylesheet parameters.<a id="port.inline.stylesheet-1 err.inline.C0093&#34; opt.inline.parameters-27"></a>The XSLT stylesheet provided on the <code class="port">stylesheet</code> port is invoked.  It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if a static error occurs during the static analysis of the XSLT stylesheet. Any parameters passed in the <code class="option">parameters</code> option are used to define top-level stylesheet parameters.</p><p><span style="display: none;" class="delete_version">Parameters passed in the <code class="option">static-parameters</code> option are passed as static parameters to the XSLT invocation. <span id="impl-71">Whether static parameters are supported is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> and depends on the XSLT version (which must be 3.0 or higher).</span> If static parameters are not supported the option is ignored.</span><a id="opt.inline.static-parameters-1"></a>Parameters passed in the <code class="option">static-parameters</code> option are passed as static parameters to the XSLT invocation. <span id="impl-73">Whether static parameters are supported is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> and depends on the XSLT version (which must be 3.0 or higher).</span> If static parameters are not supported the option is ignored.<a id="opt.inline.static-parameters-1"></a>Parameters passed in the <code class="option">static-parameters</code> option are passed as static parameters to the XSLT invocation. <span id="impl-73">Whether static parameters are supported is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> and depends on the XSLT version (which must be 3.0 or higher).</span> If static parameters are not supported the option is ignored.</p><p><a id="err.inline.C0095&#34; err.inline.C0096&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if an error occurred during the transformation. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the transformation is terminated by XSLT message termination. <span id="impl-74">How XSLT message termination errors are reported to the XProc processor is <em class="glossterm"><a href="#dt-implementation-dependent">implementation-dependent</a></em>.</span> Implementations <span class="rfc2119" id="c.xslt.8.4">should</span> raise an error using the error code from the XSLT step (for example, the <code class="tag-attribute">error-code</code> specified on the <code class="tag-element">xsl:message</code> or <code class="code">Q{http://www.w3.org/2005/xqt-errors}XTTM9000</code> if no code is provided).<a id="err.inline.C0095&#34; err.inline.C0096&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if an error occurred during the transformation. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the transformation is terminated by XSLT message termination. <span id="impl-74">How XSLT message termination errors are reported to the XProc processor is <em class="glossterm"><a href="#dt-implementation-dependent">implementation-dependent</a></em>.</span> Implementations <span class="rfc2119" id="c.xslt.8.4">should</span> raise an error using the error code from the XSLT step (for example, the <code class="tag-attribute">error-code</code> specified on the <code class="tag-element">xsl:message</code> or <code class="code">Q{http://www.w3.org/2005/xqt-errors}XTTM9000</code> if no code is provided).</p><p>If XSLT 2.0 or XSLT 3.0 is used, the outputs of this step <span class="rfc2119" id="c.xslt.9.1">may</span> include PSVI annotations.</p><p>The interpretation of the input and output ports as well as for the other options depends on the selected XSLT version.</p><section id="c.xslt.11" class="section"><div class="section-titlepage"><h4><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.48.1. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.51.1. </span></bdi>Invoking an XSLT 3.0 stylesheet<a aria-label="§" class="self-link" href="#"></a></h4></div><div class="content"><p><span style="display: none;" class="delete_version">The value of <code class="option">global-context-item</code> is used as global context item for the stylesheet invocation. If no value is supplied, the following applies:</span><a id="opt.inline.global-context-item-1"></a>The value of <code class="option">global-context-item</code> is used as <span class="deltaxml-new" style="background:#90EE90">the </span>global context item for the stylesheet invocation. If <span class="deltaxml-old" style="background:#FF5555">no</span><span class="deltaxml-new" style="background:#90EE90">its</span> value is <span class="deltaxml-old" style="background:#FF5555">supplied</span><span class="deltaxml-new" style="background:#90EE90">the empty sequence</span>, the following applies:<a id="opt.inline.global-context-item-1"></a>The value of <code class="option">global-context-item</code> is used as <span class="deltaxml-new" style="background:#90EE90">the </span>global context item for the stylesheet invocation. If <span class="deltaxml-old" style="background:#FF5555">no</span><span class="deltaxml-new" style="background:#90EE90">its</span> value is <span class="deltaxml-old" style="background:#FF5555">supplied</span><span class="deltaxml-new" style="background:#90EE90">the empty sequence</span>, the following applies:</p><div class="itemizedlist"><ul><li><p><span style="display: none;" class="delete_version">If there is a single document on the <code class="port">source</code> port, this document will become the value of the <code class="option">global-context-item</code> option.</span><a id="port.inline.source-81 opt.inline.global-context-item-2"></a>If there is a single document on the <code class="port">source</code> port, this document will become the value of the <code class="option">global-context-item</code> option.<a id="port.inline.source-81 opt.inline.global-context-item-2"></a>If there is a single document on the <code class="port">source</code> port, this document will become the value of the <code class="option">global-context-item</code> option.</p></li><li><p><span style="display: none;" class="delete_version">If there are none or multiple documents on the <code class="port">source</code> port, the global context item is absent.</span><a id="port.inline.source-82"></a>If there are none or multiple documents on the <code class="port">source</code> port, the global context item is absent.<a id="port.inline.source-82"></a>If there are none or multiple documents on the <code class="port">source</code> port, the global context item is absent.</p></li></ul></div><div class="note admonition"><h3><span class="deltaxml-new" style="background:#90EE90">Note</span></h3><div class="admonition-body"><p><span class="deltaxml-new" style="background:#90EE90">As a consequence of these rules, it is not possible for XProc to invoke an XSLT 3.0 stylesheet with an </span><em><span class="deltaxml-new" style="background:#90EE90">empty</span></em><span class="deltaxml-new" style="background:#90EE90"> global context item </span><em><span class="deltaxml-new" style="background:#90EE90">and simultaneously</span></em><span class="deltaxml-new" style="background:#90EE90"> process a single input document.</span></p></div></div><p><span style="display: none;" class="delete_version">The <code class="option">populate-default-collection</code> option is used to control whether all the documents appearing on <code class="port">source</code> port form the default collection for the XSLT transformation.</span><a id="opt.inline.populate-default-collection-1 port.inline.source-83"></a>The <code class="option">populate-default-collection</code> option is used to control whether all the documents appearing on <code class="port">source</code> port form the default collection for the XSLT transformation.<a id="opt.inline.populate-default-collection-1 port.inline.source-83"></a>The <code class="option">populate-default-collection</code> option is used to control whether all the documents appearing on <code class="port">source</code> port form the default collection for the XSLT transformation.</p><p><span class="deltaxml-new" style="background:#90EE90">If the value of the </span><a id="opt.inline.template-name-1"></a><code class="option"><span class="deltaxml-new" style="background:#90EE90">template-name</span></code><span class="deltaxml-new" style="background:#90EE90"> option is the empty sequence, an “Apply-template invocation” is performed. The documents that appear on </span><a id="port.inline.source-84"></a><code class="port"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90"> are taken to be the initial match selection. if </span><a id="opt.inline.populate-default-collection-2"></a><code class="option"><span class="deltaxml-new" style="background:#90EE90">populate-default-collection</span></code><span class="deltaxml-new" style="background:#90EE90"> is true, they are also the default collection.</span></p><p><a id="opt.inline.initial-mode-1 err.inline.C0008&#34;"></a>If <span class="deltaxml-old" style="background:#FF5555">no value is supplied for </span><span class="deltaxml-old" style="background:#FF5555">template-name</span><span class="deltaxml-old" style="background:#FF5555"> option an “Apply-template invocation” is performed. The documents that appear on </span><span class="deltaxml-old" style="background:#FF5555">source</span><span class="deltaxml-old" style="background:#FF5555"> are taken to be the initial match selection. if</span><span class="deltaxml-new" style="background:#90EE90">the</span> <span class="deltaxml-old" style="background:#FF5555">populate-default-collection</span><span class="deltaxml-old" style="background:#FF5555"> is true, they are also the default collection. If a value is supplied for</span><span class="deltaxml-new" style="background:#90EE90">value of</span> the <code class="option">initial-mode</code> option<span class="deltaxml-old" style="background:#FF5555">, this</span><span class="deltaxml-new" style="background:#90EE90"> is not the empty sequence, the option</span> value is used as the initial-mode for the invocation. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the stylesheet does not support a given mode. If <span class="deltaxml-old" style="background:#FF5555">no</span><span class="deltaxml-new" style="background:#90EE90">the</span> value is <span class="deltaxml-old" style="background:#FF5555">supplied, nothing is supplied to the invocation, so the default behaviour defined for XSLT 3.0 could be applied</span><span class="deltaxml-new" style="background:#90EE90">the empty sequence, no initial-mode is specified and default XSLT 3.0 behavior applies</span>.<a id="opt.inline.initial-mode-1 err.inline.C0008&#34;"></a>If <span class="deltaxml-old" style="background:#FF5555">no value is supplied for </span><span class="deltaxml-old" style="background:#FF5555">template-name</span><span class="deltaxml-old" style="background:#FF5555"> option an “Apply-template invocation” is performed. The documents that appear on </span><span class="deltaxml-old" style="background:#FF5555">source</span><span class="deltaxml-old" style="background:#FF5555"> are taken to be the initial match selection. if</span><span class="deltaxml-new" style="background:#90EE90">the</span> <span class="deltaxml-old" style="background:#FF5555">populate-default-collection</span><span class="deltaxml-old" style="background:#FF5555"> is true, they are also the default collection. If a value is supplied for</span><span class="deltaxml-new" style="background:#90EE90">value of</span> the <code class="option">initial-mode</code> option<span class="deltaxml-old" style="background:#FF5555">, this</span><span class="deltaxml-new" style="background:#90EE90"> is not the empty sequence, the option</span> value is used as the initial-mode for the invocation. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the stylesheet does not support a given mode. If <span class="deltaxml-old" style="background:#FF5555">no</span><span class="deltaxml-new" style="background:#90EE90">the</span> value is <span class="deltaxml-old" style="background:#FF5555">supplied, nothing is supplied to the invocation, so the default behaviour defined for XSLT 3.0 could be applied</span><span class="deltaxml-new" style="background:#90EE90">the empty sequence, no initial-mode is specified and default XSLT 3.0 behavior applies</span>.</p><p><a id="opt.inline.template-name-2 port.inline.source-85 opt.inline.initial-mode-2 err.inline.C0056&#34;"></a>If a value is supplied for option <code class="option">template-name</code> a “Call template invocation” is performed. The documents on port <code class="port">source</code> are taken as the default collection in this case. Option <code class="option">initial-mode</code> is ignored. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the stylesheet does not provide a given template.<a id="opt.inline.template-name-2 port.inline.source-85 opt.inline.initial-mode-2 err.inline.C0056&#34;"></a>If a value is supplied for option <code class="option">template-name</code> a “Call template invocation” is performed. The documents on port <code class="port">source</code> are taken as the default collection in this case. Option <code class="option">initial-mode</code> is ignored. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the stylesheet does not provide a given template.</p><p><span style="display: none;" class="delete_version">Independent of the way the stylesheet is invoked, the principal result(s) will appear on output port <code class="port">result</code> while secondary result(s) will appear on output port <code class="port">secondary</code>. <span id="impl-73">The order in which result documents appear on the <code class="port">secondary</code> port is <em class="glossterm"><a href="#dt-implementation-dependent">implementation dependent</a></em>.</span> Whether the raw results are delivered or a result tree is constructed, depends on the (explicit or implicit) setting for attribute <code class="literal">build-tree</code> of in the output-definition for the respective result. If a result tree is constructed, the result will be a text document if it is a single text node wrapped into a document node. Otherwise it will be either an XML document or an HTML document depending on the attribute <code class="literal">method</code> on the output-definition for the respective result. If no result tree is constructed, the stylesheet invocation may additionally deliver a sequence of atomic values, maps, or arrays. For each item in this sequence a JSON document will be constructed and appear on the steps output port.</span><a id="port.inline.result-49 port.inline.secondary-1"></a>Independent of the way the stylesheet is invoked, the principal result(s) will appear on output port <code class="port">result</code> while secondary result(s) will appear on output port <code class="port">secondary</code>. <span id="impl-75">The order in which result documents appear on the <a id="port.inline.secondary-2"></a><code class="port">secondary</code> port is <em class="glossterm"><a href="#dt-implementation-dependent">implementation<span class="deltaxml-old" style="background:#FF5555"> </span><span class="deltaxml-new" style="background:#90EE90">-</span>dependent</a></em>.</span> Whether the raw results are delivered or a result tree is constructed, depends on the (explicit or implicit) setting for attribute <code class="literal">build-tree</code> of in the output-definition for the respective result. If a result tree is constructed, the result will be a text document if it is a single text node wrapped into a document node. Otherwise it will be either an XML document or an HTML document depending on the attribute <code class="literal">method</code> on the output-definition for the respective result. If no result tree is constructed, the stylesheet invocation may additionally deliver a sequence of atomic values, maps, or arrays. For each item in this sequence a JSON document will be constructed and appear on the steps output port.<a id="port.inline.result-49 port.inline.secondary-1"></a>Independent of the way the stylesheet is invoked, the principal result(s) will appear on output port <code class="port">result</code> while secondary result(s) will appear on output port <code class="port">secondary</code>. <span id="impl-75">The order in which result documents appear on the <a id="port.inline.secondary-2"></a><code class="port">secondary</code> port is <em class="glossterm"><a href="#dt-implementation-dependent">implementation<span class="deltaxml-old" style="background:#FF5555"> </span><span class="deltaxml-new" style="background:#90EE90">-</span>dependent</a></em>.</span> Whether the raw results are delivered or a result tree is constructed, depends on the (explicit or implicit) setting for attribute <code class="literal">build-tree</code> of in the output-definition for the respective result. If a result tree is constructed, the result will be a text document if it is a single text node wrapped into a document node. Otherwise it will be either an XML document or an HTML document depending on the attribute <code class="literal">method</code> on the output-definition for the respective result. If no result tree is constructed, the stylesheet invocation may additionally deliver a sequence of atomic values, maps, or arrays. For each item in this sequence a JSON document will be constructed and appear on the steps output port.</p><p><a id="opt.inline.output-base-uri-2 opt.inline.output-base-uri-3 port.inline.source-86 port.inline.source-87 port.inline.stylesheet-2 err.inline.C0121&#34; port.inline.secondary-3"></a>Option <code class="option">output-base-uri</code> sets the base output URI per XSLT 3.0 specification. If a final result tree is constructed, this URI is used to resolve a relative URI reference. If <span class="deltaxml-old" style="background:#FF5555">no value is supplied</span><span class="deltaxml-new" style="background:#90EE90">the value of </span><span class="deltaxml-old" style="background:#FF5555"> for </span><code class="option">output-base-uri</code><span class="deltaxml-new" style="background:#90EE90"> is the empty sequence</span>, the base URI of the first document in the <code class="port">source</code> port's sequence is used. If no document is supplied on port <code class="port">source</code> the base URI of the document on port <code class="port">stylesheet</code> is used. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if a document appearing on the <code class="port">secondary</code> port has a base URI that is not both absolute and valid according to [].<a id="opt.inline.output-base-uri-2 opt.inline.output-base-uri-3 port.inline.source-86 port.inline.source-87 port.inline.stylesheet-2 err.inline.C0121&#34; port.inline.secondary-3"></a>Option <code class="option">output-base-uri</code> sets the base output URI per XSLT 3.0 specification. If a final result tree is constructed, this URI is used to resolve a relative URI reference. If <span class="deltaxml-old" style="background:#FF5555">no value is supplied</span><span class="deltaxml-new" style="background:#90EE90">the value of </span><span class="deltaxml-old" style="background:#FF5555"> for </span><code class="option">output-base-uri</code><span class="deltaxml-new" style="background:#90EE90"> is the empty sequence</span>, the base URI of the first document in the <code class="port">source</code> port's sequence is used. If no document is supplied on port <code class="port">source</code> the base URI of the document on port <code class="port">stylesheet</code> is used. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if a document appearing on the <code class="port">secondary</code> port has a base URI that is not both absolute and valid according to [].</p><div class="note admonition"><h3>Note</h3><div class="admonition-body"><p><span style="display: none;" class="delete_version">If no result tree is constructed for one of secondary results, a sequence of documents sharing the same value for attribute <code class="literal">href</code> may appear on output port <code class="port">result</code>.</span><a id="port.inline.result-50"></a>If no result tree is constructed for one of secondary results, a sequence of documents sharing the same value for attribute <code class="literal">href</code> may appear on output port <code class="port">result</code>.<a id="port.inline.result-50"></a>If no result tree is constructed for one of secondary results, a sequence of documents sharing the same value for attribute <code class="literal">href</code> may appear on output port <code class="port">result</code>.</p></div></div></div></section><section id="c.xslt.12" class="section"><div class="section-titlepage"><h4><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.48.2. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.51.2. </span></bdi>Invoking an XSLT 2.0 stylesheet<a aria-label="§" class="self-link" href="#"></a></h4></div><div class="content"><p><a id="port.inline.source-88 port.inline.source-89 err.inline.C0094&#34;"></a>If a sequence of documents is provided on the <code class="port">source</code> port, the first document is used as the initial context node. The whole sequence is also the default collection. If no documents are provided on the <code class="port">source</code> port, the initial context node is undefined and the default collection is empty. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if any document supplied on the source port is not an XML document, an HTML documents, or a Text document if XSLT 2.0 is used.<a id="port.inline.source-88 port.inline.source-89 err.inline.C0094&#34;"></a>If a sequence of documents is provided on the <code class="port">source</code> port, the first document is used as the initial context node. The whole sequence is also the default collection. If no documents are provided on the <code class="port">source</code> port, the initial context node is undefined and the default collection is empty. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if any document supplied on the source port is not an XML document, an HTML documents, or a Text document if XSLT 2.0 is used.</p><p><span style="display: none;" class="delete_version">The <code class="option">populate-default-collection</code> option is used to control whether all the documents appearing on <code class="port">source</code> port form the default collection for the XSLT transformation.</span><a id="opt.inline.populate-default-collection-3 port.inline.source-90"></a>The <code class="option">populate-default-collection</code> option is used to control whether all the documents appearing on <code class="port">source</code> port form the default collection for the XSLT transformation.<a id="opt.inline.populate-default-collection-3 port.inline.source-90"></a>The <code class="option">populate-default-collection</code> option is used to control whether all the documents appearing on <code class="port">source</code> port form the default collection for the XSLT transformation.</p><p><a id="opt.inline.global-context-item-3 opt.inline.initial-mode-3 opt.inline.template-name-3 err.inline.C0007&#34; opt.inline.parameters-28 err.inline.C0008.1&#34; err.inline.C0056.1&#34;"></a>The value of option <code class="option">global-context-item</code> is ignored if a stylesheet is invoked as per XSLT 2.0. The invocation of the transformation is controlled by the <code class="option">initial-mode</code> and <code class="option">template-name</code> options that set the initial mode and/or named template in the XSLT transformation where processing begins. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if any key in <code class="option">parameters</code> is associated to a value which is not an instance of the XQuery 1.0 and XPath 2.0 Data Model, e.g. with a map, an array, or a function. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the specified initial mode cannot be applied to the specified stylesheet. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the specified template name cannot be applied to the specified stylesheet. <a id="opt.inline.global-context-item-3 opt.inline.initial-mode-3 opt.inline.template-name-3 err.inline.C0007&#34; opt.inline.parameters-28 err.inline.C0008.1&#34; err.inline.C0056.1&#34;"></a>The value of option <code class="option">global-context-item</code> is ignored if a stylesheet is invoked as per XSLT 2.0. The invocation of the transformation is controlled by the <code class="option">initial-mode</code> and <code class="option">template-name</code> options that set the initial mode and/or named template in the XSLT transformation where processing begins. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if any key in <code class="option">parameters</code> is associated to a value which is not an instance of the XQuery 1.0 and XPath 2.0 Data Model, e.g. with a map, an array, or a function. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the specified initial mode cannot be applied to the specified stylesheet. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the specified template name cannot be applied to the specified stylesheet. </p><p><span style="display: none;" class="delete_version">The primary result document of the transformation, if there is one, appears on the <code class="port">result</code> port. At most one document can appear on the <code class="port">result</code> port. All other result documents appear on the <code class="port">secondary</code> port. <span id="impl-74">The order in which result documents appear on the <code class="port">secondary</code> port is <em class="glossterm"><a href="#dt-implementation-dependent">implementation dependent</a></em>.</span></span><a id="port.inline.result-51 port.inline.result-52 port.inline.secondary-4"></a>The primary result document of the transformation, if there is one, appears on the <code class="port">result</code> port. At most one document can appear on the <code class="port">result</code> port. All other result documents appear on the <code class="port">secondary</code> port. <span id="impl-76">The order in which result documents appear on the <a id="port.inline.secondary-5"></a><code class="port">secondary</code> port is <em class="glossterm"><a href="#dt-implementation-dependent">implementation<span class="deltaxml-old" style="background:#FF5555"> </span><span class="deltaxml-new" style="background:#90EE90">-</span>dependent</a></em>.</span><a id="port.inline.result-51 port.inline.result-52 port.inline.secondary-4"></a>The primary result document of the transformation, if there is one, appears on the <code class="port">result</code> port. At most one document can appear on the <code class="port">result</code> port. All other result documents appear on the <code class="port">secondary</code> port. <span id="impl-76">The order in which result documents appear on the <a id="port.inline.secondary-5"></a><code class="port">secondary</code> port is <em class="glossterm"><a href="#dt-implementation-dependent">implementation<span class="deltaxml-old" style="background:#FF5555"> </span><span class="deltaxml-new" style="background:#90EE90">-</span>dependent</a></em>.</span></p><p><a id="opt.inline.output-base-uri-4 port.inline.result-53 port.inline.source-91 port.inline.stylesheet-3 err.inline.C0121.1&#34; port.inline.secondary-6"></a>The <code class="option">output-base-uri</code> option sets the context's output base URI per the XSLT 2.0 specification, otherwise the base URI of the <code class="port">result</code> document is the base URI of the first document in the <code class="code">source</code> port's sequence. If no document is supplied on port <code class="port">source</code> the base URI of the document on port <code class="port">stylesheet</code> is used. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if a document appearing on the <code class="port">secondary</code> port has a base URI that is not both absolute and valid according to [].<a id="opt.inline.output-base-uri-4 port.inline.result-53 port.inline.source-91 port.inline.stylesheet-3 err.inline.C0121.1&#34; port.inline.secondary-6"></a>The <code class="option">output-base-uri</code> option sets the context's output base URI per the XSLT 2.0 specification, otherwise the base URI of the <code class="port">result</code> document is the base URI of the first document in the <code class="code">source</code> port's sequence. If no document is supplied on port <code class="port">source</code> the base URI of the document on port <code class="port">stylesheet</code> is used. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if a document appearing on the <code class="port">secondary</code> port has a base URI that is not both absolute and valid according to [].</p></div></section><section id="c.xslt.13" class="section"><div class="section-titlepage"><h4><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2.48.3. </span></bdi><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.51.3. </span></bdi>Invoking an XSLT 1.0 stylesheet<a aria-label="§" class="self-link" href="#"></a></h4></div><div class="content"><p><a id="port.inline.source-92 err.inline.C0039&#34; opt.inline.global-context-item-4 opt.inline.initial-mode-4 opt.inline.template-name-4 port.inline.secondary-7 opt.inline.output-base-uri-5"></a>The document provided for <code class="port">source</code> is used the transformations source tree. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the source port does not contain exactly one XML document or one HTML document if XSLT 1.0 is used. The values supplied for options <code class="option">global-context-item</code>, <code class="option">initial-mode</code>, and <code class="option">template-name</code> are ignored. If XSLT 1.0 is used, an empty sequence of documents <span class="rfc2119" id="c.xslt.13.2.6">must</span> appear on the <code class="port">secondary</code> port. An XSLT 1.0 step <span class="rfc2119" id="c.xslt.13.2.8">should</span> use the value of the <code class="option">output-base-uri</code> as the base URI of its output, if the option is specified.<a id="port.inline.source-92 err.inline.C0039&#34; opt.inline.global-context-item-4 opt.inline.initial-mode-4 opt.inline.template-name-4 port.inline.secondary-7 opt.inline.output-base-uri-5"></a>The document provided for <code class="port">source</code> is used the transformations source tree. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if the source port does not contain exactly one XML document or one HTML document if XSLT 1.0 is used. The values supplied for options <code class="option">global-context-item</code>, <code class="option">initial-mode</code>, and <code class="option">template-name</code> are ignored. If XSLT 1.0 is used, an empty sequence of documents <span class="rfc2119" id="c.xslt.13.2.6">must</span> appear on the <code class="port">secondary</code> port. An XSLT 1.0 step <span class="rfc2119" id="c.xslt.13.2.8">should</span> use the value of the <code class="option">output-base-uri</code> as the base URI of its output, if the option is specified.</p><p><a id="opt.inline.parameters-29 err.inline.C0105&#34; opt.inline.parameters-30"></a>The key/value pairs supplied in <code class="option">parameters</code> are used to set top-level parameters in the stylesheet. If the value is an atomic value or a node, its string value is supplied to the stylesheet. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if an XSLT 1.0 stylesheet is invoked and option <code class="option">parameters</code> contains a value that is not an atomic value or a node. <a id="opt.inline.parameters-29 err.inline.C0105&#34; opt.inline.parameters-30"></a>The key/value pairs supplied in <code class="option">parameters</code> are used to set top-level parameters in the stylesheet. If the value is an atomic value or a node, its string value is supplied to the stylesheet. It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> () if an XSLT 1.0 stylesheet is invoked and option <code class="option">parameters</code> contains a value that is not an atomic value or a node. </p></div></section><section id="c.xslt.14" class="simplesect"><div class="section-titlepage"><h4>Document properties</h4></div><div class="content"><p>No document properties are preserved. The <code class="property">base-uri</code> property of each document will reflect the base URI specified by the tranformation. If the transformation does not establish a base URI, the document will not have one. </p></div></section></div></section></div></section><section id="errors" class="section"><div class="section-titlepage"><h2><bdi class="secno">3. </bdi>Step Errors<a aria-label="§" class="self-link" href="#errors"></a></h2></div><div class="content"><p>Several of the steps in the standard step library can generate <em class="glossterm"><a href="#dt-dynamic-error">dynamic errors</a></em>.</p><p>A <span id="dt-dynamic-error" class="termdef">[Definition: A <em class="glossterm">dynamic error</em> is one which occurs while a pipeline is being evaluated.]</span> Examples of dynamic errors include references to URIs that cannot be resolved, steps which fail, and pipelines that exhaust the capacity of an implementation (such as memory or disk space).</p><p>If a step fails due to a dynamic error, failure propagates upwards until either a <code class="tag-element">p:try</code> is encountered or the entire pipeline fails. In other words, outside of a <code class="tag-element">p:try</code>, step failure causes the entire pipeline to fail.</p><p>Dynamic errors raised by steps are divided into two categories: dynamic errors and step errors. The distinction is largely that “step errors” tend to be related to a particular step or small group of steps (e.g., validation error) whereas the “dynamic errors” apply to many more steps (e.g., URI not available). There is also precedent for some of the error codes dating back to XProc 1.0.</p><div id="dynamic-error-summary"><h5>Dynamic Errors</h5><dl class="errs"><dt id="err.D0011"><code class="errqname">err:XD0011</code></dt><dd><p>It is a dynamic error if the resource referenced by the href option does not exist, cannot be accessed or is not a file.</p><p>See: <a href="#err.inline.D0011">Handling of ZIP archives</a>, <a href="#err.inline.D0011.1">p:load</a></p></dd><dt id="err.D0014"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0014</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error for any unqualified attribute names to appear on a c:param-set element.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.D0014"><span class="deltaxml-new" style="background:#90EE90">Casting from an XML media type</span></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#err.inline.D0014.1"><span class="deltaxml-new" style="background:#90EE90">Casting from an XML media type</span></a></p></dd><dt id="err.D0018"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0018</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the parameter list contains any elements other than c:param.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.D0018"><span class="deltaxml-new" style="background:#90EE90">Casting from an XML media type</span></a></p></dd><dt id="err.D0023"><code class="errqname">err:XD0023</code></dt><dd><p>It is a dynamic error if a DTD validation is performed and either the document is not valid or no DTD is found.</p><p>See: <a href="#err.inline.D0023">Loading XML data</a></p></dd><dt id="err.D0025"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0025</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the namespace attribute is specified, the name contains a colon, and the specified namespace is not the same as the in-scope namespace binding for the specified prefix.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.D0025"><span class="deltaxml-new" style="background:#90EE90">Casting from an XML media type</span></a></p></dd><dt id="err.D0036"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0036</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the specified duration is not a positive number or a valid xs:dayTimeDuration.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.D0036"><span class="deltaxml-new" style="background:#90EE90">p:sleep</span></a></p></dd><dt id="err.D0043"><code class="errqname">err:XD0043</code></dt><dd><p>It is a dynamic error if the dtd-validate parameter is true and the processor does not support DTD validation.</p><p>See: <a href="#err.inline.D0043">Loading XML data</a></p></dd><dt id="err.D0049"><code class="errqname">err:XD0049</code></dt><dd><p>It is a dynamic error if the text value is not a well-formed XML document</p><p>See: <a href="#err.inline.D0049">Casting from a text media type</a>, <a href="#err.inline.D0049.1">Loading XML data</a></p></dd><dt id="err.D0057"><code class="errqname">err:XD0057</code></dt><dd><p>It is a dynamic error if the text document does not conform to the JSON grammar, unless the parameter liberal is true and the processor chooses to accept the deviation.</p><p>See: <a href="#err.inline.D0057">Casting from a text media type</a>, <a href="#err.inline.D0057.1">Loading JSON data</a></p></dd><dt id="err.D0058"><code class="errqname">err:XD0058</code></dt><dd><p>It is a dynamic error if the parameter duplicates is reject and the text document contains a JSON object with duplicate keys.</p><p>See: <a href="#err.inline.D0058">Casting from a text media type</a>, <a href="#err.inline.D0058.1">Loading JSON data</a></p></dd><dt id="err.D0059"><code class="errqname">err:XD0059</code></dt><dd><p>It is a dynamic error if the parameter map contains an entry whose key is defined in the specification of fn:parse-json and whose value is not valid for that key, or if it contains an entry with the key fallback when the parameter escape with true() is also present.</p><p>See: <a href="#err.inline.D0059">Casting from a text media type</a>, <a href="#err.inline.D0059.1">Loading JSON data</a></p></dd><dt id="err.D0060"><code class="errqname">err:XD0060</code></dt><dd><p>It is a dynamic error if the text document can not be converted into the XPath data model</p><p>See: <a href="#err.inline.D0060">Casting from a text media type</a>, <a href="#err.inline.D0060.1">Loading text data</a></p></dd><dt id="err.D0062"><code class="errqname">err:XD0062</code></dt><dd><p>It is a dynamic error if the content-type is specified and the document-properties has a “content-type” that is not the same.</p><p>See: <a href="#err.inline.D0062">p:load</a></p></dd><dt id="err.D0064"><code class="errqname">err:XD0064</code></dt><dd><p>It is a dynamic error if the base URI is not both absolute and valid according to .</p><p>See: <a href="#err.inline.D0064">p:archive</a>, <a href="#err.inline.D0064.1">p:archive-manifest</a>, <a href="#err.inline.D0064.2">p:load</a>, <a href="#err.inline.D0064.3">p:make-absolute-uris</a>, <a href="#err.inline.D0064.4">p:set-properties</a>, <a href="#err.inline.D0064.5">p:unarchive</a></p></dd><dt id="err.D0070"><code class="errqname">err:XD0070</code></dt><dd><p>It is a dynamic error if a value is assigned to the serialization document property that cannot be converted into map(xs:QName, item()*) according to the rules in section “QName handling” of .</p><p>See: <a href="#err.inline.D0070">p:set-properties</a></p></dd><dt id="err.D0078"><code class="errqname">err:XD0078</code></dt><dd><p>It is a dynamic error if the loaded document cannot be represented as an HTML document in the XPath data model.</p><p>See: <a href="#err.inline.D0078">Loading HTML data</a></p></dd><dt id="err.D0079"><code class="errqname">err:XD0079</code></dt><dd><p>It is a dynamic error if a supplied content-type is not a valid media type of the form “type/subtype+ext” or “type/subtype”.</p><p>See: <a href="#err.inline.D0079">Overriding content types</a>, <a href="#err.inline.D0079.1">p:cast-content-type</a>, <a href="#err.inline.D0079.2">p:http-request</a>, <a href="#err.inline.D0079.3">p:http-request</a>, <a href="#err.inline.D0079.4">p:load</a>, <a href="#err.inline.D0079.5">p:text-join</a>, <a href="#err.inline.D0079.6">p:uncompress</a></p></dd><dt id="err.D0081"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0081</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the c:param element has a value attribute and is not empty.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.D0081"><span class="deltaxml-new" style="background:#90EE90">Casting from an XML media type</span></a></p></dd><dt id="err.D0082"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XD0082</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the c:param specifies a sequence type and the value does not satisfy that type.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.D0082"><span class="deltaxml-new" style="background:#90EE90">Casting from an XML media type</span></a></p></dd></dl></div><div id="step-error-summary"><h5>Step Errors</h5><dl class="errs"><dt id="err.C0001"><code class="errqname">err:XC0001</code></dt><dd><p>It is a dynamic error if the value of option override-content-type is not a text media type.</p><p>See: <a href="#err.inline.C0001">p:text-join</a></p></dd><dt id="err.C0003"><code class="errqname">err:XC0003</code></dt><dd><p>It is a dynamic error if a “username” or a “password” key is present without specifying a value for the “auth-method” key, if the requested auth-method isn't supported, or the authentication challenge contains an authentication method that isn't supported.</p><p>See: <a href="#err.inline.C0003">p:http-request</a></p></dd><dt id="err.C0007"><code class="errqname">err:XC0007</code></dt><dd><p>It is a dynamic error if any key in parameters is associated to a value which is not an instance of the XQuery 1.0 and XPath 2.0 Data Model, e.g. with a map, an array, or a function.</p><p>See: <a href="#err.inline.C0007">Invoking an XSLT 2.0 stylesheet</a></p></dd><dt id="err.C0008"><code class="errqname">err:XC0008</code></dt><dd><p>It is a dynamic error if the stylesheet does not support a given mode.</p><p>See: <a href="#err.inline.C0008">Invoking an XSLT 3.0 stylesheet</a>, <a href="#err.inline.C0008.1">Invoking an XSLT 2.0 stylesheet</a></p></dd><dt id="err.C0009"><code class="errqname">err:XC0009</code></dt><dd><p>It is a dynamic error if the specified XQuery version is not available.</p><p>See: <a href="#err.inline.C0009">p:xquery</a></p></dd><dt id="err.C0013"><code class="errqname">err:XC0013</code></dt><dd><p>It is a dynamic error if the pattern matches a processing instruction and the new name has a non-null namespace.</p><p>See: <a href="#err.inline.C0013">p:rename</a></p></dd><dt id="err.C0014"><code class="errqname">err:XC0014</code></dt><dd><p>It is a dynamic error if the XML namespace (http://www.w3.org/XML/1998/namespace) or the XMLNS namespace (http://www.w3.org/2000/xmlns/) is the value of either the from option or the to option.</p><p>See: <a href="#err.inline.C0014">p:namespace-rename</a></p></dd><dt id="err.C0019"><code class="errqname">err:XC0019</code></dt><dd><p>It is a dynamic error if the documents are not equal according to the specified comparison method, and the value of the fail-if-not-equal option is true.</p><p>See: <a href="#err.inline.C0019">p:compare</a></p></dd><dt id="err.C0023"><code class="errqname">err:XC0023</code></dt><dd><p>It is a dynamic error if the selection pattern matches a node which is not an element.</p><p>See: <a href="#err.inline.C0023">p:add-attribute</a>, <a href="#err.inline.C0023.1">p:delete</a>, <a href="#err.inline.C0023.2">p:insert</a>, <a href="#err.inline.C0023.3">p:label-elements</a>, <a href="#err.inline.C0023.4">p:make-absolute-uris</a>, <a href="#err.inline.C0023.5">p:rename</a>, <a href="#err.inline.C0023.6">p:replace</a>, <a href="#err.inline.C0023.7">p:set-attributes</a>, <a href="#err.inline.C0023.8">p:unwrap</a>, <a href="#err.inline.C0023.9">p:wrap</a></p></dd><dt id="err.C0024"><code class="errqname">err:XC0024</code></dt><dd><p>It is a dynamic error if the selection pattern matches a document node and the value of the position is “before” or “after”.</p><p>See: <a href="#err.inline.C0024">p:insert</a></p></dd><dt id="err.C0025"><code class="errqname">err:XC0025</code></dt><dd><p>It is a dynamic error if the selection pattern matches anything other than an element or a document node and the value of the position option is “first-child” or “last-child”.</p><p>See: <a href="#err.inline.C0025">p:insert</a></p></dd><dt id="err.C0029"><code class="errqname">err:XC0029</code></dt><dd><p>It is a dynamic error if an XInclude error occurs during processing.</p><p>See: <a href="#err.inline.C0029">p:xinclude</a></p></dd><dt id="err.C0030"><code class="errqname">err:XC0030</code></dt><dd><p>It is a dynamic error if the response body cannot be interpreted as requested (e.g. application/json to override application/xml content).</p><p>See: <a href="#err.inline.C0030">p:http-request</a></p></dd><dt id="err.C0036"><code class="errqname">err:XC0036</code></dt><dd><p>It is a dynamic error if the requested hash algorithm is not one that the processor understands or if the value or parameters are not appropriate for that algorithm.</p><p>See: <a href="#err.inline.C0036">p:hash</a></p></dd><dt id="err.C0037"><code class="errqname">err:XC0037</code></dt><dd><p>It is a dynamic error if the value provided is not a properly x-www-form-urlencoded value.</p><p>See: <a href="#err.inline.C0037">p:www-form-urldecode</a></p></dd><dt id="err.C0038"><code class="errqname">err:XC0038</code></dt><dd><p>It is a dynamic error if the specified xslt version is not available.</p><p>See: <a href="#err.inline.C0038">p:xslt</a></p></dd><dt id="err.C0039"><code class="errqname">err:XC0039</code></dt><dd><p>It is a dynamic error if the source port does not contain exactly one XML document or one HTML document if XSLT 1.0 is used.</p><p>See: <a href="#err.inline.C0039">Invoking an XSLT 1.0 stylesheet</a></p></dd><dt id="err.C0050"><code class="errqname">err:XC0050</code></dt><dd><p>It is a dynamic error if the URI scheme is not supported or the step cannot store to the specified location.</p><p>See: <a href="#err.inline.C0050">p:store</a></p></dd><dt id="err.C0052"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0052</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the encoding specified is not supported by the implementation.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.C0052"><span class="deltaxml-new" style="background:#90EE90">Casting from an XML media type</span></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#err.inline.C0052.1"><span class="deltaxml-new" style="background:#90EE90">p:encode</span></a></p></dd><dt id="err.C0056"><code class="errqname">err:XC0056</code></dt><dd><p>It is a dynamic error if the stylesheet does not provide a given template.</p><p>See: <a href="#err.inline.C0056">Invoking an XSLT 3.0 stylesheet</a>, <a href="#err.inline.C0056.1">Invoking an XSLT 2.0 stylesheet</a></p></dd><dt id="err.C0058"><code class="errqname">err:XC0058</code></dt><dd><p>It is a dynamic error if the all and relative options are both true.</p><p>See: <a href="#err.inline.C0058">p:add-xml-base</a></p></dd><dt id="err.C0059"><code class="errqname">err:XC0059</code></dt><dd><p>It is a dynamic error if the QName value in the attribute-name option <span class="deltaxml-new" style="background:#90EE90">is “xmlns” or </span>uses the prefix “xmlns” or any other prefix that resolves to the namespace name http://www.w3.org/2000/xmlns/. </p><p>See: <a href="#err.inline.C0059">p:add-attribute</a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#err.inline.C0059.1"><span class="deltaxml-new" style="background:#90EE90">p:pack</span></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#err.inline.C0059.2"><span class="deltaxml-new" style="background:#90EE90">p:set-attributes</span></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#err.inline.C0059.3"><span class="deltaxml-new" style="background:#90EE90">p:wrap</span></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#err.inline.C0059.4"><span class="deltaxml-new" style="background:#90EE90">p:wrap-sequence</span></a></p></dd><dt id="err.C0060"><code class="errqname">err:XC0060</code></dt><dd><p>It is a dynamic error if the processor does not support the specified version of the UUID algorithm.</p><p>See: <a href="#err.inline.C0060">p:uuid</a></p></dd><dt id="err.C0062"><code class="errqname">err:XC0062</code></dt><dd><p>It is a dynamic error if the match option matches a namespace node.</p><p>See: <a href="#err.inline.C0062">p:delete</a></p></dd><dt id="err.C0069"><code class="errqname">err:XC0069</code></dt><dd><p>It is a dynamic error if the properties map contains a key equal to the string “content-type”.</p><p>See: <a href="#err.inline.C0069">p:set-properties</a></p></dd><dt id="err.C0071"><code class="errqname">err:XC0071</code></dt><dd><p>It is a dynamic error if the p:cast-content-type step cannot perform the requested cast.</p><p>See: <a href="#err.inline.C0071">p:cast-content-type</a></p></dd><dt id="err.C0072"><code class="errqname">err:XC0072</code></dt><dd><p>It is a dynamic error if the c:data contains content is not a valid <span class="deltaxml-old" style="background:#FF5555">base64 string</span><span class="deltaxml-new" style="background:#90EE90">string according to the encoding</span>.</p><p>See: <a href="#err.inline.C0072">Casting from an XML media type</a></p></dd><dt id="err.C0073"><code class="errqname">err:XC0073</code></dt><dd><p>It is a dynamic error if the c:data element does not have a content-type attribute.</p><p>See: <a href="#err.inline.C0073">Casting from an XML media type</a></p></dd><dt id="err.C0074"><code class="errqname">err:XC0074</code></dt><dd><p>It is a dynamic error if the content-type is supplied and is not the same as the content-type specified on the c:data element.</p><p>See: <a href="#err.inline.C0074">Casting from an XML media type</a></p></dd><dt id="err.C0076"><code class="errqname">err:XC0076</code></dt><dd><p>It is a dynamic error if the comparison method specified in p:compare is not supported by the implementation.</p><p>See: <a href="#err.inline.C0076">p:compare</a></p></dd><dt id="err.C0077"><code class="errqname">err:XC0077</code></dt><dd><p>It is a dynamic error if the media types of the documents supplied are incompatible with the comparison method.</p><p>See: <a href="#err.inline.C0077">p:compare</a></p></dd><dt id="err.C0078"><code class="errqname">err:XC0078</code></dt><dd><p>It is a dynamic error if the value associated with the “fail-on-timeout” is associated with true() and a HTTP status code 408 is encountered.</p><p>See: <a href="#err.inline.C0078">p:http-request</a></p></dd><dt id="err.C0079"><code class="errqname">err:XC0079</code></dt><dd><p>It is a dynamic error if the map parameters contains an entry whose key is defined by the implementation and whose value is not valid for that key.</p><p>See: <a href="#err.inline.C0079">p:archive</a>, <a href="#err.inline.C0079.1">p:archive-manifest</a>, <a href="#err.inline.C0079.2">p:cast-content-type</a>, <a href="#err.inline.C0079.3">p:compress</a>, <a href="#err.inline.C0079.4">p:unarchive</a>, <a href="#err.inline.C0079.5">p:uncompress</a></p></dd><dt id="err.C0080"><code class="errqname">err:XC0080</code></dt><dd><p>It is a dynamic error if the number of documents on the archive does not match the expected number of archive input documents for the given format and command.</p><p>See: <a href="#err.inline.C0080">Handling of ZIP archives</a></p></dd><dt id="err.C0081"><code class="errqname">err:XC0081</code></dt><dd><p>It is a dynamic error if the format of the archive does not match the format as specified in the format option.</p><p>See: <a href="#err.inline.C0081">p:archive</a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#err.inline.C0081.1"><span class="deltaxml-new" style="background:#90EE90">p:archive-manifest</span></a></p></dd><dt id="err.C0084"><code class="errqname">err:XC0084</code></dt><dd><p>It is a dynamic error if two or more documents appear on the p:archive step's source port that have the same base URI or if any document that appears on the source port has no base URI.</p><p>See: <a href="#err.inline.C0084">p:archive</a></p></dd><dt id="err.C0085"><code class="errqname">err:XC0085</code></dt><dd><p>It is a dynamic error if the format of the archive <span class="deltaxml-old" style="background:#FF5555">does not match the specified format, </span>cannot be understood, determined and/or processed.</p><p>See: <a href="#err.inline.C0085">p:archive</a>, <a href="#err.inline.C0085.1">p:archive-manifest</a>, <a href="#err.inline.C0085.2">p:unarchive</a></p></dd><dt id="err.C0092"><code class="errqname">err:XC0092</code></dt><dd><p>It is a dynamic error if as a consequence of changing or removing the namespace of an attribute the attribute's name is not unique on the respective element.</p><p>See: <a href="#err.inline.C0092">p:namespace-rename</a></p></dd><dt id="err.C0093"><code class="errqname">err:XC0093</code></dt><dd><p> It is a dynamic error if a static error occurs during the static analysis of the XSLT stylesheet.</p><p>See: <a href="#err.inline.C0093">p:xslt</a></p></dd><dt id="err.C0094"><code class="errqname">err:XC0094</code></dt><dd><p>It is a dynamic error if any document supplied on the source port is not an XML document, an HTML documents, or a Text document if XSLT 2.0 is used.</p><p>See: <a href="#err.inline.C0094">Invoking an XSLT 2.0 stylesheet</a></p></dd><dt id="err.C0095"><code class="errqname">err:XC0095</code></dt><dd><p>It is a dynamic error if an error occurred during the transformation.</p><p>See: <a href="#err.inline.C0095">p:xslt</a></p></dd><dt id="err.C0096"><code class="errqname">err:XC0096</code></dt><dd><p>It is a dynamic error if the transformation is terminated by XSLT message termination.</p><p>See: <a href="#err.inline.C0096">p:xslt</a></p></dd><dt id="err.C0098"><code class="errqname">err:XC0098</code></dt><dd><p>It is a dynamic error if a dynamic XPath error occurred while applying sort-key to a line.</p><p>See: <a href="#err.inline.C0098">p:text-sort</a></p></dd><dt id="err.C0099"><code class="errqname">err:XC0099</code></dt><dd><p>It is a dynamic error if the result of applying sort-key to a given line results in a sequence with more than one item.</p><p>See: <a href="#err.inline.C0099">p:text-sort</a></p></dd><dt id="err.C0100"><code class="errqname">err:XC0100</code></dt><dd><p>It is a dynamic error if the document on port manifest does not conform to the given schema.</p><p>See: <a href="#err.inline.C0100">p:archive</a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#err.inline.C0100.1"><span class="deltaxml-new" style="background:#90EE90">The archive manifest</span></a></p></dd><dt id="err.C0101"><code class="errqname">err:XC0101</code></dt><dd><p>It is a dynamic error if a document appearing on port source cannot be represented in the XDM version associated with the chosen XQuery version, e.g. when a JSON document contains a map and XDM 3.0 is used.</p><p>See: <a href="#err.inline.C0101">p:xquery</a></p></dd><dt id="err.C0102"><code class="errqname">err:XC0102</code></dt><dd><p>It is a dynamic error if any key in option parameters is associated to a value that cannot be represented in the XDM version associated with the chosen XQuery version, e.g. with a map, an array, or a function when XDM 3.0 is used.</p><p>See: <a href="#err.inline.C0102">p:xquery</a></p></dd><dt id="err.C0103"><code class="errqname">err:XC0103</code></dt><dd><p>It is a dynamic error if any error occurs during XQuery’s static analysis phase.</p><p>See: <a href="#err.inline.C0103">p:xquery</a></p></dd><dt id="err.C0104"><code class="errqname">err:XC0104</code></dt><dd><p>It is a dynamic error if any error occurs during XQuery’s dynamic evaluation phase.</p><p>See: <a href="#err.inline.C0104">p:xquery</a></p></dd><dt id="err.C0105"><code class="errqname">err:XC0105</code></dt><dd><p>It is a dynamic error if an XSLT 1.0 stylesheet is invoked and option parameters contains a value that is not an atomic value or a node.</p><p>See: <a href="#err.inline.C0105">Invoking an XSLT 1.0 stylesheet</a></p></dd><dt id="err.C0106"><code class="errqname">err:XC0106</code></dt><dd><p>It is a dynamic error if duplicate keys are encountered and option duplicates has value “reject”.</p><p>See: <a href="#err.inline.C0106">p:json-merge</a></p></dd><dt id="err.C0107"><code class="errqname">err:XC0107</code></dt><dd><p> It is a dynamic error if a document of a not supported document type appears on port source of p:json-merge.</p><p>See: <a href="#err.inline.C0107">p:json-merge</a></p></dd><dt id="err.C0108"><code class="errqname">err:XC0108</code></dt><dd><p>It is a dynamic error if any prefix is not in-scope at the point where the p:namespace-delete occurs.</p><p>See: <a href="#err.inline.C0108">p:namespace-delete</a></p></dd><dt id="err.C0109"><code class="errqname">err:XC0109</code></dt><dd><p>It is a dynamic error if a namespace is to be removed from an attribute and the element already has an attribute with the resulting name.</p><p>See: <a href="#err.inline.C0109">p:namespace-delete</a></p></dd><dt id="err.C0110"><code class="errqname">err:XC0110</code></dt><dd><p>It is a dynamic error if the evaluation of the XPath expression in option key for a given item returns either a sequence, an array, a map, or a function.</p><p>See: <a href="#err.inline.C0110">p:json-merge</a></p></dd><dt id="err.C0111"><code class="errqname">err:XC0111</code></dt><dd><p> It is a dynamic error if a document of an unsupported document type appears on port source of p:json-join.</p><p>See: <a href="#err.inline.C0111">p:json-join</a></p></dd><dt id="err.C0112"><code class="errqname">err:XC0112</code></dt><dd><p>It is a dynamic error if more than one document appears on the port manifest.</p><p>See: <a href="#err.inline.C0112">p:archive</a></p></dd><dt id="err.C0118"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0118</span></code></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if an archive manifest is invalid according to the specification.</span></p><p><span class="deltaxml-old" style="background:#FF5555">See: </span><a href="#err.inline.C0118"><span class="deltaxml-old" style="background:#FF5555">The archive manifest</span></a></p></dd><dt id="err.C0119"><code class="errqname">err:XC0119</code></dt><dd><p>It is a dynamic error if flatten is neither “unbounded”, nor a string that may be cast to a non-negative integer.</p><p>See: <a href="#err.inline.C0119">p:json-join</a></p></dd><dt id="err.C0120"><code class="errqname">err:XC0120</code></dt><dd><p>It is a dynamic error if the relative-to option is not present and the document on the source port does not have a base URI.</p><p>See: <a href="#err.inline.C0120">p:archive-manifest</a>, <a href="#err.inline.C0120.1">p:unarchive</a></p></dd><dt id="err.C0121"><code class="errqname">err:XC0121</code></dt><dd><p>It is a dynamic error if a document appearing on the secondary port has a base URI that is not both absolute and valid according to .</p><p>See: <a href="#err.inline.C0121">Invoking an XSLT 3.0 stylesheet</a>, <a href="#err.inline.C0121.1">Invoking an XSLT 2.0 stylesheet</a></p></dd><dt id="err.C0122"><code class="errqname">err:XC0122</code></dt><dd><p>It is a dynamic error if the given method is not supported.</p><p>See: <a href="#err.inline.C0122">p:http-request</a></p></dd><dt id="err.C0123"><code class="errqname">err:XC0123</code></dt><dd><p>It is a dynamic error if any key in the “auth” map is associated with a value that is not an instance of the required type.</p><p>See: <a href="#err.inline.C0123">p:http-request</a></p></dd><dt id="err.C0124"><code class="errqname">err:XC0124</code></dt><dd><p>It is a dynamic error if any key in the “parameters” map is associated with a value that is not an instance of the required type.</p><p>See: <a href="#err.inline.C0124">p:http-request</a></p></dd><dt id="err.C0125"><code class="errqname">err:XC0125</code></dt><dd><p>It is a dynamic error if the key “accept-multipart” as the value false() and a multipart response is detected.</p><p>See: <a href="#err.inline.C0125">p:http-request</a></p></dd><dt id="err.C0126"><code class="errqname">err:XC0126</code></dt><dd><p>It is a dynamic error if the XPath expression in assert evaluates to false.</p><p>See: <a href="#err.inline.C0126">p:http-request</a></p></dd><dt id="err.C0127"><code class="errqname">err:XC0127</code></dt><dd><p>It is a dynamic error if the headers map contains two keys that are the same when compared in a case-insensitive manner.</p><p>See: <a href="#err.inline.C0127">p:http-request</a></p></dd><dt id="err.C0128"><code class="errqname">err:XC0128</code></dt><dd><p>It is a dynamic error if the URI’s scheme is unknown or not supported.</p><p>See: <a href="#err.inline.C0128">p:http-request</a></p></dd><dt id="err.C0131"><code class="errqname">err:XC0131</code></dt><dd><p>It is a dynamic error if the processor cannot support the requested encoding.</p><p>See: <a href="#err.inline.C0131">p:http-request</a></p></dd><dt id="err.C0132"><code class="errqname">err:XC0132</code></dt><dd><p>It is a dynamic error if the override content encoding cannot be supported.</p><p>See: <a href="#err.inline.C0132">p:http-request</a></p></dd><dt id="err.C0133"><code class="errqname">err:XC0133</code></dt><dd><p>It is a dynamic error if more than one document appears on the source port and a content-type header is present and the content type specified is not a multipart content type.</p><p>See: <a href="#err.inline.C0133">Construction of a multipart request</a></p></dd><dt id="err.C0146"><code class="errqname">err:XC0146</code></dt><dd><p>It is a dynamic error if the specified value for the override-content-types option is not an array of arrays, where the inner arrays have exactly two members of type xs:string.</p><p>See: <a href="#err.inline.C0146">Overriding content types</a></p></dd><dt id="err.C0147"><code class="errqname">err:XC0147</code></dt><dd><p>It is a dynamic error if the specified value is not a valid XPath regular expression.</p><p>See: <a href="#err.inline.C0147">Overriding content types</a>, <a href="#err.inline.C0147.1">p:text-replace</a>, <a href="#err.inline.C0147.2">p:unarchive</a></p></dd><dt id="err.C0150"><code class="errqname">err:XC0150</code></dt><dd><p>It is a dynamic error if evaluating the XPath expression in option test on a context document results in an error.</p><p>See: <a href="#err.inline.C0150">p:split-sequence</a></p></dd><dt id="err.C0201"><code class="errqname">err:XC0201</code></dt><dd><p>It is a dynamic error if the p:uncompress step cannot perform the requested content-type cast.</p><p>See: <a href="#err.inline.C0201">p:uncompress</a></p></dd><dt id="err.C0202"><code class="errqname">err:XC0202</code></dt><dd><p>It is a dynamic error if the compression format cannot be understood, determined and/or processed.</p><p>See: <a href="#err.inline.C0202">p:compress</a>, <a href="#err.inline.C0202.1">p:uncompress</a></p></dd><dt id="err.C0203"><code class="errqname">err:XC0203</code></dt><dd><p>It is a dynamic error if the specified boundary is not valid (for example, if it begins with two hyphens “--”).</p><p>See: <a href="#err.inline.C0203">Construction of a multipart request</a></p></dd></dl></div></div></section><article id="conformance" class="appendix"><header class="appendix-titlepage"><h2><bdi class="secno">A. </bdi>Conformance<a aria-label="§" class="self-link" href="#conformance"></a></h2></header><div class="content"><p>Conformant processors <span class="rfc2119" id="conformance.2.1">must</span> implement all of the features described in this specification except those that are explicitly identified as optional.</p><p>Some aspects of processor behavior are not completely specified; those features are either <em class="glossterm"><a href="#dt-implementation-dependent">implementation-dependent</a></em> or <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</p><p><span id="dt-implementation-dependent" class="termdef">[Definition: An <em class="glossterm">implementation-dependent</em> feature is one where the implementation has discretion in how it is performed. Implementations are not required to document or explain how <em class="glossterm"><a href="#dt-implementation-dependent">implementation-dependent</a></em> features are performed.]</span></p><p><span id="dt-implementation-defined" class="termdef">[Definition: An <em class="glossterm">implementation-defined</em> feature is one where the implementation has discretion in how it is performed. Conformant implementations <span class="rfc2119" id="dt-implementation-defined.2">must</span> document how <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> features are performed.]</span></p><section id="implementation-defined" class="section"><div class="section-titlepage"><h2><bdi class="secno">A.1. </bdi>Implementation-defined features<a aria-label="§" class="self-link" href="#implementation-defined"></a></h2></div><div class="content"><p>The following features are implementation-defined:</p><ol class="features"><li>The list of formats supported by the p:archive step is implementation-defined. See <a href="#c.archive" title="p:archive">Section 2.3, “p:archive”</a>.</li><li>The list of archive formats that can be modified by p:archive is implementation-defined. See <a href="#c.archive" title="p:archive">Section 2.3, “p:archive”</a>.</li><li>The semantics of any additional attributes, elements and their values are implementation-defined. See <a href="#c.archive" title="p:archive">Section 2.3, “p:archive”</a>.</li><li>It is implementation-defined what other formats are supported. See <a href="#c.archive" title="p:archive">Section 2.3, “p:archive”</a>.</li><li class="delete_version" style="display: none;">The semantics of the keys and the allowed values for these keys are implementation-defined. See <a href="#c.archive" title="p:archive">Section 2.3, “p:archive”</a>.</li><li class="modify_version"><span class="deltaxml-old" style="background:#FF5555">The semantics of the keys and the allowed values for these keys are implementation-defined. See </span><a href="#c.archive" title="p:archive"><span class="deltaxml-old" style="background:#FF5555">Section 2.3, “p:archive”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li class="delete_version" style="display: none;">It is implementation-defined what other formats are supported. See <a href="#c.archive" title="p:archive">Section 2.3, “p:archive”</a>.</li><li class="modify_version"><span class="deltaxml-old" style="background:#FF5555">It is implementation-defined what other formats are supported. See </span><a href="#c.archive" title="p:archive"><span class="deltaxml-old" style="background:#FF5555">Section 2.3, “p:archive”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li>It is implementation-defined how the step determines the archive's format. See <a href="#c.archive" title="p:archive">Section 2.3, “p:archive”</a>.</li><li>The c:archive root element may contain additional implementation-defined attributes. See <a href="#cv.archive-manifest" title="The archive manifest">Section 2.3.1, “The archive manifest”</a>.</li><li>The default compression method is implementation-defined. See <a href="#cv.archive-manifest" title="The archive manifest">Section 2.3.1, “The archive manifest”</a>.</li><li>It is implementation-defined what other compression methods are supported. See <a href="#cv.archive-manifest" title="The archive manifest">Section 2.3.1, “The archive manifest”</a>.</li><li>The default compression <span class="deltaxml-old" style="background:#FF5555">method</span><span class="deltaxml-new" style="background:#90EE90">level</span> is implementation-defined. See <a href="#cv.archive-manifest" title="The archive manifest">Section 2.3.1, “The archive manifest”</a>.</li><li>It is implementation-defined what compression levels are supported. See <a href="#cv.archive-manifest" title="The archive manifest">Section 2.3.1, “The archive manifest”</a>.</li><li>The c:entry elements may contain additional implementation-defined attributes. See <a href="#cv.archive-manifest" title="The archive manifest">Section 2.3.1, “The archive manifest”</a>.</li><li>The p:archive step may support additional, implementation-defined commands for ZIP files. See <a href="#cv.archive-zips" title="Handling of ZIP archives">Section 2.3.2, “Handling of ZIP archives”</a>.</li><li>The actual parameter names supported by p:archive for a particular format are implementation-defined. See <a href="#cv.archive-zips" title="Handling of ZIP archives">Section 2.3.2, “Handling of ZIP archives”</a>.</li><li>It is implementation-defined what other formats are supported. See <a href="#c.archive-manifest" title="p:archive-manifest">Section 2.4, “p:archive-manifest”</a>.</li><li>It is implementation-defined how the step determines the archive's format. See <a href="#c.archive-manifest" title="p:archive-manifest">Section 2.4, “p:archive-manifest”</a>.</li><li>The semantics of the keys and the allowed values for these keys are implementation-defined. See <a href="#c.archive-manifest" title="p:archive-manifest">Section 2.4, “p:archive-manifest”</a>.</li><li>Additional information provided for entries in p:archive-manifest is implementation-defined. See <a href="#c.archive-manifest" title="p:archive-manifest">Section 2.4, “p:archive-manifest”</a>.</li><li>The semantics of the keys and the allowed values for these keys are implementation-defined. See <a href="#c.cast-content-type" title="p:cast-content-type">Section 2.5, “p:cast-content-type”</a>.</li><li><span class="deltaxml-old" style="background:#FF5555">The precise nature of the conversion from XML to JSON is implementation-defined</span><span class="deltaxml-new" style="background:#90EE90">It is implementation-defined if any additional conversions are supported</span>. See <a href="#casting-from-xml" title="Casting from an XML media type">Section 2.5.1, “Casting from an XML media type”</a>.</li><li>Casting from an XML media type to any other media type when the input document is not a c:data document is implementation-defined. See <a href="#casting-from-xml" title="Casting from an XML media type">Section 2.5.1, “Casting from an XML media type”</a>.</li><li>Casting from an HTML media type to a JSON media type is implementation-defined. See <a href="#casting-from-html" title="Casting from an HTML media type">Section 2.5.2, “Casting from an HTML media type”</a>.</li><li>Casting from an HTML media type to any other media type is implementation-defined. See <a href="#casting-from-html" title="Casting from an HTML media type">Section 2.5.2, “Casting from an HTML media type”</a>.</li><li>It is implementation-defined whether other result formats are supported. See <a href="#casting-from-json" title="Casting from a JSON media type">Section 2.5.3, “Casting from a JSON media type”</a>.</li><li>Casting from a JSON media type to an HTML media type is implementation-defined. See <a href="#casting-from-json" title="Casting from a JSON media type">Section 2.5.3, “Casting from a JSON media type”</a>.</li><li>Casting from a JSON media type to any other media type is implementation-defined. See <a href="#casting-from-json" title="Casting from a JSON media type">Section 2.5.3, “Casting from a JSON media type”</a>.</li><li>The precise way in which text documents are parsed into the XPath data model is implementation-defined. See <a href="#casting-from-text" title="Casting from a text media type">Section 2.5.4, “Casting from a text media type”</a>.</li><li>Casting from a text media type to any other media type is implementation-defined. See <a href="#casting-from-text" title="Casting from a text media type">Section 2.5.4, “Casting from a text media type”</a>.</li><li>Casting from any other media type to a HTML media type, a JSON media type or a text document is implementation-defined. See <a href="#casting-from-other" title="Casting from any other media type">Section 2.5.5, “Casting from any other media type”</a>.</li><li>Casting from any other media type to any other media type is implementation-defined. See <a href="#casting-from-other" title="Casting from any other media type">Section 2.5.5, “Casting from any other media type”</a>.</li><li>Implementations of p:compare must support the deep-equal method; other supported methods are implementation-defined. See <a href="#c.compare" title="p:compare">Section 2.6, “p:compare”</a>.</li><li>If fail-if-not-equal is false, and the documents differ, an implementation-defined summary of the differences between the two documents may appear on the differences port. See <a href="#c.compare" title="p:compare">Section 2.6, “p:compare”</a>.</li><li>It is implementation-defined what other formats are supported. See <a href="#c.compress" title="p:compress">Section 2.7, “p:compress”</a>.</li><li>The semantics of the keys and the allowed values for these keys are implementation-defined. See <a href="#c.compress" title="p:compress">Section 2.7, “p:compress”</a>.</li><li class="add_version" style="display: none;">An implementation may support encodings other than base64, but these encodings and their names are implementation-defined. See <a href="#c.encode" title="p:encode">Section 2.10, “p:encode”</a>.</li><li class="modify_version"><span class="deltaxml-new" style="background:#90EE90">An implementation may support encodings other than base64, but these encodings and their names are implementation-defined. See </span><a href="#c.encode" title="p:encode"><span class="deltaxml-new" style="background:#90EE90">Section 2.10, “p:encode”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li>It is implementation-defined what other algorithms are supported. See <a href="#c.hash" title="p:hash">Section <span class="deltaxml-old" style="background:#FF5555">2.12</span><span class="deltaxml-new" style="background:#90EE90">2.13</span>, “p:hash”</a>.</li><li class="add_version" style="display: none;">It is implementation-defined which HTTP methods are supported. See <a href="#c.http-request" title="p:http-request">Section 2.14, “p:http-request”</a>.</li><li class="modify_version"><span class="deltaxml-new" style="background:#90EE90">It is implementation-defined which HTTP methods are supported. See </span><a href="#c.http-request" title="p:http-request"><span class="deltaxml-new" style="background:#90EE90">Section 2.14, “p:http-request”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li class="add_version" style="display: none;">The interpretation of values associated with the “auth-method” key other than “Basic” or “Digest” is implementation-defined. See <a href="#c.http-request" title="p:http-request">Section 2.14, “p:http-request”</a>.</li><li class="modify_version"><span class="deltaxml-new" style="background:#90EE90">The interpretation of values associated with the “auth-method” key other than “Basic” or “Digest” is implementation-defined. See </span><a href="#c.http-request" title="p:http-request"><span class="deltaxml-new" style="background:#90EE90">Section 2.14, “p:http-request”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li class="add_version" style="display: none;">Other key value pairs in map “auth” are implementation-defined. See <a href="#c.http-request" title="p:http-request">Section 2.14, “p:http-request”</a>.</li><li class="modify_version"><span class="deltaxml-new" style="background:#90EE90">Other key value pairs in map “auth” are implementation-defined. See </span><a href="#c.http-request" title="p:http-request"><span class="deltaxml-new" style="background:#90EE90">Section 2.14, “p:http-request”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li class="add_version" style="display: none;">It is implementation-defined which other key/value pairs in the parameters option are supported. See <a href="#c.http-request" title="p:http-request">Section 2.14, “p:http-request”</a>.</li><li class="modify_version"><span class="deltaxml-new" style="background:#90EE90">It is implementation-defined which other key/value pairs in the parameters option are supported. See </span><a href="#c.http-request" title="p:http-request"><span class="deltaxml-new" style="background:#90EE90">Section 2.14, “p:http-request”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li class="add_version" style="display: none;">The default behaviour in case of a redirect response is implementation-defined. See <a href="#c.http-request" title="p:http-request">Section 2.14, “p:http-request”</a>.</li><li class="modify_version"><span class="deltaxml-new" style="background:#90EE90">The default behaviour in case of a redirect response is implementation-defined. See </span><a href="#c.http-request" title="p:http-request"><span class="deltaxml-new" style="background:#90EE90">Section 2.14, “p:http-request”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li>It is implementation-defined how a multipart boundary is constructed. See <a href="#c.http-multipart-request" title="Construction of a multipart request">Section <span class="deltaxml-old" style="background:#FF5555">2.13.1</span><span class="deltaxml-new" style="background:#90EE90">2.14.1</span>, “Construction of a multipart request”</a>.</li><li class="add_version" style="display: none;">It is implementation-defined if p:json-join is able to process document types not mentioned yet, i.e. types of binary documents. See <a href="#c.json-join" title="p:json-join">Section 2.17, “p:json-join”</a>.</li><li class="modify_version"><span class="deltaxml-new" style="background:#90EE90">It is implementation-defined if p:json-join is able to process document types not mentioned yet, i.e. types of binary documents. See </span><a href="#c.json-join" title="p:json-join"><span class="deltaxml-new" style="background:#90EE90">Section 2.17, “p:json-join”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li class="add_version" style="display: none;">It is implementation-defined if p:json-merge is able to process document types not mentioned yet, i.e. types of binary documents. See <a href="#c.json-merge" title="p:json-merge">Section 2.18, “p:json-merge”</a>.</li><li class="modify_version"><span class="deltaxml-new" style="background:#90EE90">It is implementation-defined if p:json-merge is able to process document types not mentioned yet, i.e. types of binary documents. See </span><a href="#c.json-merge" title="p:json-merge"><span class="deltaxml-new" style="background:#90EE90">Section 2.18, “p:json-merge”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li>In the absence of an explicit type, the content type is implementation-defined See <a href="#c.load" title="p:load">Section <span class="deltaxml-old" style="background:#FF5555">2.19</span><span class="deltaxml-new" style="background:#90EE90">2.20</span>, “p:load”</a>.</li><li>Additional XML parameters are implementation-defined. See <a href="#c.load.xml" title="Loading XML data">Section <span class="deltaxml-old" style="background:#FF5555">2.19.1</span><span class="deltaxml-new" style="background:#90EE90">2.20.1</span>, “Loading XML data”</a>.</li><li>Text parameters are implementation-defined. See <a href="#c.load.text" title="Loading text data">Section <span class="deltaxml-old" style="background:#FF5555">2.19.2</span><span class="deltaxml-new" style="background:#90EE90">2.20.2</span>, “Loading text data”</a>.</li><li class="add_version" style="display: none;">Support for other charsets is implementation-defined. See <a href="#text-bom" title="Byte order marks">Section 2.20.2.1, “Byte order marks”</a>.</li><li class="modify_version"><span class="deltaxml-new" style="background:#90EE90">Support for other charsets is implementation-defined. See </span><a href="#text-bom" title="Byte order marks"><span class="deltaxml-new" style="background:#90EE90">Section 2.20.2.1, “Byte order marks”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li>Additional JSON parameters are implementation-defined. See <a href="#c.load.json" title="Loading JSON data">Section <span class="deltaxml-old" style="background:#FF5555">2.19.3</span><span class="deltaxml-new" style="background:#90EE90">2.20.3</span>, “Loading JSON data”</a>.</li><li>The precise way in which HTML documents are parsed into the XPath data model is implementation-defined. See <a href="#c.load.html" title="Loading HTML data">Section <span class="deltaxml-old" style="background:#FF5555">2.19.4</span><span class="deltaxml-new" style="background:#90EE90">2.20.4</span>, “Loading HTML data”</a>.</li><li>HTML parameters are implementation-defined. See <a href="#c.load.html" title="Loading HTML data">Section <span class="deltaxml-old" style="background:#FF5555">2.19.4</span><span class="deltaxml-new" style="background:#90EE90">2.20.4</span>, “Loading HTML data”</a>.</li><li>How a processor interprets other media types is implementation-defined. See <a href="#c.load.binary" title="Loading binary data">Section <span class="deltaxml-old" style="background:#FF5555">2.19.5</span><span class="deltaxml-new" style="background:#90EE90">2.20.5</span>, “Loading binary data”</a>.</li><li>Parameters for other media types are implementation-defined. See <a href="#c.load.binary" title="Loading binary data">Section <span class="deltaxml-old" style="background:#FF5555">2.19.5</span><span class="deltaxml-new" style="background:#90EE90">2.20.5</span>, “Loading binary data”</a>.</li><li class="add_version" style="display: none;">Precisely what “made available” means is implementation-defined. See <a href="#c.message" title="p:message">Section 2.22, “p:message”</a>.</li><li class="modify_version"><span class="deltaxml-new" style="background:#90EE90">Precisely what “made available” means is implementation-defined. See </span><a href="#c.message" title="p:message"><span class="deltaxml-new" style="background:#90EE90">Section 2.22, “p:message”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li>Support for other collations is implementation-defined. See <a href="#c.text-sort" title="p:text-sort">Section <span class="deltaxml-old" style="background:#FF5555">2.36</span><span class="deltaxml-new" style="background:#90EE90">2.39</span>, “p:text-sort”</a>.</li><li>It is implementation-defined what other formats are supported. See <a href="#c.unarchive" title="p:unarchive">Section <span class="deltaxml-old" style="background:#FF5555">2.38</span><span class="deltaxml-new" style="background:#90EE90">2.41</span>, “p:unarchive”</a>.</li><li>It is implementation-defined how the step determines the archive's format. See <a href="#c.unarchive" title="p:unarchive">Section <span class="deltaxml-old" style="background:#FF5555">2.38</span><span class="deltaxml-new" style="background:#90EE90">2.41</span>, “p:unarchive”</a>.</li><li>The semantics of the keys and the allowed values for these keys are implementation-defined. See <a href="#c.unarchive" title="p:unarchive">Section <span class="deltaxml-old" style="background:#FF5555">2.38</span><span class="deltaxml-new" style="background:#90EE90">2.41</span>, “p:unarchive”</a>.</li><li>It is implementation-defined what other formats are supported. See <a href="#c.uncompress" title="p:uncompress">Section <span class="deltaxml-old" style="background:#FF5555">2.39</span><span class="deltaxml-new" style="background:#90EE90">2.42</span>, “p:uncompress”</a>.</li><li>It is implementation-defined how the step determines the compression format. See <a href="#c.uncompress" title="p:uncompress">Section <span class="deltaxml-old" style="background:#FF5555">2.39</span><span class="deltaxml-new" style="background:#90EE90">2.42</span>, “p:uncompress”</a>.</li><li>The semantics of the keys and the allowed values for these keys are implementation-defined. See <a href="#c.uncompress" title="p:uncompress">Section <span class="deltaxml-old" style="background:#FF5555">2.39</span><span class="deltaxml-new" style="background:#90EE90">2.42</span>, “p:uncompress”</a>.</li><li>If the version is not specified, the version of UUID computed is implementation-defined. See <a href="#c.uuid" title="p:uuid">Section <span class="deltaxml-old" style="background:#FF5555">2.41</span><span class="deltaxml-new" style="background:#90EE90">2.44</span>, “p:uuid”</a>.</li><li class="delete_version" style="display: none;">Support for other versions of UUID, and the mechanism by which the necessary inputs are made available for computing other versions, is implementation-defined. See <a href="#c.uuid" title="p:uuid">Section 2.41, “p:uuid”</a>.</li><li class="modify_version"><span class="deltaxml-old" style="background:#FF5555">Support for other versions of UUID, and the mechanism by which the necessary inputs are made available for computing other versions, is implementation-defined. See </span><a href="#c.uuid" title="p:uuid"><span class="deltaxml-old" style="background:#FF5555">Section 2.41, “p:uuid”</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></li><li class="add_version" style="display: none;">Support for other versions of UUID is implementation-defined. See <a href="#c.uuid" title="p:uuid">Section 2.44, “p:uuid”</a>.</li><li class="modify_version"><span class="deltaxml-new" style="background:#90EE90">Support for other versions of UUID is implementation-defined. See </span><a href="#c.uuid" title="p:uuid"><span class="deltaxml-new" style="background:#90EE90">Section 2.44, “p:uuid”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li class="add_version" style="display: none;">The names and values of parameters to p:uuid are implementation-defined. See <a href="#c.uuid" title="p:uuid">Section 2.44, “p:uuid”</a>.</li><li class="modify_version"><span class="deltaxml-new" style="background:#90EE90">The names and values of parameters to p:uuid are implementation-defined. See </span><a href="#c.uuid" title="p:uuid"><span class="deltaxml-new" style="background:#90EE90">Section 2.44, “p:uuid”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li>Support for XQueryX is implementation-defined. See <a href="#c.xquery" title="p:xquery">Section <span class="deltaxml-old" style="background:#FF5555">2.47</span><span class="deltaxml-new" style="background:#90EE90">2.50</span>, “p:xquery”</a>.</li><li class="add_version" style="display: none;">It is implementation-defined which XQuery version(s) is/are supported. See <a href="#c.xquery" title="p:xquery">Section 2.50, “p:xquery”</a>.</li><li class="modify_version"><span class="deltaxml-new" style="background:#90EE90">It is implementation-defined which XQuery version(s) is/are supported. See </span><a href="#c.xquery" title="p:xquery"><span class="deltaxml-new" style="background:#90EE90">Section 2.50, “p:xquery”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li>The point in time returned as the current dateTime is implementation-defined. See <a href="#c.xquery" title="p:xquery">Section <span class="deltaxml-old" style="background:#FF5555">2.47</span><span class="deltaxml-new" style="background:#90EE90">2.50</span>, “p:xquery”</a>.</li><li>The implicit timezone is implementation-defined. See <a href="#c.xquery" title="p:xquery">Section <span class="deltaxml-old" style="background:#FF5555">2.47</span><span class="deltaxml-new" style="background:#90EE90">2.50</span>, “p:xquery”</a>.</li><li>It is implementation-defined which XSLT version(s) is/are supported. See <a href="#c.xslt" title="p:xslt">Section <span class="deltaxml-old" style="background:#FF5555">2.48</span><span class="deltaxml-new" style="background:#90EE90">2.51</span>, “p:xslt”</a>.</li><li>Whether static parameters are supported is implementation-defined and depends on the XSLT version (which must be 3.0 or higher). See <a href="#c.xslt" title="p:xslt">Section <span class="deltaxml-old" style="background:#FF5555">2.48</span><span class="deltaxml-new" style="background:#90EE90">2.51</span>, “p:xslt”</a>.</li></ol></div></section><section id="implementation-dependent" class="section"><div class="section-titlepage"><h2><bdi class="secno">A.2. </bdi>Implementation-dependent features<a aria-label="§" class="self-link" href="#implementation-dependent"></a></h2></div><div class="content"><p>The following features are implementation-dependent:</p><ol class="features"><li class="add_version" style="display: none;">If the format imposes constraints on the archive comment (character set or length, for example), how the processor coerces the attribute value to satisfy those constraints is implementation-dependent. See <a href="#cv.archive-manifest" title="The archive manifest">Section 2.3.1, “The archive manifest”</a>.</li><li class="modify_version"><span class="deltaxml-new" style="background:#90EE90">If the format imposes constraints on the archive comment (character set or length, for example), how the processor coerces the attribute value to satisfy those constraints is implementation-dependent. See </span><a href="#cv.archive-manifest" title="The archive manifest"><span class="deltaxml-new" style="background:#90EE90">Section 2.3.1, “The archive manifest”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li>If the IRI reference specified by the base-uri option on p:make-absolute-uris is absent and the input document has no base URI, the results are implementation-dependent. See <a href="#c.make-absolute-uris" title="p:make-absolute-uris">Section <span class="deltaxml-old" style="background:#FF5555">2.20</span><span class="deltaxml-new" style="background:#90EE90">2.21</span>, “p:make-absolute-uris”</a>.</li><li>The set of available documents (those that may be retrieved with a URI) is implementation-dependent. See <a href="#c.xquery" title="p:xquery">Section <span class="deltaxml-old" style="background:#FF5555">2.47</span><span class="deltaxml-new" style="background:#90EE90">2.50</span>, “p:xquery”</a>.</li><li>The set of available collections is implementation-dependent. See <a href="#c.xquery" title="p:xquery">Section <span class="deltaxml-old" style="background:#FF5555">2.47</span><span class="deltaxml-new" style="background:#90EE90">2.50</span>, “p:xquery”</a>.</li><li>How XSLT message termination errors are reported to the XProc processor is implementation-dependent. See <a href="#c.xslt" title="p:xslt">Section <span class="deltaxml-old" style="background:#FF5555">2.48</span><span class="deltaxml-new" style="background:#90EE90">2.51</span>, “p:xslt”</a>.</li><li class="add_version" style="display: none;">The order in which result documents appear on the secondary port is implementation-dependent. See <a href="#c.xslt" title="p:xslt">Section 2.51, “p:xslt”</a>.</li><li class="modify_version"><span class="deltaxml-new" style="background:#90EE90">The order in which result documents appear on the secondary port is implementation-dependent. See </span><a href="#c.xslt" title="p:xslt"><span class="deltaxml-new" style="background:#90EE90">Section 2.51, “p:xslt”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li><li class="add_version" style="display: none;">The order in which result documents appear on the secondary port is implementation-dependent. See <a href="#c.xslt" title="p:xslt">Section 2.51, “p:xslt”</a>.</li><li class="modify_version"><span class="deltaxml-new" style="background:#90EE90">The order in which result documents appear on the secondary port is implementation-dependent. See </span><a href="#c.xslt" title="p:xslt"><span class="deltaxml-new" style="background:#90EE90">Section 2.51, “p:xslt”</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></li></ol></div></section></div></article><article id="references" class="appendix"><header class="appendix-titlepage"><h2><bdi class="secno">B. </bdi>References<a aria-label="§" class="self-link" href="#references"></a></h2></header><div class="content"><section id="normative-references" class="section"><div class="section-titlepage"><h2><bdi class="secno">B.1. </bdi>Normative References<a aria-label="§" class="self-link" href="#normative-references"></a></h2></div><div class="content"><div id="normative-references.2" class="bibliolist"><div id="xproc30" class="bibliomixed"><p><span class="deltaxml-old" style="background:#FF5555">[</span><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">XProc 3.0</span></span><span class="deltaxml-old" style="background:#FF5555">] </span><a href="https://spec.xproc.org/3.0/xproc/"><span class="citetitle"><cite><span class="deltaxml-old" style="background:#FF5555">XProc 3.0: An XML Pipeline Language</span></cite></span></a><span class="deltaxml-old" style="background:#FF5555">. Norman Walsh, Achim Berndzen, Gerrit Imsieke and Erik Siegel, editors. </span></p></div><div id="xproc31" class="bibliomixed"><p><span class="deltaxml-new" style="background:#90EE90">[</span><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">XProc 3.1</span></span><span class="deltaxml-new" style="background:#90EE90">] </span><a href="https://spec.xproc.org/lastcall-2024-08/head/xproc/"><span class="citetitle"><cite><span class="deltaxml-new" style="background:#90EE90">XProc 3.1: An XML Pipeline Language</span></cite></span></a><span class="deltaxml-new" style="background:#90EE90">. Norman Walsh, Achim Berndzen, Gerrit Imsieke and Erik Siegel, editors. </span></p></div><div id="xmlschema-2" class="bibliomixed"><p>[<span class="abbrev">W3C XML Schema: Part 2</span>] <a href="https://www.w3.org/TR/xmlschema-2/"><span class="citetitle"><cite>XML Schema Part 2: Datatypes Second Edition</cite></span></a>. Paul V. Biron and Ashok Malhotra, editors. World Wide Web Consortium, 28 October 2004. </p></div><div id="xpath31" class="bibliomixed"><p>[<span class="abbrev">XPath 3.1</span>] <a href="https://www.w3.org/TR/xpath31/"><span class="citetitle"><cite>XML Path Language (XPath) 3.1</cite></span></a>. Jonathan Robie, Michael Dyck, Josh Spiegel, editors. W3C Recommendation. 21 March 2017.</p></div><div id="xpath31-functions" class="bibliomixed"><p>[<span class="abbrev">XPath and XQuery Functions and Operators 3.1</span>] <a href="https://www.w3.org/TR/xpath-functions-31/"><span class="citetitle"><cite>XPath and XQuery Functions and Operators 3.1</cite></span></a>. Michael Kay, editor. W3C Recommendation. 21 March 2017</p></div><div id="xslt30" class="bibliomixed"><p>[<span class="abbrev">XSLT 3.0</span>] <a href="https://www.w3.org/TR/xslt-30/"><span class="citetitle"><cite>XSL Transformations (XSLT) Version 3.0</cite></span></a>. Michael Kay, editor. W3C Recommendation. 8 June 2017.</p></div><div id="xinclude" class="bibliomixed"><p>[<span class="abbrev">XInclude</span>] <a href="https://www.w3.org/TR/xinclude/"><span class="citetitle"><cite>XML Inclusions (XInclude) Version 1.0 (Second Edition)</cite></span></a>. Jonathan Marsh, David Orchard, and Daniel Veillard, editors. W3C Recommendation. 15 November 2006.</p></div><div id="rfc1321" class="bibliomixed"><p>[<span class="abbrev">RFC 1321</span>] <a href="https://doi.org/10.17487/RFC1321"><span class="citetitle"><cite>RFC 1321: The MD5 Message-Digest Algorithm</cite></span></a>. R. Rivest. Network Working Group, IETF, April 1992.</p></div><div id="rfc1521" class="bibliomixed"><p>[<span class="abbrev">RFC 1521</span>] <a href="https://doi.org/10.17487/RFC1521"><span class="citetitle"><cite>RFC 1521: MIME (Multipurpose Internet Mail Extensions) Part One: Mechanisms for Specifying and Describing the Format of Internet Message Bodies</cite></span></a>. N. Borenstein. Network Working Group, IETF, September 1993.</p></div><div id="rfc2046" class="bibliomixed"><p>[<span class="abbrev">RFC 2046</span>] <a href="https://doi.org/10.17487/RFC2046"><span class="citetitle"><cite>RFC 2046: Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types</cite></span></a>. N. Freed, N. Borenstein, editors. Internet Engineering Task Force. November, 1996.</p></div><div id="rfc2119" class="bibliomixed"><p>[<span class="abbrev">RFC 2119</span>] <a href="https://doi.org/10.17487/RFC2119"><span class="citetitle"><cite>Key words for use in RFCs to Indicate Requirement Levels</cite></span></a>. S. Bradner. Network Working Group, IETF, Mar 1997. </p></div><div id="rfc2617" class="bibliomixed"><p>[<span class="abbrev">RFC 2617</span>] <a href="https://doi.org/10.17487/RFC2617"><span class="citetitle"><cite>RFC 2617: HTTP Authentication: Basic and Digest Access Authentication</cite></span></a>. J. Franks, P. Hallam-Baker, J. Hostetler, S. Lawrence, P. Leach, A. Luotonen, L. Stewart. June, 1999 .</p></div><div id="rfc3986" class="bibliomixed"><p>[<span class="abbrev">RFC 3986</span>] <a href="https://doi.org/10.17487/RFC3986"><span class="citetitle"><cite>RFC 3986: Uniform Resource Identifier (URI): General Syntax</cite></span></a>. T. Berners-Lee, R. Fielding, and L. Masinter, editors. Internet Engineering Task Force. January, 2005.</p></div><div id="rfc4646" class="bibliomixed"><p><span class="deltaxml-new" style="background:#90EE90">[</span><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">RFC 4646</span></span><span class="deltaxml-new" style="background:#90EE90">] </span><a href="http://www.ietf.org/rfc/rfc4646.txt"><span class="citetitle"><cite><span class="deltaxml-new" style="background:#90EE90">RFC 4646: Tags for Identifying Languages</span></cite></span></a><span class="deltaxml-new" style="background:#90EE90">. A. Phillips and M. Davis, editors. Internet Engineering Task Force. September, 2006.</span></p></div><div id="rfc4647" class="bibliomixed"><p><span class="deltaxml-new" style="background:#90EE90">[</span><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">RFC 4647</span></span><span class="deltaxml-new" style="background:#90EE90">] </span><a href="http://www.ietf.org/rfc/rfc4647.txt"><span class="citetitle"><cite><span class="deltaxml-new" style="background:#90EE90">RFC 4647: Matching of Language Tags</span></cite></span></a><span class="deltaxml-new" style="background:#90EE90">. A. Phillips and M. Davis, editors. Internet Engineering Task Force. September, 2006.</span></p></div><div id="rfc8259" class="bibliomixed"><p><span class="deltaxml-new" style="background:#90EE90">[</span><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">RFC 8259</span></span><span class="deltaxml-new" style="background:#90EE90">] </span><a href="https://doi.org/10.17487/RFC8259"><span class="citetitle"><cite><span class="deltaxml-new" style="background:#90EE90">RFC 8259: The JavaScript Object Notation (JSON) Data Interchange Format.</span></cite></span></a><span class="deltaxml-new" style="background:#90EE90"> T. Bray, editor. Internet Engineering Task Force. December, 2017.</span></p></div><div id="bcp47" class="bibliomixed"><p><span class="deltaxml-new" style="background:#90EE90">[</span><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">BCP 47</span></span><span class="deltaxml-new" style="background:#90EE90">] Best Current Practices 47. Concatenation of RFC 4646: Tags for Identifying Languages, ed. A. Phillips and M. Davis, September 2006, http://www.ietf.org/rfc/bcp/bcp47.txt, and RFC 4647: Matching of Language Tags, ed. A Phillips and M. Davis, September 2006, http://www.rfc-editor.org/rfc/bcp/bcp47.txt. Internet Engineering Task Force (IETF). September, 2006.</span></p></div><div id="bib.uuid" class="bibliomixed"><p>[<span class="abbrev">UUID</span>] <a href="https://www.itu.int/ITU-T/studygroups/com17/oid.html"><span class="citetitle"><cite>ITU X.667: Information technology - Open Systems Interconnection - Procedures for the operation of OSI Registration Authorities: Generation and registration of Universally Unique Identifiers (UUIDs) and their use as ASN.1 Object Identifier components</cite></span></a>. 2004.</p></div><div id="bib.sha" class="bibliomixed"><p>[<span class="abbrev">SHA1</span>] <a href="https://csrc.nist.gov/publications/detail/fips/180/1/archive/1995-04-17"><span class="citetitle"><cite>Federal Information Processing Standards Publication 180-1: Secure Hash Standard</cite></span></a>. 1995.</p></div><div id="bib.crc" class="bibliomixed"><p>[<span class="abbrev">CRC32</span>] “32-Bit Cyclic Redundancy Codes for Internet Applications”, <span class="citetitle"><cite>The International Conference on Dependable Systems and Networks: 459</cite></span>. <span class="biblioid">10.1109/DSN.2002.1028931</span>. P. Koopman. June 2002. </p></div><div id="zip" class="bibliomixed"><p>[<span class="abbrev">ZIP</span>] <a href="https://pkware.cachefly.net/webdocs/casestudies/APPNOTE.TXT"><span class="citetitle"><cite>.ZIP File Format Specification</cite></span></a>.</p></div><div id="gzip" class="bibliomixed"><p>[<span class="abbrev">GZIP</span>] <a href="https://tools.ietf.org/html/rfc1952"><span class="citetitle"><cite>GZIP file format specification version 4.3</cite></span></a>.</p></div></div></div></section></div></article><article id="glossary" class="appendix"><header class="appendix-titlepage"><h2><bdi class="secno">C. </bdi>Glossary<a aria-label="§" class="self-link" href="#glossary"></a></h2></header><div class="content"><div class="glosslist"><dl><dt id="glossary.2.1" class="glossentry"><em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em></dt><dd class="glossdef"><p>A <em class="firstterm">dynamic error</em> is one which occurs while a pipeline is being evaluated.</p></dd><dt id="glossary.2.2" class="glossentry"><em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em></dt><dd class="glossdef"><p>An <em class="firstterm">implementation-defined</em> feature is one where the implementation has discretion in how it is performed. Conformant implementations <span class="rfc2119" id="glossary.2.2.2.1.2">must</span> document how <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> features are performed.</p></dd><dt id="glossary.2.3" class="glossentry"><em class="glossterm"><a href="#dt-implementation-dependent">implementation-dependent</a></em></dt><dd class="glossdef"><p>An <em class="firstterm">implementation-dependent</em> feature is one where the implementation has discretion in how it is performed. Implementations are not required to document or explain how <em class="glossterm"><a href="#dt-implementation-dependent">implementation-dependent</a></em> features are performed.</p></dd></dl></div></div></article><article id="ancillary-files" class="appendix"><header class="appendix-titlepage"><h2><bdi class="secno">D. </bdi>Ancillary files<a aria-label="§" class="self-link" href="#ancillary-files"></a></h2></header><div class="content"><p>This specification includes by reference a number of ancillary files.</p><div class="variablelist"><dl><dt><span class="term"><a href="steps.xpl">steps.xpl</a></span></dt><dd><p>An XProc step library for the declared steps. </p></dd></dl></div></div></article><article id="credits" class="appendix"><header class="appendix-titlepage"><h2><bdi class="secno">E. </bdi>Credits<a aria-label="§" class="self-link" href="#credits"></a></h2></header><div class="content"><p>This document is derived from <a href="https://www.w3.org/TR/2010/REC-xproc-20100511/">XProc: An XML Pipeline Language</a> published by the W3C. It was developed by the <em class="citetitle">XML Processing Model Working Group</em> and edited by Norman Walsh, Alex Miłowski, and Henry Thompson.</p><p>The editors of this specification extend their gratitude to everyone who contributed to this document and all of the versions that came before it.</p></div></article><article id="changelog" class="appendix"><header class="appendix-titlepage"><h2><bdi class="secno">F. </bdi>Change Log<a aria-label="§" class="self-link" href="#changelog"></a></h2></header><div class="content"><p><span class="deltaxml-old" style="background:#FF5555">This appendix catalogs non-editorial changes made after the August 2020 “</span><a href="https://spec.xproc.org/lastcall-2020-08/head/steps/"><span class="deltaxml-old" style="background:#FF5555">last call</span></a><span class="deltaxml-old" style="background:#FF5555">” draft:</span></p><div class="orderedlist"><ol style="list-style: decimal;"><li><p><span class="deltaxml-old" style="background:#FF5555">Clarified that the manifest has precedence in the </span><a href="#c.archive"><code class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:archive</span></code></a><span class="deltaxml-old" style="background:#FF5555"> step. (issue </span><a href="https://github.com/xproc/3.0-steps/issues/462"><span class="deltaxml-old" style="background:#FF5555">462</span></a><span class="deltaxml-old" style="background:#FF5555">.) </span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">Changed the type of several options from </span><code class="tag-element"><span class="deltaxml-old" style="background:#FF5555">xs:token</span></code><span class="deltaxml-old" style="background:#FF5555"> to </span><code class="tag-element"><span class="deltaxml-old" style="background:#FF5555">xs:string</span></code><span class="deltaxml-old" style="background:#FF5555"> (issue </span><a href="https://github.com/xproc/3.0-steps/issues/490"><span class="deltaxml-old" style="background:#FF5555">490</span></a><span class="deltaxml-old" style="background:#FF5555">.) </span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">Changed the type of the </span><code class="option"><span class="deltaxml-old" style="background:#FF5555">parameters</span></code><span class="deltaxml-old" style="background:#FF5555"> option from </span><code class="code"><span class="deltaxml-old" style="background:#FF5555">map(xs:string,xs:untypedAtomic+)</span></code><span class="deltaxml-old" style="background:#FF5555"> to </span><code class="code"><span class="deltaxml-old" style="background:#FF5555">map(xs:string,xs:anyAtomicType+)</span></code><span class="deltaxml-old" style="background:#FF5555">. (issue </span><a href="https://github.com/xproc/3.0-steps/issues/491"><span class="deltaxml-old" style="background:#FF5555">491</span></a><span class="deltaxml-old" style="background:#FF5555">.) </span></p></li></ol></div><p><span class="deltaxml-old" style="background:#FF5555">These are the non-editorial changes made after the February 2020 “</span><a href="https://spec.xproc.org/lastcall-2020-02/head/steps/"><span class="deltaxml-old" style="background:#FF5555">last call</span></a><span class="deltaxml-old" style="background:#FF5555">” draft:</span></p><div class="orderedlist"><ol style="list-style: decimal;"><li><p><span class="deltaxml-old" style="background:#FF5555">For </span><a href="#c.cast-content-type"><code class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:cast-content-type</span></code></a><span class="deltaxml-old" style="background:#FF5555"> the expected result type for casting a </span><code class="literal"><span class="deltaxml-old" style="background:#FF5555">c:param-set</span></code><span class="deltaxml-old" style="background:#FF5555"> document to “</span><code class="literal"><span class="deltaxml-old" style="background:#FF5555">application/json</span></code><span class="deltaxml-old" style="background:#FF5555">” was specified as </span><code class="literal"><span class="deltaxml-old" style="background:#FF5555">map(xs:QName, xs:string)</span></code><span class="deltaxml-old" style="background:#FF5555">. (2020-03-15)</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">In </span><a href="#c.http-request"><code class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:http-request</span></code></a><span class="deltaxml-old" style="background:#FF5555">, instead of using all document properties (with a few explicit exceptions) as headers, only document properties in the </span><code class="code"><span class="deltaxml-old" style="background:#FF5555">http://www.w3.org/ns/xproc-http</span></code><span class="deltaxml-old" style="background:#FF5555"> namespace will be used. (2020-03-18)</span></p></li><li><p><a href="#cv.archive-manifest" title="The archive manifest"><span class="deltaxml-old" style="background:#FF5555">Section 2.3.1, “The archive manifest”</span></a><span class="deltaxml-old" style="background:#FF5555">: An attribute </span><code class="code"><span class="deltaxml-old" style="background:#FF5555">c:entry/@content-type</span></code><span class="deltaxml-old" style="background:#FF5555"> was added to the archive manifest, to be filled by the </span><a href="#c.archive-manifest"><code class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:archive-manifest</span></code></a><span class="deltaxml-old" style="background:#FF5555"> step. (2020-03-20)</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">A </span><code class="option"><span class="deltaxml-old" style="background:#FF5555">static-parameters</span></code><span class="deltaxml-old" style="background:#FF5555"> was added to </span><a href="#c.xslt"><code class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:xslt</span></code></a><span class="deltaxml-old" style="background:#FF5555">. (2020-03-23)</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">The </span><code class="option"><span class="deltaxml-old" style="background:#FF5555">override-content-types</span></code><span class="deltaxml-old" style="background:#FF5555"> option was added to </span><a href="#c.archive-manifest"><code class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:archive-manifest</span></code></a><span class="deltaxml-old" style="background:#FF5555"> and </span><a href="#c.unarchive"><code class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:unarchive</span></code></a><span class="deltaxml-old" style="background:#FF5555">. (2020-03-30)</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">Clarified the regular expression matching for </span><a href="#c.text-replace"><code class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:text-replace</span></code></a><span class="deltaxml-old" style="background:#FF5555"> and </span><a href="#c.unarchive"><code class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:unarchive</span></code></a><span class="deltaxml-old" style="background:#FF5555">. Added an error code for invalid regular expressions. (2020-04-02)</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">Replaced errors XC0070 and XC0130 with XD0079. (2020-04-09)</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">Changed signature of </span><a href="#c.split-sequence"><code class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:split-sequence</span></code></a><span class="deltaxml-old" style="background:#FF5555"> so that any document can appear one port source. (2020-05-22)</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">Change the behavior of the </span><code class="option"><span class="deltaxml-old" style="background:#FF5555">global-context-item</span></code><span class="deltaxml-old" style="background:#FF5555"> option of </span><a href="#c.xslt"><code class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:xslt</span></code></a><span class="deltaxml-old" style="background:#FF5555">. (2020-06-10)</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">Clarified which steps may produce PSVI annotations. (2020-06-09)</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">Clarified the behaviour in </span><a href="#c.archive"><code class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:archive</span></code></a><span class="deltaxml-old" style="background:#FF5555">: A missing resource referenced by c:archive/c:entry/@href is only an error for command = 'create'. (2020-06-11)</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">Option </span><code class="option"><span class="deltaxml-old" style="background:#FF5555">populate-default-collection</span></code><span class="deltaxml-old" style="background:#FF5555"> is added to the signature of </span><a href="#c.xslt"><code class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:xslt</span></code></a><span class="deltaxml-old" style="background:#FF5555">. (2020-06-20)</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">Clarified how the default </span><code class="literal"><span class="deltaxml-old" style="background:#FF5555">content-type</span></code><span class="deltaxml-old" style="background:#FF5555"> header of </span><a href="#c.http-request"><code class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:http-request</span></code></a><span class="deltaxml-old" style="background:#FF5555"> is constructed if a single document appears on </span><code class="port"><span class="deltaxml-old" style="background:#FF5555">source</span></code><span class="deltaxml-old" style="background:#FF5555"> port. (2020-06-20)</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">Added error (XD0079) to </span><a href="#c.http-request"><code class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:http-request</span></code></a><span class="deltaxml-old" style="background:#FF5555"> and </span><a href="#c.load"><code class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:load</span></code></a><span class="deltaxml-old" style="background:#FF5555"> for invalid content-types. (2020-06-23)</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">Changed signature of the </span><code class="port"><span class="deltaxml-old" style="background:#FF5555">result</span></code><span class="deltaxml-old" style="background:#FF5555"> port of </span><a href="#c.load"><code class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:load</span></code></a><span class="deltaxml-old" style="background:#FF5555"> to </span><code class="literal"><span class="deltaxml-old" style="background:#FF5555">sequence="false"</span></code><span class="deltaxml-old" style="background:#FF5555"> and adapted the prose accordingly. (2020-06-24)</span></p></li></ol></div><p><span class="deltaxml-new" style="background:#90EE90">This appendix summarizes the changes introduced in XProc 3.1.</span></p><section id="changelog.3" class="section"><div class="section-titlepage"><h2><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">F.1. </span></bdi><span class="deltaxml-new" style="background:#90EE90">Backwards incompatible changes</span><a aria-label="§" class="self-link" href="#"></a></h2></div><div class="content"><div class="itemizedlist"><ul><li><p><span class="deltaxml-new" style="background:#90EE90">Resolved </span><a href="https://github.com/xproc/3.0-steps/issues/659"><span class="deltaxml-new" style="background:#90EE90">issue 659</span></a><span class="deltaxml-new" style="background:#90EE90"> by updating the </span><a href="#c.cast-content-type"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:cast-content-type</span></code></a><span class="deltaxml-new" style="background:#90EE90"> step. Added the </span><a href="#c.encode"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:encode</span></code></a><span class="deltaxml-new" style="background:#90EE90"> step. This is a small backwards incompatibility because it means that you cannot use </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:cast-content</span></code><span class="deltaxml-new" style="background:#90EE90"> type to change the content type of a </span><a href="#c.data"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:data</span></code></a><span class="deltaxml-new" style="background:#90EE90"> element from </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">application/xml</span></code><span class="deltaxml-new" style="background:#90EE90"> to, for example, </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">application/foo+xml</span></code><span class="deltaxml-new" style="background:#90EE90">. That seems like an unlikely scenario because XProc controls the semantics of </span><a href="#c.data"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:data</span></code></a><span class="deltaxml-new" style="background:#90EE90"> documents.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Resolved </span><a href="https://github.com/xproc/3.0-steps/issues/642"><span class="deltaxml-new" style="background:#90EE90">issue 642</span></a><span class="deltaxml-new" style="background:#90EE90"> by removing the distinction between “has no value” and “the empty sequence” in the </span><a href="#c.xslt"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:xslt</span></code></a><span class="deltaxml-new" style="background:#90EE90"> step. This means it is no longer possible to specify a single document on the </span><a id="port.inline.source-93"></a><code class="port"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90"> port and have the global context item be the empty sequence.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Resolved </span><a href="https://github.com/xproc/3.0-steps/issues/549"><span class="deltaxml-new" style="background:#90EE90">issue 549</span></a><span class="deltaxml-new" style="background:#90EE90"> by making the </span><a id="port.inline.result-54"></a><code class="port"><span class="deltaxml-new" style="background:#90EE90">result</span></code><span class="deltaxml-new" style="background:#90EE90"> output port on </span><a href="#c.compare"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:compare</span></code></a><span class="deltaxml-new" style="background:#90EE90"> primary.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Although this change is technically backwards incompatible, all known implementations of XProc 3.0 implemented it this way, so it is unlikely that it will have any significant consequences.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Resolved </span><a href="https://github.com/xproc/3.0-steps/issues/548"><span class="deltaxml-new" style="background:#90EE90">issue 548</span></a><span class="deltaxml-new" style="background:#90EE90"> by correcting the Unicode collation URI in </span><a href="#c.text-sort"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:text-sort</span></code></a><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The value given in XProc 3.0 is incorrect and must be updated. To mitigate any consequences of this correction, implementations are encouraged to continue to recognize the incorrect value, perhaps with a warning. </span></p></li></ul></div><section id="changelog.3.3" class="section"><div class="section-titlepage"><h3><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">F.1.1. </span></bdi><span class="deltaxml-new" style="background:#90EE90">Substantive changes</span><a aria-label="§" class="self-link" href="#"></a></h3></div><div class="content"><div class="itemizedlist"><ul><li><p><span class="deltaxml-new" style="background:#90EE90">Resolved </span><a href="https://github.com/xproc/3.0-steps/issues/668"><span class="deltaxml-new" style="background:#90EE90">issue 668</span></a><span class="deltaxml-new" style="background:#90EE90"> by clarifying explicitly how the Unicode byte order mark is processed. </span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Resolved </span><a href="https://github.com/xproc/3.0-steps/issues/656"><span class="deltaxml-new" style="background:#90EE90">issue 656</span></a><span class="deltaxml-new" style="background:#90EE90"> by adding an </span><a id="opt.inline.attributes-15"></a><code class="option"><span class="deltaxml-new" style="background:#90EE90">attributes</span></code><span class="deltaxml-new" style="background:#90EE90"> option to </span><a href="#c.pack"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:pack</span></code></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#c.wrap"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:wrap</span></code></a><span class="deltaxml-new" style="background:#90EE90">, and </span><a href="#c.wrap-sequence"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:wrap-sequence</span></code></a><span class="deltaxml-new" style="background:#90EE90">. </span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Resolved </span><a href="https://github.com/xproc/3.0-steps/issues/647"><span class="deltaxml-new" style="background:#90EE90">issue 647</span></a><span class="deltaxml-new" style="background:#90EE90"> by allowing the value of the </span><a id="opt.inline.duration-2"></a><code class="option"><span class="deltaxml-new" style="background:#90EE90">duration</span></code><span class="deltaxml-new" style="background:#90EE90"> option on </span><a href="#c.sleep"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:sleep</span></code></a><span class="deltaxml-new" style="background:#90EE90"> to be either a number of seconds or an </span><code class="type"><span class="deltaxml-new" style="background:#90EE90">xs:dayTimeDuration</span></code><span class="deltaxml-new" style="background:#90EE90">. </span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Resolved </span><a href="https://github.com/xproc/3.0-steps/issues/644"><span class="deltaxml-new" style="background:#90EE90">issue 644</span></a><span class="deltaxml-new" style="background:#90EE90"> by allowing </span><a href="#c.filter"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:filter</span></code></a><span class="deltaxml-new" style="background:#90EE90"> to return non-node results. </span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Resolved </span><a href="https://github.com/xproc/3.0-steps/issues/635"><span class="deltaxml-new" style="background:#90EE90">issue 635</span></a><span class="deltaxml-new" style="background:#90EE90"> by clarifying how a text document can be produced from the </span><a href="#c.filter"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:filter</span></code></a><span class="deltaxml-new" style="background:#90EE90"> step. </span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Resolved </span><a href="https://github.com/xproc/3.0-steps/issues/623"><span class="deltaxml-new" style="background:#90EE90">issue 623</span></a><span class="deltaxml-new" style="background:#90EE90"> by clarifying the semantics of </span><a href="#c.error"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:error</span></code></a><span class="deltaxml-new" style="background:#90EE90">. </span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Added a description of </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:parameter-set</span></code><span class="deltaxml-new" style="background:#90EE90"> documents.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Added the </span><a href="#c.message"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:message</span></code></a><span class="deltaxml-new" style="background:#90EE90"> step. </span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Several error codes were added.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Resolved </span><a href="https://github.com/xproc/3.0-steps/issues/587"><span class="deltaxml-new" style="background:#90EE90">issue 587</span></a><span class="deltaxml-new" style="background:#90EE90"> by adding a </span><a id="opt.inline.parameters-31"></a><code class="option"><span class="deltaxml-new" style="background:#90EE90">parameters</span></code><span class="deltaxml-new" style="background:#90EE90"> option to the </span><a href="#c.uuid"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:uuid</span></code></a><span class="deltaxml-new" style="background:#90EE90"> step. </span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Resolved </span><a href="https://github.com/xproc/3.0-steps/issues/574"><span class="deltaxml-new" style="background:#90EE90">issue 574</span></a><span class="deltaxml-new" style="background:#90EE90"> by adding a </span><a href="#c.sleep"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:sleep</span></code></a><span class="deltaxml-new" style="background:#90EE90"> step. </span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Resolved </span><a href="https://github.com/xproc/Vnext/issues/39"><span class="deltaxml-new" style="background:#90EE90">V.next issue 29</span></a><span class="deltaxml-new" style="background:#90EE90"> by allowing the text documents on the </span><a id="port.inline.insertion-4"></a><code class="port"><span class="deltaxml-new" style="background:#90EE90">insertion</span></code><span class="deltaxml-new" style="background:#90EE90"> port of the </span><a href="#c.insert"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:insert</span></code></a><span class="deltaxml-new" style="background:#90EE90"> step. Resolved </span><a href="https://github.com/xproc/3.0-steps/issues/583"><span class="deltaxml-new" style="background:#90EE90">issue 583</span></a><span class="deltaxml-new" style="background:#90EE90"> by allowing text documents on the </span><a id="port.inline.result-55"></a><code class="port"><span class="deltaxml-new" style="background:#90EE90">result</span></code><span class="deltaxml-new" style="background:#90EE90"> port. </span></p></li></ul></div></div></section><section id="changelog.3.4" class="section"><div class="section-titlepage"><h3><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">F.1.2. </span></bdi><span class="deltaxml-new" style="background:#90EE90">Editorial changes</span><a aria-label="§" class="self-link" href="#"></a></h3></div><div class="content"><div class="itemizedlist"><ul><li><p><span class="deltaxml-new" style="background:#90EE90">Added a normative reference to RFC 8259 for the JSON format.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Clarified the relationship between the </span><a href="#c.text-sort"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:text-sort</span></code></a><span class="deltaxml-new" style="background:#90EE90"> step and the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">xsl:sort</span></code><span class="deltaxml-new" style="background:#90EE90"> element.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Made editorial improvements to the description of </span><a href="#c.http-request"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:http-request</span></code></a><span class="deltaxml-new" style="background:#90EE90"> and </span><a href="#c.load"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:load</span></code></a><span class="deltaxml-new" style="background:#90EE90">. </span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Resolved </span><a href="https://github.com/xproc/3.0-steps/issues/678"><span class="deltaxml-new" style="background:#90EE90">issue 678</span></a><span class="deltaxml-new" style="background:#90EE90"> by describing the </span><code class="tag-attribute"><span class="deltaxml-new" style="background:#90EE90">comment</span></code><span class="deltaxml-new" style="background:#90EE90"> attribue in the archive manifest. </span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Resolved </span><a href="https://github.com/xproc/3.0-steps/issues/639"><span class="deltaxml-new" style="background:#90EE90">issue 639</span></a><span class="deltaxml-new" style="background:#90EE90"> by removing the superflous mention of PSVI annotations in the </span><a href="#c.split-sequence"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:split-sequence</span></code></a><span class="deltaxml-new" style="background:#90EE90"> step. </span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Resolved </span><a href="https://github.com/xproc/3.0-steps/issues/580"><span class="deltaxml-new" style="background:#90EE90">issue 580</span></a><span class="deltaxml-new" style="background:#90EE90"> by clarifying what standards apply to the </span><a id="opt.inline.lang-3"></a><code class="option"><span class="deltaxml-new" style="background:#90EE90">lang</span></code><span class="deltaxml-new" style="background:#90EE90"> option on </span><a href="#c.text-sort"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:text-sort</span></code></a><span class="deltaxml-new" style="background:#90EE90">. </span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Resolved </span><a href="https://github.com/xproc/3.0-steps/issues/566"><span class="deltaxml-new" style="background:#90EE90">issue 566</span></a><span class="deltaxml-new" style="background:#90EE90"> by clarifying when a text document is produced from the </span><a href="#c.hash"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:hash</span></code></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#c.replace"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:replace</span></code></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#c.string-replace"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:string-replace</span></code></a><span class="deltaxml-new" style="background:#90EE90">, and </span><a href="#c.uuid"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:uuid</span></code></a><span class="deltaxml-new" style="background:#90EE90"> steps.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Resolved </span><a href="https://github.com/xproc/3.0-steps/issues/563"><span class="deltaxml-new" style="background:#90EE90">issue 563</span></a><span class="deltaxml-new" style="background:#90EE90"> by clarifying that </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">p:set-attributes</span></code><span class="deltaxml-new" style="background:#90EE90"> cannot add “namespace attributes” to an element. </span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Resolved </span><a href="https://github.com/xproc/3.0-steps/issues/562"><span class="deltaxml-new" style="background:#90EE90">issue 562</span></a><span class="deltaxml-new" style="background:#90EE90"> by </span><a href="#archive-parameters"><span class="deltaxml-new" style="background:#90EE90">clarifying</span></a><span class="deltaxml-new" style="background:#90EE90"> that some parameters are defined for ZIP archives.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Resolved </span><a href="https://github.com/xproc/3.0-steps/issues/561"><span class="deltaxml-new" style="background:#90EE90">issue 561</span></a><span class="deltaxml-new" style="background:#90EE90"> and </span><a href="https://github.com/xproc/3.0-steps/issues/564"><span class="deltaxml-new" style="background:#90EE90">issue 564</span></a><span class="deltaxml-new" style="background:#90EE90"> by clarifying in the </span><a href="#c.archive"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:archive</span></code></a><span class="deltaxml-new" style="background:#90EE90"> and </span><a href="#c.archive-manifest"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:archive-manifest</span></code></a><span class="deltaxml-new" style="background:#90EE90"> steps that </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">err:XC0081</span></code><span class="deltaxml-new" style="background:#90EE90"> should be raised when the archive format specified differs from the format of the actual archive and </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">err:XC0085</span></code><span class="deltaxml-new" style="background:#90EE90"> should be raised when the format of the archive cannot be determined or processed.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Resolved </span><a href="https://github.com/xproc/3.0-steps/issues/560"><span class="deltaxml-new" style="background:#90EE90">issue 560</span></a><span class="deltaxml-new" style="background:#90EE90"> by removing </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">err:XC0118</span></code><span class="deltaxml-new" style="background:#90EE90"> in the </span><a href="#c.archive"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:archive</span></code></a><span class="deltaxml-new" style="background:#90EE90"> step. (It was a duplicate of </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">err:XC0100</span></code><span class="deltaxml-new" style="background:#90EE90">.)</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Resolved </span><a href="https://github.com/xproc/3.0-steps/issues/559"><span class="deltaxml-new" style="background:#90EE90">issue 559</span></a><span class="deltaxml-new" style="background:#90EE90"> by clarifying that </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">err:XC0023</span></code><span class="deltaxml-new" style="background:#90EE90"> in </span><a href="#c.rename"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:rename</span></code></a><span class="deltaxml-new" style="background:#90EE90"> applies if the match pattern matches more than attribute on a single element.</span></p></li></ul></div></div></section></div></section></div></article></article><script src="js/prism.js"></script><script src="js/fixup.js"></script><script src="/js/scroll.js"></script></body></html>