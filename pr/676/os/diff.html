<?xml version="1.0" encoding="UTF-8"?><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><!--Generated by the DeltaXML.com xhtml-outfilter.xsl--><!--Using XSL Processor: Saxonica--><title>XProc 3.1: operating system steps</title><meta charset="utf-8" /><meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport" /><link class="removeOnSave" crossorigin="anonymous" href="https://www.w3.org" rel="preconnect" /><link as="script" class="removeOnSave" href="js/fixup.js" rel="preload" /><link as="style" class="removeOnSave" href="css/base.css" rel="preload" /><link as="image" class="removeOnSave" href="https://www.w3.org/StyleSheets/TR/2016/logos/W3C" rel="preload" /><link rel="stylesheet" href="css/cg-draft.css" /><link rel="stylesheet" href="css/respec.css" /><link rel="alternate" title="XML" href="specification.xml" /><meta name="generator" content="DocBook XSL 2.0 Stylesheets V2.5.0" /><meta name="description" content="Abstract This specification describes the p:os-exec and&#xA;p:os-info steps&#xA;for&#xA;XProc 3.1: An XML Pipeline Language." /><link href="css/default.css" rel="stylesheet" type="text/css" /><link href="css/db-prism.css" rel="stylesheet" type="text/css" /><link rel="stylesheet" type="text/css" href="css/base.css" /><link rel="stylesheet" type="text/css" href="css/xproc.css" /><link rel="stylesheet" type="text/css" href="css/print.css" media="print" /><script type="text/javascript" src="js/dbmodnizr.js"></script><style type="text/css">
          body { margin-top: 50px }
          a.button { background: #DDD; border: 2px outset black; padding: 2px; margin: 2px; font-family: sans-serif; font-size: small;}
          a.button:hover { cursor:pointer; }
          a.button:active { border-style: inset; }
        </style><link rel="stylesheet" href="/css/autodiff.css" /></head><body class="h-entry informative toc-sidebar"><div style="position:fixed; clear:both; top:0px" id="_autodiff_buttons"><p><a class="button" onclick="view('old')">
              View Old
            </a><a class="button" onclick="view('new')">
              View New
            </a><a class="button" onclick="view('both')">
              View Both
            </a><a class="button" onclick="view('only')">
              View Only
            </a><a class="button" onclick="scroll_to('prev')">
              Previous
            </a><a class="button" onclick="scroll_to('next')">
              Next
            </a><span id="__autodiff__"></span></p></div><div class="head" id="spec.head"><a class="logo" href="https://www.w3.org/"><img alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C" width="72" /></a><h1 id="title" class="title p-name">XProc 3.1: operating system steps</h1><h2>Draft Community Group Report <time class="dt-published" datetime="2025-02-28"><span class="deltaxml-old" style="background:#FF5555">28 February 2025</span></time><time class="dt-published" datetime="2025-03-01"><span class="deltaxml-new" style="background:#90EE90">1 March 2025</span></time></h2><div class="editors-draft">Editor's Draft at <time class="dt-timestamp" datetime="20250301T08:08:45Z"><span class="deltaxml-old" style="background:#FF5555">11:58</span><span class="deltaxml-new" style="background:#90EE90">08:08</span> UTC</time> (<a href="https://github.com/xproc//commit/4aa9274fba5a2f6146463b6340ba046420cdb571">build <span class="deltaxml-old" style="background:#FF5555">89</span><span class="deltaxml-new" style="background:#90EE90">130</span></a>)</div><dl><dt>Latest editor’s draft:</dt><dd><a href="https://spec.xproc.org/master/head/os/">https://spec.xproc.org/master/head/os/</a></dd><dt>Editors:</dt><dd><span class="personname">Norman Walsh</span></dd><dd><span class="personname">Achim Berndzen</span></dd><dd><span class="personname">Gerrit Imsieke</span></dd><dd><span class="personname">Erik Siegel</span></dd><dt>Participate:</dt><dd><a href="http://github.com/xproc/3.0-steps">GitHub xproc/3.0-steps</a></dd><dd><a href="http://github.com/xproc/3.0-steps/issues">Report an issue</a></dd><dt>Changes:</dt><dd><a href="diff.html">Diff against current “status quo” draft</a></dd><dd><a href="http://github.com/xproc//commits/">Commits for this specification</a></dd></dl><p>This document is also available in these non-normative formats: <a href="specification.xml">XML</a> and HTML with automatic change markup courtesy of <a href="http://www.deltaxml.com/">DeltaXML</a>.</p><p class="copyright"><a href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © <span class="years">2018, 2019, 2020</span> the Contributors to the <cite>XProc 3.1: operating system steps</cite> specification, published by the <a href="https://www.w3.org/community/xproc-next/">XProc Next Community Group</a> under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a>. A human-readable <a href="https://www.w3.org/community/about/agreements/cla-deed/">summary</a> is available.</p><hr title="Separator for header" /><section id="abstract" class="introductory"><h2>Abstract</h2><p>This specification describes the <code class="code">p:os-exec</code> and <code class="code">p:os-info</code> steps for <em class="citetitle">XProc 3.1: An XML Pipeline Language</em>.</p></section><section id="sotd" class="introductory"><h2>Status of this Document</h2><p><strong>This document is an editor's draft that has no official standing.</strong></p><p>This specification was published by the <a href="https://www.w3.org/community/xproc-next/">XProc Next Community Group</a>. It is not a W3C Standard nor is it on the W3C Standards Track. Please note that under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a> there is a limited opt-out and other conditions apply. Learn more about <a href="https://www.w3.org/community/">W3C Community and Business Groups</a>. </p><p>If you wish to make comments regarding this document, please send them to <a href="mailto:xproc-dev@w3.org">xproc-dev@w3.org</a>. (<a href="mailto:xproc-dev-request@w3.org?subject=subscribe">subscribe</a>, <a href="https://lists.w3.org/Archives/Public/xproc-dev/">archives</a>). </p><div class="note editorial admonition"><h3>Note</h3><div class="admonition-body"><p>This draft is the “editor’s working draft” and may continue to evolve. </p></div></div></section></div><div class="lists-of-titles"><nav id="toc"><h2 id="TableOfContents">Table of Contents</h2><ol class="toc"><li class="tocline"><a class="tocxref" href="#introduction"><bdi class="secno">1. </bdi>Introduction</a></li><li class="tocline"><a class="tocxref" href="#library"><bdi class="secno">2. </bdi>Step library</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#c.os-info"><bdi class="secno">2.1. </bdi>p:os-info</a></li><li class="tocline"><a class="tocxref" href="#c.os-exec"><bdi class="secno">2.2. </bdi>p:os-exec</a></li></ul></li><li class="tocline"><a class="tocxref" href="#errors"><bdi class="secno">3. </bdi>Step Errors</a></li><li class="tocline"><a class="tocxref" href="#conformance"><bdi class="secno">A. </bdi>Conformance</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#implementation-defined"><bdi class="secno">A.1. </bdi>Implementation-defined features</a></li><li class="tocline"><a class="tocxref" href="#implementation-dependent"><bdi class="secno">A.2. </bdi>Implementation-dependent features</a></li></ul></li><li class="tocline"><a class="tocxref" href="#references"><bdi class="secno">B. </bdi>References</a></li><li class="tocline"><a class="tocxref" href="#glossary"><bdi class="secno">C. </bdi>Glossary</a></li><li class="tocline"><a class="tocxref" href="#ancillary-files"><bdi class="secno">D. </bdi>Ancillary files</a></li></ol></nav></div><article class="specification"><section id="introduction" class="section"><div class="section-titlepage"><h2><bdi class="secno">1. </bdi>Introduction<a aria-label="§" class="self-link" href="#introduction"></a></h2></div><div class="content"><p>This specification describes the <code class="code">p:os-info</code> and <code class="code">p:os-exec</code> XProc steps. A machine-readable description of these steps may be found in <a href="steps.xpl">steps.xpl</a>. </p><p>Familarity with the general nature of [<a href="#xproc31"><span class="abbrev">XProc 3.1</span></a>] steps is assumed.</p></div></section><section id="library" class="section"><div class="section-titlepage"><h2><bdi class="secno">2. </bdi>Step library<a aria-label="§" class="self-link" href="#library"></a></h2></div><div class="content"><section id="c.os-info" class="section"><div class="section-titlepage"><h3><bdi class="secno">2.1. </bdi>p:os-info<a aria-label="§" class="self-link" href="#c.os-info"></a></h3></div><div class="content"><p>The <code class="code">p:os-info</code> step returns information about the operating system on which the processor is running.</p><div class="declare-step"><p>Summary</p><table class="tableaux"><thead><tr><th class="port">Output port</th><th class="check">Primary</th><th class="check">Sequence</th><th>Content types</th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.result-1">result</a></td><td class="check">✔ </td><td class="check"> </td><td>application/xml </td></tr></tbody></table><details><summary>Implementation details</summary><table class="tableaux"><thead><tr><th>Implementation</th><th>Description</th></tr></thead><tbody><tr><td><a href="#impl-1">Defined</a></td><td class="description">The exact set of properties returned is implementation-defined.</td></tr></tbody></table></details><details><summary>Declaration</summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code>&lt;p:declare-step</code><code class="attr type-attr">type</code><code>="</code><code class="value type-value">p:os-info</code><code>"</code><code>&gt;</code></span><br />     <span class="input"><code>&lt;p:output</code><code class="attr port-attr">port</code><code>="</code><code class="value port-value">result</code><code>"</code><code class="attr content-types-attr">content-types</code><code>="</code><code class="value content-types-value">application/xml</code><code>"</code><code class="attr primary-attr">primary</code><code>="</code><code class="value primary-value">true</code><code>"</code><code>/&gt;</code></span><br /><code>&lt;/p:declare-step&gt;</code></p></details></div><p>The step returns a <code class="tag-element">c:result</code> element with attributes describing properties of the system. It <span class="rfc2119" id="c.os-info.4.2">must</span> include the following properties. The attribute can be an empty string if they do not apply to the runtime environment. For example <code class="code">cwd</code> will be an empty string on systems which have no concept of a working directory the value of the attribute will be empty.</p><div class="variablelist"><dl><dt><span class="term"><code class="tag-attribute">file-separator</code></span></dt><dd><p>The file separator; usually <code class="code">"/"</code> on Unix, <code class="code">"\"</code> on Windows.</p></dd><dt><span class="term"><code class="tag-attribute">path-separator</code></span></dt><dd><p>The path separator; usually <code class="code">":"</code> on Unix, <code class="code">";"</code> on Windows.</p></dd><dt><span class="term"><code class="tag-attribute">os-architecture</code></span></dt><dd><p>The operating system architecture, for example <code class="code">"i386"</code>.</p></dd><dt><span class="term"><code class="tag-attribute">os-name</code></span></dt><dd><p>The name of the operating system, for example <code class="code">"Mac OS X"</code>.</p></dd><dt><span class="term"><code class="tag-attribute">os-version</code></span></dt><dd><p>The version of the operating system, for example <code class="code">"10.5.6"</code>.</p></dd><dt><span class="term"><code class="tag-attribute">cwd</code></span></dt><dd><p>The current working directory.</p></dd><dt><span class="term"><code class="tag-attribute">user-name</code></span></dt><dd><p>The login name of the effective user, for example <code class="code">"ndw"</code>.</p></dd><dt><span class="term"><code class="tag-attribute">user-home</code></span></dt><dd><p>The home directory of the effective user, for example <code class="code">"/home/ndw"</code>.</p></dd></dl></div><p>The <code class="tag-element">c:result</code> element can contain zero or more <code class="tag-element">c:environment</code> elements that identify the environment variables available. These elements have a mandatory <code class="code">name</code> and <code class="code">value</code> attribute, reflecting name and value of the environment variable. Implementations <span class="rfc2119" id="c.os-info.6.5">should</span> include all available operating system environment variables.</p><p><span id="impl-1">The exact set of properties returned is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span> Additional attributes <span class="rfc2119" id="c.os-info.7.2">must</span> be in a namespace.</p><section id="c.os-info.8" class="simplesect"><div class="section-titlepage"><h4>Document properties</h4></div><div class="content"><p>The resulting document has no properties apart from <code class="property">content-type</code>. In particular, it has no <code class="property">base-uri</code>.</p></div></section></div></section><section id="c.os-exec" class="section"><div class="section-titlepage"><h3><bdi class="secno">2.2. </bdi>p:os-exec<a aria-label="§" class="self-link" href="#c.os-exec"></a></h3></div><div class="content"><p>The <code class="tag-element">p:os-exec</code> step runs an external command passing the input that arrives on its <a id="port.inline.source-1"></a><code class="port">source</code> port as standard input, reading <a id="port.inline.result-1"></a><code class="port">result</code> from standard output, and <a id="port.inline.error-1"></a><code class="port">error</code> from standard error.</p><div class="declare-step"><p>Summary</p><table class="tableaux"><thead><tr><th class="port">Input port</th><th class="check">Primary</th><th class="check">Sequence</th><th>Content types</th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.source-2">source</a></td><td class="check">✔ </td><td class="check">✔ </td><td>any </td></tr></tbody></table><table class="tableaux"><thead><tr><th class="port">Output port</th><th class="check">Primary</th><th class="check">Sequence</th><th>Content types</th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.result-2">result</a></td><td class="check">✔ </td><td class="check">✔ </td><td>any </td></tr><tr><td><a href="#port.inline.error-2">error</a></td><td class="check"> </td><td class="check">✔ </td><td>any </td></tr><tr><td><a href="#port.inline.exit-status-1">exit-status</a></td><td class="check"> </td><td class="check"> </td><td>application/xml </td></tr></tbody></table><table class="tableaux"><thead><tr><th>Option name</th><th>Type</th><th>Default value</th><th>Required</th></tr></thead><tbody><tr><td class="required"><a href="#opt.inline.command-1">command</a></td><td>xs:string</td><td> </td><td>✔ </td></tr><tr><td><a href="#opt.inline.args-1">args</a></td><td>xs:string*</td><td>()</td><td> </td></tr><tr><td><a href="#opt.inline.cwd-1">cwd</a></td><td>xs:string?</td><td>()</td><td> </td></tr><tr><td><a href="#opt.inline.error-content-type-1">error-content-type</a></td><td>xs:string</td><td>'text/plain'</td><td> </td></tr><tr><td><a href="#opt.inline.failure-threshold-1">failure-threshold</a></td><td>xs:integer?</td><td>()</td><td> </td></tr><tr><td><a href="#opt.inline.path-separator-1">path-separator</a></td><td>xs:string?</td><td>()</td><td> </td></tr><tr><td><a href="#opt.inline.result-content-type-1">result-content-type</a></td><td>xs:string</td><td>'text/plain'</td><td> </td></tr><tr><td><a href="#opt.inline.serialization-1">serialization</a></td><td>map(xs:QName,item()*)?</td><td>()</td><td> </td></tr></tbody></table><details><summary>Errors</summary><table class="tableaux"><thead><tr><th>Error code</th><th>Description</th></tr></thead><tbody><tr><td class="errcode"><a href="#err.inline.C0032&#34;">err:XC0032</a></td><td class="description">It is a dynamic error if more than one document appears on the source port of the p:os-exec step.</td></tr><tr><td class="errcode"><a href="#err.inline.C0033&#34;">err:XC0033</a></td><td class="description">It is a dynamic error if the command cannot be run.</td></tr><tr><td class="errcode"><a href="#err.inline.C0034&#34;">err:XC0034</a></td><td class="description">It is a dynamic error if the current working directory cannot be changed to the value of the cwd option.</td></tr><tr><td class="errcode"><a href="#err.inline.C0063&#34;">err:XC0063</a></td><td class="description">It is a dynamic error if the path-separator option is specified and is not exactly one character long.</td></tr><tr><td class="errcode"><a href="#err.inline.C0064&#34;">err:XC0064</a></td><td class="description">It is a dynamic error if the exit code from the command is greater than the specified failure-threshold value.</td></tr></tbody></table></details><details><summary>Implementation details</summary><table class="tableaux"><thead><tr><th>Implementation</th><th>Description</th></tr></thead><tbody><tr><td><a href="#impl-2">Defined</a></td><td class="description">If cwd is not specified, the current working directory is implementation-defined.</td></tr><tr><td><a href="#impl-3">Dependent</a></td><td class="description">The specific exit status values returned by a process invoked with p:os-exec are implementation-dependent.</td></tr></tbody></table></details><details><summary>Declaration</summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code>&lt;p:declare-step</code><code class="attr type-attr">type</code><code>="</code><code class="value type-value">p:os-exec</code><code>"</code><code>&gt;</code></span><br />     <span class="input"><code>&lt;p:input</code><code class="attr port-attr">port</code><code>="</code><code class="value port-value">source</code><code>"</code><code class="attr sequence-attr">sequence</code><code>="</code><code class="value sequence-value">true</code><code>"</code><code class="attr content-types-attr">content-types</code><code>="</code><code class="value content-types-value">any</code><code>"</code><code>/&gt;</code></span><br />     <span class="input"><code>&lt;p:output</code><code class="attr port-attr">port</code><code>="</code><code class="value port-value">result</code><code>"</code><code class="attr primary-attr">primary</code><code>="</code><code class="value primary-value">true</code><code>"</code><code class="attr sequence-attr">sequence</code><code>="</code><code class="value sequence-value">true</code><code>"</code><code class="attr content-types-attr">content-types</code><code>="</code><code class="value content-types-value">any</code><code>"</code><code>/&gt;</code></span><br />     <span class="input"><code>&lt;p:output</code><code class="attr port-attr">port</code><code>="</code><code class="value port-value">error</code><code>"</code><code class="attr sequence-attr">sequence</code><code>="</code><code class="value sequence-value">true</code><code>"</code><code class="attr content-types-attr">content-types</code><code>="</code><code class="value content-types-value">any</code><code>"</code><code>/&gt;</code></span><br />     <span class="input"><code>&lt;p:output</code><code class="attr port-attr">port</code><code>="</code><code class="value port-value">exit-status</code><code>"</code><code class="attr content-types-attr">content-types</code><code>="</code><code class="value content-types-value">application/xml</code><code>"</code><code>/&gt;</code></span><br />     <span class="opt-req"><code>&lt;p:option</code><code class="attr name-attr">name</code><code>="</code><code class="value name-value">command</code><code>"</code><code class="attr required-attr">required</code><code>="</code><code class="value required-value">true</code><code>"</code><code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:string</code><code>"</code><code>/&gt;</code><code>     </code></span><br />     <span class="opt-opt"><code>&lt;p:option</code><code class="attr name-attr">name</code><code>="</code><code class="value name-value">args</code><code>"</code><code class="attr select-attr">select</code><code>="</code><code class="value select-value">()</code><code>"</code><code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:string*</code><code>"</code><code>/&gt;</code><code>           </code></span><br />     <span class="opt-opt"><code>&lt;p:option</code><code class="attr name-attr">name</code><code>="</code><code class="value name-value">cwd</code><code>"</code><code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:string?</code><code>"</code><code>/&gt;</code><code>                        </code></span><br />     <span class="opt-opt"><code>&lt;p:option</code><code class="attr name-attr">name</code><code>="</code><code class="value name-value">result-content-type</code><code>"</code><code class="attr select-attr">select</code><code>="</code><code class="value select-value">'text/plain'</code><code>"</code><code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:string</code><code>"</code><code>/&gt;</code><code></code></span><br />     <span class="opt-opt"><code>&lt;p:option</code><code class="attr name-attr">name</code><code>="</code><code class="value name-value">error-content-type</code><code>"</code><code class="attr select-attr">select</code><code>="</code><code class="value select-value">'text/plain'</code><code>"</code><code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:string</code><code>"</code><code>/&gt;</code><code></code></span><br />     <span class="opt-opt"><code>&lt;p:option</code><code class="attr name-attr">name</code><code>="</code><code class="value name-value">path-separator</code><code>"</code><code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:string?</code><code>"</code><code>/&gt;</code><code>             </code></span><br />     <span class="opt-opt"><code>&lt;p:option</code><code class="attr name-attr">name</code><code>="</code><code class="value name-value">failure-threshold</code><code>"</code><code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:integer?</code><code>"</code><code>/&gt;</code><code>         </code></span><br />     <span class="opt-opt"><code>&lt;p:option</code><code class="attr name-attr">name</code><code>="</code><code class="value name-value">serialization</code><code>"</code><code class="attr as-attr">as</code><code>="</code><code class="value as-value">map(xs:QName,item()*)?</code><code>"</code><code>/&gt;</code><code>  </code></span><br /><code>&lt;/p:declare-step&gt;</code></p></details></div><p>The <code class="tag-element">p:os-exec</code> step executes the command passed on <a id="opt.inline.command-1"></a><code class="option">command</code> with the arguments passed on <a id="opt.inline.args-1"></a><code class="option">args</code>. The processor does not interpolate the values of the <a id="opt.inline.command-2"></a><code class="option">command</code> or <a id="opt.inline.args-2"></a><code class="option">args</code> (for example, expanding references to environment variables). <a id="err.inline.C0033&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.C0033"><code class="errqname">err:XC0033</code></a>) if the command cannot be run. </p><p>If the <a id="opt.inline.cwd-1"></a><code class="option">cwd</code> option is specified, it identifies the directory that will be the current working directory when execution begins. To resolve variations in the syntax of directory specifications (“<code class="literal">/tmp</code>” vs. “<code class="literal">C:\tmp</code>” vs “<code class="literal">file:///c:/tmp</code>”, for example), the value will be normalized with the <code class="function">p:urify</code> function. <a id="err.inline.C0034&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.C0034"><code class="errqname">err:XC0034</code></a>) if the current working directory cannot be changed to the value of the <a id="opt.inline.cwd-2"></a><code class="option">cwd</code> option. <span id="impl-2">If <a id="opt.inline.cwd-3"></a><code class="option">cwd</code> is not specified, the current working directory is <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span></p><p>If the <a id="opt.inline.path-separator-1"></a><code class="option">path-separator</code> option is specified, every occurrence of the character identified as the <a id="opt.inline.path-separator-2"></a><code class="option">path-separator</code> character that occurs in the <a id="opt.inline.command-3"></a><code class="option">command</code>, <a id="opt.inline.args-3"></a><code class="option">args</code>, or <a id="opt.inline.cwd-4"></a><code class="option">cwd</code> will be replaced by the platform-specific path separator character. <a id="err.inline.C0063&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.C0063"><code class="errqname">err:XC0063</code></a>) if the <a id="opt.inline.path-separator-3"></a><code class="option">path-separator</code> option is specified and is not exactly one character long. </p><p>The <a id="port.inline.source-2"></a><code class="port">source</code> port is declared to accept a sequence so that it can be empty. If no document appears on the <a id="port.inline.source-3"></a><code class="port">source</code> port, then the command receives nothing on standard input. If a document does arrive on the <a id="port.inline.source-4"></a><code class="port">source</code> port, it will be passed to the command as its standard input. <a id="err.inline.C0032&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.C0032"><code class="errqname">err:XC0032</code></a>) if more than one document appears on the <a id="port.inline.source-5"></a><code class="port">source</code> port of the <code class="tag-element">p:os-exec</code> step. The <a id="opt.inline.serialization-1"></a><code class="option">serialization</code> option is used to control the serialization of the document before passing it to the standard input. If a document has a “<code class="literal">serialization</code>” document property, the effective value of the serialization options is the union of the two maps, where the entries in the “<code class="literal">serialization</code>” document property take precedence. Serialization is described in [<a href="#xproc31"><span class="abbrev">XProc 3.1</span></a>].</p><p>If there is content on standard output, it is read and processed as described in <code class="tag-element">p:load</code> with <a id="opt.inline.result-content-type-1"></a><code class="option">result-content-type</code> taken as value for <code class="tag-element">p:load</code>'s <a id="opt.inline.content-type-1"></a><code class="option">content-type</code> option. The created document is returned on <a id="port.inline.result-2"></a><code class="port">result</code>. Otherwise <a id="port.inline.result-3"></a><code class="port">result</code> will be empty.</p><p>If there is content on standard error, it is read and processed as described in <code class="tag-element">p:load</code> with <a id="opt.inline.error-content-type-1"></a><code class="option">error-content-type</code> taken as value for <code class="tag-element">p:load</code>'s <a id="opt.inline.content-type-2"></a><code class="option">content-type</code> option. The created document is returned on <a id="port.inline.error-2"></a><code class="port">error</code>. Otherwise <a id="port.inline.error-3"></a><code class="port">error</code> will be empty.</p><p>The <a id="port.inline.exit-status-1"></a><code class="port">exit-status</code> port always returns a single <code class="tag-element">c:result</code> element which contains the system exit status that the process returned. <span id="impl-3">The specific exit status values returned by a process invoked with <code class="tag-element">p:os-exec</code> are <em class="glossterm"><a href="#dt-implementation-dependent">implementation-dependent</a></em>.</span></p><p>If a <a id="opt.inline.failure-threshold-1"></a><code class="option">failure-threshold</code> value is supplied, and the exit status is greater than that threshold, then the <code class="tag-element">p:os-exec</code> step <span class="rfc2119" id="c.os-exec.11.3">must</span> fail. <a id="err.inline.C0064&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.C0064"><code class="errqname">err:XC0064</code></a>) if the exit code from the command is greater than the specified <a id="opt.inline.failure-threshold-2"></a><code class="option">failure-threshold</code> value. This failure, like any step failure, can be captured with a <code class="tag-element">p:try</code>.</p><section id="c.os-exec.12" class="simplesect"><div class="section-titlepage"><h4>Document properties</h4></div><div class="content"><p>No document properties are preserved.</p></div></section></div></section></div></section><section id="errors" class="section"><div class="section-titlepage"><h2><bdi class="secno">3. </bdi>Step Errors<a aria-label="§" class="self-link" href="#errors"></a></h2></div><div class="content"><p>These steps can raise <em class="glossterm"><a href="#dt-dynamic-error">dynamic errors</a></em>. </p><p><span id="dt-dynamic-error" class="termdef">[Definition: A <em class="glossterm">dynamic error</em> is one which occurs while a pipeline is being evaluated.]</span> Examples of dynamic errors include references to URIs that cannot be resolved, steps which fail, and pipelines that exhaust the capacity of an implementation (such as memory or disk space). For a more complete discussion of dynamic errors, see <cite><a href="../xproc/#dynamic-errors">Dynamic Errors</a></cite> in <cite><a href="../xproc/">XProc 3.0: An XML Pipeline Language</a></cite>. </p><p>If a step fails due to a dynamic error, failure propagates upwards until either a <code class="tag-element">p:try</code> is encountered or the entire pipeline fails. In other words, outside of a <code class="tag-element">p:try</code>, step failure causes the entire pipeline to fail.</p><p>The following errors can be raised by these steps:</p><div id="step-error-summary"><dl class="errs"><dt id="err.C0032"><code class="errqname">err:XC0032</code></dt><dd><p>It is a dynamic error if more than one document appears on the source port of the p:os-exec step.</p><p>See: <a href="#err.inline.C0032">p:os-exec</a></p></dd><dt id="err.C0033"><code class="errqname">err:XC0033</code></dt><dd><p>It is a dynamic error if the command cannot be run.</p><p>See: <a href="#err.inline.C0033">p:os-exec</a></p></dd><dt id="err.C0034"><code class="errqname">err:XC0034</code></dt><dd><p>It is a dynamic error if the current working directory cannot be changed to the value of the cwd option.</p><p>See: <a href="#err.inline.C0034">p:os-exec</a></p></dd><dt id="err.C0063"><code class="errqname">err:XC0063</code></dt><dd><p>It is a dynamic error if the path-separator option is specified and is not exactly one character long.</p><p>See: <a href="#err.inline.C0063">p:os-exec</a></p></dd><dt id="err.C0064"><code class="errqname">err:XC0064</code></dt><dd><p>It is a dynamic error if the exit code from the command is greater than the specified failure-threshold value.</p><p>See: <a href="#err.inline.C0064">p:os-exec</a></p></dd></dl></div></div></section><article id="conformance" class="appendix"><header class="appendix-titlepage"><h2><bdi class="secno">A. </bdi>Conformance<a aria-label="§" class="self-link" href="#conformance"></a></h2></header><div class="content"><p>Conformant processors <span class="rfc2119" id="conformance.2.1">must</span> implement all of the features described in this specification except those that are explicitly identified as optional.</p><p>Some aspects of processor behavior are not completely specified; those features are either <em class="glossterm"><a href="#dt-implementation-dependent">implementation-dependent</a></em> or <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</p><p><span id="dt-implementation-dependent" class="termdef">[Definition: An <em class="glossterm">implementation-dependent</em> feature is one where the implementation has discretion in how it is performed. Implementations are not required to document or explain how <em class="glossterm"><a href="#dt-implementation-dependent">implementation-dependent</a></em> features are performed.]</span></p><p><span id="dt-implementation-defined" class="termdef">[Definition: An <em class="glossterm">implementation-defined</em> feature is one where the implementation has discretion in how it is performed. Conformant implementations <span class="rfc2119" id="dt-implementation-defined.2">must</span> document how <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> features are performed.]</span></p><section id="implementation-defined" class="section"><div class="section-titlepage"><h2><bdi class="secno">A.1. </bdi>Implementation-defined features<a aria-label="§" class="self-link" href="#implementation-defined"></a></h2></div><div class="content"><p>The following features are implementation-defined:</p><ol class="features"><li>The exact set of properties returned is implementation-defined. See <a href="#c.os-info" title="p:os-info">Section 2.1, “p:os-info”</a>.</li><li>If cwd is not specified, the current working directory is implementation-defined. See <a href="#c.os-exec" title="p:os-exec">Section 2.2, “p:os-exec”</a>.</li></ol></div></section><section id="implementation-dependent" class="section"><div class="section-titlepage"><h2><bdi class="secno">A.2. </bdi>Implementation-dependent features<a aria-label="§" class="self-link" href="#implementation-dependent"></a></h2></div><div class="content"><p>The following features are implementation-dependent:</p><ol class="features"><li>The specific exit status values returned by a process invoked with p:os-exec are implementation-dependent. See <a href="#c.os-exec" title="p:os-exec">Section 2.2, “p:os-exec”</a>.</li></ol></div></section></div></article><article id="references" class="appendix"><header class="appendix-titlepage"><h2><bdi class="secno">B. </bdi>References<a aria-label="§" class="self-link" href="#references"></a></h2></header><div class="content"><div id="references.2" class="bibliolist"><div id="xproc31" class="bibliomixed"><p>[<span class="abbrev">XProc 3.1</span>] <a href="https://spec.xproc.org/lastcall-2024-08/head/xproc/"><span class="citetitle"><cite>XProc 3.1: An XML Pipeline Language</cite></span></a>. Norman Walsh, Achim Berndzen, Gerrit Imsieke and Erik Siegel, editors. </p></div></div></div></article><article id="glossary" class="appendix"><header class="appendix-titlepage"><h2><bdi class="secno">C. </bdi>Glossary<a aria-label="§" class="self-link" href="#glossary"></a></h2></header><div class="content"><div class="glosslist"><dl><dt id="glossary.2.1" class="glossentry"><em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em></dt><dd class="glossdef"><p>A <em class="firstterm">dynamic error</em> is one which occurs while a pipeline is being evaluated.</p></dd><dt id="glossary.2.2" class="glossentry"><em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em></dt><dd class="glossdef"><p>An <em class="firstterm">implementation-defined</em> feature is one where the implementation has discretion in how it is performed. Conformant implementations <span class="rfc2119" id="glossary.2.2.2.1.2">must</span> document how <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> features are performed.</p></dd><dt id="glossary.2.3" class="glossentry"><em class="glossterm"><a href="#dt-implementation-dependent">implementation-dependent</a></em></dt><dd class="glossdef"><p>An <em class="firstterm">implementation-dependent</em> feature is one where the implementation has discretion in how it is performed. Implementations are not required to document or explain how <em class="glossterm"><a href="#dt-implementation-dependent">implementation-dependent</a></em> features are performed.</p></dd></dl></div></div></article><article id="ancillary-files" class="appendix"><header class="appendix-titlepage"><h2><bdi class="secno">D. </bdi>Ancillary files<a aria-label="§" class="self-link" href="#ancillary-files"></a></h2></header><div class="content"><p>This specification includes by reference a number of ancillary files.</p><div class="variablelist"><dl><dt><span class="term"><a href="steps.xpl">steps.xpl</a></span></dt><dd><p>An XProc step library for the declared steps. </p></dd></dl></div></div></article></article><script src="js/prism.js"></script><script src="js/fixup.js"></script><script src="/js/scroll.js"></script></body></html>